(self.webpackChunkreservaHotel=self.webpackChunkreservaHotel||[]).push([[179],{23:($l,C1,R2)=>{"use strict";function S1(t){return"function"==typeof t}function Qe(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Us=Qe(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function p(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class Ye{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(S1(i))try{i()}catch(s){n=s instanceof Us?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{s1(s)}catch(d){n=n??[],d instanceof Us?n=[...n,...d.errors]:n.push(d)}}if(n)throw new Us(n)}}add(n){var e;if(n&&n!==this)if(this.closed)s1(n);else{if(n instanceof Ye){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&p(e,n)}remove(n){const{_finalizers:e}=this;e&&p(e,n),n instanceof Ye&&n._removeParent(this)}}Ye.EMPTY=(()=>{const t=new Ye;return t.closed=!0,t})();const nr=Ye.EMPTY;function $n(t){return t instanceof Ye||t&&"closed"in t&&S1(t.remove)&&S1(t.add)&&S1(t.unsubscribe)}function s1(t){S1(t)?t():t.unsubscribe()}const m1={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fi={setTimeout(t,n,...e){const{delegate:i}=fi;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=fi;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function $i(t){fi.setTimeout(()=>{const{onUnhandledError:n}=m1;if(!n)throw t;n(t)})}function qi(){}const Mo=Zn("C",void 0,void 0);function Zn(t,n,e){return{kind:t,value:n,error:e}}let Wi=null;function pt(t){if(m1.useDeprecatedSynchronousErrorHandling){const n=!Wi;if(n&&(Wi={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=Wi;if(Wi=null,e)throw i}}else t()}class Sr extends Ye{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,$n(n)&&n.add(this)):this.destination=f1}static create(n,e,i){return new qr(n,e,i)}next(n){this.isStopped?s2(function P2(t){return Zn("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?s2(function da(t){return Zn("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?s2(Mo,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const zo=Function.prototype.bind;function F1(t,n){return zo.call(t,n)}class ni{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){fa(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){fa(i)}else fa(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){fa(e)}}}class qr extends Sr{constructor(n,e,i){let r;if(super(),S1(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&m1.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&F1(n.next,s),error:n.error&&F1(n.error,s),complete:n.complete&&F1(n.complete,s)}):r=n}this.destination=new ni(r)}}function fa(t){m1.useDeprecatedSynchronousErrorHandling?function $1(t){m1.useDeprecatedSynchronousErrorHandling&&Wi&&(Wi.errorThrown=!0,Wi.error=t)}(t):$i(t)}function s2(t,n){const{onStoppedNotification:e}=m1;e&&fi.setTimeout(()=>e(t,n))}const f1={closed:!0,next:qi,error:function La(t){throw t},complete:qi},c2="function"==typeof Symbol&&Symbol.observable||"@@observable";function b2(t){return t}function F2(t){return 0===t.length?b2:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}let c1=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const s=function Wr(t){return t&&t instanceof Sr||function Ta(t){return t&&S1(t.next)&&S1(t.error)&&S1(t.complete)}(t)&&$n(t)}(e)?e:new qr(e,i,r);return pt(()=>{const{operator:d,source:_}=this;s.add(d?d.call(s,_):_?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=ir(i))((r,s)=>{const d=new qr({next:_=>{try{e(_)}catch(C){s(C),d.unsubscribe()}},error:s,complete:r});this.subscribe(d)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[c2](){return this}pipe(...e){return F2(e)(this)}toPromise(e){return new(e=ir(e))((i,r)=>{let s;this.subscribe(d=>s=d,d=>r(d),()=>i(s))})}}return t.create=n=>new t(n),t})();function ir(t){var n;return null!==(n=t??m1.Promise)&&void 0!==n?n:Promise}const rr=Qe(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yt=(()=>{class t extends c1{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new ar(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new rr}next(e){pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:s}=this;return i||r?nr:(this.currentObservers=null,s.push(e),new Ye(()=>{this.currentObservers=null,p(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){const e=new c1;return e.source=this,e}}return t.create=(n,e)=>new ar(n,e),t})();class ar extends Yt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:nr}}function Ar(t){return S1(t?.lift)}function X1(t){return n=>{if(Ar(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function V1(t,n,e,i,r){return new ii(t,n,e,i,r)}class ii extends Sr{constructor(n,e,i,r,s,d){super(n),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=e?function(_){try{e(_)}catch(C){n.error(C)}}:super._next,this._error=r?function(_){try{r(_)}catch(C){n.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(_){n.error(_)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function t1(t,n){return X1((e,i)=>{let r=0;e.subscribe(V1(i,s=>{i.next(t.call(n,s,r++))}))})}function Lr(t){return this instanceof Lr?(this.v=t,this):new Lr(t)}function qs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function Zr(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=t[s]&&function(d){return new Promise(function(_,C){!function r(s,d,_,C){Promise.resolve(C).then(function(S){s({value:S,done:_})},d)}(_,C,(d=t[s](d)).done,d.value)})}}}const Ia=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Zs(t){return S1(t?.then)}function Ao(t){return S1(t[c2])}function cr(t){return Symbol.asyncIterator&&S1(t?.[Symbol.asyncIterator])}function x2(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ys=function Ra(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pa(t){return S1(t?.[Ys])}function ie(t){return function ka(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),s=[];return r={},d("next"),d("throw"),d("return"),r[Symbol.asyncIterator]=function(){return this},r;function d(W){i[W]&&(r[W]=function(K){return new Promise(function(ce,be){s.push([W,K,ce,be])>1||_(W,K)})})}function _(W,K){try{!function C(W){W.value instanceof Lr?Promise.resolve(W.value.v).then(S,V):F(s[0][2],W)}(i[W](K))}catch(ce){F(s[0][3],ce)}}function S(W){_("next",W)}function V(W){_("throw",W)}function F(W,K){W(K),s.shift(),s.length&&_(s[0][0],s[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Lr(e.read());if(r)return yield Lr(void 0);yield yield Lr(i)}}finally{e.releaseLock()}})}function U(t){return S1(t?.getReader)}function G(t){if(t instanceof c1)return t;if(null!=t){if(Ao(t))return function ne(t){return new c1(n=>{const e=t[c2]();if(S1(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Ia(t))return function fe(t){return new c1(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Zs(t))return function xe(t){return new c1(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,$i)})}(t);if(cr(t))return De(t);if(Pa(t))return function Ae(t){return new c1(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(U(t))return function we(t){return De(ie(t))}(t)}throw x2(t)}function De(t){return new c1(n=>{(function Le(t,n){var e,i,r,s;return function O2(t,n,e,i){return new(e||(e=Promise))(function(s,d){function _(V){try{S(i.next(V))}catch(F){d(F)}}function C(V){try{S(i.throw(V))}catch(F){d(F)}}function S(V){V.done?s(V.value):function r(s){return s instanceof e?s:new e(function(d){d(s)})}(V.value).then(_,C)}S((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=qs(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(d){r={error:d}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function it(t,n,e,i=0,r=!1){const s=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function tt(t,n,e=1/0){return S1(n)?tt((i,r)=>t1((s,d)=>n(i,s,r,d))(G(t(i,r))),e):("number"==typeof n&&(e=n),X1((i,r)=>function Mt(t,n,e,i,r,s,d,_){const C=[];let S=0,V=0,F=!1;const W=()=>{F&&!C.length&&!S&&n.complete()},K=be=>S<i?ce(be):C.push(be),ce=be=>{s&&n.next(be),S++;let Me=!1;G(e(be,V++)).subscribe(V1(n,He=>{r?.(He),s?K(He):n.next(He)},()=>{Me=!0},void 0,()=>{if(Me)try{for(S--;C.length&&S<i;){const He=C.shift();d?it(n,d,()=>ce(He)):ce(He)}W()}catch(He){n.error(He)}}))};return t.subscribe(V1(n,K,()=>{F=!0,W()})),()=>{_?.()}}(i,r,t,e)))}function Tt(t=1/0){return tt(b2,t)}const At=new c1(t=>t.complete());function b1(t){return t&&S1(t.schedule)}function Q1(t){return t[t.length-1]}function Wt(t){return S1(Q1(t))?t.pop():void 0}function nn(t){return b1(Q1(t))?t.pop():void 0}function pa(t,n=0){return X1((e,i)=>{e.subscribe(V1(i,r=>it(i,t,()=>i.next(r),n),()=>it(i,t,()=>i.complete(),n),r=>it(i,t,()=>i.error(r),n)))})}function Xr(t,n=0){return X1((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function M3(t,n){if(!t)throw new Error("Iterable cannot be null");return new c1(e=>{it(e,n,()=>{const i=t[Symbol.asyncIterator]();it(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Jn(t,n){return n?function ts(t,n){if(null!=t){if(Ao(t))return function qe(t,n){return G(t).pipe(Xr(n),pa(n))}(t,n);if(Ia(t))return function Qn(t,n){return new c1(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Zs(t))return function ma(t,n){return G(t).pipe(Xr(n),pa(n))}(t,n);if(cr(t))return M3(t,n);if(Pa(t))return function Fa(t,n){return new c1(e=>{let i;return it(e,n,()=>{i=t[Ys](),it(e,n,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(d){return void e.error(d)}s?e.complete():e.next(r)},0,!0)}),()=>S1(i?.return)&&i.return()})}(t,n);if(U(t))return function Kr(t,n){return M3(ie(t),n)}(t,n)}throw x2(t)}(t,n):G(t)}function Ci(...t){const n=nn(t),e=function Cn(t,n){return"number"==typeof Q1(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?G(i[0]):Tt(e)(Jn(i,n)):At}function D1(t,n,...e){if(!0===n)return void t();if(!1===n)return;const i=new qr({next:()=>{i.unsubscribe(),t()}});return G(n(...e)).subscribe(i)}function It(t){for(let n in t)if(t[n]===It)return n;throw Error("Could not find renamed property on target object.")}function lr(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function vn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function w1(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const ns=It({__forward_ref__:It});function rn(t){return t.__forward_ref__=rn,t.toString=function(){return vn(this())},t}function n1(t){return ei(t)?t():t}function ei(t){return"function"==typeof t&&t.hasOwnProperty(ns)&&t.__forward_ref__===rn}function yn(t){return t&&!!t.\u0275providers}const hi="https://g.co/ng/security#xss";class rt extends Error{constructor(n,e){super(Qr(n,e)),this.code=n}}function Qr(t,n){return`NG0${Math.abs(t)}${n?": "+n.trim():""}`}function x1(t){return"string"==typeof t?t:null==t?"":String(t)}function Jr(t,n){throw new rt(-201,!1)}function wi(t,n){null==t&&function on(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}(n,t,null,"!=")}function at(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function l1(t){return{providers:t.providers||[],imports:t.imports||[]}}function os(t){return Oa(t,Tr)||Oa(t,cs)}function Oa(t,n){return t.hasOwnProperty(n)?t[n]:null}function Qs(t){return t&&(t.hasOwnProperty(w2)||t.hasOwnProperty(C4))?t[w2]:null}const Tr=It({\u0275prov:It}),w2=It({\u0275inj:It}),cs=It({ngInjectableDef:It}),C4=It({ngInjectorDef:It});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let ls;function M2(t){const n=ls;return ls=t,n}function Js(t,n,e){const i=os(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Qt.Optional?null:void 0!==n?n:void Jr(vn(t))}const Tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hr={},an="__NG_DI_FLAG__",Ua="ngTempTokenPath",A3="ngTokenPath",ec=/\n/gm,ds="\u0275",Vo="__source";let ga;function B2(t){const n=ga;return ga=t,n}function Wc(t,n=Qt.Default){if(void 0===ga)throw new rt(-203,!1);return null===ga?Js(t,void 0,n):ga.get(t,n&Qt.Optional?null:void 0,n)}function Ie(t,n=Qt.Default){return(function w4(){return ls}()||Wc)(n1(t),n)}function r1(t,n=Qt.Default){return Ie(t,Lo(n))}function Lo(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function tc(t){const n=[];for(let e=0;e<t.length;e++){const i=n1(t[e]);if(Array.isArray(i)){if(0===i.length)throw new rt(900,!1);let r,s=Qt.Default;for(let d=0;d<i.length;d++){const _=i[d],C=nc(_);"number"==typeof C?-1===C?r=_.token:s|=C:r=_}n.push(Ie(r,s))}else n.push(Ie(i))}return n}function N1(t,n){return t[an]=n,t.prototype[an]=n,t}function nc(t){return t[an]}function ur(t){return{toString:t}.toString()}var dr=(()=>((dr=dr||{})[dr.OnPush=0]="OnPush",dr[dr.Default=1]="Default",dr))(),U2=(()=>{return(t=U2||(U2={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",U2;var t})();const ea={},bn=[],To=It({\u0275cmp:It}),Ho=It({\u0275dir:It}),ko=It({\u0275pipe:It}),fs=It({\u0275mod:It}),fr=It({\u0275fac:It}),hs=It({__NG_ELEMENT_ID__:It});let Zl=0;function Bt(t){return ur(()=>{const n=ps(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===dr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||U2.Emulated,id:"c"+Zl++,styles:t.styles||bn,_:null,schemas:t.schemas||null,tView:null};E3(e);const i=t.dependencies;return e.directiveDefs=Io(i,!1),e.pipeDefs=Io(i,!0),e})}function S4(t){return xn(t)||mi(t)}function ic(t){return null!==t}function g1(t){return ur(()=>({type:t.type,bootstrap:t.bootstrap||bn,declarations:t.declarations||bn,imports:t.imports||bn,exports:t.exports||bn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function rc(t,n){if(null==t)return ea;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,n&&(n[r]=s)}return e}function je(t){return ur(()=>{const n=ps(t);return E3(n),n})}function Mi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function xn(t){return t[To]||null}function mi(t){return t[Ho]||null}function u2(t){return t[ko]||null}function z2(t,n){const e=t[fs]||null;if(!e&&!0===n)throw new Error(`Type ${vn(t)} does not have '\u0275mod' property.`);return e}function ps(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||bn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rc(t.inputs,n),outputs:rc(t.outputs)}}function E3(t){t.features?.forEach(n=>n(t))}function Io(t,n){if(!t)return null;const e=n?u2:S4;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(ic)}const kr=0,kt=1,B1=2,Hn=3,hr=4,na=5,Ti=6,Ir=7,ai=8,ac=9,oc=10,U1=11,sc=12,cc=13,Yc=14,S2=15,zi=16,ms=17,Ga=18,pr=19,mr=20,Ro=21,Dn=22,$a=1,ia=2,Yi=7,_1=8,ya=9,d2=10;function Hi(t){return Array.isArray(t)&&"object"==typeof t[$a]}function j2(t){return Array.isArray(t)&&!0===t[$a]}function Xc(t){return 0!=(4&t.flags)}function qa(t){return t.componentOffset>-1}function Wa(t){return 1==(1&t.flags)}function T(t){return!!t.template}function k(t){return 0!=(256&t[B1])}function uc(t,n){return t.hasOwnProperty(fr)?t[fr]:null}class m6{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function wn(){return V4}function V4(t){return t.type.prototype.ngOnChanges&&(t.setInput=g6),L4}function L4(){const t=T4(this),n=t?.current;if(n){const e=t.previous;if(e===ea)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function g6(t,n,e,i){const r=this.declaredInputs[e],s=T4(t)||function _6(t,n){return t[dc]=n}(t,{previous:ea,current:null}),d=s.current||(s.current={}),_=s.previous,C=_[r];d[r]=new m6(C&&C.currentValue,n,_===ea),t[i]=n}wn.ngInherit=!0;const dc="__ngSimpleChanges__";function T4(t){return t[dc]||null}const gr=function(t,n,e){},H4="svg";function Si(t){for(;Array.isArray(t);)t=t[kr];return t}function k3(t,n){return Si(n[t])}function _r(t,n){return Si(n[t.index])}function Ql(t,n){return t.data[n]}function Po(t,n){return t[n]}function Fn(t,n){const e=n[t];return Hi(e)?e:e[kr]}function I3(t){return 64==(64&t[B1])}function Fo(t,n){return null==n?null:t[n]}function Za(t){t[Ga]=0}function k4(t,n){t[na]+=n;let e=t,i=t[Hn];for(;null!==i&&(1===n&&1===e[na]||-1===n&&0===e[na]);)i[na]+=n,e=i,i=i[Hn]}const v1={lFrame:L(null),bindingsEnabled:!0};function Jc(){return v1.bindingsEnabled}function mt(){return v1.lFrame.lView}function ln(){return v1.lFrame.tView}function ki(t){return v1.lFrame.contextLView=t,t[ai]}function Di(t){return v1.lFrame.contextLView=null,t}function Ii(){let t=e3();for(;null!==t&&64===t.type;)t=t.parent;return t}function e3(){return v1.lFrame.currentTNode}function G2(t,n){const e=v1.lFrame;e.currentTNode=t,e.isParent=n}function t3(){return v1.lFrame.isParent}function I4(){v1.lFrame.isParent=!1}function D2(){const t=v1.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function hc(){return v1.lFrame.bindingIndex++}function Xa(t){const n=v1.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function P4(t,n){const e=v1.lFrame;e.bindingIndex=e.bindingRootIndex=t,m(n)}function m(t){v1.lFrame.currentDirectiveIndex=t}function l(t){const n=v1.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function f(){return v1.lFrame.currentQueryIndex}function v(t){v1.lFrame.currentQueryIndex=t}function b(t){const n=t[kt];return 2===n.type?n.declTNode:1===n.type?t[Ti]:null}function w(t,n,e){if(e&Qt.SkipSelf){let r=n,s=t;for(;!(r=r.parent,null!==r||e&Qt.Host||(r=b(s),null===r||(s=s[S2],10&r.type))););if(null===r)return!1;n=r,t=s}const i=v1.lFrame=A();return i.currentTNode=n,i.lView=t,!0}function D(t){const n=A(),e=t[kt];v1.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function A(){const t=v1.lFrame,n=null===t?null:t.child;return null===n?L(t):n}function L(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function P(){const t=v1.lFrame;return v1.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const R=P;function B(){const t=P();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ee(){return v1.lFrame.selectedIndex}function te(t){v1.lFrame.selectedIndex=t}function Q(){const t=v1.lFrame;return Ql(t.tView,t.selectedIndex)}function Z(){v1.lFrame.currentNamespace=H4}function oe(){!function ue(){v1.lFrame.currentNamespace=null}()}function Ce(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const s=t.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:_,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:V}=s;d&&(t.contentHooks??(t.contentHooks=[])).push(-e,d),_&&((t.contentHooks??(t.contentHooks=[])).push(e,_),(t.contentCheckHooks??(t.contentCheckHooks=[])).push(e,_)),C&&(t.viewHooks??(t.viewHooks=[])).push(-e,C),S&&((t.viewHooks??(t.viewHooks=[])).push(e,S),(t.viewCheckHooks??(t.viewCheckHooks=[])).push(e,S)),null!=V&&(t.destroyHooks??(t.destroyHooks=[])).push(e,V)}}function Se(t,n,e){gt(t,n,3,e)}function Te(t,n,e,i){(3&t[B1])===e&&gt(t,n,e,i)}function Re(t,n){let e=t[B1];(3&e)===n&&(e&=2047,e+=1,t[B1]=e)}function gt(t,n,e,i){const s=i??-1,d=n.length-1;let _=0;for(let C=void 0!==i?65535&t[Ga]:0;C<d;C++)if("number"==typeof n[C+1]){if(_=n[C],null!=i&&_>=i)break}else n[C]<0&&(t[Ga]+=65536),(_<s||-1==s)&&(Ee(t,e,n,C),t[Ga]=(4294901760&t[Ga])+C+2),C++}function Ee(t,n,e,i){const r=e[i]<0,s=e[i+1],_=t[r?-e[i]:e[i]];if(r){if(t[B1]>>11<t[Ga]>>16&&(3&t[B1])===n){t[B1]+=2048,gr(4,_,s);try{s.call(_)}finally{gr(5,_,s)}}}else{gr(4,_,s);try{s.call(_)}finally{gr(5,_,s)}}}const et=-1;class Be{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Dt(t,n,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const s=e[i++],d=e[i++],_=e[i++];t.setAttribute(n,d,_,s)}else{const s=r,d=e[++i];Ft(s)?t.setProperty(n,s,d):t.setAttribute(n,s,d),i++}}return i}function zt(t){return 3===t||4===t||6===t}function Ft(t){return 64===t.charCodeAt(0)}function A1(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||Ut(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function Ut(t,n,e,i,r){let s=0,d=t.length;if(-1===n)d=-1;else for(;s<t.length;){const _=t[s++];if("number"==typeof _){if(_===n){d=-1;break}if(_>n){d=s-1;break}}}for(;s<t.length;){const _=t[s];if("number"==typeof _)break;if(_===e){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==d&&(t.splice(d,0,n),s=d+1),t.splice(s++,0,e),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function mn(t){return t!==et}function un(t){return 32767&t}function Mn(t,n){let e=function Nn(t){return t>>16}(t),i=n;for(;e>0;)i=i[S2],e--;return i}let oi=!0;function h2(t){const n=oi;return oi=t,n}const Qa=255,jn=5;let kn=0;const T1={};function Ri(t,n){const e=p2(t,n);if(-1!==e)return e;const i=n[kt];i.firstCreatePass&&(t.injectorIndex=n.length,In(i.data,t),In(n,null),In(i.blueprint,null));const r=Qi(t,n),s=t.injectorIndex;if(mn(r)){const d=un(r),_=Mn(r,n),C=_[kt].data;for(let S=0;S<8;S++)n[s+S]=_[d+S]|C[d+S]}return n[s+8]=r,s}function In(t,n){t.push(0,0,0,0,0,0,0,0,n)}function p2(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Qi(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){if(i=x5(r),null===i)return et;if(e++,r=r[S2],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return et}function Ja(t,n,e){!function si(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(hs)&&(i=e[hs]),null==i&&(i=e[hs]=kn++);const r=i&Qa;n.data[t+(r>>jn)]|=1<<r}(t,n,e)}function vr(t,n,e){if(e&Qt.Optional||void 0!==t)return t;Jr()}function Rr(t,n,e,i){if(e&Qt.Optional&&void 0===i&&(i=null),!(e&(Qt.Self|Qt.Host))){const r=t[ac],s=M2(void 0);try{return r?r.get(n,i,e&Qt.Optional):Js(n,i,e&Qt.Optional)}finally{M2(s)}}return vr(i,0,e)}function eo(t,n,e,i=Qt.Default,r){if(null!==t){if(1024&n[B1]){const d=function V7(t,n,e,i,r){let s=t,d=n;for(;null!==s&&null!==d&&1024&d[B1]&&!(256&d[B1]);){const _=No(s,d,e,i|Qt.Self,T1);if(_!==T1)return _;let C=s.parent;if(!C){const S=d[Ro];if(S){const V=S.get(e,T1,i);if(V!==T1)return V}C=x5(d),d=d[S2]}s=C}return r}(t,n,e,i,T1);if(d!==T1)return d}const s=No(t,n,e,i,T1);if(s!==T1)return s}return Rr(n,e,i,r)}function No(t,n,e,i,r){const s=function v5(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(hs)?t[hs]:void 0;return"number"==typeof n?n>=0?n&Qa:E7:n}(e);if("function"==typeof s){if(!w(n,t,i))return i&Qt.Host?vr(r,0,i):Rr(n,e,i,r);try{const d=s(i);if(null!=d||i&Qt.Optional)return d;Jr()}finally{R()}}else if("number"==typeof s){let d=null,_=p2(t,n),C=et,S=i&Qt.Host?n[zi][Ti]:null;for((-1===_||i&Qt.SkipSelf)&&(C=-1===_?Qi(t,n):n[_+8],C!==et&&b5(i,!1)?(d=n[kt],_=un(C),n=Mn(C,n)):_=-1);-1!==_;){const V=n[kt];if(y5(s,_,V.data)){const F=_s(_,n,e,d,i,S);if(F!==T1)return F}C=n[_+8],C!==et&&b5(i,n[kt].data[_+8]===S)&&y5(s,_,n)?(d=V,_=un(C),n=Mn(C,n)):_=-1}}return r}function _s(t,n,e,i,r,s){const d=n[kt],_=d.data[t+8],V=Oo(_,d,e,null==i?qa(_)&&oi:i!=d&&0!=(3&_.type),r&Qt.Host&&s===_);return null!==V?i3(n,d,V,_):T1}function Oo(t,n,e,i,r){const s=t.providerIndexes,d=n.data,_=1048575&s,C=t.directiveStart,V=s>>20,W=r?_+V:t.directiveEnd;for(let K=i?_:_+V;K<W;K++){const ce=d[K];if(K<C&&e===ce||K>=C&&ce.type===e)return K}if(r){const K=d[C];if(K&&T(K)&&K.type===e)return C}return null}function i3(t,n,e,i){let r=t[e];const s=n.data;if(function ct(t){return t instanceof Be}(r)){const d=r;d.resolving&&function Xs(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new rt(-200,`Circular dependency in DI detected for ${t}${e}`)}(function pn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():x1(t)}(s[e]));const _=h2(d.canSeeViewProviders);d.resolving=!0;const C=d.injectImpl?M2(d.injectImpl):null;w(t,i,Qt.Default);try{r=t[e]=d.factory(void 0,s,t,i),n.firstCreatePass&&e>=i.directiveStart&&function _e(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=n.type.prototype;if(i){const d=V4(n);(e.preOrderHooks??(e.preOrderHooks=[])).push(t,d),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,d)}r&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-t,r),s&&((e.preOrderHooks??(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,s))}(e,s[e],n)}finally{null!==C&&M2(C),h2(_),d.resolving=!1,R()}}return r}function y5(t,n,e){return!!(e[n+(t>>jn)]&1<<t)}function b5(t,n){return!(t&Qt.Self||t&Qt.Host&&n)}class O3{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return eo(this._tNode,this._lView,n,Lo(i),e)}}function E7(){return new O3(Ii(),mt())}function Vt(t){return ur(()=>{const n=t.prototype.constructor,e=n[fr]||w6(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[fr]||w6(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function w6(t){return ei(t)?()=>{const n=w6(n1(t));return n&&n()}:uc(t)}function x5(t){const n=t[kt],e=n.type;return 2===e?n.declTNode:1===e?t[Ti]:null}function pc(t){return function n3(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if(zt(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===n)return e[r+1];r+=2}}}return null}(Ii(),t)}const N4="__parameters__";function r3(t,n,e){return ur(()=>{const i=function n0(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...s){if(this instanceof r)return i.apply(this,s),this;const d=new r(...s);return _.annotation=d,_;function _(C,S,V){const F=C.hasOwnProperty(N4)?C[N4]:Object.defineProperty(C,N4,{value:[]})[N4];for(;F.length<=V;)F.push(null);return(F[V]=F[V]||[]).push(d),C}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class vt{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=at({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ra(t,n){t.forEach(e=>Array.isArray(e)?ra(e,n):n(e))}function gc(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function ys(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function a0(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function yr(t,n,e){let i=O4(t,n);return i>=0?t[1|i]=e:(i=~i,function gm(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function xa(t,n){const e=O4(t,n);if(e>=0)return t[1|e]}function O4(t,n){return function ui(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const s=i+(r-i>>1),d=t[s<<e];if(n===d)return s<<e;d>n?r=s:i=s+1}return~(r<<e)}(t,n,1)}const bs=N1(r3("Inject",t=>({token:t})),-1),wa=N1(r3("Optional"),8),xs=N1(r3("SkipSelf"),4);var Ji=(()=>((Ji=Ji||{})[Ji.Important=1]="Important",Ji[Ji.DashCase=2]="DashCase",Ji))();const q4=new Map;let B7=0;const h0="__ngContext__";function Fi(t,n){Hi(n)?(t[h0]=n[mr],function S5(t){q4.set(t[mr],t)}(n)):t[h0]=n}let T5;function H5(t,n){return T5(t,n)}function X4(t){const n=t[Hn];return j2(n)?n[Hn]:n}function oo(t){return co(t[cc])}function so(t){return co(t[hr])}function co(t){for(;null!==t&&!j2(t);)t=t[hr];return t}function A2(t,n,e,i,r){if(null!=i){let s,d=!1;j2(i)?s=i:Hi(i)&&(d=!0,i=i[kr]);const _=Si(i);0===t&&null!==e?null==r?U5(n,e,_):j3(n,e,_,r||null,!0):1===t&&null!==e?j3(n,e,_,r||null,!0):2===t?function Y5(t,n,e){const i=Q4(t,n);i&&function j5(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,_,d):3===t&&n.destroyNode(_),null!=s&&function Sm(t,n,e,i,r){const s=e[Yi];s!==Si(e)&&A2(n,t,i,s,r);for(let _=d2;_<e.length;_++){const C=e[_];_0(C[kt],C,t,n,i,s)}}(n,t,s,e,r)}}function L6(t,n,e){return t.createElement(n,e)}function N5(t,n){const e=t[ya],i=e.indexOf(n),r=n[Hn];512&n[B1]&&(n[B1]&=-513,k4(r,-1)),e.splice(i,1)}function O5(t,n){if(t.length<=d2)return;const e=d2+n,i=t[e];if(i){const r=i[ms];null!==r&&r!==t&&N5(r,i),n>0&&(t[e-1][hr]=i[hr]);const s=ys(t,d2+n);!function K4(t,n){_0(t,n,n[U1],2,null,null),n[kr]=null,n[Ti]=null}(i[kt],i);const d=s[pr];null!==d&&d.detachView(s[kt]),i[Hn]=null,i[hr]=null,i[B1]&=-65}return i}function Ms(t,n){if(!(128&n[B1])){const e=n[U1];e.destroyNode&&_0(t,n,e,3,null,null),function P5(t){let n=t[cc];if(!n)return vc(t[kt],t);for(;n;){let e=null;if(Hi(n))e=n[cc];else{const i=n[d2];i&&(e=i)}if(!e){for(;n&&!n[hr]&&n!==t;)Hi(n)&&vc(n[kt],n),n=n[Hn];null===n&&(n=t),Hi(n)&&vc(n[kt],n),e=n&&n[hr]}n=e}}(n)}}function vc(t,n){if(!(128&n[B1])){n[B1]&=-65,n[B1]|=128,function H6(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof Be)){const s=e[i+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){const _=r[s[d]],C=s[d+1];gr(4,_,C);try{C.call(_)}finally{gr(5,_,C)}}else{gr(4,r,s);try{s.call(r)}finally{gr(5,r,s)}}}}}(t,n),function T6(t,n){const e=t.cleanup,i=n[Ir];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const d=e[s+3];d>=0?i[r=d]():i[r=-d].unsubscribe(),s+=2}else{const d=i[r=e[s+1]];e[s].call(d)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();n[Ir]=null}}(t,n),1===n[kt].type&&n[U1].destroy();const e=n[ms];if(null!==e&&j2(n[Hn])){e!==n[Hn]&&N5(e,n);const i=n[pr];null!==i&&i.detachView(t)}!function U3(t){q4.delete(t[mr])}(n)}}function k6(t,n,e){return function B5(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[kr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===U2.None||s===U2.Emulated)return null}return _r(i,e)}}(t,n.parent,e)}function j3(t,n,e,i,r){t.insertBefore(n,e,i,r)}function U5(t,n,e){t.appendChild(n,e)}function q7(t,n,e,i,r){null!==i?j3(t,n,e,i,r):U5(t,n,e)}function Q4(t,n){return t.parentNode(n)}function G5(t,n,e){return $5(t,n,e)}let q5,lo,l3,zs,$5=function c3(t,n,e){return 40&t.type?_r(t,e):null};function $3(t,n,e,i){const r=k6(t,i,n),s=n[U1],_=G5(i.parent||n[Ti],i,n);if(null!=r)if(Array.isArray(e))for(let C=0;C<e.length;C++)q7(s,r,e[C],_,!1);else q7(s,r,e,_,!1);void 0!==q5&&q5(s,i,n,e,r)}function g0(t,n){if(null!==n){const e=n.type;if(3&e)return _r(n,t);if(4&e)return Z5(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return g0(t,i);{const r=t[n.index];return j2(r)?Z5(-1,r):Si(r)}}if(32&e)return H5(n,t)()||Si(t[n.index]);{const i=W5(t,n);return null!==i?Array.isArray(i)?i[0]:g0(X4(t[zi]),i):g0(t,n.next)}}return null}function W5(t,n){return null!==n?t[zi][Ti].projection[n.projection]:null}function Z5(t,n){const e=d2+t+1;if(e<n.length){const i=n[e],r=i[kt].firstChild;if(null!==r)return g0(i,r)}return n[Yi]}function I6(t,n,e,i,r,s,d){for(;null!=e;){const _=i[e.index],C=e.type;if(d&&0===n&&(_&&Fi(Si(_),i),e.flags|=2),32!=(32&e.flags))if(8&C)I6(t,n,e.child,i,r,s,!1),A2(n,t,r,_,s);else if(32&C){const S=H5(e,i);let V;for(;V=S();)A2(n,t,r,V,s);A2(n,t,r,_,s)}else 16&C?Y7(t,n,i,e,r,s):A2(n,t,r,_,s);e=d?e.projectionNext:e.next}}function _0(t,n,e,i,r,s){I6(e,i,t.firstChild,n,r,s,!1)}function Y7(t,n,e,i,r,s){const d=e[zi],C=d[Ti].projection[i.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)A2(n,t,r,C[S],s);else I6(t,n,C,d[Hn],r,s,!0)}function X5(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function R6(t,n,e){const{mergedAttrs:i,classes:r,styles:s}=e;null!==i&&Dt(t,n,i),null!==r&&X5(t,n,r),null!==s&&function K7(t,n,e){t.setAttribute(n,"style",e)}(t,n,s)}function J4(t){return function xr(){if(void 0===lo&&(lo=null,Tn.trustedTypes))try{lo=Tn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return lo}()?.createHTML(t)||t}function q3(){if(void 0===zs&&(zs=null,Tn.trustedTypes))try{zs=Tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return zs}function Q7(t){return q3()?.createHTML(t)||t}function ef(t){return q3()?.createScriptURL(t)||t}class W3{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hi})`}}class Em extends W3{getTypeName(){return"HTML"}}class Vm extends W3{getTypeName(){return"Style"}}class Lm extends W3{getTypeName(){return"Script"}}class J5 extends W3{getTypeName(){return"URL"}}class Tm extends W3{getTypeName(){return"ResourceURL"}}function V2(t){return t instanceof W3?t.changingThisBreaksApplicationSecurity:t}function Ss(t,n){const e=function gi(t){return t instanceof W3&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${hi})`)}return e===n}class nf{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(J4(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class y0{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=J4(n),e}}const nu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function B6(t){return(t=String(t)).match(nu)?t:"unsafe:"+t}function Ds(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function yc(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const rf=Ds("area,br,col,hr,img,wbr"),U6=Ds("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),af=Ds("rp,rt"),ru=yc(rf,yc(U6,Ds("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yc(af,Ds("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yc(af,U6)),au=Ds("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lf=yc(au,Ds("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ds("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hm=Ds("script,style,template");class j6{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!ru.hasOwnProperty(e))return this.sanitizedSomething=!0,!Hm.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),d=s.name,_=d.toLowerCase();if(!lf.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let C=s.value;au[_]&&(C=B6(C)),this.buf.push(" ",d,'="',Z3(C),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();ru.hasOwnProperty(e)&&!rf.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(Z3(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const km=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uf=/([^\#-~ |!])/g;function Z3(t){return t.replace(/&/g,"&amp;").replace(km,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(uf,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let G6;function df(t,n){let e=null;try{G6=G6||function eu(t){const n=new y0(t);return function tu(){try{return!!(new window.DOMParser).parseFromString(J4(""),"text/html")}catch{return!1}}()?new nf(n):n}(t);let i=n?String(n):"";e=G6.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=G6.getInertBodyElement(i)}while(i!==s);return J4((new j6).sanitizeChildren(ou(e)||e))}finally{if(e){const i=ou(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function ou(t){return"content"in t&&function ff(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Wn=(()=>((Wn=Wn||{})[Wn.NONE=0]="NONE",Wn[Wn.HTML=1]="HTML",Wn[Wn.STYLE=2]="STYLE",Wn[Wn.SCRIPT=3]="SCRIPT",Wn[Wn.URL=4]="URL",Wn[Wn.RESOURCE_URL=5]="RESOURCE_URL",Wn))();function hf(t){const n=xc();return n?Q7(n.sanitize(Wn.HTML,t)||""):Ss(t,"HTML")?Q7(V2(t)):df(function Q5(){return void 0!==l3?l3:typeof document<"u"?document:void 0}(),x1(t))}function bc(t){const n=xc();return n?n.sanitize(Wn.URL,t)||"":Ss(t,"URL")?V2(t):B6(x1(t))}function b0(t){const n=xc();if(n)return ef(n.sanitize(Wn.RESOURCE_URL,t)||"");if(Ss(t,"ResourceURL"))return ef(V2(t));throw new rt(904,!1)}function xc(){const t=mt();return t&&t[sc]}const x0=new vt("ENVIRONMENT_INITIALIZER"),pf=new vt("INJECTOR",-1),su=new vt("INJECTOR_DEF_TYPES");class cu{get(n,e=Hr){if(e===Hr){const i=new Error(`NullInjectorError: No provider for ${vn(n)}!`);throw i.name="NullInjectorError",i}return e}}function gf(...t){return{\u0275providers:lu(0,t),\u0275fromNgModule:!0}}function lu(t,...n){const e=[],i=new Set;let r;return ra(n,s=>{const d=s;du(d,e,[],i)&&(r||(r=[]),r.push(d))}),void 0!==r&&uu(r,e),e}function uu(t,n){for(let e=0;e<t.length;e++){const{providers:r}=t[e];Z6(r,s=>{n.push(s)})}}function du(t,n,e,i){if(!(t=n1(t)))return!1;let r=null,s=Qs(t);const d=!s&&xn(t);if(s||d){if(d&&!d.standalone)return!1;r=t}else{const C=t.ngModule;if(s=Qs(C),!s)return!1;r=C}const _=i.has(r);if(d){if(_)return!1;if(i.add(r),d.dependencies){const C="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const S of C)du(S,n,e,i)}}else{if(!s)return!1;{if(null!=s.imports&&!_){let S;i.add(r);try{ra(s.imports,V=>{du(V,n,e,i)&&(S||(S=[]),S.push(V))})}finally{}void 0!==S&&uu(S,n)}if(!_){const S=uc(r)||(()=>new r);n.push({provide:r,useFactory:S,deps:bn},{provide:su,useValue:r,multi:!0},{provide:x0,useValue:()=>Ie(r),multi:!0})}const C=s.providers;null==C||_||Z6(C,V=>{n.push(V)})}}return r!==t&&void 0!==t.providers}function Z6(t,n){for(let e of t)yn(e)&&(e=e.\u0275providers),Array.isArray(e)?Z6(e,n):n(e)}const Y6=It({provide:String,useValue:It});function X6(t){return null!==t&&"object"==typeof t&&Y6 in t}function uo(t){return"function"==typeof t}const K6=new vt("Set Injector scope."),w0={},Nm={};let fu;function Q6(){return void 0===fu&&(fu=new cu),fu}class As{}class _f extends As{get destroyed(){return this._destroyed}constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mu(n,d=>this.processProvider(d)),this.records.set(pf,Y3(void 0,this)),r.has("environment")&&this.records.set(As,Y3(void 0,this));const s=this.records.get(K6);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(su.multi,bn,Qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const e=B2(this),i=M2(void 0);try{return n()}finally{B2(e),M2(i)}}get(n,e=Hr,i=Qt.Default){this.assertNotDestroyed(),i=Lo(i);const r=B2(this),s=M2(void 0);try{if(!(i&Qt.SkipSelf)){let _=this.records.get(n);if(void 0===_){const C=function Um(t){return"function"==typeof t||"object"==typeof t&&t instanceof vt}(n)&&os(n);_=C&&this.injectableDefInScope(C)?Y3(hu(n),w0):null,this.records.set(n,_)}if(null!=_)return this.hydrate(n,_)}return(i&Qt.Self?Q6():this.parent).get(n,e=i&Qt.Optional&&e===Hr?null:e)}catch(d){if("NullInjectorError"===d.name){if((d[Ua]=d[Ua]||[]).unshift(vn(n)),r)throw d;return function z4(t,n,e,i){const r=t[Ua];throw n[Vo]&&r.unshift(n[Vo]),t.message=function Zc(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==ds?t.slice(2):t;let r=vn(n);if(Array.isArray(n))r=n.map(vn).join(" -> ");else if("object"==typeof n){let s=[];for(let d in n)if(n.hasOwnProperty(d)){let _=n[d];s.push(d+":"+("string"==typeof _?JSON.stringify(_):vn(_)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(ec,"\n  ")}`}("\n"+t.message,r,e,i),t[A3]=r,t[Ua]=null,t}(d,n,"R3InjectorError",this.source)}throw d}finally{M2(s),B2(r)}}resolveInjectorInitializers(){const n=B2(this),e=M2(void 0);try{const i=this.get(x0.multi,bn,Qt.Self);for(const r of i)r()}finally{B2(n),M2(e)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(vn(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processProvider(n){let e=uo(n=n1(n))?n:n1(n&&n.provide);const i=function Om(t){return X6(t)?Y3(void 0,t.useValue):Y3(pu(t),w0)}(n);if(uo(n)||!0!==n.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Y3(void 0,w0,!0),r.factory=()=>tc(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e){return e.value===w0&&(e.value=Nm,e.value=e.factory()),"object"==typeof e.value&&e.value&&function Bm(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=n1(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function hu(t){const n=os(t),e=null!==n?n.factory:uc(t);if(null!==e)return e;if(t instanceof vt)throw new rt(204,!1);if(t instanceof Function)return function J6(t){const n=t.length;if(n>0)throw a0(n,"?"),new rt(204,!1);const e=function Ba(t){return t&&(t[Tr]||t[cs])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new rt(204,!1)}function pu(t,n,e){let i;if(uo(t)){const r=n1(t);return uc(r)||hu(r)}if(X6(t))i=()=>n1(t.useValue);else if(function tl(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...tc(t.deps||[]));else if(function q2(t){return!(!t||!t.useExisting)}(t))i=()=>Ie(n1(t.useExisting));else{const r=n1(t&&(t.useClass||t.provide));if(!function vf(t){return!!t.deps}(t))return uc(r)||hu(r);i=()=>new r(...tc(t.deps))}return i}function Y3(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function mu(t,n){for(const e of t)Array.isArray(e)?mu(e,n):e&&yn(e)?mu(e.\u0275providers,n):n(e)}class jm{}class yf{}class Es{resolveComponentFactory(n){throw function bf(t){const n=Error(`No component factory found for ${vn(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Cc=(()=>{class t{}return t.NULL=new Es,t})();function e8(){return Go(Ii(),mt())}function Go(t,n){return new Nt(_r(t,n))}let Nt=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=e8,t})();function Gm(t){return t instanceof Nt?t.nativeElement:t}class wc{}let fo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function $m(){const t=mt(),e=Fn(Ii().index,t);return(Hi(e)?e:t)[U1]}(),t})(),M0=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>null}),t})();class Mc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Cf=new Mc("15.2.9"),En={},z0="ngOriginalError";function t8(t){return t[z0]}class oa{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&t8(n);for(;e&&t8(e);)e=t8(e);return e||null}}function zf(t){return t.ownerDocument.defaultView}function zc(t){return t instanceof Function?t():t}function Sf(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=n.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}e=r+1}}const Df="ng-template";function vu(t,n,e){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if("string"==typeof s&&r){const d=t[i++];if(e&&"class"===s&&-1!==Sf(d.toLowerCase(),n,0))return!0}else{if(1===s){for(;i<t.length&&"string"==typeof(s=t[i++]);)if(s.toLowerCase()===n)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function n8(t){return 4===t.type&&t.value!==Df}function Af(t,n,e){return n===(4!==t.type||e?t.value:Df)}function za(t,n,e){let i=4;const r=t.attrs||[],s=function Qm(t){for(let n=0;n<t.length;n++)if(zt(t[n]))return n;return t.length}(r);let d=!1;for(let _=0;_<n.length;_++){const C=n[_];if("number"!=typeof C){if(!d)if(4&i){if(i=2|1&i,""!==C&&!Af(t,C,e)||""===C&&1===n.length){if(Fr(i))return!1;d=!0}}else{const S=8&i?C:n[++_];if(8&i&&null!==t.attrs){if(!vu(t.attrs,S,e)){if(Fr(i))return!1;d=!0}continue}const F=rl(8&i?"class":C,r,n8(t),e);if(-1===F){if(Fr(i))return!1;d=!0;continue}if(""!==S){let W;W=F>s?"":r[F+1].toLowerCase();const K=8&i?W:null;if(K&&-1!==Sf(K,S,0)||2&i&&S!==W){if(Fr(i))return!1;d=!0}}}}else{if(!d&&!Fr(i)&&!Fr(C))return!1;if(d&&Fr(C))continue;d=!1,i=C|1&i}}return Fr(i)||d}function Fr(t){return 0==(1&t)}function rl(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let s=!1;for(;r<n.length;){const d=n[r];if(d===t)return r;if(3===d||6===d)s=!0;else{if(1===d||2===d){let _=n[++r];for(;"string"==typeof _;)_=n[++r];continue}if(4===d)break;if(0===d){r+=4;continue}}r+=s?1:2}return-1}return function Ef(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function i8(t,n,e=!1){for(let i=0;i<n.length;i++)if(za(t,n[i],e))return!0;return!1}function Vf(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function Lf(t,n){return t?":not("+n.trim()+")":n}function Tf(t){let n=t[0],e=1,i=2,r="",s=!1;for(;e<t.length;){let d=t[e];if("string"==typeof d)if(2&i){const _=t[++e];r+="["+d+(_.length>0?'="'+_+'"':"")+"]"}else 8&i?r+="."+d:4&i&&(r+=" "+d);else""!==r&&!Fr(d)&&(n+=Lf(s,r),r=""),i=d,s=s||!Fr(i);e++}return""!==r&&(n+=Lf(s,r)),n}const j1={};function Xe(t){bu(ln(),mt(),ee()+t,!1)}function bu(t,n,e,i){if(!i)if(3==(3&n[B1])){const s=t.preOrderCheckHooks;null!==s&&Se(n,s,e)}else{const s=t.preOrderHooks;null!==s&&Te(n,s,0,e)}te(e)}function al(t,n=null,e=null,i){const r=Cu(t,n,e,i);return r.resolveInjectorInitializers(),r}function Cu(t,n=null,e=null,i,r=new Set){const s=[e||bn,gf(t)];return i=i||("object"==typeof t?void 0:vn(t)),new _f(s,n||Q6(),i||null,r)}let Nr=(()=>{class t{static create(e,i){if(Array.isArray(e))return al({name:""},i,e,"");{const r=e.name??"";return al({name:r},e.parent,e.providers,r)}}}return t.THROW_IF_NOT_FOUND=Hr,t.NULL=new cu,t.\u0275prov=at({token:t,providedIn:"any",factory:()=>Ie(pf)}),t.__NG_ELEMENT_ID__=-1,t})();function q(t,n=Qt.Default){const e=mt();return null===e?Ie(t,n):eo(Ii(),e,n1(t),n)}function Ts(){throw new Error("invalid")}function E0(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const d=t.data[s];v(e[i]),d.contentQueries(2,n[s],s)}}}function Dc(t,n,e,i,r,s,d,_,C,S,V){const F=n.blueprint.slice();return F[kr]=r,F[B1]=76|i,(null!==V||t&&1024&t[B1])&&(F[B1]|=1024),Za(F),F[Hn]=F[S2]=t,F[ai]=e,F[oc]=d||t&&t[oc],F[U1]=_||t&&t[U1],F[sc]=C||t&&t[sc]||null,F[ac]=S||t&&t[ac]||null,F[Ti]=s,F[mr]=function Mm(){return B7++}(),F[Ro]=V,F[zi]=2==n.type?t[zi]:F,F}function Ac(t,n,e,i,r){let s=t.data[n];if(null===s)s=function Eu(t,n,e,i,r){const s=e3(),d=t3(),C=t.data[n]=function p8(t,n,e,i,r,s){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?s:s&&s.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=C),null!==s&&(d?null==s.child&&null!==C.parent&&(s.child=C):null===s.next&&(s.next=C,C.prev=s)),C}(t,n,e,i,r),function C6(){return v1.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const d=function gs(){const t=v1.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();s.injectorIndex=null===d?-1:d.injectorIndex}return G2(s,!0),s}function cl(t,n,e,i){if(0===e)return-1;const r=n.length;for(let s=0;s<e;s++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function u8(t,n,e){D(n);try{const i=t.viewQuery;null!==i&&_8(1,i,e);const r=t.template;null!==r&&Vu(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&E0(t,n),t.staticViewQueries&&_8(2,t.viewQuery,e);const s=t.components;null!==s&&function sg(t,n){for(let e=0;e<n.length;e++)Jf(t,n[e])}(n,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[B1]&=-5,B()}}function d8(t,n,e,i){const r=n[B1];if(128!=(128&r)){D(n);try{Za(n),function R4(t){return v1.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Vu(t,n,e,2,i);const d=3==(3&r);if(d){const S=t.preOrderCheckHooks;null!==S&&Se(n,S,null)}else{const S=t.preOrderHooks;null!==S&&Te(n,S,0,null),Re(n,0)}if(function Qf(t){for(let n=oo(t);null!==n;n=so(n)){if(!n[ia])continue;const e=n[ya];for(let i=0;i<e.length;i++){const r=e[i];512&r[B1]||k4(r[Hn],1),r[B1]|=512}}}(n),function Kf(t){for(let n=oo(t);null!==n;n=so(n))for(let e=d2;e<n.length;e++){const i=n[e],r=i[kt];I3(i)&&d8(r,i,r.template,i[ai])}}(n),null!==t.contentQueries&&E0(t,n),d){const S=t.contentCheckHooks;null!==S&&Se(n,S)}else{const S=t.contentHooks;null!==S&&Te(n,S,1),Re(n,1)}!function A0(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)te(~r);else{const s=r,d=e[++i],_=e[++i];P4(d,s),_(2,n[s])}}}finally{te(-1)}}(t,n);const _=t.components;null!==_&&function og(t,n){for(let e=0;e<n.length;e++)Uu(t,n[e])}(n,_);const C=t.viewQuery;if(null!==C&&_8(2,C,i),d){const S=t.viewCheckHooks;null!==S&&Se(n,S)}else{const S=t.viewHooks;null!==S&&Te(n,S,2),Re(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[B1]&=-41,512&n[B1]&&(n[B1]&=-513,k4(n[Hn],-1))}finally{B()}}}function Vu(t,n,e,i,r){const s=ee(),d=2&i;try{te(-1),d&&n.length>Dn&&bu(t,n,Dn,!1),gr(d?2:0,r),e(i,r)}finally{te(s),gr(d?3:1,r)}}function Lu(t,n,e){if(Xc(n)){const r=n.directiveEnd;for(let s=n.directiveStart;s<r;s++){const d=t.data[s];d.contentQueries&&d.contentQueries(1,e[s],s)}}}function f8(t,n,e){Jc()&&(function Nu(t,n,e,i){const r=e.directiveStart,s=e.directiveEnd;qa(e)&&function Hs(t,n,e){const i=_r(n,t),r=Hu(e),s=t[oc],d=T0(t,Dc(t,r,null,e.onPush?32:16,i,n,s,s.createRenderer(i,e),null,null,null));t[n.index]=d}(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||Ri(e,n),Fi(i,n);const d=e.initialInputs;for(let _=r;_<s;_++){const C=t.data[_],S=i3(n,t,_,e);Fi(S,n),null!==d&&h3(0,_-r,S,C,0,d),T(C)&&(Fn(e.index,n)[ai]=i3(n,t,_,e))}}(t,n,e,_r(e,n)),64==(64&e.flags)&&Zf(t,n,e))}function Tu(t,n,e=_r){const i=n.localNames;if(null!==i){let r=n.index+1;for(let s=0;s<i.length;s+=2){const d=i[s+1],_=-1===d?e(n,t):t[d];t[r++]=_}}}function Hu(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=ku(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function ku(t,n,e,i,r,s,d,_,C,S){const V=Dn+i,F=V+r,W=function cg(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:j1);return e}(V,F),K="function"==typeof S?S():S;return W[kt]={type:t,blueprint:W,template:e,queries:null,viewQuery:_,declTNode:n,data:W.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function V0(t,n,e,i){const r=Gu(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&th(t).push(i,r.length-1))}function $f(t,n,e,i){for(let r in t)if(t.hasOwnProperty(r)){e=null===e?{}:e;const s=t[r];null===i?m8(e,n,r,s):i.hasOwnProperty(r)&&m8(e,n,i[r],s)}return e}function m8(t,n,e,i){t.hasOwnProperty(e)?t[e].push(n,i):t[e]=[n,i]}function Sa(t,n,e,i,r,s,d,_){const C=_r(n,e);let V,S=n.inputs;!_&&null!=S&&(V=S[i])?($u(t,e,V,i,r),qa(n)&&function Ru(t,n){const e=Fn(n,t);16&e[B1]||(e[B1]|=32)}(e,n.index)):3&n.type&&(i=function f3(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=d?d(r,n.value||"",i):r,s.setProperty(C,i,r))}function Fu(t,n,e,i){if(Jc()){const r=null===i?null:{"":-1},s=function dg(t,n){const e=t.directiveRegistry;let i=null,r=null;if(e)for(let s=0;s<e.length;s++){const d=e[s];if(i8(n,d.selectors,!1))if(i||(i=[]),T(d))if(null!==d.findHostDirectiveDefs){const _=[];r=r||new Map,d.findHostDirectiveDefs(d,_,r),i.unshift(..._,d),Ou(t,n,_.length)}else i.unshift(d),Ou(t,n,0);else r=r||new Map,d.findHostDirectiveDefs?.(d,i,r),i.push(d)}return null===i?null:[i,r]}(t,e);let d,_;null===s?d=_=null:[d,_]=s,null!==d&&Wf(t,n,e,d,r,_),r&&function Yf(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const s=e[n[r+1]];if(null==s)throw new rt(-301,!1);i.push(n[r],s)}}}(e,i,r)}e.mergedAttrs=A1(e.mergedAttrs,e.attrs)}function Wf(t,n,e,i,r,s){for(let S=0;S<i.length;S++)Ja(Ri(e,n),t,i[S].type);!function Xf(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let S=0;S<i.length;S++){const V=i[S];V.providersResolver&&V.providersResolver(V)}let d=!1,_=!1,C=cl(t,n,i.length,null);for(let S=0;S<i.length;S++){const V=i[S];e.mergedAttrs=A1(e.mergedAttrs,V.hostAttrs),ho(t,e,n,C,V),fg(C,V,r),null!==V.contentQueries&&(e.flags|=4),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(e.flags|=64);const F=V.type.prototype;!d&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((t.preOrderHooks??(t.preOrderHooks=[])).push(e.index),d=!0),!_&&(F.ngOnChanges||F.ngDoCheck)&&((t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(e.index),_=!0),C++}!function Iu(t,n,e){const r=n.directiveEnd,s=t.data,d=n.attrs,_=[];let C=null,S=null;for(let V=n.directiveStart;V<r;V++){const F=s[V],W=e?e.get(F):null,ce=W?W.outputs:null;C=$f(F.inputs,V,C,W?W.inputs:null),S=$f(F.outputs,V,S,ce);const be=null===C||null===d||n8(n)?null:g8(C,V,d);_.push(be)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=_,n.inputs=C,n.outputs=S}(t,e,s)}function Zf(t,n,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,d=function N3(){return v1.lFrame.currentDirectiveIndex}();try{te(s);for(let _=i;_<r;_++){const C=t.data[_],S=n[_];m(_),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&L0(C,S)}}finally{te(-1),m(d)}}function L0(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Ou(t,n,e){n.componentOffset=e,(t.components??(t.components=[])).push(n.index)}function fg(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;T(n)&&(e[""]=t)}}function ho(t,n,e,i,r){t.data[i]=r;const s=r.factory||(r.factory=uc(r.type)),d=new Be(s,T(r),q);t.blueprint[i]=d,e[i]=d,function lg(t,n,e,i,r){const s=r.hostBindings;if(s){let d=t.hostBindingOpCodes;null===d&&(d=t.hostBindingOpCodes=[]);const _=~n.index;(function ug(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(d)!=_&&d.push(_),d.push(e,i,s)}}(t,n,i,cl(t,e,r.hostVars,j1),r)}function Z2(t,n,e,i,r,s){const d=_r(t,n);!function po(t,n,e,i,r,s,d){if(null==s)t.removeAttribute(n,r,e);else{const _=null==d?x1(s):d(s,i||"",r);t.setAttribute(n,r,_,e)}}(n[U1],d,s,t.value,e,i,r)}function h3(t,n,e,i,r,s){const d=s[n];if(null!==d){const _=i.setInput;for(let C=0;C<d.length;){const S=d[C++],V=d[C++],F=d[C++];null!==_?i.setInput(e,F,S,V):e[V]=F}}}function g8(t,n,e){let i=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const d=t[s];for(let _=0;_<d.length;_+=2)if(d[_]===n){i.push(s,d[_+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Bu(t,n,e,i){return[t,!0,!1,n,null,0,i,e,null,null]}function Uu(t,n){const e=Fn(n,t);if(I3(e)){const i=e[kt];48&e[B1]?d8(i,e,i.template,e[ai]):e[na]>0&&ju(e)}}function ju(t){for(let i=oo(t);null!==i;i=so(i))for(let r=d2;r<i.length;r++){const s=i[r];if(I3(s))if(512&s[B1]){const d=s[kt];d8(d,s,d.template,s[ai])}else s[na]>0&&ju(s)}const e=t[kt].components;if(null!==e)for(let i=0;i<e.length;i++){const r=Fn(e[i],t);I3(r)&&r[na]>0&&ju(r)}}function Jf(t,n){const e=Fn(n,t),i=e[kt];(function eh(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),u8(i,e,e[ai])}function T0(t,n){return t[cc]?t[Yc][hr]=n:t[cc]=n,t[Yc]=n,n}function H0(t){for(;t;){t[B1]|=32;const n=X4(t);if(k(t)&&!n)return t;t=n}return null}function k0(t,n,e,i=!0){const r=n[oc];r.begin&&r.begin();try{d8(t,n,t.template,e)}catch(d){throw i&&I0(n,d),d}finally{r.end&&r.end()}}function _8(t,n,e){v(0),n(t,e)}function Gu(t){return t[Ir]||(t[Ir]=[])}function th(t){return t.cleanup||(t.cleanup=[])}function nh(t,n,e){return(null===t||T(t))&&(e=function H3(t){for(;Array.isArray(t);){if("object"==typeof t[$a])return t;t=t[kr]}return null}(e[n.index])),e[U1]}function I0(t,n){const e=t[ac],i=e?e.get(oa,null):null;i&&i.handleError(n)}function $u(t,n,e,i,r){for(let s=0;s<e.length;){const d=e[s++],_=e[s++],C=n[d],S=t.data[d];null!==S.setInput?S.setInput(C,r,i,_):C[_]=r}}function sa(t,n,e){const i=k3(n,t);!function I5(t,n,e){t.setValue(n,e)}(t[U1],i,e)}function ll(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,s=0;if(null!==n)for(let d=0;d<n.length;d++){const _=n[d];"number"==typeof _?s=_:1==s?r=w1(r,_):2==s&&(i=w1(i,_+": "+n[++d]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function ul(t,n,e,i,r=!1){for(;null!==e;){const s=n[e.index];if(null!==s&&i.push(Si(s)),j2(s))for(let _=d2;_<s.length;_++){const C=s[_],S=C[kt].firstChild;null!==S&&ul(C[kt],C,S,i)}const d=e.type;if(8&d)ul(t,n,e.child,i);else if(32&d){const _=H5(e,n);let C;for(;C=_();)i.push(C)}else if(16&d){const _=W5(n,e);if(Array.isArray(_))i.push(..._);else{const C=X4(n[zi]);ul(C[kt],C,_,i,!0)}}e=r?e.projectionNext:e.next}return i}class ca{get rootNodes(){const n=this._lView,e=n[kt];return ul(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ai]}set context(n){this._lView[ai]=n}get destroyed(){return 128==(128&this._lView[B1])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Hn];if(j2(n)){const e=n[_1],i=e?e.indexOf(this):-1;i>-1&&(O5(n,i),ys(e,i))}this._attachedToViewContainer=!1}Ms(this._lView[kt],this._lView)}onDestroy(n){V0(this._lView[kt],this._lView,null,n)}markForCheck(){H0(this._cdRefInjectingView||this._lView)}detach(){this._lView[B1]&=-65}reattach(){this._lView[B1]|=64}detectChanges(){k0(this._lView[kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $7(t,n){_0(t,n,n[U1],2,null,null)}(this._lView[kt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new rt(902,!1);this._appRef=n}}class qu extends ca{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;k0(n[kt],n,n[ai],!1)}checkNoChanges(){}get context(){return null}}class v8 extends Cc{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=xn(n);return new dl(e,this.ngModule)}}function mo(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class ih{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=Lo(i);const r=this.injector.get(n,En,i);return r!==En||e===En?r:this.parentInjector.get(n,e,i)}}class dl extends yf{get inputs(){return mo(this.componentDef.inputs)}get outputs(){return mo(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function Hf(t){return t.map(Tf).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,r){let s=(r=r||this.ngModule)instanceof As?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const d=s?new ih(n,s):n,_=d.get(wc,null);if(null===_)throw new rt(407,!1);const C=d.get(M0,null),S=_.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",F=i?function h8(t,n,e){return t.selectRootElement(n,e===U2.ShadowDom)}(S,i,this.componentDef.encapsulation):L6(S,V,function K3(t){const n=t.toLowerCase();return"svg"===n?H4:"math"===n?"math":null}(V)),W=this.componentDef.onPush?288:272,K=ku(0,null,null,1,0,null,null,null,null,null),ce=Dc(null,K,null,W,null,null,_,S,C,d,null);let be,Me;D(ce);try{const He=this.componentDef;let lt,$e=null;He.findHostDirectiveDefs?(lt=[],$e=new Map,He.findHostDirectiveDefs(He,lt,$e),lt.push(He)):lt=[He];const St=function rh(t,n){const e=t[kt],i=Dn;return t[i]=n,Ac(e,i,2,"#host",null)}(ce,F),h1=function ah(t,n,e,i,r,s,d,_){const C=r[kt];!function pg(t,n,e,i){for(const r of t)n.mergedAttrs=A1(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(ll(n,n.mergedAttrs,!0),null!==e&&R6(i,e,n))}(i,t,n,d);const S=s.createRenderer(n,e),V=Dc(r,Hu(e),null,e.onPush?32:16,r[t.index],t,s,S,_||null,null,null);return C.firstCreatePass&&Ou(C,t,i.length-1),T0(r,V),r[t.index]=V}(St,F,He,lt,ce,_,S);Me=Ql(K,Dn),F&&function sh(t,n,e,i){if(i)Dt(t,e,["ng-version",Cf.full]);else{const{attrs:r,classes:s}=function yu(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&n.push(s,t[++i]):8===r&&e.push(s);else{if(!Fr(r))break;r=s}i++}return{attrs:n,classes:e}}(n.selectors[0]);r&&Dt(t,e,r),s&&s.length>0&&X5(t,e,s.join(" "))}}(S,He,F,i),void 0!==e&&function mg(t,n,e){const i=t.projection=[];for(let r=0;r<n.length;r++){const s=e[r];i.push(null!=s?Array.from(s):null)}}(Me,this.ngContentSelectors,e),be=function oh(t,n,e,i,r,s){const d=Ii(),_=r[kt],C=_r(d,r);Wf(_,r,d,e,null,i);for(let V=0;V<e.length;V++)Fi(i3(r,_,d.directiveStart+V,d),r);Zf(_,r,d),C&&Fi(C,r);const S=i3(r,_,d.directiveStart+d.componentOffset,d);if(t[ai]=r[ai]=S,null!==s)for(const V of s)V(S,n);return Lu(_,d,t),S}(h1,He,lt,$e,ce,[Zu]),u8(K,ce,null)}finally{B()}return new R0(this.componentType,be,Go(Me,ce),ce,Me)}}class R0 extends jm{constructor(n,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new qu(r),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){const s=this._rootLView;$u(s[kt],s,r,n,e),H0(Fn(this._tNode.index,s))}}get injector(){return new O3(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Zu(){const t=Ii();Ce(mt()[kt],t)}function ht(t){let n=function Yu(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(T(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new rt(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);const d=t;d.inputs=a(t.inputs),d.declaredInputs=a(t.declaredInputs),d.outputs=a(t.outputs);const _=r.hostBindings;_&&h(t,_);const C=r.viewQuery,S=r.contentQueries;if(C&&c(t,C),S&&u(t,S),lr(t.inputs,r.inputs),lr(t.declaredInputs,r.declaredInputs),lr(t.outputs,r.outputs),T(r)&&r.data.animation){const V=t.data;V.animation=(V.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let d=0;d<s.length;d++){const _=s[d];_&&_.ngInherit&&_(t),_===ht&&(e=!1)}}n=Object.getPrototypeOf(n)}!function o(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=A1(r.hostAttrs,e=A1(e,r.hostAttrs))}}(i)}function a(t){return t===ea?{}:t===bn?[]:t}function c(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function u(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,s)=>{n(i,r,s),e(i,r,s)}:n}function h(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}function j(t){return!!me(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function me(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function de(t,n,e){return t[n]=e}function he(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function ke(t,n,e,i){const r=he(t,n,e);return he(t,n+1,i)||r}function We(t,n,e,i){const r=mt();return he(r,hc(),n)&&(ln(),Z2(Q(),r,t,n,e,i)),We}function Ke(t,n,e,i){return he(t,hc(),e)?n+x1(e)+i:j1}function nt(t,n,e,i,r,s){const _=ke(t,function Ya(){return v1.lFrame.bindingIndex}(),e,r);return Xa(2),_?n+x1(e)+i+x1(r)+s:j1}function xt(t,n,e,i,r,s,d,_){const C=mt(),S=ln(),V=t+Dn,F=S.firstCreatePass?function Vn(t,n,e,i,r,s,d,_,C){const S=n.consts,V=Ac(n,t,4,d||null,Fo(S,_));Fu(n,e,V,Fo(S,C)),Ce(n,V);const F=V.tView=ku(2,V,i,r,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,S);return null!==n.queries&&(n.queries.template(n,V),F.queries=n.queries.embeddedTView(V)),V}(V,S,C,n,e,i,r,s,d):S.data[V];G2(F,!1);const W=C[U1].createComment("");$3(S,C,W,F),Fi(W,C),T0(C,C[V]=Bu(W,C,W,F)),Wa(F)&&f8(S,C,F),null!=d&&Tu(C,F,_)}function gn(t){return Po(function b6(){return v1.lFrame.contextLView}(),Dn+t)}function Ze(t,n,e){const i=mt();return he(i,hc(),n)&&Sa(ln(),Q(),i,t,n,i[U1],e,!1),Ze}function Yn(t,n,e,i,r){const d=r?"class":"style";$u(t,e,n.inputs[d],d,i)}function le(t,n,e,i){const r=mt(),s=ln(),d=Dn+t,_=r[U1],C=s.firstCreatePass?function m2(t,n,e,i,r,s){const d=n.consts,C=Ac(n,t,2,i,Fo(d,r));return Fu(n,e,C,Fo(d,s)),null!==C.attrs&&ll(C,C.attrs,!1),null!==C.mergedAttrs&&ll(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(d,s,r,n,e,i):s.data[d],S=r[d]=L6(_,n,function ye(){return v1.lFrame.currentNamespace}()),V=Wa(C);return G2(C,!0),R6(_,S,C),32!=(32&C.flags)&&$3(s,r,S,C),0===function Et(){return v1.lFrame.elementDepthCount}()&&Fi(S,r),function y6(){v1.lFrame.elementDepthCount++}(),V&&(f8(s,r,C),Lu(s,C,r)),null!==i&&Tu(r,C),le}function pe(){let t=Ii();t3()?I4():(t=t.parent,G2(t,!1));const n=t;!function R3(){v1.lFrame.elementDepthCount--}();const e=ln();return e.firstCreatePass&&(Ce(e,t),Xc(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function ot(t){return 0!=(8&t.flags)}(n)&&Yn(e,n,mt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function ut(t){return 0!=(16&t.flags)}(n)&&Yn(e,n,mt(),n.stylesWithoutHost,!1),pe}function ft(t,n,e,i){return le(t,n,e,i),pe(),ft}function fn(t,n,e){const i=mt(),r=ln(),s=t+Dn,d=r.firstCreatePass?function dn(t,n,e,i,r){const s=n.consts,d=Fo(s,i),_=Ac(n,t,8,"ng-container",d);return null!==d&&ll(_,d,!0),Fu(n,e,_,Fo(s,r)),null!==n.queries&&n.queries.elementStart(n,_),_}(s,r,i,n,e):r.data[s];G2(d,!0);const _=i[s]=i[U1].createComment("");return $3(r,i,_,d),Fi(_,i),Wa(d)&&(f8(r,i,d),Lu(r,d,i)),null!=e&&Tu(i,d),fn}function Rn(){let t=Ii();const n=ln();return t3()?I4():(t=t.parent,G2(t,!1)),n.firstCreatePass&&(Ce(n,t),Xc(t)&&n.queries.elementEnd(t)),Rn}function Z1(t,n,e){return fn(t,n,e),Rn(),Z1}function Pn(){return mt()}function Ni(t){return!!t&&"function"==typeof t.then}const Oi=function t2(t){return!!t&&"function"==typeof t.subscribe};function $t(t,n,e,i){const r=mt(),s=ln(),d=Ii();return Q3(s,r,r[U1],d,t,n,i),$t}function Bi(t,n){const e=Ii(),i=mt(),r=ln();return Q3(r,i,nh(l(r.data),e,i),e,t,n),Bi}function Q3(t,n,e,i,r,s,d){const _=Wa(i),S=t.firstCreatePass&&th(t),V=n[ai],F=Gu(n);let W=!0;if(3&i.type||d){const be=_r(i,n),Me=d?d(be):be,He=F.length,lt=d?St=>d(Si(St[i.index])):i.index;let $e=null;if(!d&&_&&($e=function Ec(t,n,e,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const d=r[s];if(d===e&&r[s+1]===i){const _=n[Ir],C=r[s+2];return _.length>C?_[C]:null}"string"==typeof d&&(s+=2)}return null}(t,n,r,i.index)),null!==$e)($e.__ngLastListenerFn__||$e).__ngNextListenerFn__=s,$e.__ngLastListenerFn__=s,W=!1;else{s=hl(i,n,V,s,!1);const St=e.listen(Me,r,s);F.push(s,St),S&&S.push(r,lt,He,He+1)}}else s=hl(i,n,V,s,!1);const K=i.outputs;let ce;if(W&&null!==K&&(ce=K[r])){const be=ce.length;if(be)for(let Me=0;Me<be;Me+=2){const h1=n[ce[Me]][ce[Me+1]].subscribe(s),en=F.length;F.push(s,h1),S&&S.push(r,i.index,en,-(en+1))}}}function fl(t,n,e,i){try{return gr(6,n,e),!1!==e(i)}catch(r){return I0(t,r),!1}finally{gr(7,n,e)}}function hl(t,n,e,i,r){return function s(d){if(d===Function)return i;H0(t.componentOffset>-1?Fn(t.index,n):n);let C=fl(n,e,i,d),S=s.__ngNextListenerFn__;for(;S;)C=fl(n,e,S,d)&&C,S=S.__ngNextListenerFn__;return r&&!1===C&&(d.preventDefault(),d.returnValue=!1),C}}function M1(t=1){return function Y(t){return(v1.lFrame.contextLView=function J(t,n){for(;t>0;)n=n[S2],t--;return n}(t,v1.lFrame.contextLView))[ai]}(t)}function ch(t,n){let e=null;const i=function r8(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const s=n[r];if("*"!==s){if(null===i?i8(t,s,!0):Vf(i,s))return r}else e=r}return e}function Or(t){const n=mt()[zi][Ti];if(!n.projection){const i=n.projection=a0(t?t.length:1,null),r=i.slice();let s=n.child;for(;null!==s;){const d=t?ch(s,t):0;null!==d&&(r[d]?r[d].projectionNext=s:i[d]=s,r[d]=s),s=s.next}}}function Gn(t,n=0,e){const i=mt(),r=ln(),s=Ac(r,Dn+t,16,null,e||null);null===s.projection&&(s.projection=n),I4(),32!=(32&s.flags)&&function Z7(t,n,e){Y7(n[U1],0,n,e,k6(t,e,n),G5(e.parent||n[Ti],e,n))}(r,i,s)}function ks(t,n,e){return go(t,"",n,"",e),ks}function go(t,n,e,i,r){const s=mt(),d=Ke(s,n,e,i);return d!==j1&&Sa(ln(),Q(),s,t,d,s[U1],r,!1),go}function Y2(t,n){return t<<17|n<<2}function _o(t){return t>>17&32767}function Lc(t){return 2|t}function P0(t){return(131068&t)>>2}function gg(t,n){return-131069&t|n<<2}function _g(t){return 1|t}function eC(t,n,e,i,r){const s=t[e+1],d=null===n;let _=i?_o(s):P0(s),C=!1;for(;0!==_&&(!1===C||d);){const V=t[_+1];rU(t[_],n)&&(C=!0,t[_+1]=i?_g(V):Lc(V)),_=i?_o(V):P0(V)}C&&(t[e+1]=i?Lc(s):_g(s))}function rU(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&O4(t,n)>=0}const X2={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tC(t){return t.substring(X2.key,X2.keyEnd)}function aU(t){return t.substring(X2.value,X2.valueEnd)}function nC(t,n){const e=X2.textEnd;return e===n?-1:(n=X2.keyEnd=function cU(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,X2.key=n,e),C8(t,n,e))}function iC(t,n){const e=X2.textEnd;let i=X2.key=C8(t,n,e);return e===i?-1:(i=X2.keyEnd=function lU(t,n,e){let i;for(;n<e&&(45===(i=t.charCodeAt(n))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)n++;return n}(t,i,e),i=aC(t,i,e),i=X2.value=C8(t,i,e),i=X2.valueEnd=function uU(t,n,e){let i=-1,r=-1,s=-1,d=n,_=d;for(;d<e;){const C=t.charCodeAt(d++);if(59===C)return _;34===C||39===C?_=d=oC(t,C,d,e):n===d-4&&85===s&&82===r&&76===i&&40===C?_=d=oC(t,41,d,e):C>32&&(_=d),s=r,r=i,i=-33&C}return _}(t,i,e),aC(t,i,e))}function rC(t){X2.key=0,X2.keyEnd=0,X2.value=0,X2.valueEnd=0,X2.textEnd=t.length}function C8(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function aC(t,n,e,i){return(n=C8(t,n,e))<e&&n++,n}function oC(t,n,e,i){let r=-1,s=e;for(;s<i;){const d=t.charCodeAt(s++);if(d==n&&92!==r)return s;r=92==d&&92===r?0:d}throw new Error}function Tc(t,n,e){return kc(t,n,e,!1),Tc}function qn(t,n){return kc(t,n,null,!0),qn}function dU(t,n){for(let e=function sU(t){return rC(t),iC(t,C8(t,0,X2.textEnd))}(n);e>=0;e=iC(n,e))lC(t,tC(n),aU(n))}function m3(t,n){for(let e=function oU(t){return rC(t),nC(t,C8(t,0,X2.textEnd))}(n);e>=0;e=nC(n,e))yr(t,tC(n),!0)}function kc(t,n,e,i){const r=mt(),s=ln(),d=Xa(2);s.firstUpdatePass&&cC(s,t,d,i),n!==j1&&he(r,d,n)&&uC(s,s.data[ee()],r,r[U1],t,r[d+1]=function bU(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=vn(V2(t)))),t}(n,e),i,d)}function Ic(t,n,e,i){const r=ln(),s=Xa(2);r.firstUpdatePass&&cC(r,null,s,i);const d=mt();if(e!==j1&&he(d,s,e)){const _=r.data[ee()];if(fC(_,i)&&!sC(r,s)){let C=i?_.classesWithoutHost:_.stylesWithoutHost;null!==C&&(e=w1(C,e||"")),Yn(r,_,d,e,i)}else!function yU(t,n,e,i,r,s,d,_){r===j1&&(r=bn);let C=0,S=0,V=0<r.length?r[0]:null,F=0<s.length?s[0]:null;for(;null!==V||null!==F;){const W=C<r.length?r[C+1]:void 0,K=S<s.length?s[S+1]:void 0;let be,ce=null;V===F?(C+=2,S+=2,W!==K&&(ce=F,be=K)):null===F||null!==V&&V<F?(C+=2,ce=V):(S+=2,ce=F,be=K),null!==ce&&uC(t,n,e,i,ce,be,d,_),V=C<r.length?r[C]:null,F=S<s.length?s[S]:null}}(r,_,d,d[U1],d[s+1],d[s+1]=function _U(t,n,e){if(null==e||""===e)return bn;const i=[],r=V2(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,s)}}function sC(t,n){return n>=t.expandoStartIndex}function cC(t,n,e,i){const r=t.data;if(null===r[e+1]){const s=r[ee()],d=sC(t,e);fC(s,i)&&null===n&&!d&&(n=!1),n=function hU(t,n,e,i){const r=l(t);let s=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Qu(e=vg(null,t,n,e,i),n.attrs,i),s=null);else{const d=n.directiveStylingLast;if(-1===d||t[d]!==r)if(e=vg(r,t,n,e,i),null===s){let C=function pU(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==P0(i))return t[_o(i)]}(t,n,i);void 0!==C&&Array.isArray(C)&&(C=vg(null,t,n,C[1],i),C=Qu(C,n.attrs,i),function mU(t,n,e,i){t[_o(e?n.classBindings:n.styleBindings)]=i}(t,n,i,C))}else s=function gU(t,n,e){let i;const r=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<r;s++)i=Qu(i,t[s].hostAttrs,e);return Qu(i,n.attrs,e)}(t,n,i)}return void 0!==s&&(i?n.residualClasses=s:n.residualStyles=s),e}(r,s,n,i),function nU(t,n,e,i,r,s){let d=s?n.classBindings:n.styleBindings,_=_o(d),C=P0(d);t[i]=e;let V,S=!1;if(Array.isArray(e)?(V=e[1],(null===V||O4(e,V)>0)&&(S=!0)):V=e,r)if(0!==C){const W=_o(t[_+1]);t[i+1]=Y2(W,_),0!==W&&(t[W+1]=gg(t[W+1],i)),t[_+1]=function uh(t,n){return 131071&t|n<<17}(t[_+1],i)}else t[i+1]=Y2(_,0),0!==_&&(t[_+1]=gg(t[_+1],i)),_=i;else t[i+1]=Y2(C,0),0===_?_=i:t[C+1]=gg(t[C+1],i),C=i;S&&(t[i+1]=Lc(t[i+1])),eC(t,V,i,!0),eC(t,V,i,!1),function iU(t,n,e,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof n&&O4(s,n)>=0&&(e[i+1]=_g(e[i+1]))}(n,V,t,i,s),d=Y2(_,C),s?n.classBindings=d:n.styleBindings=d}(r,s,n,e,d,i)}}function vg(t,n,e,i,r){let s=null;const d=e.directiveEnd;let _=e.directiveStylingLast;for(-1===_?_=e.directiveStart:_++;_<d&&(s=n[_],i=Qu(i,s.hostAttrs,r),s!==t);)_++;return null!==t&&(e.directiveStylingLast=_),i}function Qu(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let s=0;s<n.length;s++){const d=n[s];"number"==typeof d?r=d:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yr(t,d,!!e||n[++s]))}return void 0===t?null:t}function lC(t,n,e){yr(t,n,V2(e))}function uC(t,n,e,i,r,s,d,_){if(!(3&n.type))return;const C=t.data,S=C[_+1],V=function tU(t){return 1==(1&t)}(S)?dC(C,n,e,r,P0(S),d):void 0;dh(V)||(dh(s)||function Ku(t){return 2==(2&t)}(S)&&(s=dC(C,null,e,r,_,d)),function X7(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let s=-1===i.indexOf("-")?void 0:Ji.DashCase;null==r?t.removeStyle(e,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ji.Important),t.setStyle(e,i,r,s))}}(i,d,k3(ee(),e),r,s))}function dC(t,n,e,i,r,s){const d=null===n;let _;for(;r>0;){const C=t[r],S=Array.isArray(C),V=S?C[1]:C,F=null===V;let W=e[r+1];W===j1&&(W=F?bn:void 0);let K=F?xa(W,i):V===i?W:void 0;if(S&&!dh(K)&&(K=xa(C,i)),dh(K)&&(_=K,d))return _;const ce=t[r+1];r=d?_o(ce):P0(ce)}if(null!==n){let C=s?n.residualClasses:n.residualStyles;null!=C&&(_=xa(C,i))}return _}function dh(t){return void 0!==t}function fC(t,n){return 0!=(t.flags&(n?8:16))}function Ue(t,n=""){const e=mt(),i=ln(),r=t+Dn,s=i.firstCreatePass?Ac(i,r,1,n,null):i.data[r],d=e[r]=function e2(t,n){return t.createText(n)}(e[U1],n);$3(i,e,d,s),G2(s,!1)}function K2(t){return n2("",t,""),K2}function n2(t,n,e){const i=mt(),r=Ke(i,t,n,e);return r!==j1&&sa(i,ee(),r),n2}function yg(t,n,e,i,r){const s=mt(),d=nt(s,t,n,e,i,r);return d!==j1&&sa(s,ee(),d),yg}function pl(t,n,e){const i=mt();return he(i,hc(),n)&&Sa(ln(),Q(),i,t,n,i[U1],e,!0),pl}function bg(t,n,e){const i=mt();if(he(i,hc(),n)){const s=ln(),d=Q();Sa(s,d,i,t,n,nh(l(s.data),d,i),e,!0)}return bg}const M8="en-US";let TC=M8;function wg(t,n,e,i,r){if(t=n1(t),Array.isArray(t))for(let s=0;s<t.length;s++)wg(t[s],n,e,i,r);else{const s=ln(),d=mt();let _=uo(t)?t:n1(t.provide),C=pu(t);const S=Ii(),V=1048575&S.providerIndexes,F=S.directiveStart,W=S.providerIndexes>>20;if(uo(t)||!t.multi){const K=new Be(C,r,q),ce=zg(_,n,r?V:V+W,F);-1===ce?(Ja(Ri(S,d),s,_),Mg(s,t,n.length),n.push(_),S.directiveStart++,S.directiveEnd++,r&&(S.providerIndexes+=1048576),e.push(K),d.push(K)):(e[ce]=K,d[ce]=K)}else{const K=zg(_,n,V+W,F),ce=zg(_,n,V,V+W),Me=ce>=0&&e[ce];if(r&&!Me||!r&&!(K>=0&&e[K])){Ja(Ri(S,d),s,_);const He=function Pj(t,n,e,i,r){const s=new Be(t,e,q);return s.multi=[],s.index=n,s.componentProviders=0,iw(s,r,i&&!e),s}(r?Rj:Ij,e.length,r,i,C);!r&&Me&&(e[ce].providerFactory=He),Mg(s,t,n.length,0),n.push(_),S.directiveStart++,S.directiveEnd++,r&&(S.providerIndexes+=1048576),e.push(He),d.push(He)}else Mg(s,t,K>-1?K:ce,iw(e[r?ce:K],C,!r&&i));!r&&i&&Me&&e[ce].componentProviders++}}}function Mg(t,n,e,i){const r=uo(n),s=function C0(t){return!!t.useClass}(n);if(r||s){const C=(s?n1(n.useClass):n).prototype.ngOnDestroy;if(C){const S=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const V=S.indexOf(e);-1===V?S.push(e,[i,C]):S[V+1].push(i,C)}else S.push(e,C)}}}function iw(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function zg(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function Ij(t,n,e,i){return Sg(this.multi,[])}function Rj(t,n,e,i){const r=this.multi;let s;if(this.providerFactory){const d=this.providerFactory.componentProviders,_=i3(e,e[kt],this.providerFactory.index,i);s=_.slice(0,d),Sg(r,s);for(let C=d;C<_.length;C++)s.push(_[C])}else s=[],Sg(r,s);return s}function Sg(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function E1(t,n=[]){return e=>{e.providersResolver=(i,r)=>function kj(t,n,e){const i=ln();if(i.firstCreatePass){const r=T(t);wg(e,i.data,i.blueprint,r,!0),wg(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class z8{}class rw{}class aw extends z8{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new v8(this);const i=z2(n);this._bootstrapComponents=zc(i.bootstrap),this._r3Injector=Cu(n,e,[{provide:z8,useValue:this},{provide:Cc,useValue:this.componentFactoryResolver}],vn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Dg extends rw{constructor(n){super(),this.moduleType=n}create(n){return new aw(this.moduleType,n)}}class Nj extends z8{constructor(n,e,i){super(),this.componentFactoryResolver=new v8(this),this.instance=null;const r=new _f([...n,{provide:z8,useValue:this},{provide:Cc,useValue:this.componentFactoryResolver}],e||Q6(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function gh(t,n,e=null){return new Nj(t,n,e).injector}let Oj=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const i=lu(0,e.type),r=i.length>0?gh([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=at({token:t,providedIn:"environment",factory:()=>new t(Ie(As))}),t})();function Ag(t){t.getStandaloneInjector=n=>n.get(Oj).getOrCreateStandaloneInjector(t)}function rd(t,n){const e=t[n];return e===j1?void 0:e}function pw(t,n,e,i,r,s,d){const _=n+e;return ke(t,_,r,s)?de(t,_+2,d?i.call(d,r,s):i(r,s)):rd(t,_+2)}function N0(t,n){const e=ln();let i;const r=t+Dn;e.firstCreatePass?(i=function rG(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=uc(i.type)),d=M2(q);try{const _=h2(!1),C=s();return h2(_),function On(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,mt(),r,C),C}finally{M2(d)}}function S8(t,n,e){const i=t+Dn,r=mt(),s=Po(r,i);return ad(r,i)?function hw(t,n,e,i,r,s){const d=n+e;return he(t,d,r)?de(t,d+1,s?i.call(s,r):i(r)):rd(t,d+1)}(r,D2(),n,s.transform,e,s):s.transform(e)}function ad(t,n){return t[kt].data[n].pure}function Vg(t){return n=>{setTimeout(t,void 0,n)}}const Gt=class cG extends Yt{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){let r=n,s=e||(()=>null),d=i;if(n&&"object"==typeof n){const C=n;r=C.next?.bind(C),s=C.error?.bind(C),d=C.complete?.bind(C)}this.__isAsync&&(s=Vg(s),r&&(r=Vg(r)),d&&(d=Vg(d)));const _=super.subscribe({next:r,error:s,complete:d});return n instanceof Ye&&n.add(_),_}};function lG(){return this._results[Symbol.iterator]()}class od{get changes(){return this._changes||(this._changes=new Gt)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=od.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=lG)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=function Ai(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function mc(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=n[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cr=(()=>{class t{}return t.__NG_ELEMENT_ID__=fG,t})();const uG=Cr,dG=class extends uG{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n,e){const i=this._declarationTContainer.tView,r=Dc(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null,e||null);r[ms]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[pr];return null!==d&&(r[pr]=d.createEmbeddedView(i)),u8(i,r,n),new ca(r)}};function fG(){return _h(Ii(),mt())}function _h(t,n){return 4&t.type?new dG(n,t,Go(t,n)):null}let Q2=(()=>{class t{}return t.__NG_ELEMENT_ID__=hG,t})();function hG(){return xw(Ii(),mt())}const pG=Q2,yw=class extends pG{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Go(this._hostTNode,this._hostLView)}get injector(){return new O3(this._hostTNode,this._hostLView)}get parentInjector(){const n=Qi(this._hostTNode,this._hostLView);if(mn(n)){const e=Mn(n,this._hostLView),i=un(n);return new O3(e[kt].data[i+8],e)}return new O3(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=bw(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-d2}createEmbeddedView(n,e,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const d=n.createEmbeddedView(e||{},s);return this.insert(d,r),d}createComponent(n,e,i,r,s){const d=n&&!function vs(t){return"function"==typeof t}(n);let _;if(d)_=e;else{const F=e||{};_=F.index,i=F.injector,r=F.projectableNodes,s=F.environmentInjector||F.ngModuleRef}const C=d?n:new dl(xn(n)),S=i||this.parentInjector;if(!s&&null==C.ngModule){const W=(d?S:this.parentInjector).get(As,null);W&&(s=W)}const V=C.create(S,r,void 0,s);return this.insert(V.hostView,_),V}insert(n,e){const i=n._lView,r=i[kt];if(function _5(t){return j2(t[Hn])}(i)){const V=this.indexOf(n);if(-1!==V)this.detach(V);else{const F=i[Hn],W=new yw(F,F[Ti],F[Hn]);W.detach(W.indexOf(n))}}const s=this._adjustIndex(e),d=this._lContainer;!function zm(t,n,e,i){const r=d2+i,s=e.length;i>0&&(e[r-1][hr]=n),i<s-d2?(n[hr]=e[r],gc(e,d2+i,n)):(e.push(n),n[hr]=null),n[Hn]=e;const d=n[ms];null!==d&&e!==d&&function F5(t,n){const e=t[ya];n[zi]!==n[Hn][Hn][zi]&&(t[ia]=!0),null===e?t[ya]=[n]:e.push(n)}(d,n);const _=n[pr];null!==_&&_.insertView(t),n[B1]|=64}(r,i,d,s);const _=Z5(s,d),C=i[U1],S=Q4(C,d[Yi]);return null!==S&&function R5(t,n,e,i,r,s){i[kr]=r,i[Ti]=n,_0(t,i,e,1,r,s)}(r,d[Ti],C,i,S,_),n.attachToViewContainerRef(),gc(Lg(d),s,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=bw(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=O5(this._lContainer,e);i&&(ys(Lg(this._lContainer),e),Ms(i[kt],i))}detach(n){const e=this._adjustIndex(n,-1),i=O5(this._lContainer,e);return i&&null!=ys(Lg(this._lContainer),e)?new ca(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function bw(t){return t[_1]}function Lg(t){return t[_1]||(t[_1]=[])}function xw(t,n){let e;const i=n[t.index];if(j2(i))e=i;else{let r;if(8&t.type)r=Si(i);else{const s=n[U1];r=s.createComment("");const d=_r(t,n);j3(s,Q4(s,d),r,function W7(t,n){return t.nextSibling(n)}(s,d),!1)}n[t.index]=e=Bu(i,n,r,t),T0(n,e)}return new yw(e,t,n)}class Tg{constructor(n){this.queryList=n,this.matches=null}clone(){return new Tg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hg{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const d=e.getByIndex(s);r.push(this.queries[d.indexInDeclarationView].clone())}return new Hg(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==Sw(n,e).matches&&this.queries[e].setDirty()}}class Cw{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class kg{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(n,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new kg(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Ig{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new Ig(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(n,e,mG(e,s)),this.matchTNodeWithReadOption(n,e,Oo(e,n,s,!1,!1))}else i===Cr?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Oo(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Nt||r===Q2||r===Cr&&4&e.type)this.addMatch(e.index,-2);else{const s=Oo(e,n,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function mG(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function _G(t,n,e,i){return-1===e?function gG(t,n){return 11&t.type?Go(t,n):4&t.type?_h(t,n):null}(n,t):-2===e?function vG(t,n,e){return e===Nt?Go(n,t):e===Cr?_h(n,t):e===Q2?xw(n,t):void 0}(t,n,i):i3(t,t[kt],e,n)}function ww(t,n,e,i){const r=n[pr].queries[i];if(null===r.matches){const s=t.data,d=e.matches,_=[];for(let C=0;C<d.length;C+=2){const S=d[C];_.push(S<0?null:_G(n,s[S],d[C+1],e.metadata.read))}r.matches=_}return r.matches}function Rg(t,n,e,i){const r=t.queries.getByIndex(e),s=r.matches;if(null!==s){const d=ww(t,n,r,e);for(let _=0;_<s.length;_+=2){const C=s[_];if(C>0)i.push(d[_/2]);else{const S=s[_+1],V=n[-C];for(let F=d2;F<V.length;F++){const W=V[F];W[ms]===W[Hn]&&Rg(W[kt],W,S,i)}if(null!==V[ya]){const F=V[ya];for(let W=0;W<F.length;W++){const K=F[W];Rg(K[kt],K,S,i)}}}}}return i}function k1(t){const n=mt(),e=ln(),i=f();v(i+1);const r=Sw(e,i);if(t.dirty&&function g5(t){return 4==(4&t[B1])}(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?Rg(e,n,i,[]):ww(e,n,r,i);t.reset(s,Gm),t.notifyOnChanges()}return!0}return!1}function Xn(t,n,e){const i=ln();i.firstCreatePass&&(zw(i,new Cw(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),Mw(i,mt(),n)}function g2(t,n,e,i){const r=ln();if(r.firstCreatePass){const s=Ii();zw(r,new Cw(n,e,i),s.index),function bG(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}Mw(r,mt(),e)}function I1(){return function yG(t,n){return t[pr].queries[n].queryList}(mt(),f())}function Mw(t,n,e){const i=new od(4==(4&e));V0(t,n,i,i.destroy),null===n[pr]&&(n[pr]=new Hg),n[pr].queries.push(new Tg(i))}function zw(t,n,e){null===t.queries&&(t.queries=new kg),t.queries.track(new Ig(n,e))}function Sw(t,n){return t.queries.getByIndex(n)}function Pg(t,n){return _h(t,n)}function yh(...t){}const cd=new vt("Application Initializer");let bh=(()=>{class t{constructor(e){this.appInits=e,this.resolve=yh,this.reject=yh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Ni(s))e.push(s);else if(Oi(s)){const d=new Promise((_,C)=>{s.subscribe({complete:_,error:C})});e.push(d)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ie(cd,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ld=new vt("AppId",{providedIn:"root",factory:function Gw(){return`${jg()}${jg()}${jg()}`}});function jg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $w=new vt("Platform Initializer"),vo=new vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),J3=new vt("AnimationModuleType");let OG=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const g3=new vt("LocaleId",{providedIn:"root",factory:()=>r1(g3,Qt.Optional|Qt.SkipSelf)||function BG(){return typeof $localize<"u"&&$localize.locale||M8}()});class jG{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let qw=(()=>{class t{compileModuleSync(e){return new Dg(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=zc(z2(e).declarations).reduce((d,_)=>{const C=xn(_);return C&&d.push(new dl(C)),d},[]);return new jG(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const qG=(()=>Promise.resolve(0))();function Gg(t){typeof Zone>"u"?qG.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class d1{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gt(!1),this.onMicrotaskEmpty=new Gt(!1),this.onStable=new Gt(!1),this.onError=new Gt(!1),typeof Zone>"u")throw new rt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function WG(){let t=Tn.requestAnimationFrame,n=Tn.cancelAnimationFrame;if(typeof Zone<"u"&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function XG(t){const n=()=>{!function YG(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Tn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,qg(t),t.isCheckStableRunning=!0,$g(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),qg(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,d,_)=>{try{return Yw(t),e.invokeTask(r,s,d,_)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&n(),Xw(t)}},onInvoke:(e,i,r,s,d,_,C)=>{try{return Yw(t),e.invoke(r,s,d,_,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),Xw(t)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,qg(t),$g(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!d1.isInAngularZone())throw new rt(909,!1)}static assertNotInAngularZone(){if(d1.isInAngularZone())throw new rt(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+r,n,ZG,yh,yh);try{return s.runTask(d,e,i)}finally{s.cancelTask(d)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const ZG={};function $g(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qg(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Yw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Xw(t){t._nesting--,$g(t)}class KG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gt,this.onMicrotaskEmpty=new Gt,this.onStable=new Gt,this.onError=new Gt}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}const Kw=new vt(""),xh=new vt("");let Yg,Wg=(()=>{class t{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yg||(function QG(t){Yg=t}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{d1.assertNotInAngularZone(),Gg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gg(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ie(d1),Ie(Zg),Ie(xh))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Zg=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Yg?.findTestabilityInTree(this,e,i)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const e4=!1;let ml=null;const Qw=new vt("AllowMultipleToken"),Xg=new vt("PlatformDestroyListeners"),Kg=new vt("appBootstrapListener");class Jw{constructor(n,e){this.name=n,this.token=e}}function tM(t,n,e=[]){const i=`Platform: ${n}`,r=new vt(i);return(s=[])=>{let d=Qg();if(!d||d.injector.get(Qw,!1)){const _=[...e,...s,{provide:r,useValue:!0}];t?t(_):function t$(t){if(ml&&!ml.get(Qw,!1))throw new rt(400,!1);ml=t;const n=t.get(iM);(function eM(t){const n=t.get($w,null);n&&n.forEach(e=>e())})(t)}(function nM(t=[],n){return Nr.create({name:n,providers:[{provide:K6,useValue:"platform"},{provide:Xg,useValue:new Set([()=>ml=null])},...t]})}(_,i))}return function i$(t){const n=Qg();if(!n)throw new rt(401,!1);return n}()}}function Qg(){return ml?.get(iM)??null}let iM=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function aM(t,n){let e;return e="noop"===t?new KG:("zone.js"===t?void 0:t)||new d1(n),e}(i?.ngZone,function rM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:d1,useValue:r}];return r.run(()=>{const d=Nr.create({providers:s,parent:this.injector,name:e.moduleType.name}),_=e.create(d),C=_.injector.get(oa,null);if(!C)throw new rt(402,!1);return r.runOutsideAngular(()=>{const S=r.onError.subscribe({next:V=>{C.handleError(V)}});_.onDestroy(()=>{Ch(this._modules,_),S.unsubscribe()})}),function oM(t,n,e){try{const i=e();return Ni(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(C,r,()=>{const S=_.injector.get(bh);return S.runInitializers(),S.donePromise.then(()=>(function HC(t){wi(t,"Expected localeId to be defined"),"string"==typeof t&&(TC=t.toLowerCase().replace(/_/g,"-"))}(_.injector.get(g3,M8)||M8),this._moduleDoBootstrap(_),_))})})}bootstrapModule(e,i=[]){const r=sM({},i);return function JG(t,n,e){const i=new Dg(e);return Promise.resolve(i)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const i=e.injector.get(O0);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new rt(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(Xg,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ie(Nr))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function sM(t,n){return Array.isArray(n)?n.reduce(sM,t):{...t,...n}}let O0=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,i,r){this._zone=e,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new c1(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),d=new c1(_=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{d1.assertNotInAngularZone(),Gg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{d1.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=Ci(s,d.pipe(function bt(t={}){const{connector:n=(()=>new Yt),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let d,_,C,S=0,V=!1,F=!1;const W=()=>{_?.unsubscribe(),_=void 0},K=()=>{W(),d=C=void 0,V=F=!1},ce=()=>{const be=d;K(),be?.unsubscribe()};return X1((be,Me)=>{S++,!F&&!V&&W();const He=C=C??n();Me.add(()=>{S--,0===S&&!F&&!V&&(_=D1(ce,r))}),He.subscribe(Me),!d&&S>0&&(d=new qr({next:lt=>He.next(lt),error:lt=>{F=!0,W(),_=D1(K,e,lt),He.error(lt)},complete:()=>{V=!0,W(),_=D1(K,i),He.complete()}}),G(be).subscribe(d))})(s)}}()))}bootstrap(e,i){const r=e instanceof yf;if(!this._injector.get(bh).done){!r&&function va(t){const n=xn(t)||mi(t)||u2(t);return null!==n&&n.standalone}(e);throw new rt(405,e4)}let d;d=r?e:this._injector.get(Cc).resolveComponentFactory(e),this.componentTypes.push(d.componentType);const _=function e$(t){return t.isBoundToModule}(d)?void 0:this._injector.get(z8),S=d.create(Nr.NULL,[],i||d.selector,_),V=S.location.nativeElement,F=S.injector.get(Kw,null);return F?.registerApplication(V),S.onDestroy(()=>{this.detachView(S.hostView),Ch(this.components,S),F?.unregisterApplication(V)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new rt(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Ch(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(Kg,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ch(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new rt(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)(Ie(d1),Ie(As),Ie(oa))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ch(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let Ur=(()=>{class t{}return t.__NG_ELEMENT_ID__=o$,t})();function o$(t){return function s$(t,n,e){if(qa(t)&&!e){const i=Fn(t.index,n);return new ca(i,i)}return 47&t.type?new ca(n[zi],n):null}(Ii(),mt(),16==(16&t))}class fM{constructor(){}supports(n){return j(n)}create(n){return new h$(n)}}const f$=(t,n)=>n;class h${constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||f$}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const d=!i||e&&e.currentIndex<pM(i,r,s)?e:i,_=pM(d,r,s),C=d.currentIndex;if(d===i)r--,i=i._nextRemoved;else if(e=e._next,null==d.previousIndex)r++;else{s||(s=[]);const S=_-r,V=C-r;if(S!=V){for(let W=0;W<S;W++){const K=W<s.length?s[W]:s[W]=0,ce=K+W;V<=ce&&ce<S&&(s[W]=K+1)}s[d.previousIndex]=V-S}}_!==C&&n(d,_,C)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!j(n))throw new rt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,s,d,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let _=0;_<this.length;_++)s=n[_],d=this._trackByFn(_,s),null!==e&&Object.is(e.trackById,d)?(i&&(e=this._verifyReinsertion(e,s,d,_)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,d,_),i=!0),e=e._next}else r=0,function ae(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,_=>{d=this._trackByFn(r,_),null!==e&&Object.is(e.trackById,d)?(i&&(e=this._verifyReinsertion(e,_,d,r)),Object.is(e.item,_)||this._addIdentityChange(e,_)):(e=this._mismatch(e,_,d,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let s;return null===n?s=this._itTail:(s=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,s,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,s,r)):n=this._addAfter(new p$(e,i),s,r),n}_verifyReinsertion(n,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?n=this._reinsertAfter(s,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,s=n._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new hM),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hM),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class p${constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class m${constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class hM{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new m$,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pM(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class mM{constructor(){}supports(n){return n instanceof Map||me(n)}create(){return new g$}}class g${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||me(n)))throw new rt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const s=r._prev,d=r._next;return s&&(s._next=d),d&&(d._prev=s),r._next=null,r._prev=null,r}const i=new _$(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class _${constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gM(){return new _3([new fM])}let _3=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||gM()),deps:[[t,new xs,new wa]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new rt(901,!1)}}return t.\u0275prov=at({token:t,providedIn:"root",factory:gM}),t})();function _M(){return new U0([new mM])}let U0=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||_M()),deps:[[t,new xs,new wa]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new rt(901,!1)}}return t.\u0275prov=at({token:t,providedIn:"root",factory:_M}),t})();const b$=tM(null,"core",[]);let x$=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Ie(O0))},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})();function E8(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let i_=null;function t4(){return i_}class M${}const Y1=new vt("DocumentToken");let r_=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return function z$(){return Ie(vM)}()},providedIn:"platform"}),t})();const S$=new vt("Location Initialized");let vM=(()=>{class t extends r_{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return t4().getBaseHref(this._doc)}onPopState(e){const i=t4().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=t4().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){yM()?this._history.pushState(e,i,r):this._location.hash=r}replaceState(e,i,r){yM()?this._history.replaceState(e,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1))},t.\u0275prov=at({token:t,factory:function(){return function D$(){return new vM(Ie(Y1))}()},providedIn:"platform"}),t})();function yM(){return!!window.history.pushState}function a_(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function bM(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function n4(t){return t&&"?"!==t[0]?"?"+t:t}let j0=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return r1(CM)},providedIn:"root"}),t})();const xM=new vt("appBaseHref");let CM=(()=>{class t extends j0{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??r1(Y1).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return a_(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+n4(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const d=this.prepareExternalUrl(r+n4(s));this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){const d=this.prepareExternalUrl(r+n4(s));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(Ie(r_),Ie(xM,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A$=(()=>{class t extends j0{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=a_(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+n4(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+n4(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(Ie(r_),Ie(xM,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),zh=(()=>{class t{constructor(e){this._subject=new Gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function L$(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(bM(wM(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+n4(i))}normalize(e){return t.stripTrailingSlash(function V$(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,wM(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+n4(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+n4(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=n4,t.joinWithSlash=a_,t.stripTrailingSlash=bM,t.\u0275fac=function(e){return new(e||t)(Ie(j0))},t.\u0275prov=at({token:t,factory:function(){return function E$(){return new zh(Ie(j0))}()},providedIn:"root"}),t})();function wM(t){return t.replace(/\/index.html$/,"")}function TM(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(s)}return null}const m_=/\s+/,HM=[];let G0=(()=>{class t{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=HM,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(m_):HM}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(m_):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,Boolean(e[i]));this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(m_).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(q(_3),q(U0),q(Nt),q(fo))},t.\u0275dir=je({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class mq{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gl=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,d)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new mq(r.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===s?void 0:s);else if(null!==s){const _=i.get(s);i.move(_,d),RM(_,r)}});for(let r=0,s=i.length;r<s;r++){const _=i.get(r).context;_.index=r,_.count=s,_.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{RM(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Cr),q(_3))},t.\u0275dir=je({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function RM(t,n){t.context.$implicit=n.item}let $0=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new _q,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){PM("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){PM("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Cr))},t.\u0275dir=je({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class _q{constructor(){this.$implicit=null,this.ngIf=null}}function PM(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${vn(n)}'.`)}class g_{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let V8=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),t})(),Ih=(()=>{class t{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new g_(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Cr),q(V8,9))},t.\u0275dir=je({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),t})(),FM=(()=>{class t{constructor(e,i,r){r._addDefault(new g_(e,i))}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Cr),q(V8,9))},t.\u0275dir=je({type:t,selectors:[["","ngSwitchDefault",""]],standalone:!0}),t})(),OM=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:d}=this;this._viewRef=i.createEmbeddedView(r,s,d?{injector:d}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(q(Q2))},t.\u0275dir=je({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[wn]}),t})();let v_=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw function Fc(t,n){return new rt(2100,!1)}();return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Mi({name:"uppercase",type:t,pure:!0,standalone:!0}),t})(),_l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})();const UM="browser",Oq="server";function r4(t){return t===UM}function L8(t){return t===Oq}let jq=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>new Gq(Ie(Y1),window)}),t})();class Gq{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function $q(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const d=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(d)return d}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=jM(this.window.history)||jM(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function jM(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class GM{}class vW extends M${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class w_ extends vW{static makeCurrent(){!function w$(t){i_||(i_=t)}(new w_)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function yW(){return hd=hd||document.querySelector("base"),hd?hd.getAttribute("href"):null}();return null==e?null:function bW(t){Fh=Fh||document.createElement("a"),Fh.setAttribute("href",t);const n=Fh.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){hd=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return TM(document.cookie,n)}}let Fh,hd=null;const YM=new vt("TRANSITION_ID"),CW=[{provide:cd,useFactory:function xW(t,n,e){return()=>{e.get(bh).donePromise.then(()=>{const i=t4(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[YM,Y1,Nr],multi:!0}];let MW=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Nh=new vt("EventManagerPlugins");let Oh=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const d=r[s];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Ie(Nh),Ie(d1))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class XM{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=t4().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let KM=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,i){const r=this.usageCount;let s=r.get(e)??0;return s+=i,s>0?r.set(e,s):r.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),pd=(()=>{class t extends KM{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.forEach(s=>s.remove()),i.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,i){const r=this.doc.createElement("style");r.textContent=i,e.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const M_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},z_=/%COMP%/g,ez=new vt("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function tz(t,n){return n.flat(100).map(e=>e.replace(z_,t))}function nz(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let Bh=(()=>{class t{constructor(e,i,r,s){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new S_(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(e,i);return r instanceof az?r.applyToHost(e):r instanceof D_&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const d=this.eventManager,_=this.sharedStylesHost,C=this.removeStylesOnCompDestory;switch(i.encapsulation){case U2.Emulated:s=new az(d,_,i,this.appId,C);break;case U2.ShadowDom:return new LW(d,_,e,i);default:s=new D_(d,_,i,C)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Ie(Oh),Ie(pd),Ie(ld),Ie(ez))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class S_{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(M_[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){(rz(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(rz(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const s=M_[r];s?n.setAttributeNS(s,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=M_[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Ji.DashCase|Ji.Important)?n.style.setProperty(e,i,r&Ji.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Ji.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,nz(i)):this.eventManager.addEventListener(n,e,nz(i))}}function rz(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class LW extends S_{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=tz(r.id,r.styles);for(const d of s){const _=document.createElement("style");_.textContent=d,this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class D_ extends S_{constructor(n,e,i,r,s=i.id){super(n),this.sharedStylesHost=e,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=tz(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class az extends D_{constructor(n,e,i,r,s){const d=r+"-"+i.id;super(n,e,i,s,d),this.contentAttr=function AW(t){return"_ngcontent-%COMP%".replace(z_,t)}(d),this.hostAttr=function EW(t){return"_nghost-%COMP%".replace(z_,t)}(d)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let TW=(()=>{class t extends XM{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const oz=["alt","control","meta","shift"],HW={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kW={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let IW=(()=>{class t extends XM{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const s=t.parseEventName(i),d=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>t4().onAndCancel(e,s.domEventName,d))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let d="",_=i.indexOf("code");if(_>-1&&(i.splice(_,1),d="code."),oz.forEach(S=>{const V=i.indexOf(S);V>-1&&(i.splice(V,1),d+=S+".")}),d+=s,0!=i.length||0===s.length)return null;const C={};return C.domEventName=r,C.fullKey=d,C}static matchEventFullKeyCode(e,i){let r=HW[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),oz.forEach(d=>{d!==r&&(0,kW[d])(e)&&(s+=d+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{t.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const NW=tM(b$,"browser",[{provide:vo,useValue:UM},{provide:$w,useValue:function RW(){w_.makeCurrent()},multi:!0},{provide:Y1,useFactory:function FW(){return function P6(t){l3=t}(document),document},deps:[]}]),lz=new vt(""),uz=[{provide:xh,useClass:class wW{addToWindow(n){Tn.getAngularTestability=(i,r=!0)=>{const s=n.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Tn.getAllAngularTestabilities=()=>n.getAllTestabilities(),Tn.getAllAngularRootElements=()=>n.getAllRootElements(),Tn.frameworkStabilizers||(Tn.frameworkStabilizers=[]),Tn.frameworkStabilizers.push(i=>{const r=Tn.getAllAngularTestabilities();let s=r.length,d=!1;const _=function(C){d=d||C,s--,0==s&&i(d)};r.forEach(function(C){C.whenStable(_)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?t4().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:Kw,useClass:Wg,deps:[d1,Zg,xh]},{provide:Wg,useClass:Wg,deps:[d1,Zg,xh]}],dz=[{provide:K6,useValue:"root"},{provide:oa,useFactory:function PW(){return new oa},deps:[]},{provide:Nh,useClass:TW,multi:!0,deps:[Y1,d1,vo]},{provide:Nh,useClass:IW,multi:!0,deps:[Y1]},{provide:Bh,useClass:Bh,deps:[Oh,pd,ld,ez]},{provide:wc,useExisting:Bh},{provide:KM,useExisting:pd},{provide:pd,useClass:pd,deps:[Y1]},{provide:Oh,useClass:Oh,deps:[Nh,d1]},{provide:GM,useClass:MW,deps:[]},[]];let fz=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:ld,useValue:e.appId},{provide:YM,useExisting:ld},CW]}}}return t.\u0275fac=function(e){return new(e||t)(Ie(lz,12))},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[...dz,...uz],imports:[_l,x$]}),t})(),hz=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1))},t.\u0275prov=at({token:t,factory:function(e){let i=null;return i=e?new e:function BW(){return new hz(Ie(Y1))}(),i},providedIn:"root"}),t})();typeof window<"u"&&window;let Uh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(e){let i=null;return i=e?new(e||t):Ie(gz),i},providedIn:"root"}),t})(),gz=(()=>{class t extends Uh{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case Wn.NONE:return i;case Wn.HTML:return Ss(i,"HTML")?V2(i):df(this._doc,String(i)).toString();case Wn.STYLE:return Ss(i,"Style")?V2(i):i;case Wn.SCRIPT:if(Ss(i,"Script"))return V2(i);throw new Error("unsafe value used in a script context");case Wn.URL:return Ss(i,"URL")?V2(i):B6(String(i));case Wn.RESOURCE_URL:if(Ss(i,"ResourceURL"))return V2(i);throw new Error(`unsafe value used in a resource URL context (see ${hi})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${hi})`)}}bypassSecurityTrustHtml(e){return function F6(t){return new Em(t)}(e)}bypassSecurityTrustStyle(e){return function tf(t){return new Vm(t)}(e)}bypassSecurityTrustScript(e){return function N6(t){return new Lm(t)}(e)}bypassSecurityTrustUrl(e){return function O6(t){return new J5(t)}(e)}bypassSecurityTrustResourceUrl(e){return function v0(t){return new Tm(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1))},t.\u0275prov=at({token:t,factory:function(e){let i=null;return i=e?new e:function qW(t){return new gz(t.get(Y1))}(Ie(Nr)),i},providedIn:"root"}),t})();function Jt(...t){return Jn(t,nn(t))}class bo extends Yt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}const jh=Qe(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:WW}=Array,{getPrototypeOf:ZW,prototype:YW,keys:XW}=Object;function _z(t){if(1===t.length){const n=t[0];if(WW(n))return{args:n,keys:null};if(function KW(t){return t&&"object"==typeof t&&ZW(t)===YW}(n)){const e=XW(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:QW}=Array;function V_(t){return t1(n=>function JW(t,n){return QW(n)?t(...n):t(n)}(t,n))}function vz(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function L_(...t){const n=nn(t),e=Wt(t),{args:i,keys:r}=_z(t);if(0===i.length)return Jn([],n);const s=new c1(function eZ(t,n,e=b2){return i=>{yz(n,()=>{const{length:r}=t,s=new Array(r);let d=r,_=r;for(let C=0;C<r;C++)yz(n,()=>{const S=Jn(t[C],n);let V=!1;S.subscribe(V1(i,F=>{s[C]=F,V||(V=!0,_--),_||i.next(e(s.slice()))},()=>{--d||i.complete()}))},i)},i)}}(i,n,r?d=>vz(r,d):b2));return e?s.pipe(V_(e)):s}function yz(t,n,e){t?it(e,t,n):n()}function T8(...t){return function tZ(){return Tt(1)}()(Jn(t,nn(t)))}function md(t){return new c1(n=>{G(t()).subscribe(n)})}function H8(t,n){const e=S1(t)?t:()=>t,i=r=>r.error(e());return new c1(n?r=>n.schedule(i,0,r):i)}function T_(){return X1((t,n)=>{let e=null;t._refCount++;const i=V1(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class Gh extends c1{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Ar(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Ye;const e=this.getSubject();n.add(this.source.subscribe(V1(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Ye.EMPTY)}return n}refCount(){return T_()(this)}}function la(t,n){return X1((e,i)=>{let r=null,s=0,d=!1;const _=()=>d&&!r&&i.complete();e.subscribe(V1(i,C=>{r?.unsubscribe();let S=0;const V=s++;G(t(C,V)).subscribe(r=V1(i,F=>i.next(n?n(C,F,V,S++):F),()=>{r=null,_()}))},()=>{d=!0,_()}))})}function Ei(t){return t<=0?()=>At:X1((n,e)=>{let i=0;n.subscribe(V1(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function yl(...t){const n=nn(t);return X1((e,i)=>{(n?T8(t,e,n):T8(t,e)).subscribe(i)})}function _i(t,n){return X1((e,i)=>{let r=0;e.subscribe(V1(i,s=>t.call(n,s,r++)&&i.next(s)))})}function $h(t){return X1((n,e)=>{let i=!1;n.subscribe(V1(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function bz(t=nZ){return X1((n,e)=>{let i=!1;n.subscribe(V1(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function nZ(){return new jh}function bl(t,n){const e=arguments.length>=2;return i=>i.pipe(t?_i((r,s)=>t(r,s,i)):b2,Ei(1),e?$h(n):bz(()=>new jh))}function xl(t,n){return S1(n)?tt(t,n,1):tt(t,1)}function er(t,n,e){const i=S1(t)||n||e?{next:t,error:n,complete:e}:t;return i?X1((r,s)=>{var d;null===(d=i.subscribe)||void 0===d||d.call(i);let _=!0;r.subscribe(V1(s,C=>{var S;null===(S=i.next)||void 0===S||S.call(i,C),s.next(C)},()=>{var C;_=!1,null===(C=i.complete)||void 0===C||C.call(i),s.complete()},C=>{var S;_=!1,null===(S=i.error)||void 0===S||S.call(i,C),s.error(C)},()=>{var C,S;_&&(null===(C=i.unsubscribe)||void 0===C||C.call(i)),null===(S=i.finalize)||void 0===S||S.call(i)}))}):b2}function Cl(t){return X1((n,e)=>{let s,i=null,r=!1;i=n.subscribe(V1(e,void 0,void 0,d=>{s=G(t(d,Cl(t)(n))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function xz(t,n){return X1(function iZ(t,n,e,i,r){return(s,d)=>{let _=e,C=n,S=0;s.subscribe(V1(d,V=>{const F=S++;C=_?t(C,V,F):(_=!0,V),i&&d.next(C)},r&&(()=>{_&&d.next(C),d.complete()})))}}(t,n,arguments.length>=2,!0))}function H_(t){return t<=0?()=>At:X1((n,e)=>{let i=[];n.subscribe(V1(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Cz(t,n){const e=arguments.length>=2;return i=>i.pipe(t?_i((r,s)=>t(r,s,i)):b2,H_(1),e?$h(n):bz(()=>new jh))}function wz(t,n=!1){return X1((e,i)=>{let r=0;e.subscribe(V1(i,s=>{const d=t(s,r++);(d||n)&&i.next(s),!d&&i.complete()}))})}function Mz(t){return t1(()=>t)}function k_(t){return X1((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}const J1="primary",gd=Symbol("RouteTitle");class rZ{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function k8(t){return new rZ(t)}function aZ(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const d=i[s],_=t[s];if(d.startsWith(":"))r[d.substring(1)]=_;else if(d!==_.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function v3(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!zz(t[r],n[r]))return!1;return!0}function zz(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,s)=>i[s]===r)}return t===n}function Sz(t){return Array.prototype.concat.apply([],t)}function Dz(t){return t.length>0?t[t.length-1]:null}function jr(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function wl(t){return Oi(t)?t:Ni(t)?Jn(Promise.resolve(t)):Jt(t)}const qh=!1,sZ={exact:function Vz(t,n,e){if(!q0(t.segments,n.segments)||!Wh(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!Vz(t.children[i],n.children[i],e))return!1;return!0},subset:Lz},Az={exact:function cZ(t,n){return v3(t,n)},subset:function lZ(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>zz(t[e],n[e]))},ignored:()=>!0};function Ez(t,n,e){return sZ[e.paths](t.root,n.root,e.matrixParams)&&Az[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function Lz(t,n,e){return Tz(t,n,n.segments,e)}function Tz(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!q0(r,e)||n.hasChildren()||!Wh(r,e,i))}if(t.segments.length===e.length){if(!q0(t.segments,e)||!Wh(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!Lz(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),s=e.slice(t.segments.length);return!!(q0(t.segments,r)&&Wh(t.segments,r,i)&&t.children[J1])&&Tz(t.children[J1],n,s,i)}}function Wh(t,n,e){return n.every((i,r)=>Az[e](t[r].parameters,i.parameters))}class Ml{constructor(n=new _n([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=k8(this.queryParams)),this._queryParamMap}toString(){return fZ.serialize(this)}}class _n{constructor(n,e){this.segments=n,this.children=e,this.parent=null,jr(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zh(this)}}class _d{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=k8(this.parameters)),this._parameterMap}toString(){return Iz(this)}}function q0(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let vd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return new I_},providedIn:"root"}),t})();class I_{parse(n){const e=new xZ(n);return new Ml(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${yd(n.root,!0)}`,i=function mZ(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${Yh(e)}=${Yh(r)}`).join("&"):`${Yh(e)}=${Yh(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function hZ(t){return encodeURI(t)}(n.fragment)}`:""}`}}const fZ=new I_;function Zh(t){return t.segments.map(n=>Iz(n)).join("/")}function yd(t,n){if(!t.hasChildren())return Zh(t);if(n){const e=t.children[J1]?yd(t.children[J1],!1):"",i=[];return jr(t.children,(r,s)=>{s!==J1&&i.push(`${s}:${yd(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function dZ(t,n){let e=[];return jr(t.children,(i,r)=>{r===J1&&(e=e.concat(n(i,r)))}),jr(t.children,(i,r)=>{r!==J1&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===J1?[yd(t.children[J1],!1)]:[`${r}:${yd(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[J1]?`${Zh(t)}/${e[0]}`:`${Zh(t)}/(${e.join("//")})`}}function Hz(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yh(t){return Hz(t).replace(/%3B/gi,";")}function R_(t){return Hz(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xh(t){return decodeURIComponent(t)}function kz(t){return Xh(t.replace(/\+/g,"%20"))}function Iz(t){return`${R_(t.path)}${function pZ(t){return Object.keys(t).map(n=>`;${R_(n)}=${R_(t[n])}`).join("")}(t.parameters)}`}const gZ=/^[^\/()?;=#]+/;function Kh(t){const n=t.match(gZ);return n?n[0]:""}const _Z=/^[^=?&#]+/,yZ=/^[^&#]+/;class xZ{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _n([],{}):new _n([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[J1]=new _n(n,e)),i}parseSegment(){const n=Kh(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new rt(4009,qh);return this.capture(n),new _d(Xh(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=Kh(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Kh(this.remaining);r&&(i=r,this.capture(i))}n[Xh(e)]=Xh(i)}parseQueryParam(n){const e=function vZ(t){const n=t.match(_Z);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const d=function bZ(t){const n=t.match(yZ);return n?n[0]:""}(this.remaining);d&&(i=d,this.capture(i))}const r=kz(e),s=kz(i);if(n.hasOwnProperty(r)){let d=n[r];Array.isArray(d)||(d=[d],n[r]=d),d.push(s)}else n[r]=s}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Kh(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new rt(4010,qh);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=J1);const d=this.parseChildren();e[s]=1===Object.keys(d).length?d[J1]:new _n([],d),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new rt(4011,qh)}}function P_(t){return t.segments.length>0?new _n([],{[J1]:t}):t}function Qh(t){const n={};for(const i of Object.keys(t.children)){const s=Qh(t.children[i]);(s.segments.length>0||s.hasChildren())&&(n[i]=s)}return function CZ(t){if(1===t.numberOfChildren&&t.children[J1]){const n=t.children[J1];return new _n(t.segments.concat(n.segments),n.children)}return t}(new _n(t.segments,n))}function W0(t){return t instanceof Ml}const F_=!1;function wZ(t,n,e,i,r){if(0===e.length)return I8(n.root,n.root,n.root,i,r);const s=function Oz(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Nz(!0,0,t);let n=0,e=!1;const i=t.reduce((r,s,d)=>{if("object"==typeof s&&null!=s){if(s.outlets){const _={};return jr(s.outlets,(C,S)=>{_[S]="string"==typeof C?C.split("/"):C}),[...r,{outlets:_}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===d?(s.split("/").forEach((_,C)=>{0==C&&"."===_||(0==C&&""===_?e=!0:".."===_?n++:""!=_&&r.push(_))}),r):[...r,s]},[]);return new Nz(e,n,i)}(e);return s.toRoot()?I8(n.root,n.root,new _n([],{}),i,r):function d(C){const S=function zZ(t,n,e,i){if(t.isAbsolute)return new R8(n.root,!0,0);if(-1===i)return new R8(e,e===n.root,0);return function Bz(t,n,e){let i=t,r=n,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new rt(4005,F_&&"Invalid number of '../'");r=i.segments.length}return new R8(i,!1,r-s)}(e,i+(bd(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,n,t.snapshot?._urlSegment,C),V=S.processChildren?P8(S.segmentGroup,S.index,s.commands):N_(S.segmentGroup,S.index,s.commands);return I8(n.root,S.segmentGroup,V,i,r)}(t.snapshot?._lastPathIndex)}function bd(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function xd(t){return"object"==typeof t&&null!=t&&t.outlets}function I8(t,n,e,i,r){let d,s={};i&&jr(i,(C,S)=>{s[S]=Array.isArray(C)?C.map(V=>`${V}`):`${C}`}),d=t===n?e:Fz(t,n,e);const _=P_(Qh(d));return new Ml(_,s,r)}function Fz(t,n,e){const i={};return jr(t.children,(r,s)=>{i[s]=r===n?e:Fz(r,n,e)}),new _n(t.segments,i)}class Nz{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&bd(i[0]))throw new rt(4003,F_&&"Root segment cannot have matrix parameters");const r=i.find(xd);if(r&&r!==Dz(i))throw new rt(4004,F_&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R8{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function N_(t,n,e){if(t||(t=new _n([],{})),0===t.segments.length&&t.hasChildren())return P8(t,n,e);const i=function DZ(t,n,e){let i=0,r=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return s;const d=t.segments[r],_=e[i];if(xd(_))break;const C=`${_}`,S=i<e.length-1?e[i+1]:null;if(r>0&&void 0===C)break;if(C&&S&&"object"==typeof S&&void 0===S.outlets){if(!jz(C,S,d))return s;i+=2}else{if(!jz(C,{},d))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new _n(t.segments.slice(0,i.pathIndex),{});return s.children[J1]=new _n(t.segments.slice(i.pathIndex),t.children),P8(s,0,r)}return i.match&&0===r.length?new _n(t.segments,{}):i.match&&!t.hasChildren()?O_(t,n,e):i.match?P8(t,0,r):O_(t,n,e)}function P8(t,n,e){if(0===e.length)return new _n(t.segments,{});{const i=function SZ(t){return xd(t[0])?t[0].outlets:{[J1]:t}}(e),r={};if(!i[J1]&&t.children[J1]&&1===t.numberOfChildren&&0===t.children[J1].segments.length){const s=P8(t.children[J1],n,e);return new _n(t.segments,s.children)}return jr(i,(s,d)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[d]=N_(t.children[d],n,s))}),jr(t.children,(s,d)=>{void 0===i[d]&&(r[d]=s)}),new _n(t.segments,r)}}function O_(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const s=e[r];if(xd(s)){const C=AZ(s.outlets);return new _n(i,C)}if(0===r&&bd(e[0])){i.push(new _d(t.segments[n].path,Uz(e[0]))),r++;continue}const d=xd(s)?s.outlets[J1]:`${s}`,_=r<e.length-1?e[r+1]:null;d&&_&&bd(_)?(i.push(new _d(d,Uz(_))),r+=2):(i.push(new _d(d,{})),r++)}return new _n(i,{})}function AZ(t){const n={};return jr(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=O_(new _n([],{}),0,e))}),n}function Uz(t){const n={};return jr(t,(e,i)=>n[i]=`${e}`),n}function jz(t,n,e){return t==e.path&&v3(n,e.parameters)}const Cd="imperative";class y3{constructor(n,e){this.id=n,this.url=e}}class B_ extends y3{constructor(n,e,i="imperative",r=null){super(n,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Z0 extends y3{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jh extends y3{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class e9 extends y3{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=16}}class U_ extends y3{constructor(n,e,i,r){super(n,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class EZ extends y3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VZ extends y3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LZ extends y3{constructor(n,e,i,r,s){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class TZ extends y3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HZ extends y3{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kZ{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class IZ{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RZ{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PZ{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FZ{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NZ{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gz{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let UZ=(()=>{class t{createUrlTree(e,i,r,s,d,_){return wZ(e||i.root,r,s,d,_)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),GZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(n){return UZ.\u0275fac(n)},providedIn:"root"}),t})();class $z{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=j_(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=j_(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=G_(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return G_(n,this._root).map(e=>e.value)}}function j_(t,n){if(t===n.value)return n;for(const e of n.children){const i=j_(t,e);if(i)return i}return null}function G_(t,n){if(t===n.value)return[n];for(const e of n.children){const i=G_(t,e);if(i.length)return i.unshift(n),i}return[]}class a4{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function F8(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class qz extends $z{constructor(n,e){super(n),this.snapshot=e,$_(this,n)}toString(){return this.snapshot.toString()}}function Wz(t,n){const e=function $Z(t,n){const d=new t9([],{},{},"",{},J1,n,null,t.root,-1,{});return new Yz("",new a4(d,[]))}(t,n),i=new bo([new _d("",{})]),r=new bo({}),s=new bo({}),d=new bo({}),_=new bo(""),C=new zl(i,r,d,_,s,J1,n,e.root);return C.snapshot=e.root,new qz(new a4(C,[]),e)}class zl{constructor(n,e,i,r,s,d,_,C){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=d,this.component=_,this.title=this.data?.pipe(t1(S=>S[gd]))??Jt(void 0),this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(t1(n=>k8(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(t1(n=>k8(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zz(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function qZ(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class t9{get title(){return this.data?.[gd]}constructor(n,e,i,r,s,d,_,C,S,V,F){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=d,this.component=_,this.routeConfig=C,this._urlSegment=S,this._lastPathIndex=V,this._resolve=F}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=k8(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=k8(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yz extends $z{constructor(n,e){super(e),this.url=n,$_(this,e)}toString(){return Xz(this._root)}}function $_(t,n){n.value._routerState=t,n.children.forEach(e=>$_(t,e))}function Xz(t){const n=t.children.length>0?` { ${t.children.map(Xz).join(", ")} } `:"";return`${t.value}${n}`}function q_(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,v3(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),v3(n.params,e.params)||t.params.next(e.params),function oZ(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!v3(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),v3(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function W_(t,n){const e=v3(t.params,n.params)&&function uZ(t,n){return q0(t,n)&&t.every((e,i)=>v3(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||W_(t.parent,n.parent))}function wd(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function ZZ(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return wd(t,i,r);return wd(t,i)})}(t,n,e);return new a4(i,r)}{if(t.shouldAttach(n.value)){const s=t.retrieve(n.value);if(null!==s){const d=s.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(_=>wd(t,_)),d}}const i=function YZ(t){return new zl(new bo(t.url),new bo(t.params),new bo(t.queryParams),new bo(t.fragment),new bo(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(s=>wd(t,s));return new a4(i,r)}}const Z_="ngNavigationCancelingError";function Kz(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=W0(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=Qz(!1,0,n);return r.url=e,r.navigationBehaviorOptions=i,r}function Qz(t,n,e){const i=new Error("NavigationCancelingError: "+(t||""));return i[Z_]=!0,i.cancellationCode=n,e&&(i.url=e),i}function Jz(t){return eS(t)&&W0(t.url)}function eS(t){return t&&t[Z_]}class XZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Md,this.attachRef=null}}let Md=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new XZ,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const n9=!1;let i9=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=J1,this.activateEvents=new Gt,this.deactivateEvents=new Gt,this.attachEvents=new Gt,this.detachEvents=new Gt,this.parentContexts=r1(Md),this.location=r1(Q2),this.changeDetector=r1(Ur),this.environmentInjector=r1(As)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new rt(4012,n9);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new rt(4012,n9);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new rt(4012,n9);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new rt(4013,n9);this._activatedRoute=e;const r=this.location,d=e.snapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,C=new KZ(e,_,r.injector);if(i&&function QZ(t){return!!t.resolveComponentFactory}(i)){const S=i.resolveComponentFactory(d);this.activated=r.createComponent(S,r.length,C)}else this.activated=r.createComponent(d,{index:r.length,injector:C,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wn]}),t})();class KZ{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===zl?this.route:n===Md?this.childContexts:this.parent.get(n,e)}}let Y_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ag],decls:1,vars:0,template:function(e,i){1&e&&ft(0,"router-outlet")},dependencies:[i9],encapsulation:2}),t})();function tS(t,n){return t.providers&&!t._injector&&(t._injector=gh(t.providers,n,`Route: ${t.path}`)),t._injector??n}function K_(t){const n=t.children&&t.children.map(K_),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==J1&&(e.component=Y_),e}function Ps(t){return t.outlet||J1}function nS(t,n){const e=t.filter(i=>Ps(i)===n);return e.push(...t.filter(i=>Ps(i)!==n)),e}function zd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class iY{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),q_(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=F8(e);n.children.forEach(s=>{const d=s.value.outlet;this.deactivateRoutes(s,r[d],i),delete r[d]}),jr(r,(s,d)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(n,e,i){const r=n.value,s=e?e.value:null;if(r===s)if(r.component){const d=i.getContext(r.outlet);d&&this.deactivateChildRoutes(n,e,d.children)}else this.deactivateChildRoutes(n,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,s=F8(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],r);if(i&&i.outlet){const d=i.outlet.detach(),_=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:_})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,s=F8(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=F8(e);n.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new NZ(s.value.snapshot))}),n.children.length&&this.forwardEvent(new PZ(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,s=e?e.value:null;if(q_(r),r===s)if(r.component){const d=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,d.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const d=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const _=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),d.children.onOutletReAttached(_.contexts),d.attachRef=_.componentRef,d.route=_.route.value,d.outlet&&d.outlet.attach(_.componentRef,_.route.value),q_(_.route.value),this.activateChildRoutes(n,null,d.children)}else{const _=zd(r.snapshot),C=_?.get(Cc)??null;d.attachRef=null,d.route=r,d.resolver=C,d.injector=_,d.outlet&&d.outlet.activateWith(r,d.injector),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,i)}}class iS{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class r9{constructor(n,e){this.component=n,this.route=e}}function rY(t,n,e){const i=t._root;return Sd(i,n?n._root:null,e,[i.value])}function N8(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function ss(t){return null!==os(t)}(t)?n.get(t):t:i}function Sd(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=F8(n);return t.children.forEach(d=>{(function oY(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,d=n?n.value:null,_=e?e.getContext(t.value.outlet):null;if(d&&s.routeConfig===d.routeConfig){const C=function sY(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!q0(t.url,n.url);case"pathParamsOrQueryParamsChange":return!q0(t.url,n.url)||!v3(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!W_(t,n)||!v3(t.queryParams,n.queryParams);default:return!W_(t,n)}}(d,s,s.routeConfig.runGuardsAndResolvers);C?r.canActivateChecks.push(new iS(i)):(s.data=d.data,s._resolvedData=d._resolvedData),Sd(t,n,s.component?_?_.children:null:e,i,r),C&&_&&_.outlet&&_.outlet.isActivated&&r.canDeactivateChecks.push(new r9(_.outlet.component,d))}else d&&Dd(n,_,r),r.canActivateChecks.push(new iS(i)),Sd(t,null,s.component?_?_.children:null:e,i,r)})(d,s[d.value.outlet],e,i.concat([d.value]),r),delete s[d.value.outlet]}),jr(s,(d,_)=>Dd(d,e.getContext(_),r)),r}function Dd(t,n,e){const i=F8(t),r=t.value;jr(i,(s,d)=>{Dd(s,r.component?n?n.children.getContext(d):null:n,e)}),e.canDeactivateChecks.push(new r9(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}function Ad(t){return"function"==typeof t}function Q_(t){return t instanceof jh||"EmptyError"===t?.name}const a9=Symbol("INITIAL_VALUE");function O8(){return la(t=>L_(t.map(n=>n.pipe(Ei(1),yl(a9)))).pipe(t1(n=>{for(const e of n)if(!0!==e){if(e===a9)return a9;if(!1===e||e instanceof Ml)return e}return!0}),_i(n=>n!==a9),Ei(1)))}function rS(t){return function Dr(...t){return F2(t)}(er(n=>{if(W0(n))throw Kz(0,n)}),t1(n=>!0===n))}const J_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aS(t,n,e,i,r){const s=ev(t,n,e);return s.matched?function MY(t,n,e,i){const r=n.canMatch;return r&&0!==r.length?Jt(r.map(d=>{const _=N8(d,t);return wl(function hY(t){return t&&Ad(t.canMatch)}(_)?_.canMatch(n,e):t.runInContext(()=>_(n,e)))})).pipe(O8(),rS()):Jt(!0)}(i=tS(n,i),n,e).pipe(t1(d=>!0===d?s:{...J_})):Jt(s)}function ev(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...J_}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(n.matcher||aZ)(e,t,n);if(!r)return{...J_};const s={};jr(r.posParams,(_,C)=>{s[C]=_.path});const d=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:d,positionalParamSegments:r.posParams??{}}}function o9(t,n,e,i){if(e.length>0&&function DY(t,n,e){return e.some(i=>s9(t,n,i)&&Ps(i)!==J1)}(t,e,i)){const s=new _n(n,function SY(t,n,e,i){const r={};r[J1]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const s of e)if(""===s.path&&Ps(s)!==J1){const d=new _n([],{});d._sourceSegment=t,d._segmentIndexShift=n.length,r[Ps(s)]=d}return r}(t,n,i,new _n(e,t.children)));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function AY(t,n,e){return e.some(i=>s9(t,n,i))}(t,e,i)){const s=new _n(t.segments,function zY(t,n,e,i,r){const s={};for(const d of i)if(s9(t,e,d)&&!r[Ps(d)]){const _=new _n([],{});_._sourceSegment=t,_._segmentIndexShift=n.length,s[Ps(d)]=_}return{...r,...s}}(t,n,e,i,t.children));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:e}}const r=new _n(t.segments,t.children);return r._sourceSegment=t,r._segmentIndexShift=n.length,{segmentGroup:r,slicedSegments:e}}function s9(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function oS(t,n,e,i){return!!(Ps(t)===i||i!==J1&&s9(n,e,t))&&("**"===t.path||ev(n,t,e).matched)}function sS(t,n,e){return 0===n.length&&!t.children[e]}const c9=!1;class l9{constructor(n){this.segmentGroup=n||null}}class cS{constructor(n){this.urlTree=n}}function Ed(t){return H8(new l9(t))}function lS(t){return H8(new cS(t))}class TY{constructor(n,e,i,r,s){this.injector=n,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const n=o9(this.urlTree.root,[],[],this.config).segmentGroup,e=new _n(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,J1).pipe(t1(s=>this.createUrlTree(Qh(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Cl(s=>{if(s instanceof cS)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof l9?this.noMatchError(s):s}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,J1).pipe(t1(r=>this.createUrlTree(Qh(r),n.queryParams,n.fragment))).pipe(Cl(r=>{throw r instanceof l9?this.noMatchError(r):r}))}noMatchError(n){return new rt(4002,c9)}createUrlTree(n,e,i){const r=P_(n);return new Ml(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(t1(s=>new _n([],s))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Jn(r).pipe(xl(s=>{const d=i.children[s],_=nS(e,s);return this.expandSegmentGroup(n,_,d,s).pipe(t1(C=>({segment:C,outlet:s})))}),xz((s,d)=>(s[d.outlet]=d.segment,s),{}),Cz())}expandSegment(n,e,i,r,s,d){return Jn(i).pipe(xl(_=>this.expandSegmentAgainstRoute(n,e,i,_,r,s,d).pipe(Cl(S=>{if(S instanceof l9)return Jt(null);throw S}))),bl(_=>!!_),Cl((_,C)=>{if(Q_(_))return sS(e,r,s)?Jt(new _n([],{})):Ed(e);throw _}))}expandSegmentAgainstRoute(n,e,i,r,s,d,_){return oS(r,e,s,d)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,s,d):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d):Ed(e):Ed(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,d):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?lS(s):this.lineralizeSegments(i,s).pipe(tt(d=>{const _=new _n(d,{});return this.expandSegment(n,_,e,d,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,s,d){const{matched:_,consumedSegments:C,remainingSegments:S,positionalParamSegments:V}=ev(e,r,s);if(!_)return Ed(e);const F=this.applyRedirectCommands(C,r.redirectTo,V);return r.redirectTo.startsWith("/")?lS(F):this.lineralizeSegments(r,F).pipe(tt(W=>this.expandSegment(n,e,i,W.concat(S),d,!1)))}matchSegmentAgainstRoute(n,e,i,r,s){return"**"===i.path?(n=tS(i,n),i.loadChildren?(i._loadedRoutes?Jt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(n,i)).pipe(t1(_=>(i._loadedRoutes=_.routes,i._loadedInjector=_.injector,new _n(r,{})))):Jt(new _n(r,{}))):aS(e,i,r,n).pipe(la(({matched:d,consumedSegments:_,remainingSegments:C})=>d?this.getChildConfig(n=i._injector??n,i,r).pipe(tt(V=>{const F=V.injector??n,W=V.routes,{segmentGroup:K,slicedSegments:ce}=o9(e,_,C,W),be=new _n(K.segments,K.children);if(0===ce.length&&be.hasChildren())return this.expandChildren(F,W,be).pipe(t1($e=>new _n(_,$e)));if(0===W.length&&0===ce.length)return Jt(new _n(_,{}));const Me=Ps(i)===s;return this.expandSegment(F,be,W,ce,Me?J1:s,!0).pipe(t1(lt=>new _n(_.concat(lt.segments),lt.children)))})):Ed(e)))}getChildConfig(n,e,i){return e.children?Jt({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?Jt({routes:e._loadedRoutes,injector:e._loadedInjector}):function wY(t,n,e,i){const r=n.canLoad;return void 0===r||0===r.length?Jt(!0):Jt(r.map(d=>{const _=N8(d,t);return wl(function lY(t){return t&&Ad(t.canLoad)}(_)?_.canLoad(n,e):t.runInContext(()=>_(n,e)))})).pipe(O8(),rS())}(n,e,i).pipe(tt(r=>r?this.configLoader.loadChildren(n,e).pipe(er(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function VY(t){return H8(Qz(c9,3))}())):Jt({routes:[],injector:n})}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Jt(i);if(r.numberOfChildren>1||!r.children[J1])return n.redirectTo,H8(new rt(4e3,c9));r=r.children[J1]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreateUrlTree(n,e,i,r){const s=this.createSegmentGroup(n,e.root,i,r);return new Ml(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return jr(n,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const _=r.substring(1);i[s]=e[_]}else i[s]=r}),i}createSegmentGroup(n,e,i,r){const s=this.createSegments(n,e.segments,i,r);let d={};return jr(e.children,(_,C)=>{d[C]=this.createSegmentGroup(n,_,i,r)}),new _n(s,d)}createSegments(n,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,r):this.findOrReturn(s,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new rt(4001,c9);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}class kY{}class PY{constructor(n,e,i,r,s,d,_){this.injector=n,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=d,this.urlSerializer=_}recognize(){const n=o9(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,J1).pipe(t1(e=>{if(null===e)return null;const i=new t9([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},J1,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new a4(i,e),s=new Yz(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(n){const e=n.value,i=Zz(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,r)}processChildren(n,e,i){return Jn(Object.keys(i.children)).pipe(xl(r=>{const s=i.children[r],d=nS(e,r);return this.processSegmentGroup(n,d,s,r)}),xz((r,s)=>r&&s?(r.push(...s),r):null),wz(r=>null!==r),$h(null),Cz(),t1(r=>{if(null===r)return null;const s=dS(r);return function FY(t){t.sort((n,e)=>n.value.outlet===J1?-1:e.value.outlet===J1?1:n.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(n,e,i,r,s){return Jn(e).pipe(xl(d=>this.processSegmentAgainstRoute(d._injector??n,d,i,r,s)),bl(d=>!!d),Cl(d=>{if(Q_(d))return sS(i,r,s)?Jt([]):Jt(null);throw d}))}processSegmentAgainstRoute(n,e,i,r,s){if(e.redirectTo||!oS(e,i,r,s))return Jt(null);let d;if("**"===e.path){const _=r.length>0?Dz(r).parameters:{},C=hS(i)+r.length;d=Jt({snapshot:new t9(r,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pS(e),Ps(e),e.component??e._loadedComponent??null,e,fS(i),C,mS(e)),consumedSegments:[],remainingSegments:[]})}else d=aS(i,e,r,n).pipe(t1(({matched:_,consumedSegments:C,remainingSegments:S,parameters:V})=>{if(!_)return null;const F=hS(i)+C.length;return{snapshot:new t9(C,V,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pS(e),Ps(e),e.component??e._loadedComponent??null,e,fS(i),F,mS(e)),consumedSegments:C,remainingSegments:S}}));return d.pipe(la(_=>{if(null===_)return Jt(null);const{snapshot:C,consumedSegments:S,remainingSegments:V}=_;n=e._injector??n;const F=e._loadedInjector??n,W=function NY(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:K,slicedSegments:ce}=o9(i,S,V,W.filter(Me=>void 0===Me.redirectTo));if(0===ce.length&&K.hasChildren())return this.processChildren(F,W,K).pipe(t1(Me=>null===Me?null:[new a4(C,Me)]));if(0===W.length&&0===ce.length)return Jt([new a4(C,[])]);const be=Ps(e)===s;return this.processSegment(F,W,K,ce,be?J1:s).pipe(t1(Me=>null===Me?null:[new a4(C,Me)]))}))}}function OY(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function dS(t){const n=[],e=new Set;for(const i of t){if(!OY(i)){n.push(i);continue}const r=n.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=dS(i.children);n.push(new a4(i.value,r))}return n.filter(i=>!e.has(i))}function fS(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function hS(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function pS(t){return t.data||{}}function mS(t){return t.resolve||{}}function gS(t){return"string"==typeof t.title||null===t.title}function tv(t){return la(n=>{const e=t(n);return e?Jn(e).pipe(t1(()=>n)):Jt(n)})}const B8=new vt("ROUTES");let nv=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=r1(qw)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Jt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=wl(e.loadComponent()).pipe(t1(vS),er(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),k_(()=>{this.componentLoaders.delete(e)})),r=new Gh(i,()=>new Yt).pipe(T_());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Jt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(t1(_=>{this.onLoadEndListener&&this.onLoadEndListener(i);let C,S,V=!1;Array.isArray(_)?S=_:(C=_.create(e).injector,S=Sz(C.get(B8,[],Qt.Self|Qt.Optional)));return{routes:S.map(K_),injector:C}}),k_(()=>{this.childrenLoaders.delete(i)})),d=new Gh(s,()=>new Yt).pipe(T_());return this.childrenLoaders.set(i,d),d}loadModuleFactoryOrRoutes(e){return wl(e()).pipe(t1(vS),tt(i=>i instanceof rw||Array.isArray(i)?Jt(i):Jn(this.compiler.compileModuleAsync(i))))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function vS(t){return function ZY(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let d9=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Yt,this.configLoader=r1(nv),this.environmentInjector=r1(As),this.urlSerializer=r1(vd),this.rootContexts=r1(Md),this.navigationId=0,this.afterPreactivation=()=>Jt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new IZ(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new kZ(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new bo({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Cd,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_i(i=>0!==i.id),t1(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),la(i=>{let r=!1,s=!1;return Jt(i).pipe(er(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),la(d=>{const _=e.browserUrlTree.toString(),C=!e.navigated||d.extractedUrl.toString()!==_||_!==e.currentUrlTree.toString();if(!C&&"reload"!==(d.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const V="";return this.events.next(new e9(d.id,e.serializeUrl(i.rawUrl),V,0)),e.rawUrlTree=d.rawUrl,d.resolve(null),At}if(e.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return yS(d.source)&&(e.browserUrlTree=d.extractedUrl),Jt(d).pipe(la(V=>{const F=this.transitions?.getValue();return this.events.next(new B_(V.id,this.urlSerializer.serialize(V.extractedUrl),V.source,V.restoredState)),F!==this.transitions?.getValue()?At:Promise.resolve(V)}),function HY(t,n,e,i){return la(r=>function LY(t,n,e,i,r){return new TY(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(t1(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),er(V=>{this.currentNavigation={...this.currentNavigation,finalUrl:V.urlAfterRedirects},i.urlAfterRedirects=V.urlAfterRedirects}),function UY(t,n,e,i,r){return tt(s=>function RY(t,n,e,i,r,s,d="emptyOnly"){return new PY(t,n,e,i,r,d,s).recognize().pipe(la(_=>null===_?function IY(t){return new c1(n=>n.error(t))}(new kY):Jt(_)))}(t,n,e,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(t1(d=>({...s,targetSnapshot:d}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),er(V=>{if(i.targetSnapshot=V.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!V.extras.skipLocationChange){const W=e.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl);e.setBrowserUrl(W,V)}e.browserUrlTree=V.urlAfterRedirects}const F=new EZ(V.id,this.urlSerializer.serialize(V.extractedUrl),this.urlSerializer.serialize(V.urlAfterRedirects),V.targetSnapshot);this.events.next(F)}));if(C&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:V,extractedUrl:F,source:W,restoredState:K,extras:ce}=d,be=new B_(V,this.urlSerializer.serialize(F),W,K);this.events.next(be);const Me=Wz(F,this.rootComponentType).snapshot;return Jt(i={...d,targetSnapshot:Me,urlAfterRedirects:F,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}{const V="";return this.events.next(new e9(d.id,e.serializeUrl(i.extractedUrl),V,1)),e.rawUrlTree=d.rawUrl,d.resolve(null),At}}),er(d=>{const _=new VZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(_)}),t1(d=>i={...d,guards:rY(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function mY(t,n){return tt(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:d}}=e;return 0===d.length&&0===s.length?Jt({...e,guardsResult:!0}):function gY(t,n,e,i){return Jn(t).pipe(tt(r=>function CY(t,n,e,i,r){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?Jt(s.map(_=>{const C=zd(n)??r,S=N8(_,C);return wl(function fY(t){return t&&Ad(t.canDeactivate)}(S)?S.canDeactivate(t,n,e,i):C.runInContext(()=>S(t,n,e,i))).pipe(bl())})).pipe(O8()):Jt(!0)}(r.component,r.route,e,n,i)),bl(r=>!0!==r,!0))}(d,i,r,t).pipe(tt(_=>_&&function cY(t){return"boolean"==typeof t}(_)?function _Y(t,n,e,i){return Jn(n).pipe(xl(r=>T8(function yY(t,n){return null!==t&&n&&n(new RZ(t)),Jt(!0)}(r.route.parent,i),function vY(t,n){return null!==t&&n&&n(new FZ(t)),Jt(!0)}(r.route,i),function xY(t,n,e){const i=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(d=>function aY(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(d)).filter(d=>null!==d).map(d=>md(()=>Jt(d.guards.map(C=>{const S=zd(d.node)??e,V=N8(C,S);return wl(function dY(t){return t&&Ad(t.canActivateChild)}(V)?V.canActivateChild(i,t):S.runInContext(()=>V(i,t))).pipe(bl())})).pipe(O8())));return Jt(s).pipe(O8())}(t,r.path,e),function bY(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Jt(!0);const r=i.map(s=>md(()=>{const d=zd(n)??e,_=N8(s,d);return wl(function uY(t){return t&&Ad(t.canActivate)}(_)?_.canActivate(n,t):d.runInContext(()=>_(n,t))).pipe(bl())}));return Jt(r).pipe(O8())}(t,r.route,e))),bl(r=>!0!==r,!0))}(i,s,t,n):Jt(_)),t1(_=>({...e,guardsResult:_})))})}(this.environmentInjector,d=>this.events.next(d)),er(d=>{if(i.guardsResult=d.guardsResult,W0(d.guardsResult))throw Kz(0,d.guardsResult);const _=new LZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(_)}),_i(d=>!!d.guardsResult||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),tv(d=>{if(d.guards.canActivateChecks.length)return Jt(d).pipe(er(_=>{const C=new TZ(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(C)}),la(_=>{let C=!1;return Jt(_).pipe(function jY(t,n){return tt(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Jt(e);let s=0;return Jn(r).pipe(xl(d=>function GY(t,n,e,i){const r=t.routeConfig,s=t._resolve;return void 0!==r?.title&&!gS(r)&&(s[gd]=r.title),function $Y(t,n,e,i){const r=function qY(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return Jt({});const s={};return Jn(r).pipe(tt(d=>function WY(t,n,e,i){const r=zd(n)??i,s=N8(t,r);return wl(s.resolve?s.resolve(n,e):r.runInContext(()=>s(n,e)))}(t[d],n,e,i).pipe(bl(),er(_=>{s[d]=_}))),H_(1),Mz(s),Cl(d=>Q_(d)?At:H8(d)))}(s,t,n,i).pipe(t1(d=>(t._resolvedData=d,t.data=Zz(t,e).resolve,r&&gS(r)&&(t.data[gd]=r.title),null)))}(d.route,i,t,n)),er(()=>s++),H_(1),tt(d=>s===r.length?Jt(e):At))})}(e.paramsInheritanceStrategy,this.environmentInjector),er({next:()=>C=!0,complete:()=>{C||(e.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),er(_=>{const C=new HZ(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(C)}))}),tv(d=>{const _=C=>{const S=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(C.routeConfig).pipe(er(V=>{C.component=V}),t1(()=>{})));for(const V of C.children)S.push(..._(V));return S};return L_(_(d.targetSnapshot.root)).pipe($h(),Ei(1))}),tv(()=>this.afterPreactivation()),t1(d=>{const _=function WZ(t,n,e){const i=wd(t,n._root,e?e._root:void 0);return new qz(i,n)}(e.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:_}}),er(d=>{e.currentUrlTree=d.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),e.routerState=d.targetRouterState,"deferred"===e.urlUpdateStrategy&&(d.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,d),e.browserUrlTree=d.urlAfterRedirects)}),((t,n,e)=>t1(i=>(new iY(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,e.routeReuseStrategy,d=>this.events.next(d)),Ei(1),er({next:d=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Z0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{r=!0}}),k_(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Cl(d=>{if(s=!0,eS(d)){Jz(d)||(e.navigated=!0,e.restoreHistory(i,!0));const _=new Jh(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode);if(this.events.next(_),Jz(d)){const C=e.urlHandlingStrategy.merge(d.url,e.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||yS(i.source)};e.scheduleNavigation(C,Cd,null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const _=new U_(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);this.events.next(_);try{i.resolve(e.errorHandler(d))}catch(C){i.reject(C)}}return At}))}))}cancelNavigationTransition(e,i,r){const s=new Jh(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function yS(t){return t!==Cd}let bS=(()=>{class t{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===J1);return i}getResolvedTitleForRoute(e){return e.data[gd]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return r1(YY)},providedIn:"root"}),t})(),YY=(()=>{class t extends bS{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return t.\u0275fac=function(e){return new(e||t)(Ie(hz))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),XY=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return r1(QY)},providedIn:"root"}),t})();class KY{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let QY=(()=>{class t extends KY{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const f9=new vt("",{providedIn:"root",factory:()=>({})});let eX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return r1(tX)},providedIn:"root"}),t})(),tX=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function nX(t){throw t}function iX(t,n,e){return n.parse("/")}const rX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xo=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=r1(OG),this.isNgZoneEnabled=!1,this.options=r1(f9,{optional:!0})||{},this.errorHandler=this.options.errorHandler||nX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=r1(eX),this.routeReuseStrategy=r1(XY),this.urlCreationStrategy=r1(GZ),this.titleStrategy=r1(bS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Sz(r1(B8,{optional:!0})??[]),this.navigationTransitions=r1(d9),this.urlSerializer=r1(vd),this.location=r1(zh),this.isNgZoneEnabled=r1(d1)instanceof d1&&d1.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ml,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Wz(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Cd,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},d=r?.navigationId?r:null;if(r){const C={...r};delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(s.state=C)}const _=this.parseUrl(e);this.scheduleNavigation(_,i,d,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(K_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:d,queryParamsHandling:_,preserveFragment:C}=i,S=C?this.currentUrlTree.fragment:d;let V=null;switch(_){case"merge":V={...this.currentUrlTree.queryParams,...s};break;case"preserve":V=this.currentUrlTree.queryParams;break;default:V=s||null}return null!==V&&(V=this.removeEmptyProps(V)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,V,S??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=W0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Cd,null,i)}navigate(e,i={skipLocationChange:!1}){return function oX(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new rt(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...rX}:!1===i?{...aX}:i,W0(e))return Ez(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Ez(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,d){if(this.disposed)return Promise.resolve(!1);let _,C,S,V;return d?(_=d.resolve,C=d.reject,S=d.promise):S=new Promise((F,W)=>{_=F,C=W}),V="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:V,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:_,reject:C,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(F=>Promise.reject(F))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const d={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",d)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",s)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vd=(()=>{class t{constructor(e,i,r,s,d,_){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=d,this.locationStrategy=_,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Yt;const C=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===C||"area"===C,this.isAnchorElement?this.subscription=e.events.subscribe(S=>{S instanceof Z0&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=E8(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=E8(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=E8(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function el(t,n,e){return function Pm(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?b0:bc}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(e){return new(e||t)(q(xo),q(zl),pc("tabindex"),q(fo),q(Nt),q(j0))},t.\u0275dir=je({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,i){1&e&&$t("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&We("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[wn]}),t})();class xS{}let lX=(()=>{class t{constructor(e,i,r,s,d){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(_i(e=>e instanceof Z0),xl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=gh(s.providers,e,`Route: ${s.path}`));const d=s._injector??e,_=s._loadedInjector??d;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(d,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(_,s.children??s._loadedRoutes))}return Jn(r).pipe(Tt())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Jt(null);const s=r.pipe(tt(d=>null===d?Jt(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??e,d.routes))));return i.loadComponent&&!i._loadedComponent?Jn([s,this.loader.loadComponent(i)]).pipe(Tt()):s})}}return t.\u0275fac=function(e){return new(e||t)(Ie(xo),Ie(qw),Ie(As),Ie(xS),Ie(nv))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const rv=new vt("");let CS=(()=>{class t{constructor(e,i,r,s,d={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof B_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Z0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Gz&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Gz(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(e){Ts()},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();var $o=(()=>(($o=$o||{})[$o.COMPLETE=0]="COMPLETE",$o[$o.FAILED=1]="FAILED",$o[$o.REDIRECTING=2]="REDIRECTING",$o))();const U8=!1;function Sl(t,n){return{\u0275kind:t,\u0275providers:n}}const av=new vt("",{providedIn:"root",factory:()=>!1});function MS(){const t=r1(Nr);return n=>{const e=t.get(O0);if(n!==e.components[0])return;const i=t.get(xo),r=t.get(zS);1===t.get(ov)&&i.initialNavigation(),t.get(SS,null,Qt.Optional)?.setUpPreloading(),t.get(rv,null,Qt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const zS=new vt(U8?"bootstrap done indicator":"",{factory:()=>new Yt}),ov=new vt(U8?"initial navigation":"",{providedIn:"root",factory:()=>1});function pX(){let t=[];return t=U8?[{provide:x0,multi:!0,useFactory:()=>{const n=r1(xo);return()=>n.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function OZ(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],Sl(1,t)}const SS=new vt(U8?"router preloader":"");function mX(t){return Sl(0,[{provide:SS,useExisting:lX},{provide:xS,useExisting:t}])}const Ld=!1,DS=new vt(Ld?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),gX=[zh,{provide:vd,useClass:I_},xo,Md,{provide:zl,useFactory:function wS(t){return t.routerState.root},deps:[xo]},nv,Ld?{provide:av,useValue:!0}:[]];function _X(){return new Jw("Router",xo)}let h9=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[gX,Ld&&i?.enableTracing?pX().\u0275providers:[],{provide:B8,multi:!0,useValue:e},{provide:DS,useFactory:xX,deps:[[xo,new wa,new xs]]},{provide:f9,useValue:i||{}},i?.useHash?{provide:j0,useClass:A$}:{provide:j0,useClass:CM},{provide:rv,useFactory:()=>{const t=r1(jq),n=r1(d1),e=r1(f9),i=r1(d9),r=r1(vd);return e.scrollOffset&&t.setOffset(e.scrollOffset),new CS(r,i,t,n,e)}},i?.preloadingStrategy?mX(i.preloadingStrategy).\u0275providers:[],{provide:Jw,multi:!0,useFactory:_X},i?.initialNavigation?CX(i):[],[{provide:AS,useFactory:MS},{provide:Kg,multi:!0,useExisting:AS}]]}}static forChild(e){return{ngModule:t,providers:[{provide:B8,multi:!0,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(Ie(DS,8))},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Y_]}),t})();function xX(t){if(Ld&&t)throw new rt(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function CX(t){return["disabled"===t.initialNavigation?Sl(3,[{provide:cd,multi:!0,useFactory:()=>{const n=r1(xo);return()=>{n.setUpLocationChangeListener()}}},{provide:ov,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Sl(2,[{provide:ov,useValue:0},{provide:cd,multi:!0,deps:[Nr],useFactory:n=>{const e=n.get(S$,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=n.get(xo),s=n.get(zS);(function uX(t,n){t.events.pipe(_i(e=>e instanceof Z0||e instanceof Jh||e instanceof U_||e instanceof e9),t1(e=>e instanceof Z0||e instanceof e9?$o.COMPLETE:e instanceof Jh&&(0===e.code||1===e.code)?$o.REDIRECTING:$o.FAILED),_i(e=>e!==$o.REDIRECTING),Ei(1)).subscribe(()=>{n()})})(r,()=>{i(!0)}),n.get(d9).afterPreactivation=()=>(i(!0),s.closed?Jt(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const AS=new vt(Ld?"Router Initializer":""),MX=new vt("cdk-dir-doc",{providedIn:"root",factory:function zX(){return r1(Y1)}}),SX=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Co=(()=>{class t{constructor(e){this.value="ltr",this.change=new Gt,e&&(this.value=function DX(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?SX.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(Ie(MX,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),j8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})();function ES(t){for(let n in t){let e=t[n]??"";switch(n){case"display":t.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+n]=e;break;case"flex-direction":t["-webkit-flex-direction"]=e,t["flex-direction"]=e;break;case"order":t.order=t["-webkit-"+n]=isNaN(+e)?"0":e}}return t}const sv="inline",p9=["row","column","row-reverse","column-reverse"];function VS(t){let[n,e,i]=LS(t);return function EX(t,n=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":n||null}}(n,e,i)}function LS(t){t=t?.toLowerCase()??"";let[n,e,i]=t.split(" ");return p9.find(r=>r===n)||(n=p9[0]),e===sv&&(e=i!==sv?i:"",i=sv),[n,AX(e),!!i]}function Td(t){let[n]=LS(t);return n.indexOf("row")>-1}function AX(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}function o4(t,...n){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let e of n)if(null!=e)for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}const LX={provide:Kg,useFactory:function VX(t,n){return()=>{if(r4(n)){const e=Array.from(t.querySelectorAll(`[class*=${TS}]`)),i=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${TS}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Y1,vo],multi:!0},TS="flex-layout-";let cv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[LX]}),t})();class Y0{constructor(n=!1,e="all",i="",r="",s=0){this.matches=n,this.mediaQuery=e,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new Y0(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let TX=(()=>{class t{constructor(){this.stylesheet=new Map}addStyleToElement(e,i,r){const s=this.stylesheet.get(e);s?s.set(i,r):this.stylesheet.set(e,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,i){const r=this.stylesheet.get(e);let s="";if(r){const d=r.get(i);("number"==typeof d||"string"==typeof d)&&(s=d+"")}return s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const lv={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Nc=new vt("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>lv}),G8=new vt("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),uv=new vt("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function HS(t,n){return t=t?.clone()??new Y0,n&&(t.mqAlias=n.alias,t.mediaQuery=n.mediaQuery,t.suffix=n.suffix,t.priority=n.priority),t}class a2{constructor(){this.shouldCache=!0}sideEffect(n,e,i){}}let vi=(()=>{class t{constructor(e,i,r,s){this._serverStylesheet=e,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(e,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:ES(i),this._applyMultiValueStyleToElement(s,e)}applyStyleToElements(e,i=[]){const r=this.layoutConfig.disableVendorPrefixes?e:ES(e);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(e){const i="flex-direction";let r=this.lookupStyle(e,i);return[r||"row",this.lookupInlineStyle(e,i)||L8(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,i){return e.getAttribute(i)??""}lookupInlineStyle(e,i){return r4(this._platformId)?e.style.getPropertyValue(i):function HX(t,n){return kS(t)[n]??""}(e,i)}lookupStyle(e,i,r=!1){let s="";return e&&((s=this.lookupInlineStyle(e,i))||(r4(this._platformId)?r||(s=getComputedStyle(e).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(e,i)))),s?s.trim():""}_applyMultiValueStyleToElement(e,i){Object.keys(e).sort().forEach(r=>{const s=e[r],d=Array.isArray(s)?s:[s];d.sort();for(let _ of d)_=_?_+"":"",r4(this._platformId)||!this._serverModuleLoaded?r4(this._platformId)?i.style.setProperty(r,_):kX(i,r,_):this._serverStylesheet.addStyleToElement(i,r,_)})}}return t.\u0275fac=function(e){return new(e||t)(Ie(TX),Ie(G8),Ie(vo),Ie(Nc))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function kX(t,n,e){n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=kS(t);i[n]=e??"",function IX(t,n){let e="";for(const i in n)n[i]&&(e+=`${i}:${n[i]};`);t.setAttribute("style",e)}(t,i)}function kS(t){const n={},e=t.getAttribute("style");if(e){const i=e.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const d=s.indexOf(":");if(-1===d)throw new Error(`Invalid CSS style: ${s}`);n[s.substr(0,d).trim()]=s.substr(d+1).trim()}}}return n}function Hd(t,n){return(n&&n.priority||0)-(t&&t.priority||0)}function RX(t,n){return(t.priority||0)-(n.priority||0)}let dv=(()=>{class t{constructor(e,i,r){this._zone=e,this._platformId=i,this._document=r,this.source=new bo(new Y0(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((i,r)=>{i.matches&&e.push(r)}),e}isActive(e){return this.registry.get(e)?.matches??this.registerQuery(e).some(r=>r.matches)}observe(e,i=!1){if(e&&e.length){const r=this._observable$.pipe(_i(d=>!i||e.indexOf(d.mediaQuery)>-1));return Ci(new c1(d=>{const _=this.registerQuery(e);if(_.length){const C=_.pop();_.forEach(S=>{d.next(S)}),this.source.next(C)}d.complete()}),r)}return this._observable$}registerQuery(e){const i=Array.isArray(e)?e:[e],r=[];return function PX(t,n){const e=t.filter(i=>!IS[i]);if(e.length>0){const i=e.join(", ");try{const r=n.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(n.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),n.head.appendChild(r),e.forEach(s=>IS[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const d=C=>{this._zone.run(()=>this.source.next(new Y0(C.matches,s)))};let _=this.registry.get(s);_||(_=this.buildMQL(s),_.addListener(d),this.pendingRemoveListenerFns.push(()=>_.removeListener(d)),this.registry.set(s,_)),_.matches&&r.push(new Y0(!0,s))}),r}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function NX(t,n){return n&&window.matchMedia("all").addListener?window.matchMedia(t):function FX(t){const n=new EventTarget;return n.matches="all"===t||""===t,n.media=t,n.addListener=()=>{},n.removeListener=()=>{},n.addEventListener=()=>{},n.dispatchEvent=()=>!1,n.onchange=null,n}(t)}(e,r4(this._platformId))}}return t.\u0275fac=function(e){return new(e||t)(Ie(d1),Ie(vo),Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const IS={},OX=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],RS="(orientation: portrait) and (max-width: 599.98px)",PS="(orientation: landscape) and (max-width: 959.98px)",FS="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",NS="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",OS="(orientation: portrait) and (min-width: 840px)",BS="(orientation: landscape) and (min-width: 1280px)",s4={HANDSET:`${RS}, ${PS}`,TABLET:`${FS} , ${NS}`,WEB:`${OS}, ${BS} `,HANDSET_PORTRAIT:`${RS}`,TABLET_PORTRAIT:`${FS} `,WEB_PORTRAIT:`${OS}`,HANDSET_LANDSCAPE:`${PS}`,TABLET_LANDSCAPE:`${NS}`,WEB_LANDSCAPE:`${BS}`},BX=[{alias:"handset",priority:2e3,mediaQuery:s4.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:s4.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:s4.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:s4.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:s4.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:s4.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:s4.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:s4.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:s4.WEB_PORTRAIT,overlapping:!0}],UX=/(\.|-|_)/g;function jX(t){let n=t.length>0?t.charAt(0):"",e=t.length>1?t.slice(1):"";return n.toUpperCase()+e}const WX=new vt("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const t=r1(uv),n=r1(Nc),e=[].concat.apply([],(t||[]).map(r=>Array.isArray(r)?r:[r]));return function qX(t,n=[]){const e={};return t.forEach(i=>{e[i.alias]=i}),n.forEach(i=>{e[i.alias]?o4(e[i.alias],i):e[i.alias]=i}),function $X(t){return t.forEach(n=>{n.suffix||(n.suffix=function GX(t){return t.replace(UX,"|").split("|").map(jX).join("")}(n.alias),n.overlapping=!!n.overlapping)}),t}(Object.keys(e).map(i=>e[i]))}((n.disableDefaultBps?[]:OX).concat(n.addOrientationBps?BX:[]),e)}});let fv=(()=>{class t{constructor(e){this.findByMap=new Map,this.items=[...e].sort(RX)}findByAlias(e){return e?this.findWithPredicate(e,i=>i.alias===e):null}findByQuery(e){return this.findWithPredicate(e,i=>i.mediaQuery===e)}get overlappings(){return this.items.filter(e=>e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>e?.suffix??"")}findWithPredicate(e,i){let r=this.findByMap.get(e);return r||(r=this.items.find(i)??null,this.findByMap.set(e,r)),r??null}}return t.\u0275fac=function(e){return new(e||t)(Ie(WX))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const $8="print",ZX={alias:$8,mediaQuery:$8,priority:1e3};let YX=(()=>{class t{constructor(e,i,r){this.breakpoints=e,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new XX,this.deactivations=[]}withPrintQuery(e){return[...e,$8]}isPrintEvent(e){return e.mediaQuery.startsWith($8)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const i=this.breakpoints.findByQuery(e);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Hd)}updateEvent(e){let i=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(i=this.getEventBreakpoints(e)[0],e.mediaQuery=i?.mediaQuery??""),HS(e,i)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new Y0(!0,$8))),e.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(e){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(i)),e.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(e,i)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,i){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(e,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),d=!this.formerActivations&&e.activatedBreakpoints.includes(r);(s||d)&&(this.deactivations.push(r),this.deactivations.sort(Hd))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e)))}}return t.\u0275fac=function(e){return new(e||t)(Ie(fv),Ie(Nc),Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class XX{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(n){return n.push(ZX),n.sort(Hd),n.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(n){n&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===n.mediaQuery)&&(this.printBreakpoints=function KX(t){return t?.mediaQuery.startsWith($8)??!1}(n)?[n,...this.printBreakpoints]:[...this.printBreakpoints,n])}clear(){this.printBreakpoints=[]}}let Vi=(()=>{class t{constructor(e,i,r){this.matchMedia=e,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Yt,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(e){this._activatedBreakpoints=[...e]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(e){this._useFallbacks=e}onMediaChange(e){const i=this.findByQuery(e.mediaQuery);if(i){e=HS(e,i);const r=this.activatedBreakpoints.indexOf(i);e.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(Hd),this.updateStyles()):!e.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(Hd),this.updateStyles())}}init(e,i,r,s,d=[]){US(this.updateMap,e,i,r),US(this.clearMap,e,i,s),this.buildElementKeyMap(e,i),this.watchExtraTriggers(e,i,d)}getValue(e,i,r){const s=this.elementMap.get(e);if(s){const d=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(d)return d.get(i)}}hasValue(e,i){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(e,i,r,s){let d=this.elementMap.get(e);if(d){const C=(d.get(s)??new Map).set(i,r);d.set(s,C),this.elementMap.set(e,d)}else d=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(e,d);const _=this.getValue(e,i);void 0!==_&&this.updateElement(e,i,_)}trackValue(e,i){return this.subject.asObservable().pipe(_i(r=>r.element===e&&r.key===i))}updateStyles(){this.elementMap.forEach((e,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(e);s&&s.forEach((d,_)=>{this.updateElement(i,_,d),r.delete(_)}),r.forEach(d=>{if(s=this.getActivatedValues(e,d),s){const _=s.get(d);this.updateElement(i,d,_)}else this.clearElement(i,d)})})}clearElement(e,i){const r=this.clearMap.get(e);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:e,key:i,value:""}))}}updateElement(e,i,r){const s=this.updateMap.get(e);if(s){const d=s.get(i);d&&(d(r),this.subject.next({element:e,key:i,value:r}))}}releaseElement(e){const i=this.watcherMap.get(e);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(e));const r=this.elementMap.get(e);r&&(r.forEach((s,d)=>r.delete(d)),this.elementMap.delete(e))}triggerUpdate(e,i){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(e,i,s.get(i)):s.forEach((d,_)=>this.updateElement(e,_,d)))}}buildElementKeyMap(e,i){let r=this.elementKeyMap.get(e);r||(r=new Set,this.elementKeyMap.set(e,r)),r.add(i)}watchExtraTriggers(e,i,r){if(r&&r.length){let s=this.watcherMap.get(e);if(s||(s=new Map,this.watcherMap.set(e,s)),!s.get(i)){const _=Ci(...r).subscribe(()=>{const C=this.getValue(e,i);this.updateElement(e,i,C)});s.set(i,_)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const _=e.get(this.activatedBreakpoints[s].alias);if(_&&(void 0===i||_.has(i)&&null!=_.get(i)))return _}if(!this._useFallbacks)return;const r=e.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const e=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(er(this.hook.interceptEvents(this)),_i(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return t.\u0275fac=function(e){return new(e||t)(Ie(dv),Ie(fv),Ie(YX))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function US(t,n,e,i){if(void 0!==i){const r=t.get(n)??new Map;r.set(e,i),t.set(n,r)}}let ji=(()=>{class t{constructor(e,i,r,s){this.elementRef=e,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Yt,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(e[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,i){const r=this.styleBuilder,s=r.shouldCache;let d=this.styleCache.get(e);(!d||!s)&&(d=r.buildStyles(e,i),s&&this.styleCache.set(e,d)),this.mru={...d},this.applyStyleToElement(d),r.sideEffect(e,d,i)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,i=!1){if(e){const[r,s]=this.styler.getFlowDirection(e);if(!s&&i){const d=VS(r);this.styler.applyStyleToElements(d,[e])}return r.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,i,r=this.nativeElement){this.styler.applyStyleToElement(r,e,i)}setValue(e,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,i)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(a2),q(vi),q(Vi))},t.\u0275dir=je({type:t,features:[wn]}),t})();class JX extends EventTarget{constructor(n){super(),this._mediaQuery=n,this._isActive=!1,this._listeners=[],this.onchange=null}get matches(){return this._isActive}get media(){return this._mediaQuery}destroy(){this.deactivate(),this._listeners=[]}activate(){return this._isActive||(this._isActive=!0,this._listeners.forEach(n=>{n.call(this,{matches:this.matches,media:this.media})})),this}deactivate(){return this._isActive&&(this._isActive=!1,this._listeners.forEach(n=>{n.call(this,{matches:this.matches,media:this.media})})),this}addListener(n){-1===this._listeners.indexOf(n)&&this._listeners.push(n),this._isActive&&n.call(this,{matches:this.matches,media:this.media})}removeListener(n){}dispatchEvent(n){return!1}}function jS(t,n="1",e="1"){let i=[n,e,t],r=t.indexOf("calc");if(r>0){i[2]=GS(t.substring(r).trim());let s=t.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=GS(t.trim());else{let s=t.split(" ");i=3===s.length?s:[n,e,t]}return i}function GS(t){return t.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}const $S="x";function m9(t,n){if(void 0===n)return t;const e=i=>{const r=+i.slice(0,-$S.length);return t.endsWith($S)&&!isNaN(r)?`${r*n.value}${n.unit}`:t};return t.includes(" ")?t.split(" ").map(e).join(" "):e(t)}function yi(t){return X1((n,e)=>{G(t).subscribe(V1(e,()=>e.complete(),qi)),!e.closed&&n.subscribe(e)})}let eK=(()=>{class t extends a2{buildStyles(e,{display:i}){const r=VS(e);return{...r,display:"none"===i?i:r.display}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const tK=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let nK=(()=>{class t extends ji{constructor(e,i,r,s,d){super(e,r,i,s),this._config=d,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(e){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=WS.get(r)??new Map,WS.set(r,this.styleCache),this.currentValue!==e&&(this.addStyles(e,{display:r}),this.currentValue=e)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(vi),q(eK),q(Vi),q(Nc))},t.\u0275dir=je({type:t,features:[ht]}),t})(),qS=(()=>{class t extends nK{constructor(){super(...arguments),this.inputs=tK}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[ht]}),t})();const WS=new Map,ZS={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let iK=(()=>{class t extends a2{constructor(e,i){super(),this._styler=e,this._config=i}buildStyles(e,i){return e.endsWith(g9)?function dK(t,n){const[e,i]=t.split(" "),s=S=>`-${S}`;let d="0px",_=s(i??e),C="0px";return"rtl"===n?C=s(e):d=s(e),{margin:`0px ${d} ${_} ${C}`}}(e=m9(e=e.slice(0,e.indexOf(g9)),this._config.multiplier),i.directionality):{}}sideEffect(e,i,r){const s=r.items;if(e.endsWith(g9)){const d=function uK(t,n){const[e,i]=t.split(" ");let s="0px",_="0px";return"rtl"===n?_=e:s=e,{padding:`0px ${s} ${i??e} ${_}`}}(e=m9(e=e.slice(0,e.indexOf(g9)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(d,r.items)}else{e=m9(e,this._config.multiplier),e=this.addFallbackUnit(e);const d=s.pop(),_=function fK(t,n){const e=XS(n.directionality,n.layout),i={...ZS};return i[e]=t,i}(e,r);this._styler.applyStyleToElements(_,s),this._styler.applyStyleToElements(ZS,[d])}}addFallbackUnit(e){return isNaN(+e)?e:`${e}${this._config.defaultUnit}`}}return t.\u0275fac=function(e){return new(e||t)(Ie(vi),Ie(Nc))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const rK=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let aK=(()=>{class t extends ji{constructor(e,i,r,s,d,_){super(e,d,s,_),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Yt;const C=[this.directionality.change,this.observerSubject.asObservable()];this.init(C),this.marshal.trackValue(this.nativeElement,"layout").pipe(yi(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const e=this.nativeElement.children,i=[];for(let r=e.length;r--;)i[r]=e[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(e){const r=e.value.split(" ");this.layout=r[0],p9.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(e){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const d=+this.styler.lookupStyle(r,"order"),_=+this.styler.lookupStyle(s,"order");return isNaN(d)||isNaN(_)||d===_?0:d>_?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=oK:"row"===s&&"rtl"!==r?this.styleCache=cK:"column"===s&&"rtl"===r?this.styleCache=sK:"column"===s&&"rtl"!==r&&(this.styleCache=lK),this.addStyles(e,{directionality:r,items:i,layout:s})}}clearStyles(){const e=Object.keys(this.mru).length>0,i=e?"padding":XS(this.directionality.value,this.layout);e&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(e){const i=this.marshal.getValue(e,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(e,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(e=>{e.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(d1),q(Co),q(vi),q(iK),q(Vi))},t.\u0275dir=je({type:t,features:[ht]}),t})(),YS=(()=>{class t extends aK{constructor(){super(...arguments),this.inputs=rK}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[ht]}),t})();const oK=new Map,sK=new Map,cK=new Map,lK=new Map,g9=" grid";function XS(t,n){switch(n){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===t?"margin-left":"margin-right";case"row-reverse":return"rtl"===t?"margin-right":"margin-left"}}let hK=(()=>{class t extends a2{constructor(e){super(),this.layoutConfig=e}buildStyles(e,i){let[r,s,...d]=e.split(" "),_=d.join(" ");const C=i.direction.indexOf("column")>-1?"column":"row",S=Td(C)?"max-width":"max-height",V=Td(C)?"min-width":"min-height",F=String(_).indexOf("calc")>-1,W=F||"auto"===_,K=String(_).indexOf("%")>-1&&!F,ce=String(_).indexOf("px")>-1||String(_).indexOf("rem")>-1||String(_).indexOf("em")>-1||String(_).indexOf("vw")>-1||String(_).indexOf("vh")>-1;let be=F||ce;r="0"==r?0:r,s="0"==s?0:s;const Me=!r&&!s;let He={};const lt={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(_||""){case"":_="row"===C?"0%":!1!==this.layoutConfig.useColumnBasisZero?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,_="auto";break;case"grow":_="100%";break;case"noshrink":s=0,_="auto";break;case"auto":break;case"none":r=0,s=0,_="auto";break;default:!be&&!K&&!isNaN(_)&&(_+="%"),"0%"===_&&(be=!0),"0px"===_&&(_="0%"),He=o4(lt,F?{"flex-grow":r,"flex-shrink":s,"flex-basis":be?_:"100%"}:{flex:`${r} ${s} ${be?_:"100%"}`})}return He.flex||He["flex-grow"]||(He=o4(lt,F?{"flex-grow":r,"flex-shrink":s,"flex-basis":_}:{flex:`${r} ${s} ${_}`})),"0%"!==_&&"0px"!==_&&"0.000000001px"!==_&&"auto"!==_&&(He[V]=Me||be&&r?_:null,He[S]=Me||!W&&s?_:null),He[V]||He[S]?i.hasWrap&&(He[F?"flex-basis":"flex"]=He[S]?F?He[S]:`${r} ${s} ${He[S]}`:F?He[V]:`${r} ${s} ${He[V]}`):He=o4(lt,F?{"flex-grow":r,"flex-shrink":s,"flex-basis":_}:{flex:`${r} ${s} ${_}`}),o4(He,{"box-sizing":"border-box"})}}return t.\u0275fac=function(e){return new(e||t)(Ie(Nc))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const pK=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let mK=(()=>{class t extends ji{constructor(e,i,r,s,d){super(e,s,i,d),this.layoutConfig=r,this.marshal=d,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(yi(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(yi(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(e){const r=e.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(e){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),d=this.wrap;s&&d?this.styleCache=vK:s&&!d?this.styleCache=gK:!s&&d?this.styleCache=yK:!s&&!d&&(this.styleCache=_K);const C=jS(String(e).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(C.join(" "),{direction:r,hasWrap:d})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const i=jS(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(vi),q(Nc),q(hK),q(Vi))},t.\u0275dir=je({type:t,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[ht]}),t})(),KS=(()=>{class t extends mK{constructor(){super(...arguments),this.inputs=pK}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[ht]}),t})();const gK=new Map,_K=new Map,vK=new Map,yK=new Map;let UK=(()=>{class t extends a2{buildStyles(e,i){const r={},[s,d]=e.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(d){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return o4(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===d?Td(i.layout)?null:"100%":null,"max-height":"stretch"===d&&Td(i.layout)?"100%":null})}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const jK=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let GK=(()=>{class t extends ji{constructor(e,i,r,s){super(e,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(yi(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(e){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=YK:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=KK:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=XK:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=QK:"column-reverse"===i&&!r&&(this.styleCache=ZK):this.styleCache=qK:this.styleCache=WK:this.styleCache=$K,this.addStyles(e,{layout:i,inline:r})}onLayoutChange(e){const i=e.value.split(" ");this.layout=i[0],this.inline=e.value.includes("inline"),p9.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(vi),q(UK),q(Vi))},t.\u0275dir=je({type:t,features:[ht]}),t})(),QS=(()=>{class t extends GK{constructor(){super(...arguments),this.inputs=jK}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[ht]}),t})();const $K=new Map,qK=new Map,WK=new Map,ZK=new Map,YK=new Map,XK=new Map,KK=new Map,QK=new Map;let JS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[cv,j8]}),t})();function hn(t){return null!=t&&"false"!=`${t}`}function hv(t,n=0){return function JK(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):n}function _9(t){return Array.isArray(t)?t:[t]}function H2(t){return null==t?"":"string"==typeof t?t:`${t}px`}function c4(t){return t instanceof Nt?t.nativeElement:t}let oQ=(()=>{class t extends ji{constructor(e,i,r,s,d,_,C){super(e,null,i,r),this.ngClassInstance=C,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new G0(s,d,e,_)),this.init(),this.setValue("","")}set klass(e){this.ngClassInstance.klass=e,this.setValue(e,"")}updateWithValue(e){this.ngClassInstance.ngClass=e,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(vi),q(Vi),q(_3),q(U0),q(fo),q(G0,10))},t.\u0275dir=je({type:t,inputs:{klass:["class","klass"]},features:[ht]}),t})();const sQ=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let eD=(()=>{class t extends oQ{constructor(){super(...arguments),this.inputs=sQ}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[ht]}),t})(),oD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[cv]}),t})();const vQ=function(t,n){return{transparent:t,black:n}};let yQ=(()=>{class t{constructor(){this.isTransparent=!0}onWindowScroll(){this.isTransparent=!(window.pageYOffset>50)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-header"]],hostBindings:function(e,i){1&e&&$t("scroll",function(){return i.onWindowScroll()},0,zf)},decls:15,vars:4,consts:[["fxLayout","column","fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px",3,"ngClass"],["routerLink","/rooms"],["routerLink","/explore"],["routerLink","/restaurant"],["fxLayoutAlign","center center","routerLink","/",1,"logo"],["src","assets/imgs/Logo-Hotel-low.png","alt",""],["routerLink","/about"],["routerLink","/book"],["routerLink","/login"]],template:function(e,i){1&e&&(le(0,"header",0)(1,"a",1),Ue(2,"Rooms"),pe(),le(3,"a",2),Ue(4,"Explore"),pe(),le(5,"a",3),Ue(6,"Restaurant"),pe(),le(7,"div",4),ft(8,"img",5),pe(),le(9,"a",6),Ue(10,"About us"),pe(),le(11,"a",7),Ue(12,"Contact us"),pe(),le(13,"a",8),Ue(14,"Book"),pe()()),2&e&&Ze("ngClass",function fw(t,n,e,i,r){return pw(mt(),D2(),t,n,e,i,r)}(1,vQ,i.isTransparent,!i.isTransparent))},dependencies:[G0,Vd,qS,YS,QS,eD],styles:['header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:110px;z-index:999;transition:background-color .3s ease-in-out}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:1.2rem;font-weight:500;padding:.5rem 1rem;border-radius:5px;position:relative;overflow:hidden;transition:transform .3s ease-in-out}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%) scaleX(0);width:100%;height:2px;background-color:#fff;transition:transform .3s ease-in-out}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{transform:translate(-50%) scaleX(1) scaleY(1.2);z-index:1}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:transparent;transform:scale(1.1)}.transparent[_ngcontent-%COMP%]{background-color:transparent!important}.black[_ngcontent-%COMP%]{background-color:#0b161b!important}.content[_ngcontent-%COMP%]{margin-top:60px}.logo[_ngcontent-%COMP%]{width:30%;height:55px;box-sizing:border-box;display:flex;justify-content:center;align-items:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:375px;height:55px;cursor:pointer;transition:transform .3s ease-in-out}']}),t})();var gA={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},LA={prefix:"far",iconName:"thumbs-up",icon:[512,512,[128077,61575],"f164","M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.1s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16H286.5c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8H384c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32H96c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32H32z"]},_V={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},iH={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},TH={prefix:"fas",iconName:"piggy-bank",icon:[576,512,[],"f4d3","M400 96l0 .7c-5.3-.4-10.6-.7-16-.7H256c-16.5 0-32.5 2.1-47.8 6c-.1-2-.2-4-.2-6c0-53 43-96 96-96s96 43 96 96zm-16 32c3.5 0 7 .1 10.4 .3c4.2 .3 8.4 .7 12.6 1.3C424.6 109.1 450.8 96 480 96h11.5c10.4 0 18 9.8 15.5 19.9l-13.8 55.2c15.8 14.8 28.7 32.8 37.5 52.9H544c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H512c-9.1 12.1-19.9 22.9-32 32v64c0 17.7-14.3 32-32 32H416c-17.7 0-32-14.3-32-32V448H256v32c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V416c-34.9-26.2-58.7-66.3-63.2-112H68c-37.6 0-68-30.4-68-68s30.4-68 68-68h4c13.3 0 24 10.7 24 24s-10.7 24-24 24H68c-11 0-20 9-20 20s9 20 20 20H99.2c12.1-59.8 57.7-107.5 116.3-122.8c12.9-3.4 26.5-5.2 40.5-5.2H384zm64 136a24 24 0 1 0 -48 0 24 24 0 1 0 48 0z"]},I9={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},R9={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},py={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};function BR(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,i)}return e}function qt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?BR(Object(e),!0).forEach(function(i){tr(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):BR(Object(e)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}return t}function P9(t){return(P9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function UR(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tr(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function my(t,n){return function TDe(t){if(Array.isArray(t))return t}(t)||function kDe(t,n){var e=null==t?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var d,_,i=[],r=!0,s=!1;try{for(e=e.call(t);!(r=(d=e.next()).done)&&(i.push(d.value),!n||i.length!==n);r=!0);}catch(C){s=!0,_=C}finally{try{!r&&null!=e.return&&e.return()}finally{if(s)throw _}}return i}}(t,n)||jR(t,n)||function RDe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Od(t){return function LDe(t){if(Array.isArray(t))return gy(t)}(t)||function HDe(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||jR(t)||function IDe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jR(t,n){if(t){if("string"==typeof t)return gy(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return gy(t,n)}}function gy(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var GR=function(){},_y={},$R={},qR=null,WR={mark:GR,measure:GR};try{typeof window<"u"&&(_y=window),typeof document<"u"&&($R=document),typeof MutationObserver<"u"&&(qR=MutationObserver),typeof performance<"u"&&(WR=performance)}catch{}var O9,B9,U9,j9,G9,ZR=(_y.navigator||{}).userAgent,YR=void 0===ZR?"":ZR,Dl=_y,bi=$R,XR=qR,N9=WR,l4=!!bi.documentElement&&!!bi.head&&"function"==typeof bi.addEventListener&&"function"==typeof bi.createElement,KR=~YR.indexOf("MSIE")||~YR.indexOf("Trident/"),u4="___FONT_AWESOME___",vy=16,QR="fa",JR="svg-inline--fa",X0="data-fa-i2svg",yy="data-fa-pseudo-element",FDe="data-fa-pseudo-element-pending",by="data-prefix",xy="data-icon",eP="fontawesome-i2svg",NDe="async",ODe=["HTML","HEAD","STYLE","SCRIPT"],tP=function(){try{return!0}catch{return!1}}(),xi="classic",o2="sharp",Cy=[xi,o2];function Bd(t){return new Proxy(t,{get:function(e,i){return i in e?e[i]:e[xi]}})}var Ud=Bd((tr(O9={},xi,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),tr(O9,o2,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),O9)),jd=Bd((tr(B9={},xi,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),tr(B9,o2,{solid:"fass",regular:"fasr",light:"fasl"}),B9)),Gd=Bd((tr(U9={},xi,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),tr(U9,o2,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),U9)),BDe=Bd((tr(j9={},xi,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),tr(j9,o2,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),j9)),UDe=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,nP="fa-layers-text",jDe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,GDe=Bd((tr(G9={},xi,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),tr(G9,o2,{900:"fass",400:"fasr",300:"fasl"}),G9)),iP=[1,2,3,4,5,6,7,8,9,10],$De=iP.concat([11,12,13,14,15,16,17,18,19,20]),qDe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],K0={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},$d=new Set;Object.keys(jd[xi]).map($d.add.bind($d)),Object.keys(jd[o2]).map($d.add.bind($d));var WDe=[].concat(Cy,Od($d),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",K0.GROUP,K0.SWAP_OPACITY,K0.PRIMARY,K0.SECONDARY]).concat(iP.map(function(t){return"".concat(t,"x")})).concat($De.map(function(t){return"w-".concat(t)})),qd=Dl.FontAwesomeConfig||{};bi&&"function"==typeof bi.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var n=my(t,2),i=n[1],r=function YDe(t){return""===t||"false"!==t&&("true"===t||t)}(function ZDe(t){var n=bi.querySelector("script["+t+"]");if(n)return n.getAttribute(t)}(n[0]));null!=r&&(qd[i]=r)});var rP={styleDefault:"solid",familyDefault:"classic",cssPrefix:QR,replacementClass:JR,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};qd.familyPrefix&&(qd.cssPrefix=qd.familyPrefix);var q8=qt(qt({},rP),qd);q8.autoReplaceSvg||(q8.observeMutations=!1);var o1={};Object.keys(rP).forEach(function(t){Object.defineProperty(o1,t,{enumerable:!0,set:function(e){q8[t]=e,Wd.forEach(function(i){return i(o1)})},get:function(){return q8[t]}})}),Object.defineProperty(o1,"familyPrefix",{enumerable:!0,set:function(n){q8.cssPrefix=n,Wd.forEach(function(e){return e(o1)})},get:function(){return q8.cssPrefix}}),Dl.FontAwesomeConfig=o1;var Wd=[],Al=vy,b3={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},JDe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Zd(){for(var t=12,n="";t-- >0;)n+=JDe[62*Math.random()|0];return n}function W8(t){for(var n=[],e=(t||[]).length>>>0;e--;)n[e]=t[e];return n}function wy(t){return t.classList?W8(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(n){return n})}function aP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $9(t){return Object.keys(t||{}).reduce(function(n,e){return n+"".concat(e,": ").concat(t[e].trim(),";")},"")}function My(t){return t.size!==b3.size||t.x!==b3.x||t.y!==b3.y||t.rotate!==b3.rotate||t.flipX||t.flipY}var iAe=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function oP(){var t=QR,n=JR,e=o1.cssPrefix,i=o1.replacementClass,r=iAe;if(e!==t||i!==n){var s=new RegExp("\\.".concat(t,"\\-"),"g"),d=new RegExp("\\--".concat(t,"\\-"),"g"),_=new RegExp("\\.".concat(n),"g");r=r.replace(s,".".concat(e,"-")).replace(d,"--".concat(e,"-")).replace(_,".".concat(i))}return r}var sP=!1;function zy(){o1.autoAddCss&&!sP&&(function QDe(t){if(t&&l4){var n=bi.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;for(var e=bi.head.childNodes,i=null,r=e.length-1;r>-1;r--){var s=e[r],d=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(i=s)}bi.head.insertBefore(n,i)}}(oP()),sP=!0)}var rAe={mixout:function(){return{dom:{css:oP,insertCss:zy}}},hooks:function(){return{beforeDOMElementCreation:function(){zy()},beforeI2svg:function(){zy()}}}},d4=Dl||{};d4[u4]||(d4[u4]={}),d4[u4].styles||(d4[u4].styles={}),d4[u4].hooks||(d4[u4].hooks={}),d4[u4].shims||(d4[u4].shims=[]);var Oc=d4[u4],cP=[],q9=!1;function Yd(t){var n=t.tag,e=t.attributes,i=void 0===e?{}:e,r=t.children,s=void 0===r?[]:r;return"string"==typeof t?aP(t):"<".concat(n," ").concat(function eAe(t){return Object.keys(t||{}).reduce(function(n,e){return n+"".concat(e,'="').concat(aP(t[e]),'" ')},"").trim()}(i),">").concat(s.map(Yd).join(""),"</").concat(n,">")}function lP(t,n,e){if(t&&t[n]&&t[n][e])return{prefix:n,iconName:e,icon:t[n][e]}}l4&&((q9=(bi.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(bi.readyState))||bi.addEventListener("DOMContentLoaded",function t(){bi.removeEventListener("DOMContentLoaded",t),q9=1,cP.map(function(n){return n()})}));var Sy=function(n,e,i,r){var C,S,V,s=Object.keys(n),d=s.length,_=void 0!==r?function(n,e){return function(i,r,s,d){return n.call(e,i,r,s,d)}}(e,r):e;for(void 0===i?(C=1,V=n[s[0]]):(C=0,V=i);C<d;C++)V=_(V,n[S=s[C]],S,n);return V};function Dy(t){var n=function cAe(t){for(var n=[],e=0,i=t.length;e<i;){var r=t.charCodeAt(e++);if(r>=55296&&r<=56319&&e<i){var s=t.charCodeAt(e++);56320==(64512&s)?n.push(((1023&r)<<10)+(1023&s)+65536):(n.push(r),e--)}else n.push(r)}return n}(t);return 1===n.length?n[0].toString(16):null}function uP(t){return Object.keys(t).reduce(function(n,e){var i=t[e];return i.icon?n[i.iconName]=i.icon:n[e]=i,n},{})}function Ay(t,n){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==i&&i,s=uP(n);"function"!=typeof Oc.hooks.addPack||r?Oc.styles[t]=qt(qt({},Oc.styles[t]||{}),s):Oc.hooks.addPack(t,uP(n)),"fas"===t&&Ay("fa",n)}var W9,Z9,Y9,Z8=Oc.styles,uAe=Oc.shims,dAe=(tr(W9={},xi,Object.values(Gd[xi])),tr(W9,o2,Object.values(Gd[o2])),W9),Ey=null,dP={},fP={},hP={},pP={},mP={},fAe=(tr(Z9={},xi,Object.keys(Ud[xi])),tr(Z9,o2,Object.keys(Ud[o2])),Z9);var gP=function(){var n=function(s){return Sy(Z8,function(d,_,C){return d[C]=Sy(_,s,{}),d},{})};dP=n(function(r,s,d){return s[3]&&(r[s[3]]=d),s[2]&&s[2].filter(function(C){return"number"==typeof C}).forEach(function(C){r[C.toString(16)]=d}),r}),fP=n(function(r,s,d){return r[d]=d,s[2]&&s[2].filter(function(C){return"string"==typeof C}).forEach(function(C){r[C]=d}),r}),mP=n(function(r,s,d){var _=s[2];return r[d]=d,_.forEach(function(C){r[C]=d}),r});var e="far"in Z8||o1.autoFetchSvg,i=Sy(uAe,function(r,s){var d=s[0],_=s[1],C=s[2];return"far"===_&&!e&&(_="fas"),"string"==typeof d&&(r.names[d]={prefix:_,iconName:C}),"number"==typeof d&&(r.unicodes[d.toString(16)]={prefix:_,iconName:C}),r},{names:{},unicodes:{}});hP=i.names,pP=i.unicodes,Ey=X9(o1.styleDefault,{family:o1.familyDefault})};function Vy(t,n){return(dP[t]||{})[n]}function Q0(t,n){return(mP[t]||{})[n]}function _P(t){return hP[t]||{prefix:null,iconName:null}}function El(){return Ey}(function KDe(t){Wd.push(t)})(function(t){Ey=X9(t.styleDefault,{family:o1.familyDefault})}),gP();var Ly=function(){return{prefix:null,iconName:null,rest:[]}};function X9(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,i=void 0===e?xi:e;return jd[i][t]||jd[i][Ud[i][t]]||(t in Oc.styles?t:null)||null}var vP=(tr(Y9={},xi,Object.keys(Gd[xi])),tr(Y9,o2,Object.keys(Gd[o2])),Y9);function K9(t){var n,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==i&&i,s=(tr(n={},xi,"".concat(o1.cssPrefix,"-").concat(xi)),tr(n,o2,"".concat(o1.cssPrefix,"-").concat(o2)),n),d=null,_=xi;(t.includes(s[xi])||t.some(function(S){return vP[xi].includes(S)}))&&(_=xi),(t.includes(s[o2])||t.some(function(S){return vP[o2].includes(S)}))&&(_=o2);var C=t.reduce(function(S,V){var F=function pAe(t,n){var e=n.split("-"),i=e[0],r=e.slice(1).join("-");return i!==t||""===r||function hAe(t){return~WDe.indexOf(t)}(r)?null:r}(o1.cssPrefix,V);if(Z8[V]?(V=dAe[_].includes(V)?BDe[_][V]:V,d=V,S.prefix=V):fAe[_].indexOf(V)>-1?(d=V,S.prefix=X9(V,{family:_})):F?S.iconName=F:V!==o1.replacementClass&&V!==s[xi]&&V!==s[o2]&&S.rest.push(V),!r&&S.prefix&&S.iconName){var W="fa"===d?_P(S.iconName):{},K=Q0(S.prefix,S.iconName);W.prefix&&(d=null),S.iconName=W.iconName||K||S.iconName,S.prefix=W.prefix||S.prefix,"far"===S.prefix&&!Z8.far&&Z8.fas&&!o1.autoFetchSvg&&(S.prefix="fas")}return S},Ly());return(t.includes("fa-brands")||t.includes("fab"))&&(C.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(C.prefix="fad"),!C.prefix&&_===o2&&(Z8.fass||o1.autoFetchSvg)&&(C.prefix="fass",C.iconName=Q0(C.prefix,C.iconName)||C.iconName),("fa"===C.prefix||"fa"===d)&&(C.prefix=El()||"fas"),C}var _Ae=function(){function t(){(function ADe(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),this.definitions={}}return function EDe(t,n,e){n&&UR(t.prototype,n),e&&UR(t,e),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"add",value:function(){for(var e=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var d=r.reduce(this._pullDefinitions,{});Object.keys(d).forEach(function(_){e.definitions[_]=qt(qt({},e.definitions[_]||{}),d[_]),Ay(_,d[_]);var C=Gd[xi][_];C&&Ay(C,d[_]),gP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var d=r[s],_=d.prefix,C=d.iconName,S=d.icon,V=S[2];e[_]||(e[_]={}),V.length>0&&V.forEach(function(F){"string"==typeof F&&(e[_][F]=S)}),e[_][C]=S}),e}}]),t}(),yP=[],Y8={},X8={},vAe=Object.keys(X8);function Ty(t,n){for(var e=arguments.length,i=new Array(e>2?e-2:0),r=2;r<e;r++)i[r-2]=arguments[r];return(Y8[t]||[]).forEach(function(d){n=d.apply(null,[n].concat(i))}),n}function J0(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];(Y8[t]||[]).forEach(function(s){s.apply(null,e)})}function f4(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);return X8[t]?X8[t].apply(null,n):void 0}function Hy(t){"fa"===t.prefix&&(t.prefix="fas");var n=t.iconName,e=t.prefix||El();if(n)return n=Q0(e,n)||n,lP(bP.definitions,e,n)||lP(Oc.styles,e,n)}var bP=new _Ae,xAe={i2svg:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l4?(J0("beforeI2svg",n),f4("pseudoElements2svg",n),f4("i2svg",n)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.autoReplaceSvgRoot;!1===o1.autoReplaceSvg&&(o1.autoReplaceSvg=!0),o1.observeMutations=!0,function oAe(t){l4&&(q9?setTimeout(t,0):cP.push(t))}(function(){wAe({autoReplaceSvgRoot:e}),J0("watch",n)})}},qo={noAuto:function(){o1.autoReplaceSvg=!1,o1.observeMutations=!1,J0("noAuto")},config:o1,dom:xAe,parse:{icon:function(n){if(null===n)return null;if("object"===P9(n)&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:Q0(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&2===n.length){var e=0===n[1].indexOf("fa-")?n[1].slice(3):n[1],i=X9(n[0]);return{prefix:i,iconName:Q0(i,e)||e}}if("string"==typeof n&&(n.indexOf("".concat(o1.cssPrefix,"-"))>-1||n.match(UDe))){var r=K9(n.split(" "),{skipLookups:!0});return{prefix:r.prefix||El(),iconName:Q0(r.prefix,r.iconName)||r.iconName}}if("string"==typeof n){var s=El();return{prefix:s,iconName:Q0(s,n)||n}}}},library:bP,findIconDefinition:Hy,toHtml:Yd},wAe=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,i=void 0===e?bi:e;(Object.keys(Oc.styles).length>0||o1.autoFetchSvg)&&l4&&o1.autoReplaceSvg&&qo.dom.i2svg({node:i})};function Q9(t,n){return Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(i){return Yd(i)})}}),Object.defineProperty(t,"node",{get:function(){if(l4){var i=bi.createElement("div");return i.innerHTML=t.html,i.children}}}),t}function ky(t){var n=t.icons,e=n.main,i=n.mask,r=t.prefix,s=t.iconName,d=t.transform,_=t.symbol,C=t.title,S=t.maskId,V=t.titleId,F=t.extra,W=t.watchable,K=void 0!==W&&W,ce=i.found?i:e,be=ce.width,Me=ce.height,He="fak"===r,lt=[o1.replacementClass,s?"".concat(o1.cssPrefix,"-").concat(s):""].filter(function(Mr){return-1===F.classes.indexOf(Mr)}).filter(function(Mr){return""!==Mr||!!Mr}).concat(F.classes).join(" "),$e={children:[],attributes:qt(qt({},F.attributes),{},{"data-prefix":r,"data-icon":s,class:lt,role:F.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(be," ").concat(Me)})},St=He&&!~F.classes.indexOf("fa-fw")?{width:"".concat(be/Me*16*.0625,"em")}:{};K&&($e.attributes[X0]=""),C&&($e.children.push({tag:"title",attributes:{id:$e.attributes["aria-labelledby"]||"title-".concat(V||Zd())},children:[C]}),delete $e.attributes.title);var h1=qt(qt({},$e),{},{prefix:r,iconName:s,main:e,mask:i,maskId:S,transform:d,symbol:_,styles:qt(qt({},St),F.styles)}),en=i.found&&e.found?f4("generateAbstractMask",h1)||{children:[],attributes:{}}:f4("generateAbstractIcon",h1)||{children:[],attributes:{}},Xo=en.attributes;return h1.children=en.children,h1.attributes=Xo,_?function zAe(t){var e=t.iconName,i=t.children,r=t.attributes,s=t.symbol,d=!0===s?"".concat(t.prefix,"-").concat(o1.cssPrefix,"-").concat(e):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:qt(qt({},r),{},{id:d}),children:i}]}]}(h1):function MAe(t){var n=t.children,e=t.main,i=t.mask,r=t.attributes,s=t.styles,d=t.transform;if(My(d)&&e.found&&!i.found){var S={x:e.width/e.height/2,y:.5};r.style=$9(qt(qt({},s),{},{"transform-origin":"".concat(S.x+d.x/16,"em ").concat(S.y+d.y/16,"em")}))}return[{tag:"svg",attributes:r,children:n}]}(h1)}function xP(t){var n=t.content,e=t.width,i=t.height,r=t.transform,s=t.title,d=t.extra,_=t.watchable,C=void 0!==_&&_,S=qt(qt(qt({},d.attributes),s?{title:s}:{}),{},{class:d.classes.join(" ")});C&&(S[X0]="");var V=qt({},d.styles);My(r)&&(V.transform=function nAe(t){var n=t.transform,e=t.width,r=t.height,s=void 0===r?vy:r,d=t.startCentered,_=void 0!==d&&d,C="";return C+=_&&KR?"translate(".concat(n.x/Al-(void 0===e?vy:e)/2,"em, ").concat(n.y/Al-s/2,"em) "):_?"translate(calc(-50% + ".concat(n.x/Al,"em), calc(-50% + ").concat(n.y/Al,"em)) "):"translate(".concat(n.x/Al,"em, ").concat(n.y/Al,"em) "),(C+="scale(".concat(n.size/Al*(n.flipX?-1:1),", ").concat(n.size/Al*(n.flipY?-1:1),") "))+"rotate(".concat(n.rotate,"deg) ")}({transform:r,startCentered:!0,width:e,height:i}),V["-webkit-transform"]=V.transform);var F=$9(V);F.length>0&&(S.style=F);var W=[];return W.push({tag:"span",attributes:S,children:[n]}),s&&W.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),W}var Iy=Oc.styles;function Ry(t){var n=t[0],e=t[1],s=my(t.slice(4),1)[0];return{found:!0,width:n,height:e,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(o1.cssPrefix,"-").concat(K0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(o1.cssPrefix,"-").concat(K0.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(o1.cssPrefix,"-").concat(K0.PRIMARY),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var DAe={found:!1,width:512,height:512};function Py(t,n){var e=n;return"fa"===n&&null!==o1.styleDefault&&(n=El()),new Promise(function(i,r){if(f4("missingIconAbstract"),"fa"===e){var d=_P(t)||{};t=d.iconName||t,n=d.prefix||n}if(t&&n&&Iy[n]&&Iy[n][t])return i(Ry(Iy[n][t]));(function AAe(t,n){!tP&&!o1.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(n,'" is missing.'))})(t,n),i(qt(qt({},DAe),{},{icon:o1.showMissingIcons&&t&&f4("missingIconAbstract")||{}}))})}var CP=function(){},Fy=o1.measurePerformance&&N9&&N9.mark&&N9.measure?N9:{mark:CP,measure:CP},Xd='FA "6.4.0"',wP=function(n){Fy.mark("".concat(Xd," ").concat(n," ends")),Fy.measure("".concat(Xd," ").concat(n),"".concat(Xd," ").concat(n," begins"),"".concat(Xd," ").concat(n," ends"))},Ny={begin:function(n){return Fy.mark("".concat(Xd," ").concat(n," begins")),function(){return wP(n)}},end:wP},J9=function(){};function MP(t){return"string"==typeof(t.getAttribute?t.getAttribute(X0):null)}function HAe(t){return bi.createElementNS("http://www.w3.org/2000/svg",t)}function kAe(t){return bi.createElement(t)}function zP(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,i=void 0===e?"svg"===t.tag?HAe:kAe:e;if("string"==typeof t)return bi.createTextNode(t);var r=i(t.tag);return Object.keys(t.attributes||[]).forEach(function(d){r.setAttribute(d,t.attributes[d])}),(t.children||[]).forEach(function(d){r.appendChild(zP(d,{ceFn:i}))}),r}var ep={replace:function(n){var e=n[0];if(e.parentNode)if(n[1].forEach(function(r){e.parentNode.insertBefore(zP(r),e)}),null===e.getAttribute(X0)&&o1.keepOriginalSource){var i=bi.createComment(function IAe(t){var n=" ".concat(t.outerHTML," ");return"".concat(n,"Font Awesome fontawesome.com ")}(e));e.parentNode.replaceChild(i,e)}else e.remove()},nest:function(n){var e=n[0],i=n[1];if(~wy(e).indexOf(o1.replacementClass))return ep.replace(n);var r=new RegExp("".concat(o1.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(_,C){return C===o1.replacementClass||C.match(r)?_.toSvg.push(C):_.toNode.push(C),_},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}var d=i.map(function(_){return Yd(_)}).join("\n");e.setAttribute(X0,""),e.innerHTML=d}};function SP(t){t()}function DP(t,n){var e="function"==typeof n?n:J9;if(0===t.length)e();else{var i=SP;o1.mutateApproach===NDe&&(i=Dl.requestAnimationFrame||SP),i(function(){var r=function TAe(){return!0===o1.autoReplaceSvg?ep.replace:ep[o1.autoReplaceSvg]||ep.replace}(),s=Ny.begin("mutate");t.map(r),s(),e()})}}var Oy=!1;function AP(){Oy=!0}function By(){Oy=!1}var tp=null;function EP(t){if(XR&&o1.observeMutations){var n=t.treeCallback,e=void 0===n?J9:n,i=t.nodeCallback,r=void 0===i?J9:i,s=t.pseudoElementsCallback,d=void 0===s?J9:s,_=t.observeMutationsRoot,C=void 0===_?bi:_;tp=new XR(function(S){if(!Oy){var V=El();W8(S).forEach(function(F){if("childList"===F.type&&F.addedNodes.length>0&&!MP(F.addedNodes[0])&&(o1.searchPseudoElements&&d(F.target),e(F.target)),"attributes"===F.type&&F.target.parentNode&&o1.searchPseudoElements&&d(F.target.parentNode),"attributes"===F.type&&MP(F.target)&&~qDe.indexOf(F.attributeName))if("class"===F.attributeName&&function VAe(t){var n=t.getAttribute?t.getAttribute(by):null,e=t.getAttribute?t.getAttribute(xy):null;return n&&e}(F.target)){var W=K9(wy(F.target)),ce=W.iconName;F.target.setAttribute(by,W.prefix||V),ce&&F.target.setAttribute(xy,ce)}else(function LAe(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(o1.replacementClass)})(F.target)&&r(F.target)})}}),l4&&tp.observe(C,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function VP(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},e=function FAe(t){var n=t.getAttribute("data-prefix"),e=t.getAttribute("data-icon"),i=void 0!==t.innerText?t.innerText.trim():"",r=K9(wy(t));return r.prefix||(r.prefix=El()),n&&e&&(r.prefix=n,r.iconName=e),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function mAe(t,n){return(fP[t]||{})[n]}(r.prefix,t.innerText)||Vy(r.prefix,Dy(t.innerText))),!r.iconName&&o1.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}(t),i=e.iconName,r=e.prefix,s=e.rest,d=function NAe(t){var n=W8(t.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),e=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return o1.autoA11y&&(e?n["aria-labelledby"]="".concat(o1.replacementClass,"-title-").concat(i||Zd()):(n["aria-hidden"]="true",n.focusable="false")),n}(t),_=Ty("parseNodeAttributes",{},t),C=n.styleParser?function PAe(t){var n=t.getAttribute("style"),e=[];return n&&(e=n.split(";").reduce(function(i,r){var s=r.split(":"),d=s[0],_=s.slice(1);return d&&_.length>0&&(i[d]=_.join(":").trim()),i},{})),e}(t):[];return qt({iconName:i,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:b3,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:C,attributes:d}},_)}var BAe=Oc.styles;function LP(t){var n="nest"===o1.autoReplaceSvg?VP(t,{styleParser:!1}):VP(t);return~n.extra.classes.indexOf(nP)?f4("generateLayersText",t,n):f4("generateSvgReplacementMutation",t,n)}var Vl=new Set;function TP(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!l4)return Promise.resolve();var e=bi.documentElement.classList,i=function(F){return e.add("".concat(eP,"-").concat(F))},r=function(F){return e.remove("".concat(eP,"-").concat(F))},s=o1.autoFetchSvg?Vl:Cy.map(function(V){return"fa-".concat(V)}).concat(Object.keys(BAe));s.includes("fa")||s.push("fa");var d=[".".concat(nP,":not([").concat(X0,"])")].concat(s.map(function(V){return".".concat(V,":not([").concat(X0,"])")})).join(", ");if(0===d.length)return Promise.resolve();var _=[];try{_=W8(t.querySelectorAll(d))}catch{}if(!(_.length>0))return Promise.resolve();i("pending"),r("complete");var C=Ny.begin("onTree"),S=_.reduce(function(V,F){try{var W=LP(F);W&&V.push(W)}catch(K){tP||"MissingIcon"===K.name&&console.error(K)}return V},[]);return new Promise(function(V,F){Promise.all(S).then(function(W){DP(W,function(){i("active"),i("complete"),r("pending"),"function"==typeof n&&n(),C(),V()})}).catch(function(W){C(),F(W)})})}function UAe(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;LP(t).then(function(e){e&&DP([e],n)})}Cy.map(function(t){Vl.add("fa-".concat(t))}),Object.keys(Ud[xi]).map(Vl.add.bind(Vl)),Object.keys(Ud[o2]).map(Vl.add.bind(Vl)),Vl=Od(Vl);var GAe=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,r=void 0===i?b3:i,s=e.symbol,d=void 0!==s&&s,_=e.mask,C=void 0===_?null:_,S=e.maskId,V=void 0===S?null:S,F=e.title,W=void 0===F?null:F,K=e.titleId,ce=void 0===K?null:K,be=e.classes,Me=void 0===be?[]:be,He=e.attributes,lt=void 0===He?{}:He,$e=e.styles,St=void 0===$e?{}:$e;if(n){var h1=n.prefix,en=n.iconName,Ln=n.icon;return Q9(qt({type:"icon"},n),function(){return J0("beforeDOMElementCreation",{iconDefinition:n,params:e}),o1.autoA11y&&(W?lt["aria-labelledby"]="".concat(o1.replacementClass,"-title-").concat(ce||Zd()):(lt["aria-hidden"]="true",lt.focusable="false")),ky({icons:{main:Ry(Ln),mask:C?Ry(C.icon):{found:!1,width:null,height:null,icon:{}}},prefix:h1,iconName:en,transform:qt(qt({},b3),r),symbol:d,title:W,maskId:V,titleId:ce,extra:{attributes:lt,styles:St,classes:Me}})})}},$Ae={mixout:function(){return{icon:(t=GAe,function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(n||{}).icon?n:Hy(n||{}),r=e.mask;return r&&(r=(r||{}).icon?r:Hy(r||{})),t(i,qt(qt({},e),{},{mask:r}))})};var t},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=TP,e.nodeCallback=UAe,e}}},provides:function(n){n.i2svg=function(e){var i=e.node,s=e.callback;return TP(void 0===i?bi:i,void 0===s?function(){}:s)},n.generateSvgReplacementMutation=function(e,i){var r=i.iconName,s=i.title,d=i.titleId,_=i.prefix,C=i.transform,S=i.symbol,V=i.mask,F=i.maskId,W=i.extra;return new Promise(function(K,ce){Promise.all([Py(r,_),V.iconName?Py(V.iconName,V.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(be){var Me=my(be,2);K([e,ky({icons:{main:Me[0],mask:Me[1]},prefix:_,iconName:r,transform:C,symbol:S,maskId:F,title:s,titleId:d,extra:W,watchable:!0})])}).catch(ce)})},n.generateAbstractIcon=function(e){var S,i=e.children,r=e.attributes,s=e.main,d=e.transform,C=$9(e.styles);return C.length>0&&(r.style=C),My(d)&&(S=f4("generateAbstractTransformGrouping",{main:s,transform:d,containerWidth:s.width,iconWidth:s.width})),i.push(S||s.icon),{children:i,attributes:r}}}},qAe={mixout:function(){return{layer:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return Q9({type:"layer"},function(){J0("beforeDOMElementCreation",{assembler:e,params:i});var d=[];return e(function(_){Array.isArray(_)?_.map(function(C){d=d.concat(C.abstract)}):d=d.concat(_.abstract)}),[{tag:"span",attributes:{class:["".concat(o1.cssPrefix,"-layers")].concat(Od(s)).join(" ")},children:d}]})}}}},WAe={mixout:function(){return{counter:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,d=i.classes,_=void 0===d?[]:d,C=i.attributes,S=void 0===C?{}:C,V=i.styles,F=void 0===V?{}:V;return Q9({type:"counter",content:e},function(){return J0("beforeDOMElementCreation",{content:e,params:i}),function SAe(t){var n=t.content,e=t.title,i=t.extra,r=qt(qt(qt({},i.attributes),e?{title:e}:{}),{},{class:i.classes.join(" ")}),s=$9(i.styles);s.length>0&&(r.style=s);var d=[];return d.push({tag:"span",attributes:r,children:[n]}),e&&d.push({tag:"span",attributes:{class:"sr-only"},children:[e]}),d}({content:e.toString(),title:s,extra:{attributes:S,styles:F,classes:["".concat(o1.cssPrefix,"-layers-counter")].concat(Od(_))}})})}}}},ZAe={mixout:function(){return{text:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?b3:r,d=i.title,_=void 0===d?null:d,C=i.classes,S=void 0===C?[]:C,V=i.attributes,F=void 0===V?{}:V,W=i.styles,K=void 0===W?{}:W;return Q9({type:"text",content:e},function(){return J0("beforeDOMElementCreation",{content:e,params:i}),xP({content:e,transform:qt(qt({},b3),s),title:_,extra:{attributes:F,styles:K,classes:["".concat(o1.cssPrefix,"-layers-text")].concat(Od(S))}})})}}},provides:function(n){n.generateLayersText=function(e,i){var r=i.title,s=i.transform,d=i.extra,_=null,C=null;if(KR){var S=parseInt(getComputedStyle(e).fontSize,10),V=e.getBoundingClientRect();_=V.width/S,C=V.height/S}return o1.autoA11y&&!r&&(d.attributes["aria-hidden"]="true"),Promise.resolve([e,xP({content:e.innerHTML,width:_,height:C,transform:s,title:r,extra:d,watchable:!0})])}}},YAe=new RegExp('"',"ug"),HP=[1105920,1112319];function kP(t,n){var e="".concat(FDe).concat(n.replace(":","-"));return new Promise(function(i,r){if(null!==t.getAttribute(e))return i();var d=W8(t.children).filter(function(Ln){return Ln.getAttribute(yy)===n})[0],_=Dl.getComputedStyle(t,n),C=_.getPropertyValue("font-family").match(jDe),S=_.getPropertyValue("font-weight"),V=_.getPropertyValue("content");if(d&&!C)return t.removeChild(d),i();if(C&&"none"!==V&&""!==V){var F=_.getPropertyValue("content"),W=~["Sharp"].indexOf(C[2])?o2:xi,K=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(C[2])?jd[W][C[2].toLowerCase()]:GDe[W][S],ce=function XAe(t){var n=t.replace(YAe,""),e=function lAe(t,n){var r,e=t.length,i=t.charCodeAt(n);return i>=55296&&i<=56319&&e>n+1&&(r=t.charCodeAt(n+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(n,0),i=e>=HP[0]&&e<=HP[1],r=2===n.length&&n[0]===n[1];return{value:Dy(r?n[0]:n),isSecondary:i||r}}(F),be=ce.value,Me=ce.isSecondary,He=C[0].startsWith("FontAwesome"),lt=Vy(K,be),$e=lt;if(He){var St=function gAe(t){var n=pP[t],e=Vy("fas",t);return n||(e?{prefix:"fas",iconName:e}:null)||{prefix:null,iconName:null}}(be);St.iconName&&St.prefix&&(lt=St.iconName,K=St.prefix)}if(!lt||Me||d&&d.getAttribute(by)===K&&d.getAttribute(xy)===$e)i();else{t.setAttribute(e,$e),d&&t.removeChild(d);var h1=function OAe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:b3,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),en=h1.extra;en.attributes[yy]=n,Py(lt,K).then(function(Ln){var Xo=ky(qt(qt({},h1),{},{icons:{main:Ln,mask:Ly()},prefix:K,iconName:$e,extra:en,watchable:!0})),Mr=bi.createElement("svg");"::before"===n?t.insertBefore(Mr,t.firstChild):t.appendChild(Mr),Mr.outerHTML=Xo.map(function(Uc){return Yd(Uc)}).join("\n"),t.removeAttribute(e),i()}).catch(r)}}else i()})}function KAe(t){return Promise.all([kP(t,"::before"),kP(t,"::after")])}function QAe(t){return!(t.parentNode===document.head||~ODe.indexOf(t.tagName.toUpperCase())||t.getAttribute(yy)||t.parentNode&&"svg"===t.parentNode.tagName)}function IP(t){if(l4)return new Promise(function(n,e){var i=W8(t.querySelectorAll("*")).filter(QAe).map(KAe),r=Ny.begin("searchPseudoElements");AP(),Promise.all(i).then(function(){r(),By(),n()}).catch(function(){r(),By(),e()})})}var RP=!1,PP=function(n){return n.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),d=s[0],_=s.slice(1).join("-");if(d&&"h"===_)return i.flipX=!0,i;if(d&&"v"===_)return i.flipY=!0,i;if(_=parseFloat(_),isNaN(_))return i;switch(d){case"grow":i.size=i.size+_;break;case"shrink":i.size=i.size-_;break;case"left":i.x=i.x-_;break;case"right":i.x=i.x+_;break;case"up":i.y=i.y-_;break;case"down":i.y=i.y+_;break;case"rotate":i.rotate=i.rotate+_}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Uy={x:0,y:0,width:"100%",height:"100%"};function FP(t){return t.attributes&&(t.attributes.fill||!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.attributes.fill="black"),t}!function yAe(t,n){var e=n.mixoutsTo;yP=t,Y8={},Object.keys(X8).forEach(function(i){-1===vAe.indexOf(i)&&delete X8[i]}),yP.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(d){"function"==typeof r[d]&&(e[d]=r[d]),"object"===P9(r[d])&&Object.keys(r[d]).forEach(function(_){e[d]||(e[d]={}),e[d][_]=r[d][_]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(d){Y8[d]||(Y8[d]=[]),Y8[d].push(s[d])})}i.provides&&i.provides(X8)})}([rAe,$Ae,qAe,WAe,ZAe,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=IP,e}}},provides:function(n){n.pseudoElements2svg=function(e){var i=e.node;o1.searchPseudoElements&&IP(void 0===i?bi:i)}}},{mixout:function(){return{dom:{unwatch:function(){AP(),RP=!0}}}},hooks:function(){return{bootstrap:function(){EP(Ty("mutationObserverCallbacks",{}))},noAuto:function(){!function RAe(){tp&&tp.disconnect()}()},watch:function(e){var i=e.observeMutationsRoot;RP?By():EP(Ty("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},{mixout:function(){return{parse:{transform:function(e){return PP(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-transform");return r&&(e.transform=PP(r)),e}}},provides:function(n){n.generateAbstractTransformGrouping=function(e){var i=e.main,r=e.transform,d=e.iconWidth,_={transform:"translate(".concat(e.containerWidth/2," 256)")},C="translate(".concat(32*r.x,", ").concat(32*r.y,") "),S="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),V="rotate(".concat(r.rotate," 0 0)"),K={outer:_,inner:{transform:"".concat(C," ").concat(S," ").concat(V)},path:{transform:"translate(".concat(d/2*-1," -256)")}};return{tag:"g",attributes:qt({},K.outer),children:[{tag:"g",attributes:qt({},K.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:qt(qt({},i.icon.attributes),K.path)}]}]}}}},{hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-mask"),s=r?K9(r.split(" ").map(function(d){return d.trim()})):Ly();return s.prefix||(s.prefix=El()),e.mask=s,e.maskId=i.getAttribute("data-fa-mask-id"),e}}},provides:function(n){n.generateAbstractMask=function(e){var t,i=e.children,r=e.attributes,s=e.main,d=e.mask,_=e.maskId,V=s.icon,W=d.icon,K=function tAe(t){var n=t.transform,i=t.iconWidth,r={transform:"translate(".concat(t.containerWidth/2," 256)")},s="translate(".concat(32*n.x,", ").concat(32*n.y,") "),d="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),_="rotate(".concat(n.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(d," ").concat(_)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:e.transform,containerWidth:d.width,iconWidth:s.width}),ce={tag:"rect",attributes:qt(qt({},Uy),{},{fill:"white"})},be=V.children?{children:V.children.map(FP)}:{},Me={tag:"g",attributes:qt({},K.inner),children:[FP(qt({tag:V.tag,attributes:qt(qt({},V.attributes),K.path)},be))]},He={tag:"g",attributes:qt({},K.outer),children:[Me]},lt="mask-".concat(_||Zd()),$e="clip-".concat(_||Zd()),St={tag:"mask",attributes:qt(qt({},Uy),{},{id:lt,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ce,He]},h1={tag:"defs",children:[{tag:"clipPath",attributes:{id:$e},children:(t=W,"g"===t.tag?t.children:[t])},St]};return i.push(h1,{tag:"rect",attributes:qt({fill:"currentColor","clip-path":"url(#".concat($e,")"),mask:"url(#".concat(lt,")")},Uy)}),{children:i,attributes:r}}}},{provides:function(n){var e=!1;Dl.matchMedia&&(e=Dl.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:qt(qt({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var d=qt(qt({},s),{},{attributeName:"opacity"}),_={tag:"circle",attributes:qt(qt({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||_.children.push({tag:"animate",attributes:qt(qt({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:qt(qt({},d),{},{values:"1;0;1;1;0;1;"})}),i.push(_),i.push({tag:"path",attributes:qt(qt({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:qt(qt({},d),{},{values:"1;0;0;0;0;1;"})}]}),e||i.push({tag:"path",attributes:qt(qt({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:qt(qt({},d),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},{hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-symbol");return e.symbol=null!==r&&(""===r||r),e}}}}],{mixoutsTo:qo});var sEe=qo.parse,cEe=qo.icon;const lEe=["*"],fEe=t=>{const n={[`fa-${t.animation}`]:null!=t.animation&&!t.animation.startsWith("spin"),"fa-spin":"spin"===t.animation||"spin-reverse"===t.animation,"fa-spin-pulse":"spin-pulse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-spin-reverse":"spin-reverse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-pulse":"spin-pulse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-inverse":t.inverse,"fa-layers-counter":t.counter,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip,[`fa-${t.size}`]:null!==t.size,[`fa-rotate-${t.rotate}`]:null!==t.rotate,[`fa-pull-${t.pull}`]:null!==t.pull,[`fa-stack-${t.stackItemSize}`]:null!=t.stackItemSize};return Object.keys(n).map(e=>n[e]?e:null).filter(e=>e)};let mEe=(()=>{class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gEe=(()=>{class t{constructor(){this.definitions={}}addIcons(...e){for(const i of e){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...e){for(const i of e){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(e,i){return e in this.definitions&&i in this.definitions[e]?this.definitions[e][i]:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_Ee=(()=>{class t{constructor(){this.stackItemSize="1x"}ngOnChanges(e){if("size"in e)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[wn]}),t})(),vEe=(()=>{class t{constructor(e,i){this.renderer=e,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(e){"size"in e&&(null!=e.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${e.size.currentValue}`),null!=e.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${e.size.previousValue}`))}}return t.\u0275fac=function(e){return new(e||t)(q(fo),q(Nt))},t.\u0275cmp=Bt({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},features:[wn],ngContentSelectors:lEe,decls:1,vars:0,template:function(e,i){1&e&&(Or(),Gn(0))},encapsulation:2}),t})(),np=(()=>{class t{constructor(e,i,r,s,d){this.sanitizer=e,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=d&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}set spin(e){this.animation=e?"spin":void 0}set pulse(e){this.animation=e?"spin-pulse":void 0}ngOnChanges(e){if(null!=this.icon||null!=this.config.fallbackIcon){if(e){const r=this.findIconDefinition(null!=this.icon?this.icon:this.config.fallbackIcon);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}else(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})()}render(){this.ngOnChanges({})}findIconDefinition(e){const i=((t,n)=>(t=>void 0!==t.prefix&&void 0!==t.iconName)(t)?t:"string"==typeof t?{prefix:n,iconName:t}:{prefix:t[0],iconName:t[1]})(e,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((t=>{throw new Error(`Could not find icon with iconName=${t.iconName} and prefix=${t.prefix} in the icon library.`)})(i),null)}buildParams(){const e={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?sEe.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...fEe(e),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(e,i){const r=cEe(e,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return t.\u0275fac=function(e){return new(e||t)(q(Uh),q(mEe),q(gEe),q(_Ee,8),q(vEe,8))},t.\u0275cmp=Bt({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(e,i){2&e&&(pl("innerHTML",i.renderedIconHTML,hf),We("title",i.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[wn],decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})(),jy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})(),yEe=(()=>{class t{constructor(){this.faThumbsUp=LA,this.faClockFout=gA,this.faPiggyBank=TH,this.faFacebook=R9,this.faEnvelope=iH,this.faInstagram=I9}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-footer"]],decls:35,vars:6,consts:[[1,"grid-container"],[1,"grid-item"],[2,"font-size","50px","color","#C7E7F1",3,"icon"],[1,"contact"],[1,"social-icons"],["href","#"],[1,"face",3,"icon"],[1,"insta",3,"icon"],[1,"enve",3,"icon"],[1,"grid-item-full"],[1,"disclaimer"]],template:function(e,i){1&e&&(le(0,"footer")(1,"div",0)(2,"div",1),ft(3,"fa-icon",2),le(4,"h4"),Ue(5,"Best price"),pe(),le(6,"p"),Ue(7," Promise of lowest prices compared to competitors, will match or beat lower prices found elsewhere."),pe()(),le(8,"div",1),ft(9,"fa-icon",2),le(10,"h4"),Ue(11,"No surprises"),pe(),le(12,"p"),Ue(13,"Instant booking and confirmation of availability guaranteed."),pe()(),le(14,"div",1),ft(15,"fa-icon",2),le(16,"h4"),Ue(17,"Discounts"),pe(),le(18,"p"),Ue(19,"When making your reservation you'll receive discounts and free services."),pe()(),le(20,"div",3)(21,"h3"),Ue(22,"Contact Us"),pe(),le(23,"div",4)(24,"a",5),ft(25,"fa-icon",6),pe(),le(26,"a",5),ft(27,"fa-icon",7),pe(),le(28,"a",5),ft(29,"fa-icon",8),pe()()()(),le(30,"div",9)(31,"h1"),Ue(32,"- Hotel Jacqueline -"),pe(),le(33,"p",10),Ue(34,"Disclaimer: This is not an official website its a University Proyect. This site offers the property's information and telephone number, as well as online Booking service."),pe()()()),2&e&&(Xe(3),Ze("icon",i.faThumbsUp),Xe(6),Ze("icon",i.faClockFout),Xe(6),Ze("icon",i.faPiggyBank),Xe(10),Ze("icon",i.faFacebook),Xe(2),Ze("icon",i.faInstagram),Xe(2),Ze("icon",i.faEnvelope))},dependencies:[np],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:20px;justify-content:center;align-items:center;background-color:#0b161b;color:#fff;padding:20px}.grid-item[_ngcontent-%COMP%]{text-align:center}.grid-item-full[_ngcontent-%COMP%]{text-align:center;background-color:#081820;padding:20px;color:#fff}h1[_ngcontent-%COMP%]{font-size:2rem;margin:0}.disclaimer[_ngcontent-%COMP%]{font-size:.9rem;margin:10px 0 0}.contact[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.social-icons[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;grid-column-gap:20px;justify-content:end}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}fa-icon[_ngcontent-%COMP%]{font-size:30px;color:#c7e7f1;cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:#fff;cursor:pointer}.insta[_ngcontent-%COMP%]:hover{color:#e1306c}.face[_ngcontent-%COMP%]:hover{color:#3b5998}.enve[_ngcontent-%COMP%]:hover{color:#d44638}"]}),t})(),bEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-default"]],decls:5,vars:0,consts:[["flexLayout","row","fxFlex",""],["flexLayout","column"]],template:function(e,i){1&e&&(ft(0,"app-header"),le(1,"div",0)(2,"div"),ft(3,"router-outlet"),pe()(),ft(4,"app-footer",1))},dependencies:[i9,KS,yQ,yEe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap";[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Montserrat,sans-serif}']}),t})(),xEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-section-experience"]],decls:13,vars:0,consts:[[1,"container-experience"],[1,"image-container-experience"],["src","assets/imgs/fake/fake2.jpg","alt",""],[1,"title-container-ex-main"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1),ft(2,"img",2),pe(),le(3,"div",3)(4,"h1"),Ue(5,"Experience"),pe(),le(6,"h2")(7,"span"),Ue(8,"OF A LIFE TIME"),pe()(),le(9,"p"),Ue(10,"Take your vacation to the next level and embark on an unforgettable adventure with Experience. "),ft(11,"br"),Ue(12," Don't settle for the ordinary - let us show you the extraordinary."),pe()()())},styles:[".container-experience[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.container-experience[_ngcontent-%COMP%]   .image-container-experience[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px;max-width:500px}.container-experience[_ngcontent-%COMP%]   .image-container-experience[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:cover;width:1020px;border-radius:1rem;clip-path:polygon(10% 0,80% 0,80% 100%,10% 100%);left:-160px}.container-experience[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4.5rem;margin:0;font-family:Radley,serif;display:initial;font-weight:700;letter-spacing:.15em}.container-experience[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:10px;font-size:48px}.container-experience[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-family:Montserrat;font-weight:100}.container-experience[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container-experience[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container-experience[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.title-container-ex-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:0 450px 0 auto;height:100%;width:100%;transform:translate(-3.5%);text-align:center;border:2px solid white;border-radius:5px}"]}),t})(),CEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-section-home"]],decls:16,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"image-container"],["src","assets/imgs/rooms/room-person-23.jpg",1,"img-1"],["src","assets/imgs/rooms/room4.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Your home"),pe(),le(4,"h2")(5,"span"),Ue(6,"AWAY FROM HOME"),pe()(),le(7,"p"),Ue(8,"Experience the perfect blend of relaxation and sophistication at Your Home, our premier vacation rental service. We understand that your vacation time is precious and that you deserve a comfortable and stylish home-away-from-home experience."),pe(),le(9,"p"),Ue(10,"Our properties are thoughtfully curated and meticulously maintained, ensuring that every detail is taken care of, from luxurious linens to fully equipped kitchens. Whether you're looking for a romantic getaway for two or a family vacation, we have a wide range of properties to choose from, each with its own unique charm and character. "),pe(),le(11,"p"),Ue(12,"With Your Home, you can truly unwind and let your cares melt away. Book your stay today and discover the ultimate in relaxation and comfort."),pe()(),le(13,"div",2),ft(14,"img",3)(15,"img",4),pe()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:150px;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{margin-top:80px;padding-right:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-1[_ngcontent-%COMP%]{position:absolute;top:40%;left:15%;transform:translate(-55%);height:300px;width:400px;z-index:1}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:400px;width:900px;top:-10%;right:25%;transform:translate(20%);grid-row-start:1;grid-column-start:1 / span 2}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})(),wEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-section-satisfy"]],decls:26,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"spanP"],[1,"image-container"],["src","assets/imgs/fake/fake-comedor-2.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Satisfy"),pe(),le(4,"h2")(5,"span"),Ue(6,"YOUR TASTEBUDS"),pe()(),le(7,"p")(8,"span",2),Ue(9," Treat yourself to a world-class dining experience with Satisfy, "),ft(10,"br"),Ue(11," our premier restaurant reservation service. "),ft(12,"br"),Ue(13," Whether you're in the mood for gourmet cuisine or casual dining, "),ft(14,"br"),Ue(15," we have a wide range of options to suit your tastes and preferences "),ft(16,"br"),Ue(17," With Satisfy, booking a table has never been easier. "),ft(18,"br")(19,"br"),Ue(20," We'll take care of everything, from securing your reservation to ensuring that your dining experience is nothing short of exceptional. "),ft(21,"br")(22,"br"),Ue(23," Don't settle for mediocre meals - indulge in the finest culinary delights with Satisfy. "),pe()()(),le(24,"div",3),ft(25,"img",4),pe()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   .spanP[_ngcontent-%COMP%]{display:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:460px;width:900px;top:0;right:25%;transform:translate(20%)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})(),MEe=(()=>{class t{constructor(){this.faStar=_V}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-home"]],decls:15,vars:5,consts:[[1,"container-main"],[1,"title-container"],[1,"star-container"],[2,"font-size","30px",3,"icon"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Hotel Jacqueline | Rinc\xf3n de Guayabitos | Mexico "),pe(),le(4,"h3"),Ue(5,"Your home away from home. Book with us."),pe(),le(6,"div",2),ft(7,"fa-icon",3)(8,"fa-icon",3)(9,"fa-icon",3)(10,"fa-icon",3)(11,"fa-icon",3),pe()()(),ft(12,"app-section-home")(13,"app-section-experience")(14,"app-section-satisfy")),2&e&&(Xe(7),Ze("icon",i.faStar),Xe(1),Ze("icon",i.faStar),Xe(1),Ze("icon",i.faStar),Xe(1),Ze("icon",i.faStar),Xe(1),Ze("icon",i.faStar))},dependencies:[np,xEe,CEe,wEe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fff}.star-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.star-container[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#fff}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake1.af790eb95aa8ba5f.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})(),zEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-mission"]],decls:15,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"image-container"],["src","assets/imgs/fake/recpecionist.jpg",1,"img-1"],["src","assets/imgs/rooms/room16.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Our Mission "),pe(),le(4,"h2")(5,"span"),Ue(6,"Our Vision"),pe()(),le(7,"p"),Ue(8," At our hotel, our mission is to provide a memorable and comfortable stay for our guests by delivering exceptional service, state-of-the-art amenities, and a warm and welcoming environment. We strive to be the premier destination for travelers seeking relaxation and rejuvenation. "),ft(9,"br")(10,"br"),Ue(11," Our vision is to be recognized as the best hotel in the area, setting the standard for excellence in hospitality. We value integrity, respect, and teamwork, and we are committed to continuous improvement in everything we do. "),pe()(),le(12,"div",2),ft(13,"img",3)(14,"img",4),pe()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:150px;align-items:flex-start;padding:60px;height:900px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{margin-top:80px;padding-right:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-1[_ngcontent-%COMP%]{position:absolute;top:40%;left:15%;transform:translate(-55%);height:300px;width:450px;z-index:1}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:400px;width:900px;top:-10%;right:25%;transform:translate(20%);grid-row-start:1;grid-column-start:1 / span 2}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})();var SEe=R2(898),Gy=R2.n(SEe);let DEe=(()=>{class t{constructor(){this.map={}}inicializarMapa(){Gy().accessToken="pk.eyJ1IjoibHVpc25hdjYiLCJhIjoiY2xoZHVwMmdxMHEzbjNlcGcxMGNkbmR4eSJ9.NqQcfdV5l-XeRgpPHc4xEQ",this.map=new(Gy().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-105.267,21.0167],zoom:9,accessToken:"pk.eyJ1IjoibHVpc25hdjYiLCJhIjoiY2xoZHVwMmdxMHEzbjNlcGcxMGNkbmR4eSJ9.NqQcfdV5l-XeRgpPHc4xEQ",attributionControl:!1})}agregarMarcador(e,i){(new(Gy().Marker)).setLngLat([e,i]).addTo(this.map)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),AEe=(()=>{class t{constructor(e){this.mapService=e}ngAfterViewInit(){this.mapService.inicializarMapa()}agregarMarcador(){this.mapService.agregarMarcador(-105.267,21.0167)}}return t.\u0275fac=function(e){return new(e||t)(q(DEe))},t.\u0275cmp=Bt({type:t,selectors:[["app-map"]],decls:1,vars:2,consts:[["id","map"]],template:function(e,i){1&e&&ft(0,"div",0),2&e&&function Hc(t){Ic(lC,dU,t,!1)}("height:500px")}}),t})(),EEe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-about"]],decls:8,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"About us"),pe(),le(4,"h3"),Ue(5,"Discover Our Story"),pe()()(),ft(6,"app-mission")(7,"app-map"))},dependencies:[zEe,AEe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(sea-2.a691d01fb41dfcf0.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})();var VEe=R2(226),Ll=R2.n(VEe);let NP=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(q(fo),q(Nt))},t.\u0275dir=je({type:t}),t})(),e6=(()=>{class t extends NP{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,features:[ht]}),t})();const Fs=new vt("NgValueAccessor"),HEe={provide:Fs,useExisting:rn(()=>K8),multi:!0},IEe=new vt("CompositionEventMode");let K8=(()=>{class t extends NP{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function kEe(){const t=t4()?t4().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(q(fo),q(Nt),q(IEe,8))},t.\u0275dir=je({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&$t("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[E1([HEe]),ht]}),t})();const REe=!1;function Tl(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function BP(t){return null!=t&&"number"==typeof t.length}const wr=new vt("NgValidators"),Hl=new vt("NgAsyncValidators"),PEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kl{static min(n){return function UP(t){return n=>{if(Tl(n.value)||Tl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function jP(t){return n=>{if(Tl(n.value)||Tl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function GP(t){return Tl(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function $P(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function qP(t){return Tl(t.value)||PEe.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function WP(t){return n=>Tl(n.value)||!BP(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function ZP(t){return n=>BP(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static pattern(n){return function YP(t){if(!t)return ip;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(Tl(i.value))return null;const r=i.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(n)}static nullValidator(n){return null}static compose(n){return tF(n)}static composeAsync(n){return nF(n)}}function ip(t){return null}function XP(t){return null!=t}function KP(t){const n=Ni(t)?Jn(t):t;if(REe&&!Oi(n)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new rt(-1101,e)}return n}function QP(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function JP(t,n){return n.map(e=>e(t))}function eF(t){return t.map(n=>function FEe(t){return!t.validate}(n)?n:e=>n.validate(e))}function tF(t){if(!t)return null;const n=t.filter(XP);return 0==n.length?null:function(e){return QP(JP(e,n))}}function $y(t){return null!=t?tF(eF(t)):null}function nF(t){if(!t)return null;const n=t.filter(XP);return 0==n.length?null:function(e){return function LEe(...t){const n=Wt(t),{args:e,keys:i}=_z(t),r=new c1(s=>{const{length:d}=e;if(!d)return void s.complete();const _=new Array(d);let C=d,S=d;for(let V=0;V<d;V++){let F=!1;G(e[V]).subscribe(V1(s,W=>{F||(F=!0,S--),_[V]=W},()=>C--,void 0,()=>{(!C||!F)&&(S||s.next(i?vz(i,_):_),s.complete())}))}});return n?r.pipe(V_(n)):r}(JP(e,n).map(KP)).pipe(t1(QP))}}function qy(t){return null!=t?nF(eF(t)):null}function iF(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function rF(t){return t._rawValidators}function aF(t){return t._rawAsyncValidators}function Wy(t){return t?Array.isArray(t)?t:[t]:[]}function rp(t,n){return Array.isArray(t)?t.includes(n):t===n}function oF(t,n){const e=Wy(n);return Wy(t).forEach(r=>{rp(e,r)||e.push(r)}),e}function sF(t,n){return Wy(n).filter(e=>!rp(t,e))}class cF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=$y(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=qy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Ea extends cF{get formDirective(){return null}get path(){return null}}class x3 extends cF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lF{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ap=(()=>{class t extends lF{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(q(x3,2))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&qn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ht]}),t})(),op=(()=>{class t extends lF{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(q(Ea,10))},t.\u0275dir=je({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&qn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ht]}),t})();function uF(t,n){return t?`with name: '${n}'`:`at index: ${n}`}const Xy=!1,Kd="VALID",cp="INVALID",Q8="PENDING",Qd="DISABLED";function Ky(t){return(lp(t)?t.validators:t)||null}function Qy(t,n){return(lp(n)?n.asyncValidators:t)||null}function lp(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function dF(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new rt(1e3,Xy?function UEe(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!i[e])throw new rt(1001,Xy?function jEe(t,n){return`Cannot find form control ${uF(t,n)}`}(n,e):"")}function fF(t,n,e){t._forEachChild((i,r)=>{if(void 0===e[r])throw new rt(1002,Xy?function GEe(t,n){return`Must supply a value for form control ${uF(t,n)}`}(n,r):"")})}class up{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Kd}get invalid(){return this.status===cp}get pending(){return this.status==Q8}get disabled(){return this.status===Qd}get enabled(){return this.status!==Qd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(oF(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(oF(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(sF(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(sF(n,this._rawAsyncValidators))}hasValidator(n){return rp(this._rawValidators,n)}hasAsyncValidator(n){return rp(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Q8,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Qd,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Kd,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kd||this.status===Q8)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qd:Kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Q8,this._hasOwnPendingAsyncValidator=!0;const e=KP(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Gt,this.statusChanges=new Gt}_calculateStatus(){return this._allControlsDisabled()?Qd:this.errors?cp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Q8)?Q8:this._anyControlsHaveStatus(cp)?cp:Kd}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){lp(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function $Ee(t){return Array.isArray(t)?$y(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function qEe(t){return Array.isArray(t)?qy(t):t||null}(this._rawAsyncValidators)}}class J8 extends up{constructor(n,e,i){super(Ky(e),Qy(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){fF(this,!0,n),Object.keys(n).forEach(i=>{dF(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class hF extends J8{}const t6=new vt("CallSetDisabledState",{providedIn:"root",factory:()=>Jd}),Jd="always";function dp(t,n){return[...n.path,t]}function e7(t,n,e=Jd){Jy(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function ZEe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&pF(t,n)})}(t,n),function XEe(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function YEe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&pF(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function WEe(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function fp(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),pp(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function hp(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Jy(t,n){const e=rF(t);null!==n.validator?t.setValidators(iF(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=aF(t);null!==n.asyncValidator?t.setAsyncValidators(iF(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();hp(n._rawValidators,r),hp(n._rawAsyncValidators,r)}function pp(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=rF(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(d=>d!==n.validator);s.length!==r.length&&(e=!0,t.setValidators(s))}}if(null!==n.asyncValidator){const r=aF(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(d=>d!==n.asyncValidator);s.length!==r.length&&(e=!0,t.setAsyncValidators(s))}}}const i=()=>{};return hp(n._rawValidators,i),hp(n._rawAsyncValidators,i),e}function pF(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function mF(t,n){Jy(t,n)}function tb(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function gF(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function nb(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(s=>{s.constructor===K8?e=s:function JEe(t){return Object.getPrototypeOf(t.constructor)===e6}(s)?i=s:r=s}),r||i||e||null}const tVe={provide:Ea,useExisting:rn(()=>n6)},t7=(()=>Promise.resolve())();let n6=(()=>{class t extends Ea{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Gt,this.form=new J8({},$y(e),qy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){t7.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),e7(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){t7.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){t7.then(()=>{const i=this._findContainer(e.path),r=new J8({});mF(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){t7.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){t7.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,gF(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(q(wr,10),q(Hl,10),q(t6,8))},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&$t("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E1([tVe]),ht]}),t})();function _F(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function vF(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const n7=class extends up{constructor(n=null,e,i){super(Ky(e),Qy(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lp(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=vF(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){_F(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){_F(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){vF(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},rVe={provide:x3,useExisting:rn(()=>mp)},xF=(()=>Promise.resolve())();let mp=(()=>{class t extends x3{constructor(e,i,r,s,d,_){super(),this._changeDetectorRef=d,this.callSetDisabledState=_,this.control=new n7,this._registered=!1,this.update=new Gt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=nb(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),tb(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){e7(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){xF.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&E8(i);xF.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?dp(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(q(Ea,9),q(wr,10),q(Hl,10),q(Fs,10),q(Ur,8),q(t6,8))},t.\u0275dir=je({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E1([rVe]),ht,wn]}),t})(),gp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),wF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})();const ib=new vt("NgModelWithFormControlWarning"),uVe={provide:Ea,useExisting:rn(()=>e5)};let e5=(()=>{class t extends Ea{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Gt,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return e7(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){fp(e.control||null,e,!1),function eVe(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,gF(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(fp(i||null,e),(t=>t instanceof n7)(r)&&(e7(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);mF(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function KEe(t,n){return pp(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jy(this.form,this),this._oldForm&&pp(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(q(wr,10),q(Hl,10),q(t6,8))},t.\u0275dir=je({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&$t("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E1([uVe]),ht,wn]}),t})();const hVe={provide:x3,useExisting:rn(()=>ob)};let ob=(()=>{class t extends x3{set isDisabled(e){}constructor(e,i,r,s,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new Gt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=nb(0,s)}ngOnChanges(e){this._added||this._setUpControl(),tb(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return dp(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(q(Ea,13),q(wr,10),q(Hl,10),q(Fs,10),q(ib,8))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[E1([hVe]),ht,wn]}),t})();const pVe={provide:Fs,useExisting:rn(()=>_p),multi:!0};function AF(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let _p=(()=>{class t extends e6{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=AF(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function mVe(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&$t("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[E1([pVe]),ht]}),t})(),EF=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(AF(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(fo),q(_p,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const gVe={provide:Fs,useExisting:rn(()=>sb),multi:!0};function VF(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let sb=(()=>{class t extends e6{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,d)=>{s._setSelected(r.indexOf(d.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const d=s;for(let _=0;_<d.length;_++){const S=this._getOptionValue(d[_].value);r.push(S)}}else{const d=i.options;for(let _=0;_<d.length;_++){const C=d[_];if(C.selected){const S=this._getOptionValue(C.value);r.push(S)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function _Ve(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&$t("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[E1([gVe]),ht]}),t})(),LF=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(VF(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(VF(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(fo),q(sb,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),OF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[wF]}),t})();class BF extends up{constructor(n,e,i){super(Ky(e),Qy(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){fF(this,!1,n),n.forEach((i,r)=>{dF(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function UF(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let ub,SVe=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new t;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return UF(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new J8(r,s)}record(e,i=null){const r=this._reduceControls(e);return new hF(r,i)}control(e,i,r){let s={};return this.useNonNullable?(UF(i)?s=i:(s.validators=i,s.asyncValidators=r),new n7(e,{...s,nonNullable:!0})):new n7(e,i,r)}array(e,i,r){const s=e.map(d=>this._createControl(d));return new BF(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof n7||e instanceof up?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),DVe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:t6,useValue:e.callSetDisabledState??Jd}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[OF]}),t})(),AVe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ib,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:t6,useValue:e.callSetDisabledState??Jd}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[OF]}),t})();try{ub=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ub=!1}let t5,k2=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?r4(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ub)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Ie(vo))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const jF=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function GF(){if(t5)return t5;if("object"!=typeof document||!document)return t5=new Set(jF),t5;let t=document.createElement("input");return t5=new Set(jF.filter(n=>(t.setAttribute("type",n),t.type===n))),t5}let i7,vp,r6,db;function r7(t){return function EVe(){if(null==i7&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>i7=!0}))}finally{i7=i7||!1}return i7}()?t:!!t.capture}function $F(){if(null==r6){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return r6=!1,r6;if("scrollBehavior"in document.documentElement.style)r6=!0;else{const t=Element.prototype.scrollTo;r6=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return r6}function a7(){if("object"!=typeof document||!document)return 0;if(null==vp){const t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),vp=0,0===t.scrollLeft&&(t.scrollLeft=1,vp=0===t.scrollLeft?1:2),t.remove()}return vp}function qF(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function Il(t){return t.composedPath?t.composedPath()[0]:t.target}function fb(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Bc(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class BVe extends Ye{constructor(n,e){super()}schedule(n,e=0){return this}}const xp={setInterval(t,n,...e){const{delegate:i}=xp;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=xp;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};class pb extends BVe{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,i=0){return xp.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&xp.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,p(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}const ZF={now:()=>(ZF.delegate||Date).now(),delegate:void 0};class c7{constructor(n,e=c7.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}c7.now=ZF.now;class mb extends c7{constructor(n,e=c7.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const Cp=new mb(pb),UVe=Cp;function gb(t,n=Cp){return X1((e,i)=>{let r=null,s=null,d=null;const _=()=>{if(r){r.unsubscribe(),r=null;const S=s;s=null,i.next(S)}};function C(){const S=d+t,V=n.now();if(V<S)return r=this.schedule(void 0,S-V),void i.add(r);_()}e.subscribe(V1(i,S=>{s=S,d=n.now(),r||(r=n.schedule(C,t),i.add(r))},()=>{_(),i.complete()},void 0,()=>{s=r=null}))})}function YF(t){return _i((n,e)=>t<=e)}function XF(t,n=b2){return t=t??jVe,X1((e,i)=>{let r,s=!0;e.subscribe(V1(i,d=>{const _=n(d);(s||!t(r,_))&&(s=!1,r=_,i.next(d))}))})}function jVe(t,n){return t===n}let KF=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),GVe=(()=>{class t{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=c4(e);return new c1(r=>{const d=this._observeElement(i).subscribe(r);return()=>{d.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Yt,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return t.\u0275fac=function(e){return new(e||t)(Ie(KF))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$Ve=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=hn(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=hv(e),this._subscribe()}constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new Gt,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(gb(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(q(GVe),q(Nt),q(d1))},t.\u0275dir=je({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),QF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[KF]}),t})();const JF=new Set;let a5,qVe=(()=>{class t{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ZVe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function WVe(t){if(!JF.has(t))try{a5||(a5=document.createElement("style"),a5.setAttribute("type","text/css"),document.head.appendChild(a5)),a5.sheet&&(a5.sheet.insertRule(`@media ${t} {body{ }}`,0),JF.add(t))}catch(n){console.error(n)}}(e),this._matchMedia(e)}}return t.\u0275fac=function(e){return new(e||t)(Ie(k2))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ZVe(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let YVe=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Yt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return eN(_9(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=L_(eN(_9(e)).map(d=>this._registerQuery(d).observable));return s=T8(s.pipe(Ei(1)),s.pipe(YF(1),gb(0))),s.pipe(t1(d=>{const _={matches:!1,breakpoints:{}};return d.forEach(({matches:C,query:S})=>{_.matches=_.matches||C,_.breakpoints[S]=C}),_}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new c1(d=>{const _=C=>this._zone.run(()=>d.next(C));return i.addListener(_),()=>{i.removeListener(_)}}).pipe(yl(i),t1(({matches:d})=>({query:e,matches:d})),yi(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return t.\u0275fac=function(e){return new(e||t)(Ie(qVe),Ie(d1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function eN(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}class QVe{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Yt,this._typeaheadSubscription=Ye.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Yt,this.change=new Yt,n instanceof od&&(this._itemChangesSubscription=n.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(er(e=>this._pressedLetters.push(e)),gb(n),_i(()=>this._pressedLetters.length>0),t1(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,d=i[s];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){const e=this._activeItem;this.updateActiveItem(n),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){const e=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!n[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,d=this._getItemsArray().length;this._setActiveItemByIndex(s<d?s:d-1,-1);break}return;default:return void((r||Bc(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const e=this._getItemsArray(),i="number"==typeof n?n:e.indexOf(n);this._activeItem=e[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+n*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){const i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(!i[n+=e])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof od?this._items.toArray():this._items}}class JVe extends QVe{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}let eLe=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function nLe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function tLe(t){try{return t.frameElement}catch{return null}}(function uLe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===rN(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=rN(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function cLe(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function lLe(t){return!function rLe(t){return function oLe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function iLe(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function aLe(t){return function sLe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||iN(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return t.\u0275fac=function(e){return new(e||t)(Ie(k2))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function iN(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function rN(t){if(!iN(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class dLe{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,r,s=!1){this._element=n,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(Ei(1)).subscribe(n)}}let fLe=(()=>{class t{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new dLe(e,this._checker,this._ngZone,this._document,i)}}return t.\u0275fac=function(e){return new(e||t)(Ie(eLe),Ie(d1),Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hLe=(()=>{class t{get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=hn(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=hn(e)}constructor(e,i,r){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=qF(),this.focusTrap.focusInitialElementWhenReady()}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(fLe),q(Y1))},t.\u0275dir=je({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[wn]}),t})();function aN(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function oN(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const pLe=new vt("cdk-input-modality-detector-options"),mLe={ignoreKeys:[18,17,224,91,16]},o5=r7({passive:!0,capture:!0});let gLe=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new bo(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(_=>_===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Il(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(aN(d)?"keyboard":"mouse"),this._mostRecentTarget=Il(d))},this._onTouchstart=d=>{oN(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Il(d))},this._options={...mLe,...s},this.modalityDetected=this._modality.pipe(YF(1)),this.modalityChanged=this.modalityDetected.pipe(XF()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,o5),r.addEventListener("mousedown",this._onMousedown,o5),r.addEventListener("touchstart",this._onTouchstart,o5)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,o5),document.removeEventListener("mousedown",this._onMousedown,o5),document.removeEventListener("touchstart",this._onTouchstart,o5))}}return t.\u0275fac=function(e){return new(e||t)(Ie(k2),Ie(d1),Ie(Y1),Ie(pLe,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const _Le=new vt("liveAnnouncerElement",{providedIn:"root",factory:function vLe(){return null}}),yLe=new vt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let bLe=0,xLe=(()=>{class t{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,d;return 1===i.length&&"number"==typeof i[0]?d=i[0]:[s,d]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==d&&r&&(d=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(_=>this._currentResolve=_)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+bLe++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],d=s.getAttribute("aria-owns");d?-1===d.indexOf(e)&&s.setAttribute("aria-owns",d+" "+e):s.setAttribute("aria-owns",e)}}}return t.\u0275fac=function(e){return new(e||t)(Ie(_Le,8),Ie(d1),Ie(Y1),Ie(yLe,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const CLe=new vt("cdk-focus-monitor-default-options"),wp=r7({passive:!0,capture:!0});let _b=(()=>{class t{constructor(e,i,r,s,d){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Yt,this._rootNodeFocusAndBlurListener=_=>{for(let S=Il(_);S;S=S.parentElement)"focus"===_.type?this._onFocus(_,S):this._onBlur(_,S)},this._document=s,this._detectionMode=d?.detectionMode||0}monitor(e,i=!1){const r=c4(e);if(!this._platform.isBrowser||1!==r.nodeType)return Jt(null);const s=function LVe(t){if(function VVe(){if(null==db){const t=typeof document<"u"?document.head:null;db=!(!t||!t.createShadowRoot&&!t.attachShadow)}return db}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(r)||this._getDocument(),d=this._elementInfo.get(r);if(d)return i&&(d.checkChildren=!0),d.subject;const _={checkChildren:i,subject:new Yt,rootNode:s};return this._elementInfo.set(r,_),this._registerGlobalListeners(_),_.subject}stopMonitoring(e){const i=c4(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=c4(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([_,C])=>this._originChanged(_,i,C)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Il(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,wp),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,wp)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(yi(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wp),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wp),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let d=0;d<s.length;d++)if(s[d].contains(i))return!0;return!1}}return t.\u0275fac=function(e){return new(e||t)(Ie(d1),Ie(k2),Ie(gLe),Ie(Y1,8),Ie(CLe,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wLe=(()=>{class t{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new Gt}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(_b))},t.\u0275dir=je({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),t})();const cN="cdk-high-contrast-black-on-white",lN="cdk-high-contrast-white-on-black",vb="cdk-high-contrast-active";let uN=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=r1(YVe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(vb,cN,lN),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(vb,cN):2===i&&e.add(vb,lN)}}}return t.\u0275fac=function(e){return new(e||t)(Ie(k2),Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MLe=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(Ie(uN))},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[QF]}),t})();const zLe=["addListener","removeListener"],SLe=["addEventListener","removeEventListener"],DLe=["on","off"];function s5(t,n,e,i){if(S1(e)&&(i=e,e=void 0),i)return s5(t,n,e).pipe(V_(i));const[r,s]=function VLe(t){return S1(t.addEventListener)&&S1(t.removeEventListener)}(t)?SLe.map(d=>_=>t[d](n,_,e)):function ALe(t){return S1(t.addListener)&&S1(t.removeListener)}(t)?zLe.map(dN(t,n)):function ELe(t){return S1(t.on)&&S1(t.off)}(t)?DLe.map(dN(t,n)):[];if(!r&&Ia(t))return tt(d=>s5(d,n,e))(G(t));if(!r)throw new TypeError("Invalid event target");return new c1(d=>{const _=(...C)=>d.next(1<C.length?C:C[0]);return r(_),()=>s(_)})}function dN(t,n){return e=>i=>t[e](n,i)}const l7={schedule(t){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=l7;i&&(n=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=n(s=>{e=void 0,t(s)});return new Ye(()=>e?.(r))},requestAnimationFrame(...t){const{delegate:n}=l7;return(n?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:n}=l7;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0},HLe=new class TLe extends mb{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class LLe extends pb{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=l7.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:s}=n;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(l7.cancelAnimationFrame(e),n._scheduled=void 0)}});let yb,kLe=1;const Mp={};function fN(t){return t in Mp&&(delete Mp[t],!0)}const ILe={setImmediate(t){const n=kLe++;return Mp[n]=!0,yb||(yb=Promise.resolve()),yb.then(()=>fN(n)&&t()),n},clearImmediate(t){fN(t)}},{setImmediate:RLe,clearImmediate:PLe}=ILe,zp={setImmediate(...t){const{delegate:n}=zp;return(n?.setImmediate||RLe)(...t)},clearImmediate(t){const{delegate:n}=zp;return(n?.clearImmediate||PLe)(t)},delegate:void 0},OLe=new class NLe extends mb{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class FLe extends pb{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=zp.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:s}=n;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(zp.clearImmediate(e),n._scheduled===e&&(n._scheduled=void 0))}});function hN(t=0,n,e=UVe){let i=-1;return null!=n&&(b1(n)?e=n:i=n),new c1(r=>{let s=function ULe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;s<0&&(s=0);let d=0;return e.schedule(function(){r.closed||(r.next(d++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function bb(t,n=Cp){return function BLe(t){return X1((n,e)=>{let i=!1,r=null,s=null,d=!1;const _=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const S=r;r=null,e.next(S)}d&&e.complete()},C=()=>{s=null,d&&e.complete()};n.subscribe(V1(e,S=>{i=!0,r=S,s||G(t(S)).subscribe(s=V1(e,_,C))},()=>{d=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>hN(t,n))}const jLe=["contentWrapper"],GLe=["*"],$Le=new vt("VIRTUAL_SCROLL_STRATEGY");let Sp=(()=>{class t{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Yt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new c1(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(bb(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Jt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(_i(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=c4(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>s5(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(Ie(d1),Ie(k2),Ie(Y1,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pN=(()=>{class t{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Yt,this._elementScrolled=new c1(d=>this.ngZone.runOutsideAngular(()=>s5(this.elementRef.nativeElement,"scroll").pipe(yi(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=a7()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==a7()?e.left=e.right:1==a7()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;$F()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==e?e=d?r:i:"end"==e&&(e=d?i:r),d&&2==a7()?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:d&&1==a7()?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(Sp),q(d1),q(Co,8))},t.\u0275dir=je({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),t})(),u7=(()=>{class t{constructor(e,i,r){this._platform=e,this._change=new Yt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(bb(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(Ie(k2),Ie(d1),Ie(Y1,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const mN=new vt("VIRTUAL_SCROLLABLE");let ZLe=(()=>{class t extends pN{constructor(e,i,r,s){super(e,i,r,s)}measureViewportSize(e){const i=this.elementRef.nativeElement;return"horizontal"===e?i.clientWidth:i.clientHeight}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(Sp),q(d1),q(Co,8))},t.\u0275dir=je({type:t,features:[ht]}),t})();const XLe=typeof requestAnimationFrame<"u"?HLe:OLe;let KLe=(()=>{class t extends ZLe{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=hn(e)}constructor(e,i,r,s,d,_,C,S){super(e,_,r,d),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=s,this.scrollable=S,this._platform=r1(k2),this._detachedSubject=new Yt,this._renderedRangeSubject=new Yt,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new c1(V=>this._scrollStrategy.scrolledIndexChange.subscribe(F=>Promise.resolve().then(()=>this.ngZone.run(()=>V.next(F))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Ye.EMPTY,this._viewportChanges=C.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(yl(null),bb(0,XLe)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(yi(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function YLe(t,n){return t.start==n.start&&t.end==n.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&"to-start"===i?0:e;const s="horizontal"==this.orientation,d=s?"X":"Y";let C=`translate${d}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===i&&(C+=` translate${d}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=C&&(this._renderedContentTransform=C,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i;const r="left",s="right",d="rtl"==this.dir?.value;i="start"==e?d?s:r:"end"==e?d?r:s:e||("horizontal"===this.orientation?"left":"top");const _=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-_}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(Ur),q(d1),q($Le,8),q(Co,8),q(Sp),q(u7),q(mN,8))},t.\u0275cmp=Bt({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,i){if(1&e&&Xn(jLe,7),2&e){let r;k1(r=I1())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,i){2&e&&qn("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[E1([{provide:pN,useFactory:(n,e)=>n||e,deps:[[new wa,new bs(mN)],t]}]),ht,Ag],ngContentSelectors:GLe,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,i){1&e&&(Or(),le(0,"div",0,1),Gn(2),pe(),ft(3,"div",2)),2&e&&(Xe(3),Tc("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),t})(),Dp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})(),xb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[j8,Dp,KLe,j8,Dp]}),t})();class Cb{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class wb extends Cb{constructor(n,e,i,r,s){super(),this.component=n,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class gN extends Cb{constructor(n,e,i,r){super(),this.templateRef=n,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class QLe extends Cb{constructor(n){super(),this.element=n instanceof Nt?n.nativeElement:n}}class _N{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof wb?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof gN?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof QLe?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class JLe extends _N{constructor(n,e,i,r,s){super(),this.outletElement=n,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=d=>{const _=d.element,C=this._document.createComment("dom-portal");_.parentNode.insertBefore(C,_),this.outletElement.appendChild(_),this._attachedPortal=d,super.setDisposeFn(()=>{C.parentNode&&C.parentNode.replaceChild(_,C)})},this._document=s}attachComponentPortal(n){const i=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let r;return n.viewContainerRef?(r=n.viewContainerRef.createComponent(i,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(n.injector||this._defaultInjector||Nr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=n,r}attachTemplatePortal(n){let e=n.viewContainerRef,i=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=n,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let vN=(()=>{class t extends _N{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Gt,this.attachDomPortal=s=>{const d=s.element,_=this._document.createComment("dom-portal");s.setAttachedHost(this),d.parentNode.insertBefore(_,d),this._getRootNode().appendChild(d),this._attachedPortal=s,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(d,_)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),d=i.createComponent(s,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=e,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return t.\u0275fac=function(e){return new(e||t)(q(Cc),q(Q2),q(Y1))},t.\u0275dir=je({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ht]}),t})(),yN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})();const bN=$F();class eTe{constructor(n,e){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=H2(-this._previousScrollPosition.left),n.style.top=H2(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,i=n.style,r=this._document.body.style,s=i.scrollBehavior||"",d=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),bN&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bN&&(i.scrollBehavior=s,r.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class tTe{constructor(n,e,i,r){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(_i(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class xN{enable(){}disable(){}attach(){}}function Mb(t,n){return n.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function CN(t,n){return n.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class nTe{constructor(n,e,i,r){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Mb(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let iTe=(()=>{class t{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new xN,this.close=d=>new tTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new eTe(this._viewportRuler,this._document),this.reposition=d=>new nTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=s}}return t.\u0275fac=function(e){return new(e||t)(Ie(Sp),Ie(u7),Ie(d1),Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class zb{constructor(n){if(this.scrollStrategy=new xN,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const e=Object.keys(n);for(const i of e)void 0!==n[i]&&(this[i]=n[i])}}}class rTe{constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}}let wN=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aTe=(()=>{class t extends wN{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let d=s.length-1;d>-1;d--)if(s[d]._keydownEvents.observers.length>0){const _=s[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>_.next(r)):_.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1),Ie(d1,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oTe=(()=>{class t extends wN{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Il(s)},this._clickListener=s=>{const d=Il(s),_="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const C=this._attachedOverlays.slice();for(let S=C.length-1;S>-1;S--){const V=C[S];if(V._outsidePointerEvents.observers.length<1||!V.hasAttached())continue;if(V.overlayElement.contains(d)||V.overlayElement.contains(_))break;const F=V._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>F.next(s)):F.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1),Ie(k2),Ie(d1,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MN=(()=>{class t{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||fb()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),fb()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1),Ie(k2))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class sTe{constructor(n,e,i,r,s,d,_,C,S,V=!1){this._portalOutlet=n,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=d,this._document=_,this._location=C,this._outsideClickDispatcher=S,this._animationsDisabled=V,this._backdropElement=null,this._backdropClick=new Yt,this._attachments=new Yt,this._detachments=new Yt,this._locationChanges=Ye.EMPTY,this._backdropClickHandler=F=>this._backdropClick.next(F),this._backdropTransitionendHandler=F=>{this._disposeBackdrop(F.target)},this._keydownEvents=new Yt,this._outsidePointerEvents=new Yt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ei(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=H2(this._config.width),n.height=H2(this._config.height),n.minWidth=H2(this._config.minWidth),n.minHeight=H2(this._config.minHeight),n.maxWidth=H2(this._config.maxWidth),n.maxHeight=H2(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,i){const r=_9(e||[]).filter(s=>!!s);r.length&&(i?n.classList.add(...r):n.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(yi(Ci(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const zN="cdk-overlay-connected-position-bounding-box",cTe=/([A-Za-z%]+)$/;class SN{get positions(){return this._preferredPositions}constructor(n,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Yt,this._resizeSubscription=Ye.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(zN),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let d;for(let _ of this._preferredPositions){let C=this._getOriginPoint(n,r,_),S=this._getOverlayPoint(C,e,_),V=this._getOverlayFit(S,e,i,_);if(V.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(_,C);this._canFitWithFlexibleDimensions(V,S,i)?s.push({position:_,origin:C,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(C,_)}):(!d||d.overlayFit.visibleArea<V.visibleArea)&&(d={overlayFit:V,overlayPoint:S,originPoint:C,position:_,overlayRect:e})}if(s.length){let _=null,C=-1;for(const S of s){const V=S.boundingBoxRect.width*S.boundingBoxRect.height*(S.position.weight||1);V>C&&(C=V,_=S)}return this._isPushed=!1,void this._applyPosition(_.position,_.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&a6(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(zN),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,i){let r,s;if("center"==i.originX)r=n.left+n.width/2;else{const d=this._isRtl()?n.right:n.left,_=this._isRtl()?n.left:n.right;r="start"==i.originX?d:_}return e.left<0&&(r-=e.left),s="center"==i.originY?n.top+n.height/2:"top"==i.originY?n.top:n.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(n,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:n.x+r,y:n.y+s}}_getOverlayFit(n,e,i,r){const s=AN(e);let{x:d,y:_}=n,C=this._getOffset(r,"x"),S=this._getOffset(r,"y");C&&(d+=C),S&&(_+=S);let W=0-_,K=_+s.height-i.height,ce=this._subtractOverflows(s.width,0-d,d+s.width-i.width),be=this._subtractOverflows(s.height,W,K),Me=ce*be;return{visibleArea:Me,isCompletelyWithinViewport:s.width*s.height===Me,fitsInViewportVertically:be===s.height,fitsInViewportHorizontally:ce==s.width}}_canFitWithFlexibleDimensions(n,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,d=DN(this._overlayRef.getConfig().minHeight),_=DN(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=d&&d<=r)&&(n.fitsInViewportHorizontally||null!=_&&_<=s)}return!1}_pushOverlayOnScreen(n,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const r=AN(e),s=this._viewportRect,d=Math.max(n.x+r.width-s.width,0),_=Math.max(n.y+r.height-s.height,0),C=Math.max(s.top-i.top-n.y,0),S=Math.max(s.left-i.left-n.x,0);let V=0,F=0;return V=r.width<=s.width?S||-d:n.x<this._viewportMargin?s.left-i.left-n.x:0,F=r.height<=s.height?C||-_:n.y<this._viewportMargin?s.top-i.top-n.y:0,this._previousPushAmount={x:V,y:F},{x:n.x+V,y:n.y+F}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new rTe(n,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=n.overlayY;i="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(n,e){const i=this._viewportRect,r=this._isRtl();let s,d,_,V,F,W;if("top"===e.overlayY)d=n.y,s=i.height-d+this._viewportMargin;else if("bottom"===e.overlayY)_=i.height-n.y+2*this._viewportMargin,s=i.height-_+this._viewportMargin;else{const K=Math.min(i.bottom-n.y+i.top,n.y),ce=this._lastBoundingBoxSize.height;s=2*K,d=n.y-K,s>ce&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.y-ce/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)W=i.width-n.x+this._viewportMargin,V=n.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)F=n.x,V=i.right-n.x;else{const K=Math.min(i.right-n.x+i.left,n.x),ce=this._lastBoundingBoxSize.width;V=2*K,F=n.x-K,V>ce&&!this._isInitialRender&&!this._growAfterOpen&&(F=n.x-ce/2)}return{top:d,left:F,bottom:_,right:W,width:V,height:s}}_setBoundingBoxStyles(n,e){const i=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;r.height=H2(i.height),r.top=H2(i.top),r.bottom=H2(i.bottom),r.width=H2(i.width),r.left=H2(i.left),r.right=H2(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=H2(s)),d&&(r.maxWidth=H2(d))}this._lastBoundingBoxSize=i,a6(this._boundingBox.style,r)}_resetBoundingBoxStyles(){a6(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){a6(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(r){const V=this._viewportRuler.getViewportScrollPosition();a6(i,this._getExactOverlayY(e,n,V)),a6(i,this._getExactOverlayX(e,n,V))}else i.position="static";let _="",C=this._getOffset(e,"x"),S=this._getOffset(e,"y");C&&(_+=`translateX(${C}px) `),S&&(_+=`translateY(${S}px)`),i.transform=_.trim(),d.maxHeight&&(r?i.maxHeight=H2(d.maxHeight):s&&(i.maxHeight="")),d.maxWidth&&(r?i.maxWidth=H2(d.maxWidth):s&&(i.maxWidth="")),a6(this._pane.style,i)}_getExactOverlayY(n,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===n.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=H2(s.y),r}_getExactOverlayX(n,e,i){let d,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),d=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===d?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=H2(s.x),r}_getScrollVisibility(){const n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:CN(n,i),isOriginOutsideView:Mb(n,i),isOverlayClipped:CN(e,i),isOverlayOutsideView:Mb(e,i)}}_subtractOverflows(n,...e){return e.reduce((i,r)=>i-Math.max(r,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return"x"===e?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&_9(n).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof Nt)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const e=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+e,height:i,width:e}}}function a6(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function DN(t){if("number"!=typeof t&&null!=t){const[n,e]=t.split(cTe);return e&&"px"!==e?null:parseFloat(n)}return t||null}function AN(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const EN="cdk-global-overlay-wrapper";class lTe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(EN),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:d,maxHeight:_}=i,C=!("100%"!==r&&"100vw"!==r||d&&"100%"!==d&&"100vw"!==d),S=!("100%"!==s&&"100vh"!==s||_&&"100%"!==_&&"100vh"!==_),V=this._xPosition,F=this._xOffset,W="rtl"===this._overlayRef.getConfig().direction;let K="",ce="",be="";C?be="flex-start":"center"===V?(be="center",W?ce=F:K=F):W?"left"===V||"end"===V?(be="flex-end",K=F):("right"===V||"start"===V)&&(be="flex-start",ce=F):"left"===V||"start"===V?(be="flex-start",K=F):("right"===V||"end"===V)&&(be="flex-end",ce=F),n.position=this._cssPosition,n.marginLeft=C?"0":K,n.marginTop=S?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=C?"0":ce,e.justifyContent=be,e.alignItems=S?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(EN),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let uTe=(()=>{class t{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new lTe}flexibleConnectedTo(e){return new SN(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(Ie(u7),Ie(Y1),Ie(k2),Ie(MN))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dTe=0,c5=(()=>{class t{constructor(e,i,r,s,d,_,C,S,V,F,W,K){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=d,this._injector=_,this._ngZone=C,this._document=S,this._directionality=V,this._location=F,this._outsideClickDispatcher=W,this._animationsModuleType=K}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),d=new zb(e);return d.direction=d.direction||this._directionality.value,new sTe(s,i,r,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+dTe++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(O0)),new JLe(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(Ie(iTe),Ie(MN),Ie(Cc),Ie(uTe),Ie(aTe),Ie(Nr),Ie(d1),Ie(Y1),Ie(Co),Ie(zh),Ie(oTe),Ie(J3,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fTe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],VN=new vt("cdk-connected-overlay-scroll-strategy");let Sb=(()=>{class t{constructor(e){this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(q(Nt))},t.\u0275dir=je({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),t})(),LN=(()=>{class t{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=hn(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=hn(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=hn(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=hn(e)}get push(){return this._push}set push(e){this._push=hn(e)}constructor(e,i,r,s,d){this._overlay=e,this._dir=d,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Ye.EMPTY,this._attachSubscription=Ye.EMPTY,this._detachSubscription=Ye.EMPTY,this._positionSubscription=Ye.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Gt,this.positionChange=new Gt,this.attach=new Gt,this.detach=new Gt,this.overlayKeydown=new Gt,this.overlayOutsideClick=new Gt,this._templatePortal=new gN(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=fTe);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Bc(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new zb({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Sb?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(wz(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(q(c5),q(Cr),q(Q2),q(VN),q(Co,8))},t.\u0275dir=je({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[wn]}),t})();const pTe={provide:VN,deps:[c5],useFactory:function hTe(t){return()=>t.scrollStrategies.reposition()}};let TN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[c5,pTe],imports:[j8,yN,xb,xb]}),t})();const mTe=["text"];function gTe(t,n){if(1&t&&ft(0,"mat-pseudo-checkbox",6),2&t){const e=M1();Ze("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function _Te(t,n){1&t&&ft(0,"mat-pseudo-checkbox",7),2&t&&Ze("disabled",M1().disabled)}function vTe(t,n){if(1&t&&(le(0,"span",8),Ue(1),pe()),2&t){const e=M1();Xe(1),n2("(",e.group.label,")")}}const yTe=[[["mat-icon"]],"*"],bTe=["mat-icon","*"],CTe=new vt("mat-sanity-checks",{providedIn:"root",factory:function xTe(){return!0}});let Gr=(()=>{class t{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!fb()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return t.\u0275fac=function(e){return new(e||t)(Ie(uN),Ie(CTe,8),Ie(Y1))},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[j8,j8]}),t})();function Db(t){return class extends t{get disabled(){return this._disabled}set disabled(n){this._disabled=hn(n)}constructor(...n){super(...n),this._disabled=!1}}}function Ab(t,n){return class extends t{get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function Eb(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=hn(n)}constructor(...n){super(...n),this._disableRipple=!1}}}function IN(t,n=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?hv(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=n,this.defaultTabIndex=n}}}function RN(t){return class extends t{updateErrorState(){const n=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==n&&(this.errorState=s,this.stateChanges.next())}constructor(...n){super(...n),this.errorState=!1}}}const wTe=new vt("MAT_DATE_LOCALE",{providedIn:"root",factory:function MTe(){return r1(g3)}});class $r{constructor(){this._localeChanges=new Yt,this.localeChanges=this._localeChanges}getValidDateOrNull(n){return this.isDateInstance(n)&&this.isValid(n)?n:null}deserialize(n){return null==n||this.isDateInstance(n)&&this.isValid(n)?n:this.invalid()}setLocale(n){this.locale=n,this._localeChanges.next()}compareDate(n,e){return this.getYear(n)-this.getYear(e)||this.getMonth(n)-this.getMonth(e)||this.getDate(n)-this.getDate(e)}sameDate(n,e){if(n&&e){let i=this.isValid(n),r=this.isValid(e);return i&&r?!this.compareDate(n,e):i==r}return n==e}clampDate(n,e,i){return e&&this.compareDate(n,e)<0?e:i&&this.compareDate(n,i)>0?i:n}}const o6=new vt("mat-date-formats"),zTe=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Vb(t,n){const e=Array(t);for(let i=0;i<t;i++)e[i]=n(i);return e}let STe=(()=>{class t extends $r{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Vb(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Vb(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Vb(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(zTe.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return t.\u0275fac=function(e){return new(e||t)(Ie(wTe,8),Ie(k2))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const DTe={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let ATe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[{provide:$r,useClass:STe}]}),t})(),ETe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[{provide:o6,useValue:DTe}],imports:[ATe]}),t})(),PN=(()=>{class t{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class VTe{constructor(n,e,i,r=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const FN=r7({passive:!0,capture:!0});class LTe{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=Il(n);e&&this._events.get(n.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(n))})}}addHandler(n,e,i,r){const s=this._events.get(e);if(s){const d=s.get(i);d?d.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,FN)})}removeHandler(n,e,i){const r=this._events.get(n);if(!r)return;const s=r.get(e);s&&(s.delete(i),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,FN)))}}const NN={enterDuration:225,exitDuration:150},ON=r7({passive:!0,capture:!0}),BN=["mousedown","touchstart"],UN=["mouseup","mouseleave","touchend","touchcancel"];class f7{constructor(n,e,i,r){this._target=n,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=c4(i))}fadeInRipple(n,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...NN,...i.animation};i.centered&&(n=r.left+r.width/2,e=r.top+r.height/2);const d=i.radius||function HTe(t,n,e){const i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+r*r)}(n,e,r),_=n-r.left,C=e-r.top,S=s.enterDuration,V=document.createElement("div");V.classList.add("mat-ripple-element"),V.style.left=_-d+"px",V.style.top=C-d+"px",V.style.height=2*d+"px",V.style.width=2*d+"px",null!=i.color&&(V.style.backgroundColor=i.color),V.style.transitionDuration=`${S}ms`,this._containerElement.appendChild(V);const F=window.getComputedStyle(V),K=F.transitionDuration,ce="none"===F.transitionProperty||"0s"===K||"0s, 0s"===K||0===r.width&&0===r.height,be=new VTe(this,V,i,ce);V.style.transform="scale3d(1, 1, 1)",be.state=0,i.persistent||(this._mostRecentTransientRipple=be);let Me=null;return!ce&&(S||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const He=()=>this._finishRippleTransition(be),lt=()=>this._destroyRipple(be);V.addEventListener("transitionend",He),V.addEventListener("transitioncancel",lt),Me={onTransitionEnd:He,onTransitionCancel:lt}}),this._activeRipples.set(be,Me),(ce||!S)&&this._finishRippleTransition(be),be}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,i={...NN,...n.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=c4(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,BN.forEach(i=>{f7._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{UN.forEach(e=>{this._triggerElement.addEventListener(e,this,ON)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=1,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=aN(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!oN(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(BN.forEach(e=>f7._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&UN.forEach(e=>n.removeEventListener(e,this,ON)))}}f7._eventManager=new LTe;const kTe=new vt("mat-ripple-global-options");let h7=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,s,d){this._elementRef=e,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new f7(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(d1),q(k2),q(kTe,8),q(J3,8))},t.\u0275dir=je({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&qn("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),t})(),Lb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Gr,Gr]}),t})(),ITe=(()=>{class t{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return t.\u0275fac=function(e){return new(e||t)(q(J3,8))},t.\u0275cmp=Bt({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(e,i){2&e&&qn("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),t})(),RTe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Gr]}),t})();const jN=new vt("MAT_OPTION_PARENT_COMPONENT"),GN=new vt("MatOptgroup");let PTe=0;class FTe{constructor(n,e=!1){this.source=n,this.isUserInput=e}}let NTe=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=hn(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,i,r,s){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+PTe++,this.onSelectionChange=new Gt,this._stateChanges=new Yt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Bc(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new FTe(this,e))}}return t.\u0275fac=function(e){Ts()},t.\u0275dir=je({type:t,viewQuery:function(e,i){if(1&e&&Xn(mTe,7),2&e){let r;k1(r=I1())&&(i._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),t})(),$N=(()=>{class t extends NTe{constructor(e,i,r,s){super(e,i,r,s)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(Ur),q(jN,8),q(GN,8))},t.\u0275cmp=Bt({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(e,i){1&e&&$t("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(pl("id",i.id),We("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),qn("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},exportAs:["matOption"],features:[ht],ngContentSelectors:bTe,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(Or(yTe),xt(0,gTe,1,2,"mat-pseudo-checkbox",0),Gn(1),le(2,"span",1,2),Gn(4,1),pe(),xt(5,_Te,1,1,"mat-pseudo-checkbox",3),xt(6,vTe,2,1,"span",4),ft(7,"div",5)),2&e&&(Ze("ngIf",i.multiple),Xe(5),Ze("ngIf",!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator),Xe(1),Ze("ngIf",i.group&&i.group._inert),Xe(1),Ze("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[h7,$0,ITe],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),t})(),qN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Lb,_l,Gr,RTe]}),t})();const UTe=["mat-button",""],jTe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],GTe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],qTe=["mat-icon-button",""],WTe=["*"],ZTe=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],YTe=Ab(Db(Eb(class{constructor(t){this._elementRef=t}})));let WN=(()=>{class t extends YTe{constructor(e,i,r,s){super(e),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=r1(_b),this._isFab=!1;const d=e.nativeElement.classList;for(const _ of ZTe)this._hasHostAttributes(_.selector)&&_.mdcClasses.forEach(C=>{d.add(C)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...e){return e.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return t.\u0275fac=function(e){Ts()},t.\u0275dir=je({type:t,viewQuery:function(e,i){if(1&e&&Xn(h7,5),2&e){let r;k1(r=I1())&&(i.ripple=r.first)}},features:[ht]}),t})(),ZN=(()=>{class t extends WN{constructor(e,i,r,s){super(e,i,r,s)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(k2),q(d1),q(J3,8))},t.\u0275cmp=Bt({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,i){2&e&&(We("disabled",i.disabled||null),qn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ht],attrs:UTe,ngContentSelectors:GTe,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,i){1&e&&(Or(jTe),ft(0,"span",0),Gn(1),le(2,"span",1),Gn(3,1),pe(),Gn(4,2),ft(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(qn("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),Xe(6),Ze("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[h7],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),t})(),YN=(()=>{class t extends WN{constructor(e,i,r,s){super(e,i,r,s)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(k2),q(d1),q(J3,8))},t.\u0275cmp=Bt({type:t,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(e,i){2&e&&(We("disabled",i.disabled||null),qn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ht],attrs:qTe,ngContentSelectors:WTe,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,i){1&e&&(Or(),ft(0,"span",0),Gn(1),ft(2,"span",1)(3,"span",2)(4,"span",3)),2&e&&(Xe(3),Ze("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[h7],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),t})(),QTe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Gr,Lb,Gr]}),t})();class XN{}class JTe{}const m4="*";function p7(t,n){return{type:7,name:t,definitions:n,options:{}}}function s6(t,n=null){return{type:4,styles:n,timings:t}}function KN(t,n=null){return{type:2,steps:t,options:n}}function wo(t){return{type:6,styles:t,offset:null}}function Ap(t,n,e){return{type:0,name:t,styles:n,options:e}}function QN(t){return{type:5,steps:t}}function Fl(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}function eHe(t=null){return{type:9,options:t}}function tHe(t,n,e=null){return{type:11,selector:t,animation:n,options:e}}function JN(t){Promise.resolve().then(t)}class m7{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){JN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class eO{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,r=0;const s=this.players.length;0==s?JN(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==s&&this._onFinish()}),d.onDestroy(()=>{++i==s&&this._onDestroy()}),d.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((d,_)=>Math.max(d,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const Tb="!",nHe=["matFormFieldNotchedOutline",""],iHe=["*"],rHe=["textField"],aHe=["iconPrefixContainer"],oHe=["textPrefixContainer"];function sHe(t,n){1&t&&ft(0,"span",19)}function cHe(t,n){if(1&t){const e=Pn();le(0,"label",17),$t("cdkObserveContent",function(){return ki(e),Di(M1(2)._refreshOutlineNotchWidth())}),Gn(1,1),xt(2,sHe,1,0,"span",18),pe()}if(2&t){const e=M1(2);Ze("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),We("for",e._control.id)("aria-owns",e._control.id),Xe(2),Ze("ngIf",!e.hideRequiredMarker&&e._control.required)}}function lHe(t,n){1&t&&xt(0,cHe,3,6,"label",16),2&t&&Ze("ngIf",M1()._hasFloatingLabel())}function uHe(t,n){1&t&&ft(0,"div",20)}function dHe(t,n){}function fHe(t,n){1&t&&xt(0,dHe,0,0,"ng-template",22),2&t&&(M1(2),Ze("ngTemplateOutlet",gn(1)))}function hHe(t,n){if(1&t&&(le(0,"div",21),xt(1,fHe,1,1,"ng-template",9),pe()),2&t){const e=M1();Ze("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),Xe(1),Ze("ngIf",!e._forceDisplayInfixLabel())}}function pHe(t,n){1&t&&(le(0,"div",23,24),Gn(2,2),pe())}function mHe(t,n){1&t&&(le(0,"div",25,26),Gn(2,3),pe())}function gHe(t,n){}function _He(t,n){1&t&&xt(0,gHe,0,0,"ng-template",22),2&t&&(M1(),Ze("ngTemplateOutlet",gn(1)))}function vHe(t,n){1&t&&(le(0,"div",27),Gn(1,4),pe())}function yHe(t,n){1&t&&(le(0,"div",28),Gn(1,5),pe())}function bHe(t,n){1&t&&ft(0,"div",29)}function xHe(t,n){1&t&&(le(0,"div",30),Gn(1,6),pe()),2&t&&Ze("@transitionMessages",M1()._subscriptAnimationState)}function CHe(t,n){if(1&t&&(le(0,"mat-hint",34),Ue(1),pe()),2&t){const e=M1(2);Ze("id",e._hintLabelId),Xe(1),K2(e.hintLabel)}}function wHe(t,n){if(1&t&&(le(0,"div",31),xt(1,CHe,2,2,"mat-hint",32),Gn(2,7),ft(3,"div",33),Gn(4,8),pe()),2&t){const e=M1();Ze("@transitionMessages",e._subscriptAnimationState),Xe(1),Ze("ngIf",e.hintLabel)}}const MHe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],zHe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Hb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["mat-label"]]}),t})();const SHe=new vt("MatError");let DHe=0,tO=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+DHe++}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,i){2&e&&(pl("id",i.id),We("align",null),qn("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),t})();const AHe=new vt("MatPrefix"),nO=new vt("MatSuffix");let EHe=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[E1([{provide:nO,useExisting:t}])]}),t})(),iO=(()=>{class t{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function VHe(t){if(null!==t.offsetParent)return t.scrollWidth;const e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(q(Nt))},t.\u0275dir=je({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,i){2&e&&qn("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),t})();const rO="mdc-line-ripple--active",Ep="mdc-line-ripple--deactivating";let aO=(()=>{class t{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,d=s.contains(Ep);"opacity"===r.propertyName&&d&&s.remove(rO,Ep)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(Ep),e.add(rO)}deactivate(){this._elementRef.nativeElement.classList.add(Ep)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(d1))},t.\u0275dir=je({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),t})(),oO=(()=>{class t{constructor(e,i){this._elementRef=e,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(d1))},t.\u0275cmp=Bt({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,i){2&e&&qn("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:nHe,ngContentSelectors:iHe,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,i){1&e&&(Or(),ft(0,"div",0),le(1,"div",1),Gn(2),pe(),ft(3,"div",2)),2&e&&(Xe(1),Tc("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),t})();const LHe={transitionMessages:p7("transitionMessages",[Ap("enter",wo({opacity:1,transform:"translateY(0%)"})),Fl("void => enter",[wo({opacity:0,transform:"translateY(-5px)"}),s6("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let kb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t}),t})();const Vp=new vt("MatFormField"),THe=new vt("MAT_FORM_FIELD_DEFAULT_OPTIONS");let sO=0,IHe=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=hn(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,r,s,d,_,C,S){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=d,this._defaults=_,this._animationMode=C,this._document=S,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+sO++,this._hintLabelId="mat-mdc-hint-"+sO++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Yt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,_&&(_.appearance&&(this.appearance=_.appearance),this._hideRequiredMarker=Boolean(_?.hideRequiredMarker),_.color&&(this.color=_.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(yi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Ci(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(yi(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(yi(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,d=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+d}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(Ur),q(d1),q(Co),q(k2),q(THe,8),q(J3,8),q(Y1))},t.\u0275cmp=Bt({type:t,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(g2(r,Hb,5),g2(r,Hb,7),g2(r,kb,5),g2(r,AHe,5),g2(r,nO,5),g2(r,SHe,5),g2(r,tO,5)),2&e){let s;k1(s=I1())&&(i._labelChildNonStatic=s.first),k1(s=I1())&&(i._labelChildStatic=s.first),k1(s=I1())&&(i._formFieldControl=s.first),k1(s=I1())&&(i._prefixChildren=s),k1(s=I1())&&(i._suffixChildren=s),k1(s=I1())&&(i._errorChildren=s),k1(s=I1())&&(i._hintChildren=s)}},viewQuery:function(e,i){if(1&e&&(Xn(rHe,5),Xn(aHe,5),Xn(oHe,5),Xn(iO,5),Xn(oO,5),Xn(aO,5)),2&e){let r;k1(r=I1())&&(i._textField=r.first),k1(r=I1())&&(i._iconPrefixContainer=r.first),k1(r=I1())&&(i._textPrefixContainer=r.first),k1(r=I1())&&(i._floatingLabel=r.first),k1(r=I1())&&(i._notchedOutline=r.first),k1(r=I1())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,i){2&e&&qn("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[E1([{provide:Vp,useExisting:t}])],ngContentSelectors:zHe,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,i){1&e&&(Or(MHe),xt(0,lHe,1,1,"ng-template",null,0,Pg),le(2,"div",1,2),$t("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),xt(4,uHe,1,0,"div",3),le(5,"div",4),xt(6,hHe,2,3,"div",5),xt(7,pHe,3,0,"div",6),xt(8,mHe,3,0,"div",7),le(9,"div",8),xt(10,_He,1,1,"ng-template",9),Gn(11),pe(),xt(12,vHe,2,0,"div",10),xt(13,yHe,2,0,"div",11),pe(),xt(14,bHe,1,0,"div",12),pe(),le(15,"div",13),xt(16,xHe,2,1,"div",14),xt(17,wHe,5,2,"div",15),pe()),2&e&&(Xe(2),qn("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),Xe(2),Ze("ngIf",!i._hasOutline()&&!i._control.disabled),Xe(2),Ze("ngIf",i._hasOutline()),Xe(1),Ze("ngIf",i._hasIconPrefix),Xe(1),Ze("ngIf",i._hasTextPrefix),Xe(2),Ze("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),Xe(2),Ze("ngIf",i._hasTextSuffix),Xe(1),Ze("ngIf",i._hasIconSuffix),Xe(1),Ze("ngIf",!i._hasOutline()),Xe(1),qn("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),Ze("ngSwitch",i._getDisplayedMessages()),Xe(1),Ze("ngSwitchCase","error"),Xe(1),Ze("ngSwitchCase","hint"))},dependencies:[$0,OM,V8,Ih,$Ve,tO,iO,oO,aO],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[LHe.transitionMessages]},changeDetection:0}),t})(),Lp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Gr,_l,QF,Gr]}),t})();const uO=r7({passive:!0});let RHe=(()=>{class t{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return At;const i=c4(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Yt,d="cdk-text-field-autofilled",_=C=>{"cdk-text-field-autofill-start"!==C.animationName||i.classList.contains(d)?"cdk-text-field-autofill-end"===C.animationName&&i.classList.contains(d)&&(i.classList.remove(d),this._ngZone.run(()=>s.next({target:C.target,isAutofilled:!1}))):(i.classList.add(d),this._ngZone.run(()=>s.next({target:C.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",_,uO),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",_,uO)}}),s}stopMonitoring(e){const i=c4(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return t.\u0275fac=function(e){return new(e||t)(Ie(k2),Ie(d1))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),PHe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})();const dO=new vt("MAT_INPUT_VALUE_ACCESSOR"),FHe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let NHe=0;const OHe=RN(class{constructor(t,n,e,i){this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new Yt}});let BHe=(()=>{class t extends OHe{get disabled(){return this._disabled}set disabled(e){this._disabled=hn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(kl.required)??!1}set required(e){this._required=hn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&GF().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=hn(e)}constructor(e,i,r,s,d,_,C,S,V,F){super(_,s,d,r),this._elementRef=e,this._platform=i,this._autofillMonitor=S,this._formField=F,this._uid="mat-input-"+NHe++,this.focused=!1,this.stateChanges=new Yt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ce=>GF().has(ce)),this._iOSKeyupListener=ce=>{const be=ce.target;!be.value&&0===be.selectionStart&&0===be.selectionEnd&&(be.setSelectionRange(1,1),be.setSelectionRange(0,0))};const W=this._elementRef.nativeElement,K=W.nodeName.toLowerCase();this._inputValueAccessor=C||W,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&V.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===K,this._isTextarea="textarea"===K,this._isInFormField=!!F,this._isNativeSelect&&(this.controlType=W.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){FHe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(k2),q(x3,10),q(n6,8),q(e5,8),q(PN),q(dO,10),q(RHe),q(d1),q(Vp,8))},t.\u0275dir=je({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,i){1&e&&$t("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(pl("id",i.id)("disabled",i.disabled)("required",i.required),We("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),qn("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[E1([{provide:kb,useExisting:t}]),ht,wn]}),t})(),UHe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Gr,Lp,Lp,PHe,Gr]}),t})();const jHe=["mat-calendar-body",""];function GHe(t,n){if(1&t&&(le(0,"tr",3)(1,"td",4),Ue(2),pe()()),2&t){const e=M1();Xe(1),Tc("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),We("colspan",e.numCols),Xe(1),n2(" ",e.label," ")}}function $He(t,n){if(1&t&&(le(0,"td",4),Ue(1),pe()),2&t){const e=M1(2);Tc("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),We("colspan",e._firstRowOffset),Xe(1),n2(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function qHe(t,n){if(1&t){const e=Pn();le(0,"td",8)(1,"button",9),$t("click",function(r){const d=ki(e).$implicit;return Di(M1(2)._cellClicked(d,r))})("focus",function(r){const d=ki(e).$implicit;return Di(M1(2)._emitActiveDateChange(d,r))}),le(2,"span",10),Ue(3),pe(),ft(4,"span",11),pe()()}if(2&t){const e=n.$implicit,i=n.index,r=M1().index,s=M1();Tc("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),We("data-mat-row",r)("data-mat-col",i),Xe(1),qn("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(r,i))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,r,i))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),Ze("ngClass",e.cssClasses)("tabindex",s._isActiveCell(r,i)?0:-1),We("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",s._isSelected(e.compareValue))("aria-current",s.todayValue===e.compareValue?"date":null)("aria-describedby",s._getDescribedby(e.compareValue)),Xe(1),qn("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),Xe(1),n2(" ",e.displayValue," ")}}function WHe(t,n){if(1&t&&(le(0,"tr",5),xt(1,$He,2,6,"td",6),xt(2,qHe,5,48,"td",7),pe()),2&t){const e=n.$implicit,i=n.index,r=M1();Xe(1),Ze("ngIf",0===i&&r._firstRowOffset),Xe(1),Ze("ngForOf",e)}}function ZHe(t,n){if(1&t&&(le(0,"th",5)(1,"span",6),Ue(2),pe(),le(3,"span",7),Ue(4),pe()()),2&t){const e=n.$implicit;Xe(2),K2(e.long),Xe(2),K2(e.narrow)}}const YHe=["*"];function XHe(t,n){}function KHe(t,n){if(1&t){const e=Pn();le(0,"mat-month-view",5),$t("activeDateChange",function(r){return ki(e),Di(M1().activeDate=r)})("_userSelection",function(r){return ki(e),Di(M1()._dateSelected(r))})("dragStarted",function(r){return ki(e),Di(M1()._dragStarted(r))})("dragEnded",function(r){return ki(e),Di(M1()._dragEnded(r))}),pe()}if(2&t){const e=M1();Ze("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function QHe(t,n){if(1&t){const e=Pn();le(0,"mat-year-view",6),$t("activeDateChange",function(r){return ki(e),Di(M1().activeDate=r)})("monthSelected",function(r){return ki(e),Di(M1()._monthSelectedInYearView(r))})("selectedChange",function(r){return ki(e),Di(M1()._goToDateInView(r,"month"))}),pe()}if(2&t){const e=M1();Ze("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function JHe(t,n){if(1&t){const e=Pn();le(0,"mat-multi-year-view",7),$t("activeDateChange",function(r){return ki(e),Di(M1().activeDate=r)})("yearSelected",function(r){return ki(e),Di(M1()._yearSelectedInMultiYearView(r))})("selectedChange",function(r){return ki(e),Di(M1()._goToDateInView(r,"year"))}),pe()}if(2&t){const e=M1();Ze("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function eke(t,n){}const tke=["button"];function nke(t,n){1&t&&(Z(),le(0,"svg",3),ft(1,"path",4),pe())}const ike=[[["","matDatepickerToggleIcon",""]]],rke=["[matDatepickerToggleIcon]"];let g7=(()=>{class t{constructor(){this.changes=new Yt,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Ib{constructor(n,e,i,r,s={},d=n,_){this.value=n,this.displayValue=e,this.ariaLabel=i,this.enabled=r,this.cssClasses=s,this.compareValue=d,this.rawValue=_}}let ake=1,l5=(()=>{class t{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(e,i){this._elementRef=e,this._ngZone=i,this._platform=r1(k2),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new Gt,this.previewChange=new Gt,this.activeDateChange=new Gt,this.dragStarted=new Gt,this.dragEnded=new Gt,this._didDragSinceMouseDown=!1,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._touchmoveHandler=r=>{if(!this.isRange)return;const s=fO(r),d=s?this._getCellFromElement(s):null;s!==r.target&&(this._didDragSinceMouseDown=!0),Pb(r.target)&&r.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:d?.enabled?d:null,event:r}))},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&("blur"!==r.type&&(this._didDragSinceMouseDown=!0),r.target&&this._getCellFromElement(r.target)&&(!r.relatedTarget||!this._getCellFromElement(r.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r})))},this._mousedownHandler=r=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;const s=r.target&&this._getCellFromElement(r.target);!s||!this._isInRange(s.rawValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:s.rawValue,event:r})})},this._mouseupHandler=r=>{if(!this.isRange)return;const s=Pb(r.target);s?s.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{const d=this._getCellFromElement(s);this.dragEnded.emit({value:d?.rawValue??null,event:r})}):this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:r})})},this._touchendHandler=r=>{const s=fO(r);s&&this._mouseupHandler({target:s})},this._id="mat-calendar-body-"+ake++,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,i.runOutsideAngular(()=>{const r=e.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("touchmove",this._touchmoveHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0),r.addEventListener("mousedown",this._mousedownHandler),r.addEventListener("touchstart",this._mousedownHandler),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,i){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const i=e.numCols,{rows:r,numCols:s}=this;(e.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/s+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/s+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("touchmove",this._touchmoveHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("touchstart",this._mousedownHandler),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,i){let r=e*this.numCols+i;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ei(1)).subscribe(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return Fb(e,this.startValue,this.endValue)}_isRangeEnd(e){return Nb(e,this.startValue,this.endValue)}_isInRange(e){return Ob(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return Fb(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let s=this.rows[i][r-1];if(!s){const d=this.rows[i-1];s=d&&d[d.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(e,i,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let s=this.rows[i][r+1];if(!s){const d=this.rows[i+1];s=d&&d[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(e){return Nb(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return Ob(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return Fb(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return Nb(e,this.previewStart,this.previewEnd)}_isInPreview(e){return Ob(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){return this.isRange?this.startValue===e&&this.endValue===e?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===e?this._startDateLabelId:this.endValue===e?this._endDateLabelId:null:null}_getCellFromElement(e){const i=Pb(e);if(i){const r=i.getAttribute("data-mat-row"),s=i.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(d1))},t.\u0275cmp=Bt({type:t,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[wn],attrs:jHe,decls:6,vars:6,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],[1,"mat-calendar-body-hidden-label",3,"id"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click","focus"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,i){1&e&&(xt(0,GHe,3,6,"tr",0),xt(1,WHe,3,2,"tr",1),le(2,"label",2),Ue(3),pe(),le(4,"label",2),Ue(5),pe()),2&e&&(Ze("ngIf",i._firstRowOffset<i.labelMinRequiredCells),Xe(1),Ze("ngForOf",i.rows),Xe(1),Ze("id",i._startDateLabelId),Xe(1),n2(" ",i.startDateAccessibleName,"\n"),Xe(1),Ze("id",i._endDateLabelId),Xe(1),n2(" ",i.endDateAccessibleName,"\n"))},dependencies:[G0,gl,$0],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}'],encapsulation:2,changeDetection:0}),t})();function Rb(t){return"TD"===t?.nodeName}function Pb(t){let n;return Rb(t)?n=t:Rb(t.parentNode)?n=t.parentNode:Rb(t.parentNode?.parentNode)&&(n=t.parentNode.parentNode),null!=n?.getAttribute("data-mat-row")?n:null}function Fb(t,n,e){return null!==e&&n!==e&&t<e&&t===n}function Nb(t,n,e){return null!==n&&n!==e&&t>=n&&t===e}function Ob(t,n,e,i){return i&&null!==n&&null!==e&&n!==e&&t>=n&&t<=e}function fO(t){const n=t.changedTouches[0];return document.elementFromPoint(n.clientX,n.clientY)}class Va{constructor(n,e){this.start=n,this.end=e}}let Nl=(()=>{class t{constructor(e,i){this.selection=e,this._adapter=i,this._selectionChanged=new Yt,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,i){const r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return t.\u0275fac=function(e){Ts()},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),oke=(()=>{class t extends Nl{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new t(this._adapter);return e.updateSelection(this.selection,this),e}}return t.\u0275fac=function(e){return new(e||t)(Ie($r))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const hO={provide:Nl,deps:[[new wa,new xs,Nl],$r],useFactory:function cke(t,n){return t||new oke(n)}},Tp=new vt("MAT_DATE_RANGE_SELECTION_STRATEGY");let pO=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){const i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Va?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,r,s,d){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rangeStrategy=d,this._rerenderSubscription=Ye.EMPTY,this.activeDrag=null,this.selectedChange=new Gt,this._userSelection=new Gt,this.dragStarted=new Gt,this.dragEnded=new Gt,this.activeDateChange=new Gt,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yl(null)).subscribe(()=>this._init())}ngOnChanges(e){const i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const i=e.value,r=this._getDateFromDayOfMonth(i);let s,d;this._selected instanceof Va?(s=this._getDateInCurrentMonth(this._selected.start),d=this._getDateInCurrentMonth(this._selected.end)):s=d=this._getDateInCurrentMonth(this._selected),(s!==i||d!==i)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!Bc(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){const r=i?i.rawValue:null,s=this._rangeStrategy.createPreview(r,this.selected,e);if(this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this.activeDrag&&r){const d=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,r,e);d&&(this._previewStart=this._getCellCompareValue(d.start),this._previewEnd=this._getCellCompareValue(d.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){const i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:i??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let s=this._dateAdapter.getDayOfWeekNames("long").map((d,_)=>({long:d,narrow:i[_]}));this._weekdays=s.slice(e).concat(s.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<e;r++,s++){7==s&&(this._weeks.push([]),s=0);const d=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),_=this._shouldEnableDate(d),C=this._dateAdapter.format(d,this._dateFormats.display.dateA11yLabel),S=this.dateClass?this.dateClass(d,"month"):void 0;this._weeks[this._weeks.length-1].push(new Ib(r+1,i[r],C,_,S,this._getCellCompareValue(d),d))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!(!e||!i||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){const i=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),s=this._dateAdapter.getDate(e);return new Date(i,r,s).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof Va?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}}return t.\u0275fac=function(e){return new(e||t)(q(Ur),q(o6,8),q($r,8),q(Co,8),q(Tp,8))},t.\u0275cmp=Bt({type:t,selectors:[["mat-month-view"]],viewQuery:function(e,i){if(1&e&&Xn(l5,5),2&e){let r;k1(r=I1())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[wn],decls:7,vars:15,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName","selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,i){1&e&&(le(0,"table",0)(1,"thead",1)(2,"tr"),xt(3,ZHe,5,2,"th",2),pe(),le(4,"tr"),ft(5,"th",3),pe()(),le(6,"tbody",4),$t("selectedValueChange",function(s){return i._dateSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("previewChange",function(s){return i._previewChanged(s)})("dragStarted",function(s){return i.dragStarted.emit(s)})("dragEnded",function(s){return i._dragEnded(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),pe()()),2&e&&(Xe(3),Ze("ngForOf",i._weekdays),Xe(3),Ze("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1)("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName))},dependencies:[gl,l5],encapsulation:2,changeDetection:0}),t})();const Wo=24;let mO=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),gO(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Va?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,r){this._changeDetectorRef=e,this._dateAdapter=i,this._dir=r,this._rerenderSubscription=Ye.EMPTY,this.selectedChange=new Gt,this.yearSelected=new Gt,this.activeDateChange=new Gt,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yl(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-_7(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<Wo;r++)s.push(i+r),4==s.length&&(this._years.push(s.map(d=>this._createCellForYear(d))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const i=e.value,r=this._dateAdapter.createDate(i,0,1),s=this._getDateFromYear(i);this.yearSelected.emit(r),this.selectedChange.emit(s)}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromYear(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-_7(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Wo-_7(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*-Wo:-Wo);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*Wo:Wo);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return _7(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){const i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(e){const i=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(i),s=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new Ib(e,r,r,this._shouldEnableYear(e),s)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Va){const i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return t.\u0275fac=function(e){return new(e||t)(q(Ur),q($r,8),q(Co,8))},t.\u0275cmp=Bt({type:t,selectors:[["mat-multi-year-view"]],viewQuery:function(e,i){if(1&e&&Xn(l5,5),2&e){let r;k1(r=I1())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(e,i){1&e&&(le(0,"table",0)(1,"thead",1)(2,"tr"),ft(3,"th",2),pe()(),le(4,"tbody",3),$t("selectedValueChange",function(s){return i._yearSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),pe()()),2&e&&(Xe(4),Ze("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},dependencies:[l5],encapsulation:2,changeDetection:0}),t})();function gO(t,n,e,i,r){const s=t.getYear(n),d=t.getYear(e),_=_O(t,i,r);return Math.floor((s-_)/Wo)===Math.floor((d-_)/Wo)}function _7(t,n,e,i){return function fke(t,n){return(t%n+n)%n}(t.getYear(n)-_O(t,e,i),Wo)}function _O(t,n,e){let i=0;return e?i=t.getYear(e)-Wo+1:n&&(i=t.getYear(n)),i}let vO=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Va?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,r,s){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=Ye.EMPTY,this.selectedChange=new Gt,this.monthSelected=new Gt,this.activeDateChange=new Gt,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yl(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const i=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);const s=this._getDateFromMonth(i);this.selectedChange.emit(s)}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromMonth(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){const i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(e,i){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),d=this.dateClass?this.dateClass(r,"year"):void 0;return new Ib(e,i.toLocaleUpperCase(),s,this._shouldEnableMonth(e),d)}_shouldEnableMonth(e){const i=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(i,e,1);this._dateAdapter.getMonth(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&i>s}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&i<s}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof Va?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return t.\u0275fac=function(e){return new(e||t)(q(Ur),q(o6,8),q($r,8),q(Co,8))},t.\u0275cmp=Bt({type:t,selectors:[["mat-year-view"]],viewQuery:function(e,i){if(1&e&&Xn(l5,5),2&e){let r;k1(r=I1())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(e,i){1&e&&(le(0,"table",0)(1,"thead",1)(2,"tr"),ft(3,"th",2),pe()(),le(4,"tbody",3),$t("selectedValueChange",function(s){return i._monthSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),pe()()),2&e&&(Xe(4),Ze("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},dependencies:[l5],encapsulation:2,changeDetection:0}),t})(),hke=1,pke=(()=>{class t{constructor(e,i,r,s,d){this._intl=e,this.calendar=i,this._dateAdapter=r,this._dateFormats=s,this._id="mat-calendar-header-"+hke++,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>d.markForCheck())}get periodButtonText(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-Wo)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:Wo)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):gO(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){const i=this._dateAdapter.getYear(this.calendar.activeDate)-_7(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+Wo-1;return[this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1))]}}return t.\u0275fac=function(e){return new(e||t)(q(g7),q(rn(()=>jb)),q($r,8),q(o6,8),q(Ur))},t.\u0275cmp=Bt({type:t,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:YHe,decls:13,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"],[1,"mat-calendar-hidden-label",3,"id"]],template:function(e,i){1&e&&(Or(),le(0,"div",0)(1,"div",1)(2,"button",2),$t("click",function(){return i.currentPeriodClicked()}),le(3,"span",3),Ue(4),pe(),Z(),le(5,"svg",4),ft(6,"polygon",5),pe()(),oe(),ft(7,"div",6),Gn(8),le(9,"button",7),$t("click",function(){return i.previousClicked()}),pe(),le(10,"button",8),$t("click",function(){return i.nextClicked()}),pe()()(),le(11,"label",9),Ue(12),pe()),2&e&&(Xe(2),We("aria-label",i.periodButtonLabel)("aria-describedby",i._periodButtonLabelId),Xe(2),K2(i.periodButtonText),Xe(1),qn("mat-calendar-invert","month"!==i.calendar.currentView),Xe(4),Ze("disabled",!i.previousEnabled()),We("aria-label",i.prevButtonLabel),Xe(1),Ze("disabled",!i.nextEnabled()),We("aria-label",i.nextButtonLabel),Xe(1),Ze("id",i._periodButtonLabelId),Xe(1),K2(i.periodButtonDescription))},dependencies:[ZN,YN],encapsulation:2,changeDetection:0}),t})(),jb=(()=>{class t{get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof Va?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}constructor(e,i,r,s){this._dateAdapter=i,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Gt,this.yearSelected=new Gt,this.monthSelected=new Gt,this.viewChanged=new Gt(!0),this._userSelection=new Gt,this._userDragDrop=new Gt,this._activeDrag=null,this.stateChanges=new Yt,this._intlChanges=e.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new wb(this.headerComponent||pke),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,s=i||r||e.dateFilter;if(s&&!s.firstChange){const d=this._getCurrentViewComponent();d&&(this._changeDetectorRef.detectChanges(),d._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const i=e.value;(this.selected instanceof Va||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return t.\u0275fac=function(e){return new(e||t)(q(g7),q($r,8),q(o6,8),q(Ur))},t.\u0275cmp=Bt({type:t,selectors:[["mat-calendar"]],viewQuery:function(e,i){if(1&e&&(Xn(pO,5),Xn(vO,5),Xn(mO,5)),2&e){let r;k1(r=I1())&&(i.monthView=r.first),k1(r=I1())&&(i.yearView=r.first),k1(r=I1())&&(i.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[E1([hO]),wn],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag","activeDateChange","_userSelection","dragStarted","dragEnded",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag","activeDateChange","_userSelection","dragStarted","dragEnded"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,i){1&e&&(xt(0,XHe,0,0,"ng-template",0),le(1,"div",1),xt(2,KHe,1,11,"mat-month-view",2),xt(3,QHe,1,6,"mat-year-view",3),xt(4,JHe,1,6,"mat-multi-year-view",4),pe()),2&e&&(Ze("cdkPortalOutlet",i._calendarHeaderPortal),Xe(1),Ze("ngSwitch",i.currentView),Xe(1),Ze("ngSwitchCase","month"),Xe(1),Ze("ngSwitchCase","year"),Xe(1),Ze("ngSwitchCase","multi-year"))},dependencies:[V8,Ih,wLe,vN,pO,vO,mO],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}.mat-calendar-hidden-label{display:none}'],encapsulation:2,changeDetection:0}),t})();const yO={transformPanel:p7("transformPanel",[Fl("void => enter-dropdown",s6("120ms cubic-bezier(0, 0, 0.2, 1)",QN([wo({opacity:0,transform:"scale(1, 0.8)"}),wo({opacity:1,transform:"scale(1, 1)"})]))),Fl("void => enter-dialog",s6("150ms cubic-bezier(0, 0, 0.2, 1)",QN([wo({opacity:0,transform:"scale(0.7)"}),wo({transform:"none",opacity:1})]))),Fl("* => void",s6("100ms linear",wo({opacity:0})))]),fadeInCalendar:p7("fadeInCalendar",[Ap("void",wo({opacity:0})),Ap("enter",wo({opacity:1})),Fl("void => *",s6("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let mke=0;const bO=new vt("mat-datepicker-scroll-strategy"),_ke={provide:bO,deps:[c5],useFactory:function gke(t){return()=>t.scrollStrategies.reposition()}},vke=Ab(class{constructor(t){this._elementRef=t}});let yke=(()=>{class t extends vke{constructor(e,i,r,s,d,_){super(e),this._changeDetectorRef=i,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=d,this._subscriptions=new Ye,this._animationDone=new Yt,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=_.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const i=this._model.selection,r=e.value,s=i instanceof Va;if(s&&this._rangeSelectionStrategy){const d=this._rangeSelectionStrategy.selectionFinished(r,i,e.event);this._model.updateSelection(d,this)}else r&&(s||!this._dateAdapter.sameDate(r,i))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating="start"===e.phaseName,this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q(Ur),q(Nl),q($r),q(Tp,8),q(g7))},t.\u0275cmp=Bt({type:t,selectors:[["mat-datepicker-content"]],viewQuery:function(e,i){if(1&e&&Xn(jb,5),2&e){let r;k1(r=I1())&&(i._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,i){1&e&&Bi("@transformPanel.start",function(s){return i._handleAnimationEvent(s)})("@transformPanel.done",function(s){return i._handleAnimationEvent(s)}),2&e&&(bg("@transformPanel",i._animationState),qn("mat-datepicker-content-touch",i.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[ht],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,i){if(1&e&&(le(0,"div",0)(1,"mat-calendar",1),$t("yearSelected",function(s){return i.datepicker._selectYear(s)})("monthSelected",function(s){return i.datepicker._selectMonth(s)})("viewChanged",function(s){return i.datepicker._viewChanged(s)})("_userSelection",function(s){return i._handleUserSelection(s)})("_userDragDrop",function(s){return i._handleUserDragDrop(s)}),pe(),xt(2,eke,0,0,"ng-template",2),le(3,"button",3),$t("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),Ue(4),pe()()),2&e){let r;qn("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),We("aria-modal",!0)("aria-labelledby",null!==(r=i._dialogLabelId)&&void 0!==r?r:void 0),Xe(1),Ze("id",i.datepicker.id)("ngClass",i.datepicker.panelClass)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName),Xe(1),Ze("cdkPortalOutlet",i._actionsPortal),Xe(1),qn("cdk-visually-hidden",!i._closeButtonFocused),Ze("color",i.color||"primary"),Xe(1),K2(i._closeButtonText)}},dependencies:[G0,ZN,hLe,vN,jb],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[yO.transformPanel,yO.fadeInCalendar]},changeDetection:0}),t})(),xO=(()=>{class t{get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=hn(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const i=hn(e);i!==this._disabled&&(this._disabled=i,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=hn(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function eQ(t,n=/\s+/){const e=[];if(null!=t){const i=Array.isArray(t)?t:`${t}`.split(n);for(const r of i){const s=`${r}`.trim();s&&e.push(s)}}return e}(e)}get opened(){return this._opened}set opened(e){hn(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}constructor(e,i,r,s,d,_,C){this._overlay=e,this._ngZone=i,this._viewContainerRef=r,this._dateAdapter=d,this._dir=_,this._model=C,this._inputStateChanges=Ye.EMPTY,this._document=r1(Y1),this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new Gt,this.monthSelected=new Gt,this.viewChanged=new Gt(!0),this.openedStream=new Gt,this.closedStream=new Gt,this._opened=!1,this.id="mat-datepicker-"+mke++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new Yt,this._scrollStrategy=s}ngOnChanges(e){const i=e.xPosition||e.yPosition;if(i&&!i.firstChange&&this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;r instanceof SN&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this._focusedElementBeforeOpen=qF(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;const e=this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus,i=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){const{instance:r,location:s}=this._componentRef;r._startExitAnimation(),r._animationDone.pipe(Ei(1)).subscribe(()=>{const d=this._document.activeElement;e&&(!d||d===this._document.activeElement||s.nativeElement.contains(d))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}e?setTimeout(i):i()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();const e=this.touchUi,i=new wb(yke,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new zb({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{const d=s.keyCode;(38===d||40===d||37===d||39===d||33===d||34===d)&&s.preventDefault()}),this._componentRef=r.attach(i),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(Ei(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const i="end"===this.xPosition?"end":"start",r="start"===i?"end":"start",s="above"===this.yPosition?"bottom":"top",d="top"===s?"bottom":"top";return e.withPositions([{originX:i,originY:d,overlayX:i,overlayY:s},{originX:i,originY:s,overlayX:i,overlayY:d},{originX:r,originY:d,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:d}])}_getCloseStream(e){const i=["ctrlKey","shiftKey","metaKey"];return Ci(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(_i(r=>27===r.keyCode&&!Bc(r)||this.datepickerInput&&Bc(r,"altKey")&&38===r.keyCode&&i.every(s=>!Bc(r,s)))))}}return t.\u0275fac=function(e){return new(e||t)(q(c5),q(d1),q(Q2),q(bO),q($r,8),q(Co,8),q(Nl))},t.\u0275dir=je({type:t,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[wn]}),t})(),bke=(()=>{class t extends xO{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Bt({type:t,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[E1([hO,{provide:xO,useExisting:t}]),ht],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),t})();class Hp{constructor(n,e){this.target=n,this.targetElement=e,this.value=this.target.value}}let xke=(()=>{class t{get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const i=hn(e),r=this._elementRef.nativeElement;this._disabled!==i&&(this._disabled=i,this.stateChanges.next(void 0)),i&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(i=>{if(this._shouldHandleChangeEvent(i)){const r=this._getValueFromModel(i.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new Hp(this,this._elementRef.nativeElement)),this.dateChange.emit(new Hp(this,this._elementRef.nativeElement))}})}constructor(e,i,r){this._elementRef=e,this._dateAdapter=i,this._dateFormats=r,this.dateChange=new Gt,this.dateInput=new Gt,this.stateChanges=new Yt,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=Ye.EMPTY,this._localeSubscription=Ye.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!d||this._matchesFilter(d)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),_=this._getMinDate();return!_||!d||this._dateAdapter.compareDate(_,d)<=0?null:{matDatepickerMin:{min:_,actual:d}}},this._maxValidator=s=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),_=this._getMaxDate();return!_||!d||this._dateAdapter.compareDate(_,d)>=0?null:{matDatepickerMax:{max:_,actual:d}}},this._lastValueValid=!1,this._localeSubscription=i.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){(function Cke(t,n){const e=Object.keys(t);for(let i of e){const{previousValue:r,currentValue:s}=t[i];if(!n.isDateInstance(r)||!n.isDateInstance(s))return!0;if(!n.sameDate(r,s))return!0}return!1})(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){Bc(e,"altKey")&&40===e.keyCode&&["ctrlKey","shiftKey","metaKey"].every(s=>!Bc(e,s))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const i=this._lastValueValid;let r=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);const s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(e&&!this.value&&this._cvaOnChange(r),i!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new Hp(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Hp(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=null!=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const i=this._getDateFilter();return!i||i(e)}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q($r,8),q(o6,8))},t.\u0275dir=je({type:t,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[wn]}),t})();const wke={provide:Fs,useExisting:rn(()=>Gb),multi:!0},Mke={provide:wr,useExisting:rn(()=>Gb),multi:!0};let Gb=(()=>{class t extends xke{set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._min)||(this._min=i,this._validatorOnChange())}get max(){return this._max}set max(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._max)||(this._max=i,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){const i=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==i&&this._validatorOnChange()}constructor(e,i,r,s){super(e,i,r),this._formField=s,this._closedSubscription=Ye.EMPTY,this._validator=kl.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}}return t.\u0275fac=function(e){return new(e||t)(q(Nt),q($r,8),q(o6,8),q(Vp,8))},t.\u0275dir=je({type:t,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(e,i){1&e&&$t("input",function(s){return i._onInput(s.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)}),2&e&&(pl("disabled",i.disabled),We("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",(null==i._datepicker?null:i._datepicker.opened)&&i._datepicker.id||null)("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[E1([wke,Mke,{provide:dO,useExisting:t}]),ht]}),t})(),zke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["","matDatepickerToggleIcon",""]]}),t})(),Ske=(()=>{class t{get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=hn(e)}constructor(e,i,r){this._intl=e,this._changeDetectorRef=i,this._stateChanges=Ye.EMPTY;const s=Number(r);this.tabIndex=s||0===s?s:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:Jt(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Jt(),r=this.datepicker?Ci(this.datepicker.openedStream,this.datepicker.closedStream):Jt();this._stateChanges.unsubscribe(),this._stateChanges=Ci(this._intl.changes,e,i,r).subscribe(()=>this._changeDetectorRef.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(q(g7),q(Ur),pc("tabindex"))},t.\u0275cmp=Bt({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,i,r){if(1&e&&g2(r,zke,5),2&e){let s;k1(s=I1())&&(i._customIcon=s.first)}},viewQuery:function(e,i){if(1&e&&Xn(tke,5),2&e){let r;k1(r=I1())&&(i._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,i){1&e&&$t("click",function(s){return i._open(s)}),2&e&&(We("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),qn("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&"accent"===i.datepicker.color)("mat-warn",i.datepicker&&"warn"===i.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[wn],ngContentSelectors:rke,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,i){1&e&&(Or(ike),le(0,"button",0,1),xt(2,nke,2,0,"svg",2),Gn(3),pe()),2&e&&(Ze("disabled",i.disabled)("disableRipple",i.disableRipple),We("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex),Xe(2),Ze("ngIf",!i._customIcon))},dependencies:[$0,YN],styles:[".mat-datepicker-toggle{pointer-events:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0}),t})(),Eke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[g7,_ke],imports:[_l,QTe,TN,MLe,yN,Gr,Dp]}),t})();function qb(t){return t&&"function"==typeof t.connect&&!(t instanceof Gh)}class wO{applyChanges(n,e,i,r,s){n.forEachOperation((d,_,C)=>{let S,V;if(null==d.previousIndex){const F=i(d,_,C);S=e.createEmbeddedView(F.templateRef,F.context,F.index),V=1}else null==C?(e.remove(_),V=3):(S=e.get(_),e.move(S,C),V=2);s&&s({context:S?.context,operation:V,record:d})})}detach(){}}class Vke{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,i=!0,r){this._multiple=n,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Yt,e&&e.length&&(n?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);const e=this.selected,i=new Set(n);n.forEach(s=>this._markSelected(s)),e.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n){if(this.compareWith){for(let e of this._selection)if(this.compareWith(n,e))return e;return n}return n}}const v7=new vt("_ViewRepeater"),Lke=["trigger"],Tke=["panel"];function Hke(t,n){if(1&t&&(le(0,"span",10),Ue(1),pe()),2&t){const e=M1();Xe(1),K2(e.placeholder)}}function kke(t,n){if(1&t&&(le(0,"span",14),Ue(1),pe()),2&t){const e=M1(2);Xe(1),K2(e.triggerValue)}}function Ike(t,n){1&t&&Gn(0,0,["*ngSwitchCase","true"])}function Rke(t,n){1&t&&(le(0,"span",11),xt(1,kke,2,1,"span",12),xt(2,Ike,1,0,"ng-content",13),pe()),2&t&&(Ze("ngSwitch",!!M1().customTrigger),Xe(2),Ze("ngSwitchCase",!0))}function Pke(t,n){if(1&t){const e=Pn();Z(),oe(),le(0,"div",15,16),$t("@transformPanel.done",function(r){return ki(e),Di(M1()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return ki(e),Di(M1()._handleKeydown(r))}),Gn(2,1),pe()}if(2&t){const e=M1();(function bC(t,n,e){Ic(yr,m3,Ke(mt(),t,n,e),!0)})("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Ze("ngClass",e.panelClass)("@transformPanel","showing"),We("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Fke=[[["mat-select-trigger"]],"*"],Nke=["mat-select-trigger","*"],Oke={transformPanelWrap:p7("transformPanelWrap",[Fl("* => void",tHe("@transformPanel",[eHe()],{optional:!0}))]),transformPanel:p7("transformPanel",[Ap("void",wo({opacity:0,transform:"scale(1, 0.8)"})),Fl("void => showing",s6("120ms cubic-bezier(0, 0, 0.2, 1)",wo({opacity:1,transform:"scale(1, 1)"}))),Fl("* => void",s6("100ms linear",wo({opacity:0})))])};let zO=0;const SO=new vt("mat-select-scroll-strategy"),Uke=new vt("MAT_SELECT_CONFIG"),jke={provide:SO,deps:[c5],useFactory:function Bke(t){return()=>t.scrollStrategies.reposition()}},Gke=new vt("MatSelectTrigger");class $ke{constructor(n,e){this.source=n,this.value=e}}const qke=Eb(IN(Db(RN(class{constructor(t,n,e,i,r){this._elementRef=t,this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new Yt}}))));let Wke=(()=>{class t extends qke{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(kl.required)??!1}set required(e){this._required=hn(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=hn(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=hn(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=hv(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}constructor(e,i,r,s,d,_,C,S,V,F,W,K,ce,be){super(d,s,C,S,F),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=_,this._parentFormField=V,this._liveAnnouncer=ce,this._defaultOptions=be,this._panelOpen=!1,this._compareWith=(Me,He)=>Me===He,this._uid="mat-select-"+zO++,this._triggerAriaLabelledBy=null,this._destroy=new Yt,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+zO++,this._panelDoneAnimatingStream=new Yt,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=md(()=>{const Me=this.options;return Me?Me.changes.pipe(yl(Me),la(()=>Ci(...Me.map(He=>He.onSelectionChange)))):this._ngZone.onStable.pipe(Ei(1),la(()=>this.optionSelectionChanges))}),this.openedChange=new Gt,this._openedStream=this.openedChange.pipe(_i(Me=>Me),t1(()=>{})),this._closedStream=this.openedChange.pipe(_i(Me=>!Me),t1(()=>{})),this.selectionChange=new Gt,this.valueChange=new Gt,this.ngControl&&(this.ngControl.valueAccessor=this),null!=be?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=be.typeaheadDebounceInterval),this._scrollStrategyFactory=K,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(W)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Vke(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(XF(),yi(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(yi(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(yl(null),yi(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,d=this._keyManager;if(!d.isTyping()&&s&&!Bc(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const _=this.selected;d.onKeydown(e);const C=this.selected;C&&_!==C&&this._liveAnnouncer.announce(C.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,r=e.keyCode,s=40===r||38===r,d=i.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(d||13!==r&&32!==r||!i.activeItem||Bc(e))if(!d&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const _=this.options.some(C=>!C.disabled&&!C.selected);this.options.forEach(C=>{C.disabled||(_?C.select():C.deselect())})}else{const _=i.activeItemIndex;i.onKeydown(e),this._multiple&&s&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==_&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Ei(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new JVe(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Ci(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(yi(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ci(...this.options.map(i=>i._stateChanges)).pipe(yi(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return t.\u0275fac=function(e){return new(e||t)(q(u7),q(Ur),q(d1),q(PN),q(Nt),q(Co,8),q(n6,8),q(e5,8),q(Vp,8),q(x3,10),pc("tabindex"),q(SO),q(xLe),q(Uke,8))},t.\u0275dir=je({type:t,viewQuery:function(e,i){if(1&e&&(Xn(Lke,5),Xn(Tke,5),Xn(LN,5)),2&e){let r;k1(r=I1())&&(i.trigger=r.first),k1(r=I1())&&(i.panel=r.first),k1(r=I1())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[ht,wn]}),t})(),Zke=(()=>{class t extends Wke{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(yi(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const i=this.options.toArray()[e];if(i){const r=this.panel.nativeElement,s=function OTe(t,n,e){if(e.length){let i=n.toArray(),r=e.toArray(),s=0;for(let d=0;d<t+1;d++)i[d].group&&i[d].group===r[s]&&s++;return s}return 0}(e,this.options,this.optionGroups),d=i._getHostElement();r.scrollTop=0===e&&1===s?0:function BTe(t,n,e,i){return t<e?t:t+n>e+i?Math.max(0,t-i+n):e}(d.offsetTop,d.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new $ke(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof Sb?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=hn(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Bt({type:t,selectors:[["mat-select"]],contentQueries:function(e,i,r){if(1&e&&(g2(r,Gke,5),g2(r,$N,5),g2(r,GN,5)),2&e){let s;k1(s=I1())&&(i.customTrigger=s.first),k1(s=I1())&&(i.options=s),k1(s=I1())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,i){1&e&&$t("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(We("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),qn("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[E1([{provide:kb,useExisting:t},{provide:jN,useExisting:t}]),ht],ngContentSelectors:Nke,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(Or(Fke),le(0,"div",0,1),$t("click",function(){return i.toggle()}),le(3,"div",2),xt(4,Hke,2,1,"span",3),xt(5,Rke,3,2,"span",4),pe(),le(6,"div",5)(7,"div",6),Z(),le(8,"svg",7),ft(9,"path",8),pe()()()(),xt(10,Pke,3,9,"ng-template",9),$t("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const r=gn(1);We("aria-owns",i.panelOpen?i.id+"-panel":null),Xe(3),Ze("ngSwitch",i.empty),We("id",i._valueId),Xe(1),Ze("ngSwitchCase",!0),Xe(1),Ze("ngSwitchCase",!1),Xe(5),Ze("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[G0,V8,Ih,FM,LN,Sb],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Oke.transformPanel]},changeDetection:0}),t})(),Yke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[jke],imports:[_l,TN,qN,Gr,Dp,Lp,qN,Gr]}),t})(),Xke=(()=>{class t{constructor(){this.rating=0,this.comment="",this.submitForm=new Gt,this.placeholder="Enter your comment"}onSubmit(){this.submitForm.emit({rating:this.rating,comment:this.comment}),this.rating=0,this.comment=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-satisfaction-form"]],inputs:{placeholder:"placeholder"},outputs:{submitForm:"submitForm"},decls:26,vars:2,consts:[[1,"container"],[1,"title-home"],[1,"form",3,"ngSubmit"],[1,"col-4","input-cont","py-2"],["name","rating",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","4"],["value","3"],["value","2"],["value","1"],["name","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4","offset-md-4","btn-sub"],["type","submit"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Rate us and leave your comments "),pe()(),le(4,"form",2),$t("ngSubmit",function(){return i.onSubmit()}),le(5,"div",3)(6,"label"),Ue(7,"Rating:"),pe(),le(8,"select",4),$t("ngModelChange",function(s){return i.rating=s}),le(9,"option",5),Ue(10,"5 stars"),pe(),le(11,"option",6),Ue(12,"4 stars"),pe(),le(13,"option",7),Ue(14,"3 stars"),pe(),le(15,"option",8),Ue(16,"2 stars"),pe(),le(17,"option",9),Ue(18,"1 star"),pe()()(),le(19,"div",3)(20,"label"),Ue(21,"Comment:"),pe(),le(22,"textarea",10),$t("ngModelChange",function(s){return i.comment=s}),pe()(),le(23,"div",11)(24,"button",12),Ue(25,"Submit"),pe()()()()),2&e&&(Xe(8),Ze("ngModel",i.rating),Xe(14),Ze("ngModel",i.comment))},dependencies:[gp,EF,LF,K8,_p,ap,op,mp,n6],styles:[".input-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:600px;padding:5px;border:2px solid gray}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;margin-left:auto;display:block;width:200px;margin-top:25px;height:50px;border-radius:2rem;background-color:#c7e7f1;border:2px solid #081820;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif;background-color:#0b161b}.container[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center;background-color:#0b161b;margin-bottom:15px}.form[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:16px}label[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif;font-size:larger}"]}),t})();function Kke(t,n){if(1&t&&(le(0,"mat-option",24),Ue(1),pe()),2&t){const e=n.$implicit;Ze("value",e),Xe(1),n2(" ",e," ")}}function Qke(t,n){if(1&t){const e=Pn();le(0,"div")(1,"h1",25),Ue(2,"Satisfaction Survey"),pe(),le(3,"app-satisfaction-form",26),$t("submitForm",function(r){return ki(e),Di(M1().onSatisfactionSubmit(r))}),pe(),ft(4,"br"),pe()}2&t&&(Xe(3),Ze("placeholder","Type your comment here"))}function Jke(t,n){1&t&&(le(0,"div")(1,"div",27)(2,"h1"),Ue(3,"Check-In"),pe(),le(4,"h2")(5,"span"),Ue(6,"TRAVEL WITH PEACE"),pe()(),le(7,"p"),Ue(8,"Start your vacation on the right foot with our hassle-free check-in process. "),ft(9,"br"),Ue(10,"At Your Home, our premier vacation rental service, we understand that your time is precious and you deserve a stress-free start to your trip. "),ft(11,"br"),Ue(12," Relax and enjoy the perfect blend of comfort and sophistication in our stylish and welcoming vacation rentals. "),pe()()())}function eIe(t,n){if(1&t&&(le(0,"div")(1,"p"),Ue(2),pe(),le(3,"p"),Ue(4),pe()()),2&t){const e=M1(2);Xe(2),n2("Rating: ",e.satisfaction.rating,""),Xe(2),n2("Comment: ",e.satisfaction.comment,"")}}function tIe(t,n){if(1&t&&(le(0,"div")(1,"div",28)(2,"p",29),Ue(3,"Submitted answers:"),pe(),xt(4,eIe,5,2,"div",23),pe()()),2&t){const e=M1();Xe(4),Ze("ngIf",e.satisfaction)}}let nIe=(()=>{class t{constructor(e){this.router=e,this.satisfaction={rating:0,comment:""},this.reservationIn="",this.reservationOut="",this.array1=[],this.array2=[],this.array3=[],this.array4=[],this.array5=[],this.array6=[],this.numAdults=["1","2","3","4","5","6","7","8","9","10"],this.band=0,this.send=0,this.nombre="",this.checkInDate=new Date(""),this.checkOutDate=new Date(""),this.name="",this.numGuests="",this.checkInTime="16:00",this.checkOutTime="11:00"}enviarNombre(){console.log(this.nombre),this.router.navigate(["reservations",this.nombre])}ngOnInit(){}onSatisfactionSubmit(e){this.satisfaction=e}onSubmit(){this.send=0,this.satisfaction.rating=0,this.satisfaction.comment="";const e=new Date,d=`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`;let _=new Date(this.checkInDate),F=`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`,W=new Date(this.checkOutDate),Me=`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}-${String(W.getDate()).padStart(2,"0")}`;this.band=0;const He=localStorage.getItem("checkIn");He&&(this.array1=JSON.parse(He));const lt=localStorage.getItem("checkOut");lt&&(this.array2=JSON.parse(lt));const $e=localStorage.getItem("checkInTime");$e&&(this.array3=JSON.parse($e));const St=localStorage.getItem("checkOutTime");St&&(this.array4=JSON.parse(St));const h1=localStorage.getItem("name");h1&&(this.array5=JSON.parse(h1));const en=localStorage.getItem("numGuests");if(en&&(this.array6=JSON.parse(en)),F<d||Me<d)this.band=1;else if(F>=Me)this.band=2;else for(let Ln=0;Ln<=this.array1.length;Ln++){if(F>=this.array1[Ln]&&F<this.array2[Ln]){this.band=3;break}if(Me>this.array1[Ln]&&Me<=this.array2[Ln]){this.band=4;break}if(F<this.array1[Ln]&&Me>this.array2[Ln]){this.reservationIn=this.array1[Ln],this.reservationOut=this.array2[Ln],this.band=5;break}}switch(this.band){case 0:this.array1.push(F),this.array2.push(Me),this.array3.push(this.checkInTime),this.array4.push(this.checkOutTime),this.array5.push(this.name),this.array6.push(this.numGuests),localStorage.setItem("checkIn",JSON.stringify(this.array1)),localStorage.setItem("checkOut",JSON.stringify(this.array2)),localStorage.setItem("checkInTime",JSON.stringify(this.array3)),localStorage.setItem("checkOutTime",JSON.stringify(this.array4)),localStorage.setItem("name",JSON.stringify(this.array5)),localStorage.setItem("numGuests",JSON.stringify(this.array6)),Ll().fire({icon:"success",title:"Your reservation has been made..."}),this.send=1,this.name=" ",this.numGuests="",this.checkInDate=new Date(""),this.checkOutDate=new Date("");break;case 1:Ll().fire({icon:"error",title:"Oops...",text:"Reservations must be done after current date!"});break;case 2:Ll().fire({icon:"error",title:"Oops...",text:"You can not make a reservation in these dates!"});break;case 3:Ll().fire({icon:"error",title:"Oops...",text:"Check-In date occupied!"});break;case 4:Ll().fire({icon:"error",title:"Oops...",text:"Check-Out date occupied!"});break;case 5:Ll().fire({icon:"error",title:"Oops...",text:"Date occupied:"+this.reservationIn+"a"+this.reservationOut})}}}return t.\u0275fac=function(e){return new(e||t)(q(xo))},t.\u0275cmp=Bt({type:t,selectors:[["app-contact"]],decls:47,vars:13,consts:[[1,"container-home"],[1,"cont-search"],[1,"form-search",3,"submit"],[1,"input-cont-search"],["type","text","name","nombre","placeholder","Search for name",3,"ngModel","ngModelChange"],[1,"btn-sub"],["type","submit"],[1,"cont-forms"],[1,"container","form-cont",3,"ngSubmit"],[1,"row"],[1,"example-full-width"],["matInput","","id","name","name","name",3,"ngModel","ngModelChange"],["appearance","fill"],["matInput","","id","checkIn","name","checkIn",3,"matDatepicker","ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],["matInput","","id","checkOut","name","checkOut",3,"matDatepicker","ngModel","ngModelChange"],["picker2",""],[1,"eS"],["id","guests","name","guests",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","color","primary","type","submit"],[1,"survey-container"],[4,"ngIf"],[3,"value"],[1,"survey-title"],[3,"placeholder","submitForm"],[1,"title-home"],[1,"s-cont"],["id","p2"]],template:function(e,i){if(1&e&&(le(0,"div",0)(1,"div",1)(2,"form",2),$t("submit",function(){return i.enviarNombre()}),le(3,"div",3)(4,"input",4),$t("ngModelChange",function(s){return i.nombre=s}),pe()(),le(5,"div",5)(6,"button",6),Ue(7,"Send"),pe()()()(),le(8,"div",7)(9,"form",8),$t("ngSubmit",function(){return i.onSubmit()}),le(10,"div",9)(11,"mat-form-field",10)(12,"mat-label"),Ue(13,"Full Name"),pe(),le(14,"input",11),$t("ngModelChange",function(s){return i.name=s}),pe()(),le(15,"div")(16,"div")(17,"mat-form-field",12)(18,"mat-label"),Ue(19,"Check-In"),pe(),le(20,"input",13),$t("ngModelChange",function(s){return i.checkInDate=s}),pe(),ft(21,"mat-datepicker-toggle",14)(22,"mat-datepicker",null,15),pe()(),le(24,"div")(25,"mat-form-field",12)(26,"mat-label"),Ue(27,"Check-Out"),pe(),le(28,"input",16),$t("ngModelChange",function(s){return i.checkOutDate=s}),pe(),ft(29,"mat-datepicker-toggle",14)(30,"mat-datepicker",null,17),pe()()(),le(32,"div",18)(33,"mat-form-field",12)(34,"mat-label"),Ue(35,"Number of Visitors"),pe(),le(36,"mat-select",19),$t("ngModelChange",function(s){return i.numGuests=s}),xt(37,Kke,2,2,"mat-option",20),pe()()(),le(38,"div")(39,"div",5)(40,"button",21),Ue(41,"Send"),pe()()()()(),le(42,"div",22),xt(43,Qke,5,1,"div",23),xt(44,Jke,13,0,"div",23),xt(45,tIe,5,1,"div",23),pe(),ft(46,"br"),pe()()),2&e){const r=gn(23),s=gn(31);Xe(4),Ze("ngModel",i.nombre),Xe(10),Ze("ngModel",i.name),Xe(6),Ze("matDatepicker",r)("ngModel",i.checkInDate),Xe(1),Ze("for",r),Xe(7),Ze("matDatepicker",s)("ngModel",i.checkOutDate),Xe(1),Ze("for",s),Xe(7),Ze("ngModel",i.numGuests),Xe(1),Ze("ngForOf",i.numAdults),Xe(6),Ze("ngIf",1==i.send&&0==i.satisfaction.rating),Xe(1),Ze("ngIf",0===i.send),Xe(1),Ze("ngIf",i.satisfaction.rating>0)}},dependencies:[gl,$0,gp,K8,ap,op,mp,n6,bke,Gb,Ske,IHe,Hb,EHe,BHe,Zke,$N,Xke],styles:[".container-home[_ngcontent-%COMP%]{padding:30px;min-height:100%;min-width:100%;margin:0 auto;background-color:#081820}.cont-forms[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.input-cont-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;border:2px solid gray}.input-cont-search[_ngcontent-%COMP%]{margin-right:30px}.form-search[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.cont-search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;padding:20px}.input-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:5px;border:2px solid gray}.title-home[_ngcontent-%COMP%]{margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.title-home[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.title-home[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.title-home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .title-home[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .title-home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.title-home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;margin-left:auto;display:block;width:200px;height:50px;border-radius:2rem;background-color:#c7e7f1;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.survey-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:0;min-height:100%;min-width:80%;margin:0 auto;background-color:#072230;font-size:1.2em}.survey-title[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:bolder}#p2[_ngcontent-%COMP%]{font-size:x-large;color:#fff;text-decoration:underline}.form-cont[_ngcontent-%COMP%]{margin-left:40px}.s-cont[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;align-items:center;color:#fff}"]}),t})(),iIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-login"]],decls:7,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Book now"),pe(),le(4,"h3"),Ue(5,"We are waiting for you!"),pe()()(),ft(6,"app-contact"))},dependencies:[nIe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake-recep.269e82a7e7bd0831.jpg);background-size:cover;background-position:center;margin:0 auto}.check-container[_ngcontent-%COMP%]{padding:30px;height:400px;background-color:#072230;margin:0 auto}.container2[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:600px;min-height:80%;min-width:80%;width:95%;background-size:cover;background-position:center;margin:0 auto}']}),t})();function rIe(t,n){if(1&t&&(le(0,"div",4)(1,"div",5)(2,"div",6),ft(3,"img",7),pe(),le(4,"div",8)(5,"h5",9),Ue(6),N0(7,"uppercase"),pe(),le(8,"h6",10),Ue(9),N0(10,"uppercase"),N0(11,"uppercase"),pe(),le(12,"p",11),Ue(13),pe()()()()),2&t){const e=n.$implicit;Xe(3),ks("src",e.url,bc),Xe(3),K2(S8(7,5,e.title)),Xe(3),yg(" Bed: ",S8(10,7,e.bed)," | Bath: ",S8(11,9,e.bath),""),Xe(4),K2(e.desc)}}let aIe=(()=>{class t{constructor(){this.rooms=[{title:"Room one",bed:"1 ",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room1.jpg"},{title:"Room two",bed:"2",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room3.jpg"},{title:"Room five",bed:"2",bath:"1",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room5.jpg"},{title:"Room six",bed:"2",bath:"1",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room7.jpg"},{title:"Room eigth",bed:"1",bath:"3",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room8.jpg"},{title:"Room ten",bed:"1",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room10.jpg"},{title:"Room eleven",bed:"3",bath:"2",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room4.jpg"},{title:"Room twelve",bed:"1",bath:"3",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room2.jpg"},{title:"Room fifteen",bed:"1",bath:"3",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room6.jpg"},{title:"Room sixteen",bed:"3",bath:"1",desc:"Experience true comfort and relaxation in our stylishly designed room. Equipped with modern amenities, including a cozy bed, flat-screen TV, and high-speed internet, our room offers the perfect escape after a long day. Unwind in the tranquil ambiance, and enjoy a restful night's sleep in this cozy retreat.",url:"assets/imgs/rooms/room15.webp"}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-room-types"]],decls:8,vars:1,consts:[[1,"container"],[1,"title-home"],[1,"row"],["class","col-md-6 col-sm-12 p-3",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12","p-3"],[1,"card","bg-dark-blue"],[1,"img-container"],["alt","Card image cap",1,"card-img-top","col-sm-12",3,"src"],[1,"card-body"],[1,"card-title","text-left"],[1,"card-subtitle","mb-2","text-muted","text-left",2,"font-weight","bold"],[1,"card-text","text-left"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Relax in comfort"),pe(),le(4,"h2"),Ue(5,"WITH OUR ROOMS"),pe(),le(6,"div",2),xt(7,rIe,14,11,"div",3),pe()()()),2&e&&(Xe(7),Ze("ngForOf",i.rooms))},dependencies:[gl,v_],styles:[".container[_ngcontent-%COMP%]{padding:60px;gap:50px;min-height:100%;min-width:100%;background-color:#072230;margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.title-home[_ngcontent-%COMP%]{text-align:center;padding:20px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-weight:700;letter-spacing:.1em;padding-bottom:30px}.bg-dark-blue[_ngcontent-%COMP%]{background-color:#e7f1fa}.bg-dark-blue[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;min-height:350px;min-width:300px}.img-container[_ngcontent-%COMP%]{padding-top:20px}"]}),t})(),oIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-rooms"]],decls:7,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Hotel Rooms "),pe(),le(4,"h3"),Ue(5,"Experience comfort and luxury in our elegant rooms"),pe()()(),ft(6,"app-room-types"))},dependencies:[aIe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake-room.9364e96a4abbe615.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})(),sIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-explore-home"]],decls:14,vars:0,consts:[[1,"container"],[1,"image-container"],["src","assets/imgs/fake/fake-4.jpg","alt","",1,"img-2"],[1,"title-home"],[1,"spanP"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1),ft(2,"img",2),pe(),le(3,"div",3)(4,"h1"),Ue(5,"Discover"),pe(),le(6,"h2")(7,"span"),Ue(8,"YOUR PARADISE"),pe()(),le(9,"p")(10,"span",4),Ue(11," If you're looking for a getaway that combines adventure and relaxation, look no further than Discover. "),ft(12,"br"),Ue(13," Our Hotel specializes in creating best experiences that can bring you some of the most beautiful and pristine locations in the world. "),pe()()()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;align-items:center;justify-content:center;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   .spanP[_ngcontent-%COMP%]{display:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(1fr);grid-gap:20px;align-items:center;margin-top:50px;height:400px;width:780px;margin-left:100px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:400px;width:775px;top:0;right:5%;transform:translateY(-20px)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})(),cIe=(()=>{class t{constructor(e){this.domSanitizer=e}transform(e,i){return this.domSanitizer.bypassSecurityTrustResourceUrl(i+e)}}return t.\u0275fac=function(e){return new(e||t)(q(Uh,16))},t.\u0275pipe=Mi({name:"domseguro",type:t,pure:!0}),t})(),lIe=(()=>{class t{constructor(){this.video="rGx310iRHBo"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-video-explore"]],decls:18,vars:4,consts:[[1,"container"],[1,"video-container"],["width","560","height","315","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],[1,"title-container"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1),ft(2,"iframe",2),N0(3,"domseguro"),pe(),le(4,"div",3)(5,"h1"),Ue(6,"Explore"),pe(),le(7,"h2")(8,"span"),Ue(9,"YOUR PERFECT GATEWAY"),pe()(),le(10,"p"),Ue(11," Discover a world of indulgence and sophistication at our premier hotel, the perfect destination for your next getaway. With world-class amenities, luxurious accommodations, and unparalleled service, we offer a truly unforgettable experience that will leave you feeling relaxed, rejuvenated, and inspired. "),pe(),le(12,"p"),Ue(13," Whether you're traveling for business or pleasure, our hotel has everything you need to make your stay comfortable and enjoyable. From spacious rooms and suites to fine dining restaurants and a full-service spa, we have everything you need to unwind in style. "),pe(),le(14,"p"),Ue(15," Our expert staff is committed to providing you with personalized attention and exceptional service, ensuring that your every need is met. Whether you need help with dinner reservations or recommendations for local attractions, we are here to help. "),pe(),le(16,"p"),Ue(17," So why wait? Explore your perfect getaway and book your stay at our luxurious hotel today. "),pe()()()),2&e&&(Xe(2),Ze("src",function vw(t,n,e,i){const r=t+Dn,s=mt(),d=Po(s,r);return ad(s,r)?pw(s,D2(),n,d.transform,e,i,d):d.transform(e,i)}(3,1,i.video,"https://www.youtube.com/embed/"),b0))},dependencies:[cIe],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto auto;grid-gap:20px;justify-content:center;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto;padding:50px}.title-container[_ngcontent-%COMP%]{margin-top:0;padding-right:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.video-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),t})();function uIe(t,n){if(1&t){const e=Pn();le(0,"div",4)(1,"img",5),$t("load",function(r){return ki(e),Di(M1().onImageLoad(r))}),pe()()}if(2&t){const e=n.$implicit;Xe(1),Ze("src",e.url,bc)}}let dIe=(()=>{class t{constructor(){this.images=[{url:"assets/imgs/beach/beach17.jpg"},{url:"assets/imgs/beach/beach15.jpg"},{url:"assets/imgs/beach/beach16.jpg"},{url:"assets/imgs/beach/beach13.jpg"},{url:"assets/imgs/beach/beach14.jpg"},{url:"assets/imgs/beach/beach12.jpg"},{url:"assets/imgs/beach/beach11.jpg"},{url:"assets/imgs/beach/beach10.jpg"},{url:"assets/imgs/beach/beach8.jpg"},{url:"assets/imgs/beach/beach2.jpg"},{url:"assets/imgs/beach/beach6.jpg"},{url:"assets/imgs/beach/beach5.jpg"},{url:"assets/imgs/beach/beach7.jpg"},{url:"assets/imgs/beach/beach3.jpg"},{url:"assets/imgs/beach/beach4.jpg"},{url:"assets/imgs/beach/beach1.jpg"},{url:"assets/imgs/beach/beach9.jpg"}],this.shuffle(this.images)}shuffle(e){let r,s,i=e.length;for(;0!==i;)s=Math.floor(Math.random()*i),i-=1,r=e[i],e[i]=e[s],e[s]=r;return e}onImageLoad(e){e.target.classList.add("loaded")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-img-explore"]],decls:8,vars:1,consts:[[1,"title-cont"],[1,"title-home"],[1,"container"],["class","img-container",4,"ngFor","ngForOf"],[1,"img-container"],[3,"src","load"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Reveal "),pe(),le(4,"h3"),Ue(5,"YOUR PERSONAL HEAVEN"),pe()()(),le(6,"div",2),xt(7,uIe,2,1,"div",3),pe()),2&e&&(Xe(7),Ze("ngForOf",i.images))},dependencies:[gl],styles:[".container[_ngcontent-%COMP%]{padding:60px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto;columns:5 320px;column-gap:.5rem}.title-cont[_ngcontent-%COMP%]{padding:20px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-cont[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;font-size:3.5rem;letter-spacing:.15em;font-family:Radley,serif}.title-cont[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.1em}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;display:block;margin-bottom:.5rem}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:0;transition:opacity .5s ease-in-out}.img-container[_ngcontent-%COMP%]   img.loaded[_ngcontent-%COMP%]{opacity:1}"]}),t})(),fIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-explore"]],decls:9,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Explore Rinc\xf3n de Guayabitos | Mexico |"),pe(),le(4,"h3"),Ue(5,"Your paradise awaits!"),pe()()(),ft(6,"app-explore-home")(7,"app-img-explore")(8,"app-video-explore"))},dependencies:[sIe,lIe,dIe],styles:[".title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:3.5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(fake-5.8c571756f601d68e.jpg);background-size:cover;background-position:center;margin:0 auto}"]}),t})(),hIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-restaurant-home"]],decls:20,vars:0,consts:[[1,"container"],[1,"title-home"],[1,"spanP"],[1,"image-container"],["src","assets/imgs/fake/hotel-fake.jpg","alt","",1,"img-2"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Satisfaction"),pe(),le(4,"h2")(5,"span"),Ue(6,"FLAVOR THAT DAZZLES"),pe()(),le(7,"p")(8,"span",2),Ue(9," At our hotel, we understand that food is an important part of any travel experience. "),ft(10,"br"),Ue(11," That's why we take great pride in offering a dining experience that is sure to dazzle your "),ft(12,"br"),Ue(13," taste buds. "),ft(14,"br"),Ue(15," Our expert chefs use only the finest ingredients to create dishes that are as beautiful "),ft(16,"br"),Ue(17," as they are delicious. "),pe()()(),le(18,"div",3),ft(19,"img",4),pe()())},styles:[".container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Radley,serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;align-items:flex-start;padding:60px;height:700px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-home[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;margin:0;display:initial;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:60px;font-size:48px}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:initial;font-weight:100}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:60px;text-align:initial}.container[_ngcontent-%COMP%]   .spanP[_ngcontent-%COMP%]{display:initial}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-color:#072230;position:relative;display:grid;grid-template-columns:repeat(1fr);grid-gap:20px;align-items:center;height:600px;width:855px}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .img-2[_ngcontent-%COMP%]{position:relative;height:460px;width:900px;top:0;right:25%;transform:translate(20%)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px 0}}"]}),t})();class kp{}class Wb{}class g4{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),d=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(d):this.headers.set(s,[d])}})}:()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{let r;if(r="string"==typeof i?[i]:"number"==typeof i?[i.toString()]:i.map(s=>s.toString()),r.length>0){const s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof g4?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new g4;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof g4?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=n.value;if(s){let d=this.headers.get(e);if(!d)return;d=d.filter(_=>-1===s.indexOf(_)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class pIe{encodeKey(n){return DO(n)}encodeValue(n){return DO(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const gIe=/%(\d[a-f0-9])/gi,_Ie={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function DO(t){return encodeURIComponent(t).replace(gIe,(n,e)=>_Ie[e]??n)}function Ip(t){return`${t}`}class Ol{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new pIe,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mIe(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[d,_]=-1==s?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,s)),n.decodeValue(r.slice(s+1))],C=e.get(d)||[];C.push(_),e.set(d,C)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],r=Array.isArray(i)?i.map(Ip):[Ip(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Ol({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(Ip(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(Ip(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class vIe{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function AO(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function EO(t){return typeof Blob<"u"&&t instanceof Blob}function VO(t){return typeof FormData<"u"&&t instanceof FormData}class y7{constructor(n,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function yIe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new g4),this.context||(this.context=new vIe),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const _=e.indexOf("?");this.urlWithParams=e+(-1===_?"?":_<e.length-1?"&":"")+d}}else this.params=new Ol,this.urlWithParams=e}serializeBody(){return null===this.body?null:AO(this.body)||EO(this.body)||VO(this.body)||function bIe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ol?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VO(this.body)?null:EO(this.body)?this.body.type||null:AO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ol?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,d=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,_=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let C=n.headers||this.headers,S=n.params||this.params;const V=n.context??this.context;return void 0!==n.setHeaders&&(C=Object.keys(n.setHeaders).reduce((F,W)=>F.set(W,n.setHeaders[W]),C)),n.setParams&&(S=Object.keys(n.setParams).reduce((F,W)=>F.set(W,n.setParams[W]),S)),new y7(e,i,s,{params:S,headers:C,context:V,reportProgress:_,responseType:r,withCredentials:d})}}var I2=(()=>((I2=I2||{})[I2.Sent=0]="Sent",I2[I2.UploadProgress=1]="UploadProgress",I2[I2.ResponseHeader=2]="ResponseHeader",I2[I2.DownloadProgress=3]="DownloadProgress",I2[I2.Response=4]="Response",I2[I2.User=5]="User",I2))();class Zb{constructor(n,e=200,i="OK"){this.headers=n.headers||new g4,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Yb extends Zb{constructor(n={}){super(n),this.type=I2.ResponseHeader}clone(n={}){return new Yb({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Rp extends Zb{constructor(n={}){super(n),this.type=I2.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Rp({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class LO extends Zb{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Xb(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let TO=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof y7)s=e;else{let C,S;C=r.headers instanceof g4?r.headers:new g4(r.headers),r.params&&(S=r.params instanceof Ol?r.params:new Ol({fromObject:r.params})),s=new y7(e,i,void 0!==r.body?r.body:null,{headers:C,context:r.context,params:S,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const d=Jt(s).pipe(xl(C=>this.handler.handle(C)));if(e instanceof y7||"events"===r.observe)return d;const _=d.pipe(_i(C=>C instanceof Rp));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return _.pipe(t1(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return _.pipe(t1(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return _.pipe(t1(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return _.pipe(t1(C=>C.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Ol).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Xb(r,i))}post(e,i,r={}){return this.request("POST",e,Xb(r,i))}put(e,i,r={}){return this.request("PUT",e,Xb(r,i))}}return t.\u0275fac=function(e){return new(e||t)(Ie(kp))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function HO(t,n){return n(t)}function xIe(t,n){return(e,i)=>n.intercept(e,{handle:r=>t(r,i)})}const wIe=new vt("HTTP_INTERCEPTORS"),b7=new vt("HTTP_INTERCEPTOR_FNS");function MIe(){let t=null;return(n,e)=>(null===t&&(t=(r1(wIe,{optional:!0})??[]).reduceRight(xIe,HO)),t(n,e))}let kO=(()=>{class t extends kp{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=Array.from(new Set(this.injector.get(b7)));this.chain=i.reduceRight((r,s)=>function CIe(t,n,e){return(i,r)=>e.runInContext(()=>n(i,s=>t(s,r)))}(r,s,this.injector),HO)}return this.chain(e,i=>this.backend.handle(i))}}return t.\u0275fac=function(e){return new(e||t)(Ie(Wb),Ie(As))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const AIe=/^\)\]\}',?\n/;let RO=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new c1(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((K,ce)=>r.setRequestHeader(K,ce.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const K=e.detectContentTypeHeader();null!==K&&r.setRequestHeader("Content-Type",K)}if(e.responseType){const K=e.responseType.toLowerCase();r.responseType="json"!==K?K:"text"}const s=e.serializeBody();let d=null;const _=()=>{if(null!==d)return d;const K=r.statusText||"OK",ce=new g4(r.getAllResponseHeaders()),be=function EIe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||e.url;return d=new Yb({headers:ce,status:r.status,statusText:K,url:be}),d},C=()=>{let{headers:K,status:ce,statusText:be,url:Me}=_(),He=null;204!==ce&&(He=typeof r.response>"u"?r.responseText:r.response),0===ce&&(ce=He?200:0);let lt=ce>=200&&ce<300;if("json"===e.responseType&&"string"==typeof He){const $e=He;He=He.replace(AIe,"");try{He=""!==He?JSON.parse(He):null}catch(St){He=$e,lt&&(lt=!1,He={error:St,text:He})}}lt?(i.next(new Rp({body:He,headers:K,status:ce,statusText:be,url:Me||void 0})),i.complete()):i.error(new LO({error:He,headers:K,status:ce,statusText:be,url:Me||void 0}))},S=K=>{const{url:ce}=_(),be=new LO({error:K,status:r.status||0,statusText:r.statusText||"Unknown Error",url:ce||void 0});i.error(be)};let V=!1;const F=K=>{V||(i.next(_()),V=!0);let ce={type:I2.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(ce.total=K.total),"text"===e.responseType&&r.responseText&&(ce.partialText=r.responseText),i.next(ce)},W=K=>{let ce={type:I2.UploadProgress,loaded:K.loaded};K.lengthComputable&&(ce.total=K.total),i.next(ce)};return r.addEventListener("load",C),r.addEventListener("error",S),r.addEventListener("timeout",S),r.addEventListener("abort",S),e.reportProgress&&(r.addEventListener("progress",F),null!==s&&r.upload&&r.upload.addEventListener("progress",W)),r.send(s),i.next({type:I2.Sent}),()=>{r.removeEventListener("error",S),r.removeEventListener("abort",S),r.removeEventListener("load",C),r.removeEventListener("timeout",S),e.reportProgress&&(r.removeEventListener("progress",F),null!==s&&r.upload&&r.upload.removeEventListener("progress",W)),r.readyState!==r.DONE&&r.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Ie(GM))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Kb=new vt("XSRF_ENABLED"),PO=new vt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),FO=new vt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class NO{}let TIe=(()=>{class t{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=TM(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1),Ie(vo),Ie(PO))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function HIe(t,n){const e=t.url.toLowerCase();if(!r1(Kb)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=r1(NO).getToken(),r=r1(FO);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}var y2=(()=>((y2=y2||{})[y2.Interceptors=0]="Interceptors",y2[y2.LegacyInterceptors=1]="LegacyInterceptors",y2[y2.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",y2[y2.NoXsrfProtection=3]="NoXsrfProtection",y2[y2.JsonpSupport=4]="JsonpSupport",y2[y2.RequestsMadeViaParent=5]="RequestsMadeViaParent",y2))();function u5(t,n){return{\u0275kind:t,\u0275providers:n}}function kIe(...t){const n=[TO,RO,kO,{provide:kp,useExisting:kO},{provide:Wb,useExisting:RO},{provide:b7,useValue:HIe,multi:!0},{provide:Kb,useValue:!0},{provide:NO,useClass:TIe}];for(const e of t)n.push(...e.\u0275providers);return function mf(t){return{\u0275providers:t}}(n)}const OO=new vt("LEGACY_INTERCEPTOR_FN");let RIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[kIe(u5(y2.LegacyInterceptors,[{provide:OO,useFactory:MIe},{provide:b7,useExisting:OO,multi:!0}]))]}),t})(),PIe=(()=>{class t{constructor(e){this.http=e,this.apiUrlMeals="https://www.themealdb.com/api/json/v1/1"}getMealsByCategory(e){return this.http.get(`${this.apiUrlMeals}/filter.php?c=${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Ie(TO))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function FIe(t,n){if(1&t&&(le(0,"tr")(1,"td"),Ue(2),pe(),le(3,"td"),ft(4,"img",7),pe()()),2&t){const e=n.$implicit;Xe(2),K2(e.strMeal),Xe(2),ks("alt",e.strMeal),Ze("src",e.strMealThumb,bc)}}function NIe(t,n){if(1&t&&(le(0,"tr")(1,"td"),Ue(2),pe(),le(3,"td"),ft(4,"img",7),pe()()),2&t){const e=n.$implicit;Xe(2),K2(e.strMeal),Xe(2),ks("alt",e.strMeal),Ze("src",e.strMealThumb,bc)}}function OIe(t,n){if(1&t&&(le(0,"tr")(1,"td"),Ue(2),pe(),le(3,"td"),ft(4,"img",7),pe()()),2&t){const e=n.$implicit;Xe(2),K2(e.strMeal),Xe(2),ks("alt",e.strMeal),Ze("src",e.strMealThumb,bc)}}function BIe(t,n){if(1&t&&(le(0,"tr")(1,"td"),Ue(2),pe(),le(3,"td"),ft(4,"img",7),pe()()),2&t){const e=n.$implicit;Xe(2),K2(e.strMeal),Xe(2),ks("alt",e.strMeal),Ze("src",e.strMealThumb,bc)}}let UIe=(()=>{class t{constructor(e){this.mealService=e,this.meals_seaFood=[],this.meals_meats=[],this.meals_dessert=[],this.meals_soups=[]}ngOnInit(){this.mealService.getMealsByCategory("SeaFood").subscribe(e=>{this.meals_seaFood=e.meals?.slice(0,5)}),this.mealService.getMealsByCategory("Beef").subscribe(e=>{this.meals_meats=e.meals?.slice(0,5)}),this.mealService.getMealsByCategory("Dessert").subscribe(e=>{this.meals_dessert=e.meals?.slice(0,5)}),this.mealService.getMealsByCategory("Beef").subscribe(e=>{this.meals_soups=e.meals?.slice(6,11)})}}return t.\u0275fac=function(e){return new(e||t)(q(PIe))},t.\u0275cmp=Bt({type:t,selectors:[["app-menu-search"]],decls:53,vars:4,consts:[[1,"container"],[1,"title-home"],[1,"menu-deploy"],[1,"table","table-hover"],["colspan","2",1,"title-cat"],["scope","col"],[4,"ngFor","ngForOf"],[3,"src","alt"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Savor your favorites"),pe()(),le(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),Ue(9,"SeaFood"),pe()(),le(10,"tr")(11,"th",5),Ue(12,"Name"),pe(),le(13,"th",5),Ue(14,"Image"),pe()()(),le(15,"tbody"),xt(16,FIe,5,3,"tr",6),pe()(),le(17,"table",3)(18,"thead")(19,"tr")(20,"th",4),Ue(21,"Meats"),pe()(),le(22,"tr")(23,"th",5),Ue(24,"Name"),pe(),le(25,"th",5),Ue(26,"Image"),pe()()(),le(27,"tbody"),xt(28,NIe,5,3,"tr",6),pe()(),le(29,"table",3)(30,"thead")(31,"tr")(32,"th",4),Ue(33,"Desserts"),pe()(),le(34,"tr")(35,"th",5),Ue(36,"Name"),pe(),le(37,"th",5),Ue(38,"Image"),pe()()(),le(39,"tbody"),xt(40,OIe,5,3,"tr",6),pe()(),le(41,"table",3)(42,"thead")(43,"tr")(44,"th",4),Ue(45,"Meats VIP"),pe()(),le(46,"tr")(47,"th",5),Ue(48,"Name"),pe(),le(49,"th",5),Ue(50,"Image"),pe()()(),le(51,"tbody"),xt(52,BIe,5,3,"tr",6),pe()()()()),2&e&&(Xe(16),Ze("ngForOf",i.meals_seaFood),Xe(12),Ze("ngForOf",i.meals_meats),Xe(12),Ze("ngForOf",i.meals_dessert),Xe(12),Ze("ngForOf",i.meals_soups))},dependencies:[gl],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-gap:20px;align-items:flex-start;padding:60px;min-height:100%;min-width:100%;background-color:#072230;margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}table[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto;border-collapse:collapse;background-color:#081820;color:#fff}.title-cat[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:1.2em;padding:10px 0;color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center}img[_ngcontent-%COMP%]{display:block;margin:0 auto;max-height:150px;max-width:150px}td[_ngcontent-%COMP%]{vertical-align:middle}.menu-deploy[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto auto;gap:30px}"]}),t})(),jIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-restaurant"]],decls:8,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Restaurant "),pe(),le(4,"h3"),Ue(5,"Where every meal is a masterpiece"),pe()()(),ft(6,"app-restaurant-home")(7,"app-menu-search"))},dependencies:[hIe,UIe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(hotel-fake-6.ea5ccc068a338c5e.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})();function GIe(t,n){if(1&t&&(le(0,"div",4)(1,"div",5)(2,"div",6),ft(3,"img",7),pe(),le(4,"div",8)(5,"h5",9),Ue(6),N0(7,"uppercase"),pe(),le(8,"h6",10),Ue(9),N0(10,"uppercase"),pe(),le(11,"p",11),Ue(12),pe(),le(13,"div",12)(14,"a",13),ft(15,"fa-icon",14),pe(),le(16,"a",13),ft(17,"fa-icon",15),pe(),le(18,"a",13),ft(19,"fa-icon",16),pe()()()()()),2&t){const e=n.$implicit,i=M1();Xe(3),ks("src",e.url,bc),Xe(3),K2(S8(7,7,e.name)),Xe(3),K2(S8(10,9,e.charge)),Xe(3),K2(e.cardText),Xe(3),Ze("icon",i.faFacebook),Xe(2),Ze("icon",i.faTwitter),Xe(2),Ze("icon",i.faInstagram)}}let $Ie=(()=>{class t{constructor(){this.faInstagram=I9,this.faFacebook=R9,this.faTwitter=py,this.names=[{name:"Antonio Romo",charge:"Front-Dev",cardText:"Antonio is a skilled Front-End Developer with a passion for creating visually appealing and user-friendly websites.",url:"assets/imgs/team/tony.jpg"},{name:"Salvador Gaytan",charge:"Back-Dev",cardText:"Salvador is a skilled Back-End Developer with a passion for building efficient and reliable systems.",url:"assets/imgs/team/salvador.png"},{name:"Luis Navarrete",charge:"Back-Dev",cardText:"Luis is a skilled Back-End Developer with a passion for building robust and scalable applications.",url:"assets/imgs/team/luis.jpg"},{name:"Michelle Ruvalcaba",charge:"Front-Dev",cardText:"Michelle is a skilled Front-End Developer with a passion for creating beautiful and engaging websites.",url:"assets/imgs/team/michelle.png"}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-meet-our-team"]],decls:6,vars:1,consts:[[1,"container"],[1,"title-home"],[1,"row"],["class","col-md-3 col-sm-12",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-12"],[1,"card","bg-dark-blue"],[1,"img-container"],["alt","Card image cap",1,"card-img-top","col-md-6","col-sm-12",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted",2,"font-weight","bold"],[1,"card-text"],[1,"social-icons"],["href","#"],[1,"enve","face",3,"icon"],[1,"enve","tw",3,"icon"],[1,"enve","insta",3,"icon"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Meet Our Team of Developers"),pe()(),le(4,"div",2),xt(5,GIe,20,11,"div",3),pe()()),2&e&&(Xe(5),Ze("ngForOf",i.names))},dependencies:[gl,np,v_],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;align-items:flex-start;padding:60px;gap:50px;min-height:100%;min-width:100%;background-color:#072230;margin:0 auto}.title-home[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:700;letter-spacing:.15em;font-family:Radley,serif}.bg-dark-blue[_ngcontent-%COMP%]{background-color:#e7f1fa;text-align:center}.bg-dark-blue[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;min-height:350px;min-width:350px;border-radius:50%;object-fit:cover;display:block}.img-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;align-items:center;justify-content:center;height:350px;overflow:hidden}.social-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;font-size:2rem}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.insta[_ngcontent-%COMP%]:hover{color:#e1306c}fa-icon[_ngcontent-%COMP%]{color:#072230;cursor:pointer}.tw[_ngcontent-%COMP%]:hover{color:#83a5ee}.face[_ngcontent-%COMP%]:hover{color:#3b5998}"]}),t})(),qIe=(()=>{class t{constructor(e){this.formBuilder=e,this.faInstagram=I9,this.faFacebook=R9,this.faTwitter=py,this.contactForm=new J8({})}ngOnInit(){this.contactForm=this.formBuilder.group({name:["",kl.required],email:["",[kl.required,kl.email]],phone:["",kl.required],message:["",kl.required]})}onSubmit(){this.contactForm.valid?console.log(this.contactForm.value):console.log("Formulario inv\xe1lido")}}return t.\u0275fac=function(e){return new(e||t)(q(SVe))},t.\u0275cmp=Bt({type:t,selectors:[["app-form-book"]],decls:29,vars:4,consts:[[1,"container"],[1,"title-container"],[1,"social-icons"],["href","#"],[1,"enve","face",3,"icon"],[1,"enve","tw",3,"icon"],[1,"enve","insta",3,"icon"],[1,"form-cont",3,"formGroup","ngSubmit"],[1,"py-2","input-cont"],["type","text","id","name","formControlName","name","placeholder","Name"],["type","email","id","email","formControlName","email","placeholder","Email"],["type","text","id","phone","formControlName","phone","placeholder","Phone"],[1,"py-3","btn-sub"],["type","submit"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h3"),Ue(3,"We\u2019d love to hear from you. Just choose the most convenient method and we\u2019ll get back to you as soon as we can."),pe(),le(4,"p"),Ue(5,"Retorno Cedros 4, Rinc\xf3n de Guayabitos"),ft(6,"br"),Ue(7," M\xe9xico , 63727 "),ft(8,"br"),Ue(9," 555 555 555 "),ft(10,"br"),Ue(11," hoteljacqueline@gmail.com "),pe(),le(12,"div",2)(13,"a",3),ft(14,"fa-icon",4),pe(),le(15,"a",3),ft(16,"fa-icon",5),pe(),le(17,"a",3),ft(18,"fa-icon",6),pe()()(),le(19,"form",7),$t("ngSubmit",function(){return i.onSubmit()}),le(20,"div",8),ft(21,"input",9),pe(),le(22,"div",8),ft(23,"input",10),pe(),le(24,"div",8),ft(25,"input",11),pe(),le(26,"div",12)(27,"button",13),Ue(28,"Submit"),pe()()()()),2&e&&(Xe(14),Ze("icon",i.faFacebook),Xe(2),Ze("icon",i.faTwitter),Xe(2),Ze("icon",i.faInstagram),Xe(1),Ze("formGroup",i.contactForm))},dependencies:[np,gp,K8,ap,op,e5,ob],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;padding:60px;gap:20px;min-height:100%;min-width:100%;background-color:#081820;margin:0 auto}.title-container[_ngcontent-%COMP%]{padding:0 60px;color:#fff;text-align:left;font-size:1.5rem}.form-cont[_ngcontent-%COMP%]{max-width:700px}.social-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;font-size:2rem}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;transition:transform .3s ease-in-out}fa-icon[_ngcontent-%COMP%]{color:#c7e7f1;cursor:pointer}.tw[_ngcontent-%COMP%]:hover{color:#83a5ee}.face[_ngcontent-%COMP%]:hover{color:#3b5998}.insta[_ngcontent-%COMP%]:hover{color:#e1306c}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;margin-left:auto;width:200px;margin-top:25px;height:50px;border-radius:2rem;background-color:#c7e7f1;border:2px solid #081820;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}.input-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px;border:2px solid gray}"]}),t})(),WIe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-book"]],decls:8,vars:0,consts:[[1,"container-main"],[1,"title-container"]],template:function(e,i){1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Contact Us "),pe(),le(4,"h3"),Ue(5,"Send us your feedback!"),pe()()(),ft(6,"app-form-book")(7,"app-meet-our-team"))},dependencies:[$Ie,qIe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:700px;min-height:100%;min-width:100%;background-image:url(living-room-2.d5fb30b65a3b2c1a.jpg);background-size:cover;background-position:center;margin:0 auto}']}),t})();const YIe=[[["caption"]],[["colgroup"],["col"]]],XIe=["caption","colgroup, col"];function Qb(t){return class extends t{get sticky(){return this._sticky}set sticky(n){const e=this._sticky;this._sticky=hn(n),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const n=this._hasStickyChanged;return this._hasStickyChanged=!1,n}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...n){super(...n),this._sticky=!1,this._hasStickyChanged=!1}}}const d5=new vt("CDK_TABLE");let f5=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(q(Cr))},t.\u0275dir=je({type:t,selectors:[["","cdkCellDef",""]]}),t})(),h5=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(q(Cr))},t.\u0275dir=je({type:t,selectors:[["","cdkHeaderCellDef",""]]}),t})(),Pp=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(q(Cr))},t.\u0275dir=je({type:t,selectors:[["","cdkFooterCellDef",""]]}),t})();class eRe{}const tRe=Qb(eRe);let _4=(()=>{class t extends tRe{get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const i=this._stickyEnd;this._stickyEnd=hn(e),this._hasStickyChanged=i!==this._stickyEnd}constructor(e){super(),this._table=e,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return t.\u0275fac=function(e){return new(e||t)(q(d5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,i,r){if(1&e&&(g2(r,f5,5),g2(r,h5,5),g2(r,Pp,5)),2&e){let s;k1(s=I1())&&(i.cell=s.first),k1(s=I1())&&(i.headerCell=s.first),k1(s=I1())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[E1([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),ht]}),t})();class Jb{constructor(n,e){e.nativeElement.classList.add(...n._columnCssClassName)}}let ex=(()=>{class t extends Jb{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(q(_4),q(Nt))},t.\u0275dir=je({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[ht]}),t})(),tx=(()=>{class t extends Jb{constructor(e,i){if(super(e,i),1===e._table?._elementRef.nativeElement.nodeType){const r=e._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return t.\u0275fac=function(e){return new(e||t)(q(_4),q(Nt))},t.\u0275dir=je({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[ht]}),t})();class UO{constructor(){this.tasks=[],this.endTasks=[]}}const nx=new vt("_COALESCED_STYLE_SCHEDULER");let jO=(()=>{class t{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Yt}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new UO,this._getScheduleObservable().pipe(yi(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new UO;for(const i of e.tasks)i();for(const i of e.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Jn(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Ei(1))}}return t.\u0275fac=function(e){return new(e||t)(Ie(d1))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),ix=(()=>{class t{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){const i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof x7?e.headerCell.template:this instanceof C7?e.footerCell.template:e.cell.template}}return t.\u0275fac=function(e){return new(e||t)(q(Cr),q(_3))},t.\u0275dir=je({type:t,features:[wn]}),t})();class nRe extends ix{}const iRe=Qb(nRe);let x7=(()=>{class t extends iRe{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(q(Cr),q(_3),q(d5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[ht,wn]}),t})();class rRe extends ix{}const aRe=Qb(rRe);let C7=(()=>{class t extends aRe{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(q(Cr),q(_3),q(d5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[ht,wn]}),t})(),Fp=(()=>{class t extends ix{constructor(e,i,r){super(e,i),this._table=r}}return t.\u0275fac=function(e){return new(e||t)(q(Cr),q(_3),q(d5,8))},t.\u0275dir=je({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[ht]}),t})(),v4=(()=>{class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}}return t.mostRecentCellOutlet=null,t.\u0275fac=function(e){return new(e||t)(q(Q2))},t.\u0275dir=je({type:t,selectors:[["","cdkCellOutlet",""]]}),t})(),rx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Z1(0,0)},dependencies:[v4],encapsulation:2}),t})(),ox=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Z1(0,0)},dependencies:[v4],encapsulation:2}),t})(),Np=(()=>{class t{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return t.\u0275fac=function(e){return new(e||t)(q(Cr))},t.\u0275dir=je({type:t,selectors:[["ng-template","cdkNoDataRow",""]]}),t})();const GO=["top","bottom","left","right"];class oRe{constructor(n,e,i,r,s=!0,d=!0,_){this._isNativeHtmlTable=n,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=d,this._positionListener=_,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){const i=[];for(const r of n)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(n,e,i,r=!0){if(!n.length||!this._isBrowser||!e.some(W=>W)&&!i.some(W=>W))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=n[0],d=s.children.length,_=this._getCellWidths(s,r),C=this._getStickyStartColumnPositions(_,e),S=this._getStickyEndColumnPositions(_,i),V=e.lastIndexOf(!0),F=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const W="rtl"===this.direction,K=W?"right":"left",ce=W?"left":"right";for(const be of n)for(let Me=0;Me<d;Me++){const He=be.children[Me];e[Me]&&this._addStickyStyle(He,K,C[Me],Me===V),i[Me]&&this._addStickyStyle(He,ce,S[Me],Me===F)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===V?[]:_.slice(0,V+1).map((be,Me)=>e[Me]?be:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===F?[]:_.slice(F).map((be,Me)=>i[Me+F]?be:null).reverse()}))})}stickRows(n,e,i){if(!this._isBrowser)return;const r="bottom"===i?n.slice().reverse():n,s="bottom"===i?e.slice().reverse():e,d=[],_=[],C=[];for(let V=0,F=0;V<r.length;V++){if(!s[V])continue;d[V]=F;const W=r[V];C[V]=this._isNativeHtmlTable?Array.from(W.children):[W];const K=W.getBoundingClientRect().height;F+=K,_[V]=K}const S=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let V=0;V<r.length;V++){if(!s[V])continue;const F=d[V],W=V===S;for(const K of C[V])this._addStickyStyle(K,i,F,W)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:_,offsets:d,elements:C}):this._positionListener?.stickyFooterRowsUpdated({sizes:_,offsets:d,elements:C})})}updateStickyFooterContainer(n,e){if(!this._isNativeHtmlTable)return;const i=n.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(n,e){for(const r of e)n.style[r]="",n.classList.remove(this._borderCellCss[r]);GO.some(r=>-1===e.indexOf(r)&&n.style[r])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,i,r){n.classList.add(this._stickCellCss),r&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${i}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const r of GO)n.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=n.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(n,e){const i=[];let r=0;for(let s=0;s<n.length;s++)e[s]&&(i[s]=r,r+=n[s]);return i}_getStickyEndColumnPositions(n,e){const i=[];let r=0;for(let s=n.length;s>0;s--)e[s]&&(i[s]=r,r+=n[s]);return i}}const sx=new vt("CDK_SPL");let Op=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Nt))},t.\u0275dir=je({type:t,selectors:[["","rowOutlet",""]]}),t})(),Bp=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Nt))},t.\u0275dir=je({type:t,selectors:[["","headerRowOutlet",""]]}),t})(),Up=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Nt))},t.\u0275dir=je({type:t,selectors:[["","footerRowOutlet",""]]}),t})(),jp=(()=>{class t{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return t.\u0275fac=function(e){return new(e||t)(q(Q2),q(Nt))},t.\u0275dir=je({type:t,selectors:[["","noDataRowOutlet",""]]}),t})(),Gp=(()=>{class t{get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=hn(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=hn(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,i,r,s,d,_,C,S,V,F,W,K){this._differs=e,this._changeDetectorRef=i,this._elementRef=r,this._dir=d,this._platform=C,this._viewRepeater=S,this._coalescedStyleScheduler=V,this._viewportRuler=F,this._stickyPositioningListener=W,this._ngZone=K,this._onDestroy=new Yt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Gt,this.viewChange=new bo({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=_,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(yi(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),qb(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,s,d)=>this._getEmbeddedViewArgs(r.item,d),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&d1.isInAngularZone()?this._ngZone.onStable.pipe(Ei(1),yi(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(d=>d.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(d=>d.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(d=>d.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(d=>d.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,d)=>{this._addStickyColumnStyles([s],this._headerRowDefs[d])}),this._rowDefs.forEach(s=>{const d=[];for(let _=0;_<i.length;_++)this._renderRows[_].rowDef===s&&d.push(i[_]);this._addStickyColumnStyles(d,s)}),r.forEach((s,d)=>{this._addStickyColumnStyles([s],this._footerRowDefs[d])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const d=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let _=0;_<d.length;_++){let C=d[_];const S=this._cachedRenderRowsMap.get(C.data);S.has(C.rowDef)?S.get(C.rowDef).push(C):S.set(C.rowDef,[C]),e.push(C)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(d=>{const _=r&&r.has(d)?r.get(d):[];if(_.length){const C=_.shift();return C.dataIndex=i,C}return{data:e,rowDef:d,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),$p(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=$p(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=$p(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=$p(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(d,_)=>d||!!_.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(e){this._data=[],qb(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;qb(this.dataSource)?e=this.dataSource.connect(this):function ZIe(t){return!!t&&(t instanceof c1||S1(t.lift)&&S1(t.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=Jt(this.dataSource)),this._renderChangeSubscription=e.pipe(yi(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){const r=Array.from(i.columns||[]).map(_=>this._columnDefsByName.get(_)),s=r.map(_=>_.sticky),d=r.map(_=>_.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,d,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const i=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(e,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,e));else{let s=this._rowDefs.find(d=>d.when&&d.when(i,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,i){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:i}}_renderRow(e,i,r,s={}){const d=e.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),d}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))v4.mostRecentCellOutlet&&v4.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){const d=e.get(i).context;d.count=r,d.first=0===i,d.last=i===r-1,d.even=i%2==0,d.odd=!d.even,this.multiTemplateDataRows?(d.dataIndex=this._renderRows[i].dataIndex,d.renderIndex=i):d.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,i=>{const r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const d of r.outlets)s.appendChild(d.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new oRe(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Jt()).pipe(yi(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(e.templateRef),d=s.rootNodes[0];1===s.rootNodes.length&&d?.nodeType===this._document.ELEMENT_NODE&&(d.setAttribute("role","row"),d.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return t.\u0275fac=function(e){return new(e||t)(q(_3),q(Ur),q(Nt),pc("role"),q(Co,8),q(Y1),q(k2),q(v7),q(nx),q(u7),q(sx,12),q(d1,8))},t.\u0275cmp=Bt({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,i,r){if(1&e&&(g2(r,Np,5),g2(r,_4,5),g2(r,Fp,5),g2(r,x7,5),g2(r,C7,5)),2&e){let s;k1(s=I1())&&(i._noDataRow=s.first),k1(s=I1())&&(i._contentColumnDefs=s),k1(s=I1())&&(i._contentRowDefs=s),k1(s=I1())&&(i._contentHeaderRowDefs=s),k1(s=I1())&&(i._contentFooterRowDefs=s)}},viewQuery:function(e,i){if(1&e&&(Xn(Op,7),Xn(Bp,7),Xn(Up,7),Xn(jp,7)),2&e){let r;k1(r=I1())&&(i._rowOutlet=r.first),k1(r=I1())&&(i._headerRowOutlet=r.first),k1(r=I1())&&(i._footerRowOutlet=r.first),k1(r=I1())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,i){2&e&&qn("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[E1([{provide:d5,useExisting:t},{provide:v7,useClass:wO},{provide:nx,useClass:jO},{provide:sx,useValue:null}])],ngContentSelectors:XIe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(Or(YIe),Gn(0),Gn(1,1),Z1(2,0)(3,1)(4,2)(5,3))},dependencies:[Op,Bp,Up,jp],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),t})();function $p(t,n){return t.concat(Array.from(n))}let cRe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[xb]}),t})();const lRe=[[["caption"]],[["colgroup"],["col"]]],uRe=["caption","colgroup, col"];let qO=(()=>{class t extends Gp{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}ngOnInit(){super.ngOnInit(),this._isNativeHtmlTable&&this._elementRef.nativeElement.querySelector("tbody").classList.add("mdc-data-table__content")}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Bt({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(e,i){2&e&&qn("mdc-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[E1([{provide:Gp,useExisting:t},{provide:d5,useExisting:t},{provide:nx,useClass:jO},{provide:v7,useClass:wO},{provide:sx,useValue:null}]),ht],ngContentSelectors:uRe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(Or(lRe),Gn(0),Gn(1,1),Z1(2,0)(3,1)(4,2)(5,3))},dependencies:[Op,Bp,Up,jp],styles:[".mdc-data-table{border-radius:var(--mdc-shape-medium, 4px);border-width:1px;border-style:solid}.mdc-data-table .mdc-data-table__header-cell:first-child{border-top-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:first-child,.mdc-data-table .mdc-data-table__header-cell:first-child[dir=rtl]{border-top-right-radius:var(--mdc-shape-medium, 4px);border-top-left-radius:0}.mdc-data-table .mdc-data-table__header-cell:last-child{border-top-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table .mdc-data-table__header-cell:last-child,.mdc-data-table .mdc-data-table__header-cell:last-child[dir=rtl]{border-top-left-radius:var(--mdc-shape-medium, 4px);border-top-right-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child{border-bottom-left-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:first-child[dir=rtl]{border-bottom-right-radius:var(--mdc-shape-medium, 4px);border-bottom-left-radius:0}.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child{border-bottom-right-radius:var(--mdc-shape-medium, 4px)}[dir=rtl] .mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child,.mdc-data-table.mdc-data-table--without-footer .mdc-data-table__row:last-child .mdc-data-table__cell:last-child[dir=rtl]{border-bottom-left-radius:var(--mdc-shape-medium, 4px);border-bottom-right-radius:0}.mdc-data-table__cell,.mdc-data-table__header-cell{border-bottom-width:1px;border-bottom-style:solid}.mdc-data-table__pagination{border-top-width:1px;border-top-style:solid}.mdc-data-table__row:last-child .mdc-data-table__cell{border-bottom:none}.mdc-data-table__row{height:52px}.mdc-data-table__pagination{min-height:52px}.mdc-data-table__header-row{height:56px}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__cell--checkbox{width:1px}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--checkbox{width:1px}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__sort-icon-button{width:28px;height:28px;padding:2px;transform:rotate(0.0001deg);margin-left:4px;margin-right:0;opacity:0}.mdc-data-table__sort-icon-button .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:28px;height:28px;margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:28px;left:50%;width:28px;transform:translate(-50%, -50%)}[dir=rtl] .mdc-data-table__sort-icon-button,.mdc-data-table__sort-icon-button[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__header-cell--sorted-descending .mdc-data-table__sort-icon-button{transform:rotate(-180deg)}.mdc-data-table__sort-icon-button:focus,.mdc-data-table__header-cell:hover .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--sorted .mdc-data-table__sort-icon-button{opacity:1}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__header-cell--with-sort{cursor:pointer}.mdc-data-table__sort-status-label{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.mdc-data-table--sticky-header .mdc-data-table__header-cell{position:sticky;top:0;z-index:1}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--checkbox{width:1px}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__sort-icon-button{width:28px;height:28px;padding:2px;transform:rotate(0.0001deg);margin-left:4px;margin-right:0;opacity:0}.mdc-data-table__sort-icon-button .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:28px;height:28px;margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px}.mdc-data-table__sort-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:28px;max-width:28px}.mdc-data-table__sort-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:28px;left:50%;width:28px;transform:translate(-50%, -50%)}[dir=rtl] .mdc-data-table__sort-icon-button,.mdc-data-table__sort-icon-button[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--numeric .mdc-data-table__sort-icon-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__header-cell--sorted-descending .mdc-data-table__sort-icon-button{transform:rotate(-180deg)}.mdc-data-table__sort-icon-button:focus,.mdc-data-table__header-cell:hover .mdc-data-table__sort-icon-button,.mdc-data-table__header-cell--sorted .mdc-data-table__sort-icon-button{opacity:1}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__header-cell--with-sort{cursor:pointer}.mdc-data-table__sort-status-label{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__cell--checkbox{width:1px}.mdc-data-table__pagination{box-sizing:border-box;display:flex;justify-content:flex-end}.mdc-data-table__pagination-trailing{margin-left:4px;margin-right:0;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-end}[dir=rtl] .mdc-data-table__pagination-trailing,.mdc-data-table__pagination-trailing[dir=rtl]{margin-left:0;margin-right:4px}.mdc-data-table__pagination-navigation{align-items:center;display:flex}.mdc-data-table__pagination-button{margin-left:0;margin-right:4px}[dir=rtl] .mdc-data-table__pagination-button .mdc-button__icon,.mdc-data-table__pagination-button .mdc-button__icon[dir=rtl]{transform:rotate(180deg)}[dir=rtl] .mdc-data-table__pagination-button,.mdc-data-table__pagination-button[dir=rtl]{margin-left:4px;margin-right:0}.mdc-data-table__pagination-total{margin-left:14px;margin-right:36px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-total,.mdc-data-table__pagination-total[dir=rtl]{margin-left:36px;margin-right:14px}.mdc-data-table__pagination-rows-per-page{margin-left:0;margin-right:22px;align-items:center;display:inline-flex}[dir=rtl] .mdc-data-table__pagination-rows-per-page,.mdc-data-table__pagination-rows-per-page[dir=rtl]{margin-left:22px;margin-right:0}.mdc-data-table__pagination-rows-per-page-label{margin-left:0;margin-right:12px;white-space:nowrap}[dir=rtl] .mdc-data-table__pagination-rows-per-page-label,.mdc-data-table__pagination-rows-per-page-label[dir=rtl]{margin-left:12px;margin-right:0}.mdc-data-table__pagination-rows-per-page-select{min-width:var(--mdc-menu-min-width, 80px);margin:8px 0}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{width:100%;min-width:80px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor{height:36px}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-data-table__pagination-rows-per-page-select .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-data-table__pagination-rows-per-page-select .mdc-select__dropdown-icon{width:20px;height:20px}.mdc-data-table__pagination-rows-per-page-select.mdc-select--outlined .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 56px)}.mdc-data-table__pagination-rows-per-page-select .mdc-list-item.mdc-list-item--with-one-line{height:36px}.mdc-data-table__progress-indicator{display:none;position:absolute;width:100%}.mdc-data-table--in-progress .mdc-data-table__progress-indicator{display:block}.mdc-data-table__scrim{background-color:var(--mdc-theme-surface, #fff);height:100%;opacity:.32;position:absolute;top:0;width:100%}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table-sticky{position:sticky !important}.mat-mdc-table{table-layout:auto;white-space:normal}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table .mat-mdc-row:hover,.mat-mdc-table .mat-mdc-footer-row:hover{background-color:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2}),t})(),cx=(()=>{class t extends f5{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matCellDef",""]],features:[E1([{provide:f5,useExisting:t}]),ht]}),t})(),lx=(()=>{class t extends h5{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matHeaderCellDef",""]],features:[E1([{provide:h5,useExisting:t}]),ht]}),t})(),ux=(()=>{class t extends _4{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[E1([{provide:_4,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),ht]}),t})(),dx=(()=>{class t extends ex{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[ht]}),t})(),fx=(()=>{class t extends tx{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[ht]}),t})(),WO=(()=>{class t extends x7{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[E1([{provide:x7,useExisting:t}]),ht]}),t})(),ZO=(()=>{class t extends Fp{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[E1([{provide:Fp,useExisting:t}]),ht]}),t})(),YO=(()=>{class t extends rx{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Bt({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[E1([{provide:rx,useExisting:t}]),ht],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Z1(0,0)},dependencies:[v4],encapsulation:2}),t})(),XO=(()=>{class t extends ox{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Vt(t)))(i||t)}}(),t.\u0275cmp=Bt({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[E1([{provide:ox,useExisting:t}]),ht],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&Z1(0,0)},dependencies:[v4],encapsulation:2}),t})(),bRe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[Gr,cRe,Gr]}),t})();function CRe(t,n){1&t&&(le(0,"th",12),Ue(1," Name "),pe())}function wRe(t,n){if(1&t&&(le(0,"td",13),Ue(1),pe()),2&t){const e=n.$implicit;Xe(1),n2(" ",e.name," ")}}function MRe(t,n){1&t&&(le(0,"th",12),Ue(1," Num Guests "),pe())}function zRe(t,n){if(1&t&&(le(0,"td",13),Ue(1),pe()),2&t){const e=n.$implicit;Xe(1),n2(" ",e.num," ")}}function SRe(t,n){1&t&&(le(0,"th",12),Ue(1," Check In "),pe())}function DRe(t,n){if(1&t&&(le(0,"td",13),Ue(1),pe()),2&t){const e=n.$implicit;Xe(1),n2(" ",e.checkIn," ")}}function ARe(t,n){1&t&&(le(0,"th",12),Ue(1," Check Out "),pe())}function ERe(t,n){if(1&t&&(le(0,"td",13),Ue(1),pe()),2&t){const e=n.$implicit;Xe(1),n2(" ",e.checkOut," ")}}function VRe(t,n){1&t&&(le(0,"th",12),Ue(1," Time In "),pe())}function LRe(t,n){if(1&t&&(le(0,"td",13),Ue(1),pe()),2&t){const e=n.$implicit;Xe(1),n2(" ",e.timeIn," ")}}function TRe(t,n){1&t&&(le(0,"th",12),Ue(1," Time Out "),pe())}function HRe(t,n){if(1&t&&(le(0,"td",13),Ue(1),pe()),2&t){const e=n.$implicit;Xe(1),n2(" ",e.timeOut," ")}}function kRe(t,n){1&t&&ft(0,"tr",14)}function IRe(t,n){1&t&&ft(0,"tr",15)}let RRe=(()=>{class t{ngOnInit(){this.route.paramMap.subscribe(e=>{const i=e.get("nombre");this.nombre=i||""})}constructor(e){this.route=e,this.nombre="",this.displayedColumns=["name","num","checkIn","checkOut","timeIn","timeOut"],this.dataSource=[];let i=JSON.parse(localStorage.getItem("checkIn")??"[]"),r=JSON.parse(localStorage.getItem("checkOut")??"[]"),s=JSON.parse(localStorage.getItem("checkInTime")??"[]"),d=JSON.parse(localStorage.getItem("checkOutTime")??"[]"),_=JSON.parse(localStorage.getItem("name")??"[]"),C=JSON.parse(localStorage.getItem("numGuests")??"[]"),S=[];for(let V=0;V<i.length;V++)S.push({name:_[V],num:C[V],checkIn:i[V],checkOut:r[V],timeIn:s[V],timeOut:d[V]});this.dataSource=S}}return t.\u0275fac=function(e){return new(e||t)(q(zl))},t.\u0275cmp=Bt({type:t,selectors:[["app-table-reserved"]],decls:22,vars:3,consts:[[1,"containerTab"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","num"],["matColumnDef","checkIn"],["matColumnDef","checkOut"],["matColumnDef","timeIn"],["matColumnDef","timeOut"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(le(0,"div",0)(1,"table",1),fn(2,2),xt(3,CRe,2,0,"th",3),xt(4,wRe,2,1,"td",4),Rn(),fn(5,5),xt(6,MRe,2,0,"th",3),xt(7,zRe,2,1,"td",4),Rn(),fn(8,6),xt(9,SRe,2,0,"th",3),xt(10,DRe,2,1,"td",4),Rn(),fn(11,7),xt(12,ARe,2,0,"th",3),xt(13,ERe,2,1,"td",4),Rn(),fn(14,8),xt(15,VRe,2,0,"th",3),xt(16,LRe,2,1,"td",4),Rn(),fn(17,9),xt(18,TRe,2,0,"th",3),xt(19,HRe,2,1,"td",4),Rn(),xt(20,kRe,1,0,"tr",10),xt(21,IRe,1,0,"tr",11),pe()()),2&e&&(Xe(1),Ze("dataSource",i.dataSource),Xe(19),Ze("matHeaderRowDef",i.displayedColumns),Xe(1),Ze("matRowDefColumns",i.displayedColumns))},dependencies:[qO,lx,WO,ux,cx,ZO,dx,fx,YO,XO],styles:[".containerTab[_ngcontent-%COMP%]{margin:auto 50px;padding:20px}"]}),t})();function PRe(t,n){1&t&&(fn(0),ft(1,"app-table-reserved"),le(2,"div",5)(3,"button",6),Ue(4,"Regresar"),pe()(),Rn())}function FRe(t,n){1&t&&(le(0,"div",5)(1,"button",6),Ue(2,"Regresar"),pe()())}const NRe=[{path:"",component:bEe,children:[{path:"",component:MEe},{path:"about",component:EEe},{path:"login",component:iIe},{path:"rooms",component:oIe},{path:"explore",component:fIe},{path:"restaurant",component:jIe},{path:"book",component:WIe},{path:"reservations/:nombre",component:(()=>{class t{constructor(e){this.route=e,this.nombreEncontrado=!1,this.reservations=[]}ngOnInit(){let e=JSON.parse(localStorage.getItem("name")??"[]");this.route.paramMap.subscribe(i=>{this.nombre=i.get("nombre"),e.includes(this.nombre)?(this.nombreEncontrado=!0,Ll().fire({icon:"success",title:"You currently have a reservation "+this.nombre}),this.reservations=JSON.parse(localStorage.getItem(this.nombre)??"[]")):Ll().fire({icon:"error",title:"You did not have a reservation",text:"Check-In again "+this.nombre})})}}return t.\u0275fac=function(e){return new(e||t)(q(zl))},t.\u0275cmp=Bt({type:t,selectors:[["app-reservations"]],decls:10,vars:2,consts:[[1,"container-main"],[1,"title-container"],[1,"container2"],[4,"ngIf","ngIfElse"],["noEncontrado",""],[1,"btn-sub"],["mat-button","","color","primary","routerLink","/login"]],template:function(e,i){if(1&e&&(le(0,"div",0)(1,"div",1)(2,"h1"),Ue(3,"Reserved dates"),pe(),le(4,"h3"),Ue(5,"Check out the dates in which our rooms are occupied"),pe()()(),le(6,"div",2),xt(7,PRe,5,0,"ng-container",3),xt(8,FRe,3,0,"ng-template",null,4,Pg),pe()),2&e){const r=gn(9);Xe(7),Ze("ngIf",i.nombreEncontrado)("ngIfElse",r)}},dependencies:[$0,Vd,RRe],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Radley&display=swap";.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:100px auto 0;height:100vh;justify-content:center}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:5rem}.title-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.container-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;min-width:100%;background-image:url(fake-4.0b25e5538f6fd0a6.jpg);background-size:cover;background-position:center;margin:0 auto}.check-container[_ngcontent-%COMP%]{padding:30px;height:400px;background-color:#072230;margin:0 auto}.container2[_ngcontent-%COMP%]{padding:30px;min-height:100%;min-width:100%;height:600px;margin:0 auto;background-color:#081820}.btn-sub[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;display:block;width:200px;height:50px;border-radius:2rem;background-color:#c7e7f1;color:#000;transition:background-color .3s ease,border .3s ease,transform .3s ease}.btn-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#081820;color:#fff;border:2px solid white;transform:scale(1.1)}']}),t})()}]}];let ORe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[h9.forRoot(NRe),h9]}),t})(),BRe=(()=>{class t{constructor(){this.title="reservaHotel"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Bt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&ft(0,"router-outlet")},dependencies:[i9]}),t})(),rB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[cv]}),t})(),aB=(()=>{class t{constructor(e,i){L8(i)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,i=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:Nc,useValue:{...lv,...e}},{provide:uv,useValue:i,multi:!0},{provide:G8,useValue:!0}]:[{provide:Nc,useValue:{...lv,...e}},{provide:uv,useValue:i,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(Ie(G8),Ie(vo))},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[JS,oD,rB,JS,oD,rB]}),t})(),lFe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[_l,h9,aB,jy]}),t})(),sB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({}),t})(),bFe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[sB,Gr,Lb,_l,sB,Gr]}),t})(),xFe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({imports:[_l,h9,aB,lFe,jy,DVe,AVe,RIe,bFe,ETe,Eke,Lp,UHe,Yke,bRe]}),t})();function cB(t){return new rt(3e3,!1)}function nNe(){return typeof window<"u"&&typeof window.document<"u"}function hx(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Bl(t){switch(t.length){case 0:return new m7;case 1:return t[0];default:return new eO(t)}}function lB(t,n,e,i,r=new Map,s=new Map){const d=[],_=[];let C=-1,S=null;if(i.forEach(V=>{const F=V.get("offset"),W=F==C,K=W&&S||new Map;V.forEach((ce,be)=>{let Me=be,He=ce;if("offset"!==be)switch(Me=n.normalizePropertyName(Me,d),He){case Tb:He=r.get(be);break;case m4:He=s.get(be);break;default:He=n.normalizeStyleValue(be,Me,He,d)}K.set(Me,He)}),W||_.push(K),S=K,C=F}),d.length)throw function GFe(t){return new rt(3502,!1)}();return _}function px(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&mx(e,"start",t)));break;case"done":t.onDone(()=>i(e&&mx(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&mx(e,"destroy",t)))}}function mx(t,n,e){const s=gx(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),d=t._data;return null!=d&&(s._data=d),s}function gx(t,n,e,i,r="",s=0,d){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!d}}function Zo(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function uB(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}let _x=(t,n)=>!1,dB=(t,n,e)=>[],fB=null;function vx(t){const n=t.parentNode||t.host;return n===fB?null:n}(hx()||typeof Element<"u")&&(nNe()?(fB=(()=>document.documentElement)(),_x=(t,n)=>{for(;n;){if(n===t)return!0;n=vx(n)}return!1}):_x=(t,n)=>t.contains(n),dB=(t,n,e)=>{if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]});let c6=null,hB=!1;const pB=_x,mB=dB;let gB=(()=>{class t{validateStyleProperty(e){return function rNe(t){c6||(c6=function aNe(){return typeof document<"u"?document.body:null}()||{},hB=!!c6.style&&"WebkitAppearance"in c6.style);let n=!0;return c6.style&&!function iNe(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in c6.style,!n&&hB&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in c6.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return pB(e,i)}getParentElement(e){return vx(e)}query(e,i,r){return mB(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,d,_=[],C){return new m7(r,s)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),yx=(()=>{class t{}return t.NOOP=new gB,t})();const oNe=1e3,bx="ng-enter",qp="ng-leave",Wp="ng-trigger",Zp=".ng-trigger",vB="ng-animating",xx=".ng-animating";function y4(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:Cx(parseFloat(n[1]),n[2])}function Cx(t,n){return"s"===n?t*oNe:t}function Yp(t,n,e){return t.hasOwnProperty("duration")?t:function cNe(t,n,e){let r,s=0,d="";if("string"==typeof t){const _=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return n.push(cB()),{duration:0,delay:0,easing:""};r=Cx(parseFloat(_[1]),_[2]);const C=_[3];null!=C&&(s=Cx(parseFloat(C),_[4]));const S=_[5];S&&(d=S)}else r=t;if(!e){let _=!1,C=n.length;r<0&&(n.push(function CFe(){return new rt(3100,!1)}()),_=!0),s<0&&(n.push(function wFe(){return new rt(3101,!1)}()),_=!0),_&&n.splice(C,0,cB())}return{duration:r,delay:s,easing:d}}(t,n,e)}function w7(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function yB(t){const n=new Map;return Object.keys(t).forEach(e=>{n.set(e,t[e])}),n}function Ul(t,n=new Map,e){if(e)for(let[i,r]of e)n.set(i,r);for(let[i,r]of t)n.set(i,r);return n}function xB(t,n,e){return e?n+":"+e+";":""}function CB(t){let n="";for(let e=0;e<t.style.length;e++){const i=t.style.item(e);n+=xB(0,i,t.style.getPropertyValue(i))}for(const e in t.style)t.style.hasOwnProperty(e)&&!e.startsWith("_")&&(n+=xB(0,fNe(e),t.style[e]));t.setAttribute("style",n)}function C3(t,n,e){t.style&&(n.forEach((i,r)=>{const s=Mx(r);e&&!e.has(r)&&e.set(r,t.style[s]),t.style[s]=i}),hx()&&CB(t))}function l6(t,n){t.style&&(n.forEach((e,i)=>{const r=Mx(i);t.style[r]=""}),hx()&&CB(t))}function M7(t){return Array.isArray(t)?1==t.length?t[0]:KN(t):t}const wx=new RegExp("{{\\s*(.+?)\\s*}}","g");function wB(t){let n=[];if("string"==typeof t){let e;for(;e=wx.exec(t);)n.push(e[1]);wx.lastIndex=0}return n}function z7(t,n,e){const i=t.toString(),r=i.replace(wx,(s,d)=>{let _=n[d];return null==_&&(e.push(function zFe(t){return new rt(3003,!1)}()),_=""),_.toString()});return r==i?t:r}function Xp(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const dNe=/-+([a-z0-9])/g;function Mx(t){return t.replace(dNe,(...n)=>n[1].toUpperCase())}function fNe(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yo(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw function SFe(t){return new rt(3004,!1)}()}}const Jp="*";function vNe(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function yNe(t,n,e){if(":"==t[0]){const C=function bNe(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function OFe(t){return new rt(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof C)return void n.push(C);t=C}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function NFe(t){return new rt(3015,!1)}()),n;const r=i[1],s=i[2],d=i[3];n.push(zB(r,d));"<"==s[0]&&!(r==Jp&&d==Jp)&&n.push(zB(d,r))}(i,e,n)):e.push(t),e}const em=new Set(["true","1"]),tm=new Set(["false","0"]);function zB(t,n){const e=em.has(t)||tm.has(t),i=em.has(n)||tm.has(n);return(r,s)=>{let d=t==Jp||t==r,_=n==Jp||n==s;return!d&&e&&"boolean"==typeof r&&(d=r?em.has(t):tm.has(t)),!_&&i&&"boolean"==typeof s&&(_=s?em.has(n):tm.has(n)),d&&_}}const xNe=new RegExp("s*:selfs*,?","g");function zx(t,n,e,i){return new CNe(t).build(n,e,i)}class CNe{constructor(n){this._driver=n}build(n,e,i){const r=new zNe(e);return this._resetContextStyleTimingState(r),Yo(this,M7(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],d=[];return"@"==n.name.charAt(0)&&e.errors.push(function AFe(){return new rt(3006,!1)}()),n.definitions.forEach(_=>{if(this._resetContextStyleTimingState(e),0==_.type){const C=_,S=C.name;S.toString().split(/\s*,\s*/).forEach(V=>{C.name=V,s.push(this.visitState(C,e))}),C.name=S}else if(1==_.type){const C=this.visitTransition(_,e);i+=C.queryCount,r+=C.depCount,d.push(C)}else e.errors.push(function EFe(){return new rt(3007,!1)}())}),{type:7,name:n.name,states:s,transitions:d,queryCount:i,depCount:r,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const s=new Set,d=r||{};i.styles.forEach(_=>{_ instanceof Map&&_.forEach(C=>{wB(C).forEach(S=>{d.hasOwnProperty(S)||s.add(S)})})}),s.size&&(Xp(s.values()),e.errors.push(function VFe(t,n){return new rt(3008,!1)}()))}return{type:0,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=Yo(this,M7(n.animation),e);return{type:1,matchers:vNe(n.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:u6(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(i=>Yo(this,i,e)),options:u6(n.options)}}visitGroup(n,e){const i=e.currentTime;let r=0;const s=n.steps.map(d=>{e.currentTime=i;const _=Yo(this,d,e);return r=Math.max(r,e.currentTime),_});return e.currentTime=r,{type:3,steps:s,options:u6(n.options)}}visitAnimate(n,e){const i=function DNe(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return Sx(Yp(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Sx(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=Yp(e,n);return Sx(r.duration,r.delay,r.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let r,s=n.styles?n.styles:wo({});if(5==s.type)r=this.visitKeyframes(s,e);else{let d=n.styles,_=!1;if(!d){_=!0;const S={};i.easing&&(S.easing=i.easing),d=wo(S)}e.currentTime+=i.duration+i.delay;const C=this.visitStyle(d,e);C.isEmptyStep=_,r=C}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let _ of r)"string"==typeof _?_===m4?i.push(_):e.errors.push(new rt(3002,!1)):i.push(yB(_));let s=!1,d=null;return i.forEach(_=>{if(_ instanceof Map&&(_.has("easing")&&(d=_.get("easing"),_.delete("easing")),!s))for(let C of _.values())if(C.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:d,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),n.styles.forEach(d=>{"string"!=typeof d&&d.forEach((_,C)=>{const S=e.collectedStyles.get(e.currentQuerySelector),V=S.get(C);let F=!0;V&&(s!=r&&s>=V.startTime&&r<=V.endTime&&(e.errors.push(function TFe(t,n,e,i,r){return new rt(3010,!1)}()),F=!1),s=V.startTime),F&&S.set(C,{startTime:s,endTime:r}),e.options&&function uNe(t,n,e){const i=n.params||{},r=wB(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function MFe(t){return new rt(3001,!1)}())})}(_,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function HFe(){return new rt(3011,!1)}()),i;let s=0;const d=[];let _=!1,C=!1,S=0;const V=n.steps.map(He=>{const lt=this._makeStyleAst(He,e);let $e=null!=lt.offset?lt.offset:function SNe(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(lt.styles),St=0;return null!=$e&&(s++,St=lt.offset=$e),C=C||St<0||St>1,_=_||St<S,S=St,d.push(St),lt});C&&e.errors.push(function kFe(){return new rt(3012,!1)}()),_&&e.errors.push(function IFe(){return new rt(3200,!1)}());const F=n.steps.length;let W=0;s>0&&s<F?e.errors.push(function RFe(){return new rt(3202,!1)}()):0==s&&(W=1/(F-1));const K=F-1,ce=e.currentTime,be=e.currentAnimateTimings,Me=be.duration;return V.forEach((He,lt)=>{const $e=W>0?lt==K?1:W*lt:d[lt],St=$e*Me;e.currentTime=ce+be.delay+St,be.duration=St,this._validateStyleAst(He,e),He.offset=$e,i.styles.push(He)}),i}visitReference(n,e){return{type:8,animation:Yo(this,M7(n.animation),e),options:u6(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:u6(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:u6(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;const[s,d]=function wNe(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(xNe,"")),t=t.replace(/@\*/g,Zp).replace(/@\w+/g,e=>Zp+"-"+e.slice(1)).replace(/:animating/g,xx),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+s:s,Zo(e.collectedStyles,e.currentQuerySelector,new Map);const _=Yo(this,M7(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:d,animation:_,originalSelector:n.selector,options:u6(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function PFe(){return new rt(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:Yp(n.timings,e.errors,!0);return{type:12,animation:Yo(this,M7(n.animation),e),timings:i,options:null}}}class zNe{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function u6(t){return t?(t=w7(t)).params&&(t.params=function MNe(t){return t?w7(t):null}(t.params)):t={},t}function Sx(t,n,e){return{duration:t,delay:n,easing:e}}function Dx(t,n,e,i,r,s,d=null,_=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:d,subTimeline:_}}class nm{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const VNe=new RegExp(":enter","g"),TNe=new RegExp(":leave","g");function Ax(t,n,e,i,r,s=new Map,d=new Map,_,C,S=[]){return(new HNe).buildKeyframes(t,n,e,i,r,s,d,_,C,S)}class HNe{buildKeyframes(n,e,i,r,s,d,_,C,S,V=[]){S=S||new nm;const F=new Ex(n,e,S,r,s,V,[]);F.options=C;const W=C.delay?y4(C.delay):0;F.currentTimeline.delayNextStep(W),F.currentTimeline.setStyles([d],null,F.errors,C),Yo(this,i,F);const K=F.timelines.filter(ce=>ce.containsAnimation());if(K.length&&_.size){let ce;for(let be=K.length-1;be>=0;be--){const Me=K[be];if(Me.element===e){ce=Me;break}}ce&&!ce.allowOnlyTimelineStyles()&&ce.setStyles([_],null,F.errors,C)}return K.length?K.map(ce=>ce.buildKeyframes()):[Dx(e,[],[],[],0,W,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(n.options),s=e.currentTimeline.currentTime,d=this._visitSubInstructions(i,r,r.options);s!=d&&e.transformIntoNewTimeline(d)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const r of n){const s=r?.delay;if(s){const d="number"==typeof s?s:y4(z7(s,r?.params??{},e.errors));i.delayNextStep(d)}}}_visitSubInstructions(n,e,i){let s=e.currentTimeline.currentTime;const d=null!=i.duration?y4(i.duration):null,_=null!=i.delay?y4(i.delay):null;return 0!==d&&n.forEach(C=>{const S=e.appendInstructionToTimeline(C,d,_);s=Math.max(s,S.duration+S.delay)}),s}visitReference(n,e){e.updateOptions(n.options,!0),Yo(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let r=e;const s=n.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=im);const d=y4(s.delay);r.delayNextStep(d)}n.steps.length&&(n.steps.forEach(d=>Yo(this,d,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let r=e.currentTimeline.currentTime;const s=n.options&&n.options.delay?y4(n.options.delay):0;n.steps.forEach(d=>{const _=e.createSubContext(n.options);s&&_.delayNextStep(s),Yo(this,d,_),r=Math.max(r,_.currentTimeline.currentTime),i.push(_.currentTimeline)}),i.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return Yp(e.params?z7(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=n.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(s):i.setStyles(n.styles,s,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,_=e.createSubContext().currentTimeline;_.easing=i.easing,n.styles.forEach(C=>{_.forwardTime((C.offset||0)*s),_.setStyles(C.styles,C.easing,e.errors,e.options),_.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(_),e.transformIntoNewTimeline(r+s),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,r=n.options||{},s=r.delay?y4(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=im);let d=i;const _=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=_.length;let C=null;_.forEach((S,V)=>{e.currentQueryIndex=V;const F=e.createSubContext(n.options,S);s&&F.delayNextStep(s),S===e.element&&(C=F.currentTimeline),Yo(this,n.animation,F),F.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,F.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),C&&(e.currentTimeline.mergeTimelineCollectedStyles(C),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,r=e.currentTimeline,s=n.timings,d=Math.abs(s.duration),_=d*(e.currentQueryTotal-1);let C=d*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":C=_-C;break;case"full":C=i.currentStaggerTime}const V=e.currentTimeline;C&&V.delayNextStep(C);const F=V.currentTime;Yo(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-F+(r.startTime-i.currentTimeline.startTime)}}const im={};class Ex{constructor(n,e,i,r,s,d,_,C){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=d,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=im,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=C||new rm(this._driver,e,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=y4(i.duration)),null!=i.delay&&(r.delay=y4(i.delay));const s=i.params;if(s){let d=r.params;d||(d=this.options.params={}),Object.keys(s).forEach(_=>{(!e||!d.hasOwnProperty(_))&&(d[_]=z7(s[_],d,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){const r=e||this.element,s=new Ex(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=im,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},s=new kNe(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,s,d){let _=[];if(r&&_.push(this.element),n.length>0){n=(n=n.replace(VNe,"."+this._enterClassName)).replace(TNe,"."+this._leaveClassName);let S=this._driver.query(this.element,n,1!=i);0!==i&&(S=i<0?S.slice(S.length+i,S.length):S.slice(0,i)),_.push(...S)}return!s&&0==_.length&&d.push(function FFe(t){return new rt(3014,!1)}()),_}}class rm{constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new rm(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||m4),this._currentKeyframe.set(e,m4);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},d=function INe(t,n){const e=new Map;let i;return t.forEach(r=>{if("*"===r){i=i||n.keys();for(let s of i)e.set(s,m4)}else Ul(r,e)}),e}(n,this._globalTimelineStyles);for(let[_,C]of d){const S=z7(C,s,i);this._pendingStyles.set(_,S),this._localTimelineStyles.has(_)||this._backFill.set(_,this._globalTimelineStyles.get(_)??m4),this._updateStyle(_,S)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((_,C)=>{const S=Ul(_,new Map,this._backFill);S.forEach((V,F)=>{V===Tb?n.add(F):V===m4&&e.add(F)}),i||S.set("offset",C/this.duration),r.push(S)});const s=n.size?Xp(n.values()):[],d=e.size?Xp(e.values()):[];if(i){const _=r[0],C=new Map(_);_.set("offset",0),C.set("offset",1),r=[_,C]}return Dx(this.element,r,s,d,this.duration,this.startTime,this.easing,!1)}}class kNe extends rm{constructor(n,e,i,r,s,d,_=!1){super(n,e,d.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=_,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],d=i+e,_=e/d,C=Ul(n[0]);C.set("offset",0),s.push(C);const S=Ul(n[0]);S.set("offset",AB(_)),s.push(S);const V=n.length-1;for(let F=1;F<=V;F++){let W=Ul(n[F]);const K=W.get("offset");W.set("offset",AB((e+K*i)/d)),s.push(W)}i=d,e=0,r="",n=s}return Dx(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function AB(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class Vx{}const RNe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class PNe extends Vx{normalizePropertyName(n,e){return Mx(n)}normalizeStyleValue(n,e,i,r){let s="";const d=i.toString().trim();if(RNe.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const _=i.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&r.push(function DFe(t,n){return new rt(3005,!1)}())}return d+s}}function EB(t,n,e,i,r,s,d,_,C,S,V,F,W){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:d,timelines:_,queriedElements:C,preStyleProps:S,postStyleProps:V,totalTime:F,errors:W}}const Lx={};class VB{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return function FNe(t,n,e,i,r){return t.some(s=>s(n,e,i,r))}(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return void 0!==n&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,s,d,_,C,S,V){const F=[],W=this.ast.options&&this.ast.options.params||Lx,ce=this.buildStyles(i,_&&_.params||Lx,F),be=C&&C.params||Lx,Me=this.buildStyles(r,be,F),He=new Set,lt=new Map,$e=new Map,St="void"===r,h1={params:NNe(be,W),delay:this.ast.options?.delay},en=V?[]:Ax(n,e,this.ast.animation,s,d,ce,Me,h1,S,F);let Ln=0;if(en.forEach(Mr=>{Ln=Math.max(Mr.duration+Mr.delay,Ln)}),F.length)return EB(e,this._triggerName,i,r,St,ce,Me,[],[],lt,$e,Ln,F);en.forEach(Mr=>{const Uc=Mr.element,XB=Zo(lt,Uc,new Set);Mr.preStyleProps.forEach(d6=>XB.add(d6));const A7=Zo($e,Uc,new Set);Mr.postStyleProps.forEach(d6=>A7.add(d6)),Uc!==e&&He.add(Uc)});const Xo=Xp(He.values());return EB(e,this._triggerName,i,r,St,ce,Me,en,Xo,lt,$e,Ln)}}function NNe(t,n){const e=w7(n);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(e[i]=t[i]);return e}class ONe{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,r=w7(this.defaultParams);return Object.keys(n).forEach(s=>{const d=n[s];null!==d&&(r[s]=d)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((d,_)=>{d&&(d=z7(d,r,e));const C=this.normalizer.normalizePropertyName(_,e);d=this.normalizer.normalizeStyleValue(_,C,d,e),i.set(_,d)})}),i}}class UNe{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new ONe(r.style,r.options&&r.options.params||{},i))}),LB(this.states,"true","1"),LB(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new VB(n,r,this.states))}),this.fallbackTransition=function jNe(t,n,e){return new VB(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,_)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(d=>d.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function LB(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const GNe=new nm;class $Ne{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],r=[],s=zx(this._driver,e,i,r);if(i.length)throw function $Fe(t){return new rt(3503,!1)}();this._animations.set(n,s)}_buildPlayer(n,e,i){const r=n.element,s=lB(0,this._normalizer,0,n.keyframes,e,i);return this._driver.animate(r,s,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const r=[],s=this._animations.get(n);let d;const _=new Map;if(s?(d=Ax(this._driver,e,s,bx,qp,new Map,new Map,i,GNe,r),d.forEach(V=>{const F=Zo(_,V.element,new Map);V.postStyleProps.forEach(W=>F.set(W,null))})):(r.push(function qFe(){return new rt(3300,!1)}()),d=[]),r.length)throw function WFe(t){return new rt(3504,!1)}();_.forEach((V,F)=>{V.forEach((W,K)=>{V.set(K,this._driver.computeStyle(F,K,m4))})});const S=Bl(d.map(V=>{const F=_.get(V.element);return this._buildPlayer(V,new Map,F)}));return this._playersById.set(n,S),S.onDestroy(()=>this.destroy(n)),this.players.push(S),S}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function ZFe(t){return new rt(3301,!1)}();return e}listen(n,e,i,r){const s=gx(e,"","","");return px(this._getPlayer(n),i,s,r),()=>{}}command(n,e,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,e,r[0]||{});const s=this._getPlayer(n);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const TB="ng-animate-queued",Tx="ng-animate-disabled",XNe=[],HB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},KNe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ns="__ng_removed";class Hx{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function tOe(t){return t??null}(i?n.value:n),i){const s=w7(n);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const S7="void",kx=new Hx(S7);class QNe{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Os(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw function YFe(t,n){return new rt(3302,!1)}();if(null==i||0==i.length)throw function XFe(t){return new rt(3303,!1)}();if(!function nOe(t){return"start"==t||"done"==t}(i))throw function KFe(t,n){return new rt(3400,!1)}();const s=Zo(this._elementListeners,n,[]),d={name:e,phase:i,callback:r};s.push(d);const _=Zo(this._engine.statesByElement,n,new Map);return _.has(e)||(Os(n,Wp),Os(n,Wp+"-"+e),_.set(e,kx)),()=>{this._engine.afterFlush(()=>{const C=s.indexOf(d);C>=0&&s.splice(C,1),this._triggers.has(e)||_.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function QFe(t){return new rt(3401,!1)}();return e}trigger(n,e,i,r=!0){const s=this._getTrigger(e),d=new Ix(this.id,e,n);let _=this._engine.statesByElement.get(n);_||(Os(n,Wp),Os(n,Wp+"-"+e),this._engine.statesByElement.set(n,_=new Map));let C=_.get(e);const S=new Hx(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&C&&S.absorbOptions(C.options),_.set(e,S),C||(C=kx),S.value!==S7&&C.value===S.value){if(!function aOe(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!n.hasOwnProperty(s)||t[s]!==n[s])return!1}return!0}(C.params,S.params)){const be=[],Me=s.matchStyles(C.value,C.params,be),He=s.matchStyles(S.value,S.params,be);be.length?this._engine.reportError(be):this._engine.afterFlush(()=>{l6(n,Me),C3(n,He)})}return}const W=Zo(this._engine.playersByElement,n,[]);W.forEach(be=>{be.namespaceId==this.id&&be.triggerName==e&&be.queued&&be.destroy()});let K=s.matchTransition(C.value,S.value,n,S.params),ce=!1;if(!K){if(!r)return;K=s.fallbackTransition,ce=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:K,fromState:C,toState:S,player:d,isFallbackTransition:ce}),ce||(Os(n,TB),d.onStart(()=>{p5(n,TB)})),d.onDone(()=>{let be=this.players.indexOf(d);be>=0&&this.players.splice(be,1);const Me=this._engine.playersByElement.get(n);if(Me){let He=Me.indexOf(d);He>=0&&Me.splice(He,1)}}),this.players.push(d),W.push(d),d}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,Zp,!0);i.forEach(r=>{if(r[Ns])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(d=>d.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){const s=this._engine.statesByElement.get(n),d=new Map;if(s){const _=[];if(s.forEach((C,S)=>{if(d.set(S,C.value),this._triggers.has(S)){const V=this.trigger(n,S,S7,r);V&&_.push(V)}}),_.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,d),i&&Bl(_).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const r=new Set;e.forEach(s=>{const d=s.name;if(r.has(d))return;r.add(d);const C=this._triggers.get(d).fallbackTransition,S=i.get(d)||kx,V=new Hx(S7),F=new Ix(this.id,d,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:d,transition:C,fromState:S,toState:V,player:F,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(n):[];if(s&&s.length)r=!0;else{let d=n;for(;d=d.parentNode;)if(i.statesByElement.get(d)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{const s=n[Ns];(!s||s===HB)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){Os(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,d=this._elementListeners.get(s);d&&d.forEach(_=>{if(_.name==i.triggerName){const C=gx(s,i.triggerName,i.fromState.value,i.toState.value);C._data=n,px(i.player,_.phase,C,_.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,d=r.transition.ast.depCount;return 0==s||0==d?s-d:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let e=!1;return this._elementListeners.has(n)&&(e=!0),e=!!this._queue.find(i=>i.element===n)||e,e}}class JNe{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new QNe(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let d=!1,_=this.driver.getParentElement(e);for(;_;){const C=r.get(_);if(C){const S=i.indexOf(C);i.splice(S+1,0,n),d=!0;break}_=this.driver.getParentElement(_)}d||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){if(!n)return;const i=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[n];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(n,e,i,r){if(am(e)){const s=this._fetchNamespace(n);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!am(e))return;const s=e[Ns];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(n){const d=this._fetchNamespace(n);d&&d.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Os(n,Tx)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),p5(n,Tx))}removeNode(n,e,i,r){if(am(e)){const s=n?this._fetchNamespace(n):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r),i){const d=this.namespacesByHostElement.get(e);d&&d.id!==n&&d.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,i,r,s){this.collectedLeaveElements.push(e),e[Ns]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,e,i,r,s){return am(e)?this._fetchNamespace(n).listen(e,i,r,s):()=>{}}_buildInstruction(n,e,i,r,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,s)}destroyInnerAnimations(n){let e=this.driver.query(n,Zp,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,xx,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Bl(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Ns];if(e&&e.setForRemoval){if(n[Ns]=HB,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(Tx)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Os(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Bl(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw function JFe(t){return new rt(3402,!1)}()}_flushAnimations(n,e){const i=new nm,r=[],s=new Map,d=[],_=new Map,C=new Map,S=new Map,V=new Set;this.disabledNodes.forEach(e1=>{V.add(e1);const y1=this.driver.query(e1,".ng-animate-queued",!0);for(let P1=0;P1<y1.length;P1++)V.add(y1[P1])});const F=this.bodyNode,W=Array.from(this.statesByElement.keys()),K=RB(W,this.collectedEnterElements),ce=new Map;let be=0;K.forEach((e1,y1)=>{const P1=bx+be++;ce.set(y1,P1),e1.forEach(Bn=>Os(Bn,P1))});const Me=[],He=new Set,lt=new Set;for(let e1=0;e1<this.collectedLeaveElements.length;e1++){const y1=this.collectedLeaveElements[e1],P1=y1[Ns];P1&&P1.setForRemoval&&(Me.push(y1),He.add(y1),P1.hasAnimation?this.driver.query(y1,".ng-star-inserted",!0).forEach(Bn=>He.add(Bn)):lt.add(y1))}const $e=new Map,St=RB(W,Array.from(He));St.forEach((e1,y1)=>{const P1=qp+be++;$e.set(y1,P1),e1.forEach(Bn=>Os(Bn,P1))}),n.push(()=>{K.forEach((e1,y1)=>{const P1=ce.get(y1);e1.forEach(Bn=>p5(Bn,P1))}),St.forEach((e1,y1)=>{const P1=$e.get(y1);e1.forEach(Bn=>p5(Bn,P1))}),Me.forEach(e1=>{this.processLeaveNode(e1)})});const h1=[],en=[];for(let e1=this._namespaceList.length-1;e1>=0;e1--)this._namespaceList[e1].drainQueuedTransitions(e).forEach(P1=>{const Bn=P1.player,zr=P1.element;if(h1.push(Bn),this.collectedEnterElements.length){const ua=zr[Ns];if(ua&&ua.setForMove){if(ua.previousTriggersValues&&ua.previousTriggersValues.has(P1.triggerName)){const f6=ua.previousTriggersValues.get(P1.triggerName),Bs=this.statesByElement.get(P1.element);if(Bs&&Bs.has(P1.triggerName)){const lm=Bs.get(P1.triggerName);lm.value=f6,Bs.set(P1.triggerName,lm)}}return void Bn.destroy()}}const w3=!F||!this.driver.containsElement(F,zr),Ko=$e.get(zr),Gl=ce.get(zr),Gi=this._buildInstruction(P1,i,Gl,Ko,w3);if(Gi.errors&&Gi.errors.length)return void en.push(Gi);if(w3)return Bn.onStart(()=>l6(zr,Gi.fromStyles)),Bn.onDestroy(()=>C3(zr,Gi.toStyles)),void r.push(Bn);if(P1.isFallbackTransition)return Bn.onStart(()=>l6(zr,Gi.fromStyles)),Bn.onDestroy(()=>C3(zr,Gi.toStyles)),void r.push(Bn);const JB=[];Gi.timelines.forEach(ua=>{ua.stretchStartingKeyframe=!0,this.disabledNodes.has(ua.element)||JB.push(ua)}),Gi.timelines=JB,i.append(zr,Gi.timelines),d.push({instruction:Gi,player:Bn,element:zr}),Gi.queriedElements.forEach(ua=>Zo(_,ua,[]).push(Bn)),Gi.preStyleProps.forEach((ua,f6)=>{if(ua.size){let Bs=C.get(f6);Bs||C.set(f6,Bs=new Set),ua.forEach((lm,Fx)=>Bs.add(Fx))}}),Gi.postStyleProps.forEach((ua,f6)=>{let Bs=S.get(f6);Bs||S.set(f6,Bs=new Set),ua.forEach((lm,Fx)=>Bs.add(Fx))})});if(en.length){const e1=[];en.forEach(y1=>{e1.push(function eNe(t,n){return new rt(3505,!1)}())}),h1.forEach(y1=>y1.destroy()),this.reportError(e1)}const Ln=new Map,Xo=new Map;d.forEach(e1=>{const y1=e1.element;i.has(y1)&&(Xo.set(y1,y1),this._beforeAnimationBuild(e1.player.namespaceId,e1.instruction,Ln))}),r.forEach(e1=>{const y1=e1.element;this._getPreviousPlayers(y1,!1,e1.namespaceId,e1.triggerName,null).forEach(Bn=>{Zo(Ln,y1,[]).push(Bn),Bn.destroy()})});const Mr=Me.filter(e1=>FB(e1,C,S)),Uc=new Map;IB(Uc,this.driver,lt,S,m4).forEach(e1=>{FB(e1,C,S)&&Mr.push(e1)});const A7=new Map;K.forEach((e1,y1)=>{IB(A7,this.driver,new Set(e1),C,Tb)}),Mr.forEach(e1=>{const y1=Uc.get(e1),P1=A7.get(e1);Uc.set(e1,new Map([...Array.from(y1?.entries()??[]),...Array.from(P1?.entries()??[])]))});const d6=[],KB=[],QB={};d.forEach(e1=>{const{element:y1,player:P1,instruction:Bn}=e1;if(i.has(y1)){if(V.has(y1))return P1.onDestroy(()=>C3(y1,Bn.toStyles)),P1.disabled=!0,P1.overrideTotalTime(Bn.totalTime),void r.push(P1);let zr=QB;if(Xo.size>1){let Ko=y1;const Gl=[];for(;Ko=Ko.parentNode;){const Gi=Xo.get(Ko);if(Gi){zr=Gi;break}Gl.push(Ko)}Gl.forEach(Gi=>Xo.set(Gi,zr))}const w3=this._buildAnimation(P1.namespaceId,Bn,Ln,s,A7,Uc);if(P1.setRealPlayer(w3),zr===QB)d6.push(P1);else{const Ko=this.playersByElement.get(zr);Ko&&Ko.length&&(P1.parentPlayer=Bl(Ko)),r.push(P1)}}else l6(y1,Bn.fromStyles),P1.onDestroy(()=>C3(y1,Bn.toStyles)),KB.push(P1),V.has(y1)&&r.push(P1)}),KB.forEach(e1=>{const y1=s.get(e1.element);if(y1&&y1.length){const P1=Bl(y1);e1.setRealPlayer(P1)}}),r.forEach(e1=>{e1.parentPlayer?e1.syncPlayerEvents(e1.parentPlayer):e1.destroy()});for(let e1=0;e1<Me.length;e1++){const y1=Me[e1],P1=y1[Ns];if(p5(y1,qp),P1&&P1.hasAnimation)continue;let Bn=[];if(_.size){let w3=_.get(y1);w3&&w3.length&&Bn.push(...w3);let Ko=this.driver.query(y1,xx,!0);for(let Gl=0;Gl<Ko.length;Gl++){let Gi=_.get(Ko[Gl]);Gi&&Gi.length&&Bn.push(...Gi)}}const zr=Bn.filter(w3=>!w3.destroyed);zr.length?iOe(this,y1,zr):this.processLeaveNode(y1)}return Me.length=0,d6.forEach(e1=>{this.players.push(e1),e1.onDone(()=>{e1.destroy();const y1=this.players.indexOf(e1);this.players.splice(y1,1)}),e1.play()}),d6}elementContainsData(n,e){let i=!1;const r=e[Ns];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(n).elementContainsData(e)||i}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,s){let d=[];if(e){const _=this.playersByQueriedElement.get(n);_&&(d=_)}else{const _=this.playersByElement.get(n);if(_){const C=!s||s==S7;_.forEach(S=>{S.queued||!C&&S.triggerName!=r||d.push(S)})}}return(i||r)&&(d=d.filter(_=>!(i&&i!=_.namespaceId||r&&r!=_.triggerName))),d}_beforeAnimationBuild(n,e,i){const s=e.element,d=e.isRemovalTransition?void 0:n,_=e.isRemovalTransition?void 0:e.triggerName;for(const C of e.timelines){const S=C.element,V=S!==s,F=Zo(i,S,[]);this._getPreviousPlayers(S,V,d,_,e.toState).forEach(K=>{const ce=K.getRealPlayer();ce.beforeDestroy&&ce.beforeDestroy(),K.destroy(),F.push(K)})}l6(s,e.fromStyles)}_buildAnimation(n,e,i,r,s,d){const _=e.triggerName,C=e.element,S=[],V=new Set,F=new Set,W=e.timelines.map(ce=>{const be=ce.element;V.add(be);const Me=be[Ns];if(Me&&Me.removedBeforeQueried)return new m7(ce.duration,ce.delay);const He=be!==C,lt=function rOe(t){const n=[];return PB(t,n),n}((i.get(be)||XNe).map(Ln=>Ln.getRealPlayer())).filter(Ln=>!!Ln.element&&Ln.element===be),$e=s.get(be),St=d.get(be),h1=lB(0,this._normalizer,0,ce.keyframes,$e,St),en=this._buildPlayer(ce,h1,lt);if(ce.subTimeline&&r&&F.add(be),He){const Ln=new Ix(n,_,be);Ln.setRealPlayer(en),S.push(Ln)}return en});S.forEach(ce=>{Zo(this.playersByQueriedElement,ce.element,[]).push(ce),ce.onDone(()=>function eOe(t,n,e){let i=t.get(n);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,ce.element,ce))}),V.forEach(ce=>Os(ce,vB));const K=Bl(W);return K.onDestroy(()=>{V.forEach(ce=>p5(ce,vB)),C3(C,e.toStyles)}),F.forEach(ce=>{Zo(r,ce,[]).push(K)}),K}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new m7(n.duration,n.delay)}}class Ix{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new m7,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>px(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Zo(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function am(t){return t&&1===t.nodeType}function kB(t,n){const e=t.style.display;return t.style.display=n??"none",e}function IB(t,n,e,i,r){const s=[];e.forEach(C=>s.push(kB(C)));const d=[];i.forEach((C,S)=>{const V=new Map;C.forEach(F=>{const W=n.computeStyle(S,F,r);V.set(F,W),(!W||0==W.length)&&(S[Ns]=KNe,d.push(S))}),t.set(S,V)});let _=0;return e.forEach(C=>kB(C,s[_++])),d}function RB(t,n){const e=new Map;if(t.forEach(_=>e.set(_,[])),0==n.length)return e;const i=1,r=new Set(n),s=new Map;function d(_){if(!_)return i;let C=s.get(_);if(C)return C;const S=_.parentNode;return C=e.has(S)?S:r.has(S)?i:d(S),s.set(_,C),C}return n.forEach(_=>{const C=d(_);C!==i&&e.get(C).push(_)}),e}function Os(t,n){t.classList?.add(n)}function p5(t,n){t.classList?.remove(n)}function iOe(t,n,e){Bl(e).onDone(()=>t.processLeaveNode(n))}function PB(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof eO?PB(i.players,n):n.push(i)}}function FB(t,n,e){const i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(s=>r.add(s)):n.set(t,i),e.delete(t),!0}class om{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new JNe(n,e,i),this._timelineEngine=new $Ne(n,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(n,e,i,r,s){const d=n+"-"+r;let _=this._triggerCache[d];if(!_){const C=[],S=[],V=zx(this._driver,s,C,S);if(C.length)throw function jFe(t,n){return new rt(3404,!1)}();_=function BNe(t,n,e){return new UNe(t,n,e)}(r,V,this._normalizer),this._triggerCache[d]=_}this._transitionEngine.registerTrigger(e,r,_)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i,r){this._transitionEngine.removeNode(n,e,r||!1,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if("@"==i.charAt(0)){const[s,d]=uB(i);this._timelineEngine.command(s,e,d,r)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,s){if("@"==i.charAt(0)){const[d,_]=uB(i);return this._timelineEngine.listen(d,e,_,s)}return this._transitionEngine.listen(n,e,i,r,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let uOe=(()=>{class t extends XN{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:U2.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?KN(e):e;return OB(this._renderer,null,i,"register",[r]),new dOe(i,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Ie(wc),Ie(Y1))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class dOe extends JTe{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new fOe(this._id,n,e||{},this._renderer)}}class fOe{constructor(n,e,i,r){this.id=n,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return OB(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function OB(t,n,e,i,r){return t.setProperty(n,`@@${e}:${i}`,r)}const BB="@.disabled";let hOe=(()=>{class t{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,d)=>{const _=d?.parentNode(s);_&&d.removeChild(_,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let V=this._rendererCache.get(s);return V||(V=new UB("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,V)),V}const d=i.id,_=i.id+"-"+this._currentId;this._currentId++,this.engine.register(_,e);const C=V=>{Array.isArray(V)?V.forEach(C):this.engine.registerTrigger(d,_,e,V.name,V)};return i.data.animation.forEach(C),new pOe(this,_,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[d,_]=s;d(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Ie(wc),Ie(om),Ie(d1))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class UB{constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==BB?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class pOe extends UB{constructor(n,e,i,r,s){super(e,i,r,s),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==BB?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const r=function mOe(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let s=e.slice(1),d="";return"@"!=s.charAt(0)&&([s,d]=function gOe(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,r,s,d,_=>{this.factory.scheduleListenerCallback(_._data||-1,i,_)})}return this.delegate.listen(n,e,i)}}const GB=[{provide:yx,useClass:gB},{provide:J3,useValue:"NoopAnimations"},...[{provide:XN,useClass:uOe},{provide:Vx,useFactory:function vOe(){return new PNe}},{provide:om,useClass:(()=>{class t extends om{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(Ie(Y1),Ie(yx),Ie(Vx),Ie(O0))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})()},{provide:wc,useFactory:function yOe(t,n,e){return new hOe(t,n,e)},deps:[Bh,om,d1]}]];let xOe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:GB,imports:[fz]}),t})();const jl=new c1(qi),wOe={connector:()=>new Yt};function $B(t,n=wOe){const{connector:e}=n;return X1((i,r)=>{const s=e();G(t(function COe(t){return new c1(n=>t.subscribe(n))}(s))).subscribe(r),r.add(i.subscribe(s))})}function qB(t,n){return n?e=>T8(n.pipe(Ei(1),function SOe(){return X1((t,n)=>{t.subscribe(V1(n,qi))})}()),e.pipe(qB(t))):tt((e,i)=>G(t(e,i)).pipe(Ei(1),Mz(e)))}const D7="Service workers are disabled or not supported by this browser";class cm{constructor(n){if(this.serviceWorker=n,n){const i=s5(n,"controllerchange").pipe(t1(()=>n.controller)),s=T8(md(()=>Jt(n.controller)),i);this.worker=s.pipe(_i(V=>!!V)),this.registration=this.worker.pipe(la(()=>n.getRegistration()));const S=s5(n,"message").pipe(t1(V=>V.data)).pipe(_i(V=>V&&V.type)).pipe(function zOe(t){return t?n=>$B(t)(n):n=>function MOe(t,n){const e=S1(t)?t:()=>t;return S1(n)?$B(n,{connector:e}):i=>new Gh(i,e)}(new Yt)(n)}());S.connect(),this.events=S}else this.worker=this.events=this.registration=function AOe(t){return md(()=>H8(new Error(t)))}(D7)}postMessage(n,e){return this.worker.pipe(Ei(1),er(i=>{i.postMessage({action:n,...e})})).toPromise().then(()=>{})}postMessageWithOperation(n,e,i){const r=this.waitForOperationCompleted(i),s=this.postMessage(n,e);return Promise.all([s,r]).then(([,d])=>d)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(n){let e;return e="string"==typeof n?i=>i.type===n:i=>n.includes(i.type),this.events.pipe(_i(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(Ei(1))}waitForOperationCompleted(n){return this.eventsOfType("OPERATION_COMPLETED").pipe(_i(e=>e.nonce===n),Ei(1),t1(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let EOe=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new Yt,!e.isEnabled)return this.messages=jl,this.notificationClicks=jl,void(this.subscription=jl);this.messages=this.sw.eventsOfType("PUSH").pipe(t1(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(t1(r=>r.data)),this.pushManager=this.sw.registration.pipe(t1(r=>r.pushManager));const i=this.pushManager.pipe(la(r=>r.getSubscription()));this.subscription=Ci(i,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(D7));const i={userVisibleOnly:!0};let r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let d=0;d<r.length;d++)s[d]=r.charCodeAt(d);return i.applicationServerKey=s,this.pushManager.pipe(la(d=>d.subscribe(i)),Ei(1)).toPromise().then(d=>(this.subscriptionChanges.next(d),d))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Ei(1),la(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(D7))}decodeBase64(e){return atob(e)}}return t.\u0275fac=function(e){return new(e||t)(Ie(cm))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),VOe=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=jl,this.available=jl,this.activated=jl,void(this.unrecoverable=jl);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(_i(i=>"VERSION_READY"===i.type),t1(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(D7));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(D7));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return t.\u0275fac=function(e){return new(e||t)(Ie(cm))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class Px{}const WB=new vt("NGSW_REGISTER_SCRIPT");function LOe(t,n,e,i){return()=>{if(!r4(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;let r;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)r=e.registrationStrategy();else{const[d,..._]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":r=Jt(null);break;case"registerWithDelay":r=ZB(+_[0]||0);break;case"registerWhenStable":r=_[0]?Ci(YB(t),ZB(+_[0])):YB(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}t.get(d1).runOutsideAngular(()=>r.pipe(Ei(1)).subscribe(()=>navigator.serviceWorker.register(n,{scope:e.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function ZB(t){return Jt(null).pipe(function DOe(t,n=Cp){const e=hN(t,n);return qB(()=>e)}(t))}function YB(t){return t.get(O0).isStable.pipe(_i(e=>e))}function TOe(t,n){return new cm(r4(n)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let HOe=(()=>{class t{static register(e,i={}){return{ngModule:t,providers:[{provide:WB,useValue:e},{provide:Px,useValue:i},{provide:cm,useFactory:TOe,deps:[Px,vo]},{provide:cd,useFactory:LOe,deps:[Nr,WB,Px,vo],multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t}),t.\u0275inj=l1({providers:[EOe,VOe]}),t})(),kOe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g1({type:t,bootstrap:[BRe]}),t.\u0275inj=l1({imports:[fz,ORe,jy,xFe,xOe,HOe.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]}),t})();NW().bootstrapModule(kOe).catch(t=>console.error(t))},898:function($l){$l.exports=function(){"use strict";var C1,R2,S1;function Qe(p,Ye){if(C1)if(R2){var nr="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+C1+")(sharedChunk); ("+R2+")(sharedChunk); self.onerror = null;",$n={};C1($n),S1=Ye($n),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(S1.workerUrl=window.URL.createObjectURL(new Blob([nr],{type:"text/javascript"})))}else R2=Ye;else C1=Ye}return Qe(0,function(p){var Ye=typeof self<"u"?self:{},nr="2.14.1";let $n;const s1={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==$n){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{$n=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):o}catch{$n=o}}return $n},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!s1.API_URL)return null;try{const o=new URL(s1.API_URL);return"api.mapbox.cn"===o.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===o.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},m1={supported:!1,testSupport:function(o){!qi&&$i&&(Mo?da(o):fi=o)}};let fi,$i,qi=!1,Mo=!1;function da(o){const a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,$i),o.isContextLost())return;m1.supported=!0}catch{}o.deleteTexture(a),qi=!0}Ye.document&&($i=Ye.document.createElement("img"),$i.onload=function(){fi&&da(fi),fi=null,Mo=!0},$i.onerror=function(){qi=!0,fi=null},$i.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const P2="01";var Zn=Wi;function Wi(o,a,c,u){this.cx=3*o,this.bx=3*(c-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(u-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=c,this.p2y=u}Wi.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,a){if(void 0===a&&(a=1e-6),o<0)return 0;if(o>1)return 1;for(var c=o,u=0;u<8;u++){var h=this.sampleCurveX(c)-o;if(Math.abs(h)<a)return c;var g=this.sampleCurveDerivativeX(c);if(Math.abs(g)<1e-6)break;c-=h/g}var y=0,x=1;for(c=o,u=0;u<20&&(h=this.sampleCurveX(c),!(Math.abs(h-o)<a));u++)o>h?y=c:x=c,c=.5*(x-y)+y;return c},solve:function(o,a){return this.sampleCurveY(this.solveCurveX(o,a))}};var pt=$1;function $1(o,a){this.x=o,this.y=a}$1.prototype={clone:function(){return new $1(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,a){return this.clone()._rotateAround(o,a)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var a=o.x-this.x,c=o.y-this.y;return a*a+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,a){return Math.atan2(this.x*a-this.y*o,this.x*o+this.y*a)},_matMult:function(o){var a=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=a,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var a=Math.cos(o),c=Math.sin(o),u=c*this.x+a*this.y;return this.x=a*this.x-c*this.y,this.y=u,this},_rotateAround:function(o,a){var c=Math.cos(o),u=Math.sin(o),h=a.y+u*(this.x-a.x)+c*(this.y-a.y);return this.x=a.x+c*(this.x-a.x)-u*(this.y-a.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$1.convert=function(o){return o instanceof $1?o:Array.isArray(o)?new $1(o[0],o[1]):o};const Sr=Math.PI/180,zo=180/Math.PI;function F1(o){return o*Sr}function ni(o){return o*zo}const qr=[[0,0],[1,0],[1,1],[0,1]];function fa(o){if(o<=0)return 0;if(o>=1)return 1;const a=o*o,c=a*o;return 4*(o<.5?c:3*(o-a)+c-.75)}function La(o,a,c,u){const h=new Zn(o,a,c,u);return function(g){return h.solve(g)}}const s2=La(.25,.1,.25,1);function f1(o,a,c){return Math.min(c,Math.max(a,o))}function c2(o,a,c){return(c=f1((c-o)/(a-o),0,1))*c*(3-2*c)}function b2(o,a,c){const u=c-a,h=((o-a)%u+u)%u+a;return h===a?c:h}function Dr(o,a,c){if(!o.length)return c(null,[]);let u=o.length;const h=new Array(o.length);let g=null;o.forEach((y,x)=>{a(y,(M,z)=>{M&&(g=M),h[x]=z,0==--u&&c(g,h)})})}function F2(o){const a=[];for(const c in o)a.push(o[c]);return a}function c1(o,...a){for(const c of a)for(const u in c)o[u]=c[u];return o}let ir=1;function Ta(){return ir++}function Wr(){return function o(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function rr(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function Yt(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function ar(o,a){o.forEach(c=>{a[c]&&(a[c]=a[c].bind(a))})}function Ar(o,a){return-1!==o.indexOf(a,o.length-a.length)}function X1(o,a,c){const u={};for(const h in o)u[h]=a.call(c||this,o[h],h,o);return u}function V1(o,a,c){const u={};for(const h in o)a.call(c||this,o[h],h,o)&&(u[h]=o[h]);return u}function ii(o){return Array.isArray(o)?o.map(ii):"object"==typeof o&&o?X1(o,ii):o}const t1={};function tn(o){t1[o]||(typeof console<"u"&&console.warn(o),t1[o]=!0)}function or(o,a,c){return(c.y-o.y)*(a.x-o.x)>(a.y-o.y)*(c.x-o.x)}function K1(o){let a=0;for(let c,u,h=0,g=o.length,y=g-1;h<g;y=h++)c=o[h],u=o[y],a+=(u.x-c.x)*(c.y+u.y);return a}function Er(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function q1(o){const a={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,u,h,g)=>{const y=h||g;return a[u]=!y||y.toLowerCase(),""}),a["max-age"]){const c=parseInt(a["max-age"],10);isNaN(c)?delete a["max-age"]:a["max-age"]=c}return a}let N2=null;function l2(o){if(null==N2){const a=o.navigator?o.navigator.userAgent:null;N2=!!o.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return N2}function ha(o){try{const a=Ye[o];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}}function Kn(o,a){return[o[4*a],o[4*a+1],o[4*a+2],o[4*a+3]]}const li="mapbox-tiles";let Vr,O2,Li=500,So=50;function js(){try{return Ye.caches}catch{}}function Zr(){js()&&!Vr&&(Vr=Ye.caches.open(li))}function Ha(o){const a=o.indexOf("?");if(a<0)return o;const u=function(h){const g=h.indexOf("?");return g>0?h.slice(g+1).split("&"):[]}(o).filter(h=>{const g=h.split("=");return"language"===g[0]||"worldview"===g[0]});return u.length?`${o.slice(0,a)}?${u.join("&")}`:o.slice(0,a)}let Gs=1/0;const $s={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($s);class p1 extends Error{constructor(a,c,u){401===c&&es(u)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=c,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Lr=Er()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Ye.location.protocol?Ye.parent:Ye).location.href,ka=function(o,a){if(!(/^file:/.test(c=o.url)||/^file:/.test(Lr())&&!/^\w+:/.test(c))){if(Ye.fetch&&Ye.Request&&Ye.AbortController&&Ye.Request.prototype.hasOwnProperty("signal"))return function(u,h){const g=new Ye.AbortController,y=new Ye.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Lr(),referrerPolicy:u.referrerPolicy,signal:g.signal});let x=!1,M=!1;const z=(E=y.url).indexOf("sku=")>0&&es(E);var E;"json"===u.type&&y.headers.set("Accept","application/json");const H=(N,O,j)=>{if(M)return;if(N&&"SecurityError"!==N.message&&tn(N),O&&j)return I(O);const X=Date.now();Ye.fetch(y).then(ae=>{if(ae.ok){const me=z?ae.clone():null;return I(ae,me,X)}return h(new p1(ae.statusText,ae.status,u.url))}).catch(ae=>{"AbortError"!==ae.name&&h(new Error(`${ae.message} ${u.url}`))})},I=(N,O,j)=>{("arrayBuffer"===u.type?N.arrayBuffer():"json"===u.type?N.json():N.text()).then(X=>{M||(O&&j&&function(ae,me,re){if(Zr(),!Vr)return;const de={status:me.status,statusText:me.statusText,headers:new Ye.Headers};me.headers.forEach((ke,Ve)=>de.headers.set(Ve,ke));const ve=q1(me.headers.get("Cache-Control")||"");if(ve["no-store"])return;ve["max-age"]&&de.headers.set("Expires",new Date(re+1e3*ve["max-age"]).toUTCString());const he=de.headers.get("Expires");he&&(new Date(he).getTime()-re<42e4||function(ke,Ve){if(void 0===O2)try{new Response(new ReadableStream),O2=!0}catch{O2=!1}O2?Ve(ke.body):ke.blob().then(Ve)}(me,ke=>{const Ve=new Ye.Response(ke,de);Zr(),Vr&&Vr.then(Ge=>Ge.put(Ha(ae.url),Ve)).catch(Ge=>tn(Ge.message))}))}(y,O,j),x=!0,h(null,X,N.headers.get("Cache-Control"),N.headers.get("Expires")))}).catch(X=>{M||h(new Error(X.message))})};return z?function(N,O){if(Zr(),!Vr)return O(null);const j=Ha(N.url);Vr.then(X=>{X.match(j).then(ae=>{const me=function(re){if(!re)return!1;const de=new Date(re.headers.get("Expires")||0),ve=q1(re.headers.get("Cache-Control")||"");return de>Date.now()&&!ve["no-cache"]}(ae);X.delete(j),me&&X.put(j,ae.clone()),O(null,ae,me)}).catch(O)}).catch(O)}(y,H):H(null,null),{cancel:()=>{M=!0,x||g.abort()}}}(o,a);if(Er()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,a,void 0,!0)}var c;return function(u,h){const g=new Ye.XMLHttpRequest;g.open(u.method||"GET",u.url,!0),"arrayBuffer"===u.type&&(g.responseType="arraybuffer");for(const y in u.headers)g.setRequestHeader(y,u.headers[y]);return"json"===u.type&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials="include"===u.credentials,g.onerror=()=>{h(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||0===g.status)&&null!==g.response){let y=g.response;if("json"===u.type)try{y=JSON.parse(g.response)}catch(x){return h(x)}h(null,y,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else h(new p1(g.statusText,g.status,u.url))},g.send(u.body),{cancel:()=>g.abort()}}(o,a)},Do=function(o,a){return ka(c1(o,{type:"arrayBuffer"}),a)};function qs(o){const a=Ye.document.createElement("a");return a.href=o,a.protocol===Ye.document.location.protocol&&a.host===Ye.document.location.host}const Ws="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let sr,Qo;sr=[],Qo=0;const jc=function(o,a){if(m1.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Qo>=s1.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:o,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return sr.push(g),g}Qo++;let c=!1;const u=()=>{if(!c)for(c=!0,Qo--;sr.length&&Qo<s1.MAX_PARALLEL_IMAGE_REQUESTS;){const g=sr.shift(),{requestParameters:y,callback:x,cancelled:M}=g;M||(g.cancel=jc(y,x).cancel)}},h=Do(o,(g,y,x,M)=>{u(),g?a(g):y&&(Ye.createImageBitmap?function(z,E){const H=new Ye.Blob([new Uint8Array(z)],{type:"image/png"});Ye.createImageBitmap(H).then(I=>{E(null,I)}).catch(I=>{E(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(z,E)=>a(z,E,x,M)):function(z,E){const H=new Ye.Image,I=Ye.URL;H.onload=()=>{E(null,H),I.revokeObjectURL(H.src),H.onload=null,Ye.requestAnimationFrame(()=>{H.src=Ws})},H.onerror=()=>E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const N=new Ye.Blob([new Uint8Array(z)],{type:"image/png"});H.src=z.byteLength?I.createObjectURL(N):Ws}(y,(z,E)=>a(z,E,x,M)))});return{cancel:()=>{h.cancel(),u()}}},Jo="NO_ACCESS_TOKEN";function Yr(o){return 0===o.indexOf("mapbox:")}function es(o){return s1.API_URL_REGEX.test(o)}function Ia(o){return s1.API_CDN_URL_REGEX.test(o)}function Zs(o){return s1.API_STYLE_REGEX.test(o)&&!Ao(o)}function Ao(o){return s1.API_SPRITE_REGEX.test(o)}const cr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function x2(o){const a=o.match(cr);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Ra(o){const a=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${a}`}function Ys(o){if(!o)return null;const a=o.split(".");if(!a||3!==a.length)return null;try{return JSON.parse(decodeURIComponent(Ye.atob(a[1]).split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Pa{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const c=Ys(s1.ACCESS_TOKEN);let u="";return u=c&&c.u?Ye.btoa(encodeURIComponent(c.u).replace(/%([0-9A-F]{2})/g,(h,g)=>String.fromCharCode(Number("0x"+g)))):s1.ACCESS_TOKEN||"",a?`mapbox.eventData.${a}:${u}`:`mapbox.eventData:${u}`}fetchEventData(){const a=ha("localStorage"),c=this.getStorageKey(),u=this.getStorageKey("uuid");if(a)try{const h=Ye.localStorage.getItem(c);h&&(this.eventData=JSON.parse(h));const g=Ye.localStorage.getItem(u);g&&(this.anonId=g)}catch{tn("Unable to read from LocalStorage")}}saveEventData(){const a=ha("localStorage"),c=this.getStorageKey(),u=this.getStorageKey("uuid");if(a)try{Ye.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&Ye.localStorage.setItem(c,JSON.stringify(this.eventData))}catch{tn("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,c,u,h){if(!s1.EVENTS_URL)return;const g=x2(s1.EVENTS_URL);g.params.push(`access_token=${h||s1.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(a).toISOString()},x=c?c1(y,c):y,M={url:Ra(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};var E;this.pendingRequest=(E=z=>{this.pendingRequest=null,u(z),this.saveEventData(),this.processRequests(h)},ka(c1(M,{method:"POST"}),E))}queueRequest(a,c){this.queue.push(a),this.processRequests(c)}}const ie=new class extends Pa{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,a){s1.EVENTS_URL&&s1.ACCESS_TOKEN&&Array.isArray(o)&&o.some(c=>Yr(c)||es(c))&&this.queueRequest(Date.now(),a)}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=Ys(s1.ACCESS_TOKEN),c=a?a.u:s1.ACCESS_TOKEN;let u=c!==this.eventData.tokenU;Yt(this.anonId)||(this.anonId=Wr(),u=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),y=new Date(h),x=(h-this.eventData.lastSuccess)/864e5;u=u||x>=1||x<-1||g.getDate()!==y.getDate()}else u=!0;u?this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:nr,skuId:P2,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=h,this.eventData.tokenU=c)},o):this.processRequests()}},U=ie.postTurnstileEvent.bind(ie),G=new class extends Pa{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,a,c,u){this.skuToken=a,this.errorCb=u,s1.EVENTS_URL&&(c||s1.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},c):this.errorCb(new Error(Jo)))}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{id:a,timestamp:c}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),Yt(this.anonId)||(this.anonId=Wr()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:nr,skuId:P2,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):a&&(this.success[a]=!0)},o))}},ne=G.postMapLoadEvent.bind(G),fe=new class extends Pa{constructor(){super("gljs.performance")}postPerformanceEvent(o,a){s1.EVENTS_URL&&(o||s1.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},o)}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:a,performanceData:c}=this.queue.shift(),u=function(h){const g=Ye.performance.getEntriesByType("resource"),y=Ye.performance.getEntriesByType("mark"),x=function(I){const N={};if(I)for(const O in I)if("other"!==O)for(const j of I[O]){const X=`${O}ResolveRangeMin`,ae=`${O}ResolveRangeMax`,me=`${O}RequestCount`,re=`${O}RequestCachedCount`;N[X]=Math.min(N[X]||1/0,j.startTime),N[ae]=Math.max(N[ae]||-1/0,j.responseEnd);const de=ve=>{void 0===N[ve]&&(N[ve]=0),++N[ve]};void 0!==j.transferSize&&0===j.transferSize&&de(re),de(me)}return N}(function(I,N){const O={};if(I)for(const j of I){const X=N(j);void 0===O[X]&&(O[X]=[]),O[X].push(j)}return O}(g,Mt)),M=Ye.devicePixelRatio,z=Ye.navigator.connection||Ye.navigator.mozConnection||Ye.navigator.webkitConnection,E={counters:[],metadata:[],attributes:[]},H=(I,N,O)=>{null!=O&&I.push({name:N,value:O.toString()})};for(const I in x)H(E.counters,I,x[I]);if(h.interactionRange[0]!==1/0&&h.interactionRange[1]!==-1/0&&(H(E.counters,"interactionRangeMin",h.interactionRange[0]),H(E.counters,"interactionRangeMax",h.interactionRange[1])),y)for(const I of Object.keys(Le)){const N=Le[I],O=y.find(j=>j.name===N);O&&H(E.counters,N,O.startTime)}return H(E.counters,"visibilityHidden",h.visibilityHidden),H(E.attributes,"style",function(I){if(I)for(const N of I){const O=N.name.split("?")[0];if(Zs(O)){const j=O.split("/").slice(-2);if(2===j.length)return`mapbox://styles/${j[0]}/${j[1]}`}}}(g)),H(E.attributes,"terrainEnabled",h.terrainEnabled?"true":"false"),H(E.attributes,"fogEnabled",h.fogEnabled?"true":"false"),H(E.attributes,"projection",h.projection),H(E.attributes,"zoom",h.zoom),H(E.metadata,"devicePixelRatio",M),H(E.metadata,"connectionEffectiveType",z?z.effectiveType:void 0),H(E.metadata,"navigatorUserAgent",Ye.navigator.userAgent),H(E.metadata,"screenWidth",Ye.screen.width),H(E.metadata,"screenHeight",Ye.screen.height),H(E.metadata,"windowWidth",Ye.innerWidth),H(E.metadata,"windowHeight",Ye.innerHeight),H(E.metadata,"mapWidth",h.width/M),H(E.metadata,"mapHeight",h.height/M),H(E.metadata,"webglRenderer",h.renderer),H(E.metadata,"webglVendor",h.vendor),H(E.metadata,"sdkVersion",nr),H(E.metadata,"sdkIdentifier","mapbox-gl-js"),E}(c);for(const h of u.metadata);for(const h of u.counters);for(const h of u.attributes);this.postEvent(a,u,()=>{},o)}},xe=fe.postPerformanceEvent.bind(fe),Ae=new class extends Pa{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,a,c,u){if(!s1.API_URL||!s1.SESSION_PATH)return;const h=x2(s1.API_URL+s1.SESSION_PATH);h.params.push(`sku=${a||""}`),h.params.push(`access_token=${u||s1.ACCESS_TOKEN||""}`);const g={url:Ra(h),headers:{"Content-Type":"text/plain"}};var x;this.pendingRequest=(x=y=>{this.pendingRequest=null,c(y),this.saveEventData(),this.processRequests(u)},ka(c1(g,{method:"GET"}),x))}getSessionAPI(o,a,c,u){this.skuToken=a,this.errorCb=u,s1.SESSION_PATH&&s1.API_URL&&(c||s1.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},c):this.errorCb(new Error(Jo)))}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{id:a,timestamp:c}=this.queue.shift();a&&this.success[a]||this.getSession(c,this.skuToken,u=>{u?this.errorCb(u):a&&(this.success[a]=!0)},o)}},De=Ae.getSessionAPI.bind(Ae),we=new Set,Le={create:"create",load:"load",fullLoad:"fullLoad"},it={mark(o){Ye.performance.mark(o)},measure(o,a,c){Ye.performance.measure(o,a,c)}};function Mt(o){const a=o.name.split("?")[0];return Ia(a)&&a.includes("mapbox-gl.js")?"javascript":Ia(a)&&a.includes("mapbox-gl.css")?"css":s1.API_FONTS_REGEX.test(a)?"fontRange":Ao(a)?"sprite":Zs(a)?"style":s1.API_TILEJSON_REGEX.test(a)?"tilejson":"other"}const tt=Ye.performance;function Tt(o){const a=o?o.url.toString():void 0;return tt.getEntriesByName(a)}let At,Rt,Ht,b1;const Q1={now:()=>void 0!==Ht?Ht:Ye.performance.now(),setNow(o){Ht=o},restoreNow(){Ht=void 0},frame(o){const a=Ye.requestAnimationFrame(o);return{cancel:()=>Ye.cancelAnimationFrame(a)}},getImageData(o,a=0){const{width:c,height:u}=o;b1||(b1=Ye.document.createElement("canvas"));const h=b1.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(c>b1.width||u>b1.height)&&(b1.width=c,b1.height=u),h.clearRect(-a,-a,c+2*a,u+2*a),h.drawImage(o,0,0,c,u),h.getImageData(-a,-a,c+2*a,u+2*a)},resolveURL:o=>(At||(At=Ye.document.createElement("a")),At.href=o,At.href),get devicePixelRatio(){return Ye.devicePixelRatio},get prefersReducedMotion(){return!!Ye.matchMedia&&(null==Rt&&(Rt=Ye.matchMedia("(prefers-reduced-motion: reduce)")),Rt.matches)}};function Wt(o,a,c){c[o]&&-1!==c[o].indexOf(a)||(c[o]=c[o]||[],c[o].push(a))}function nn(o,a,c){if(c&&c[o]){const u=c[o].indexOf(a);-1!==u&&c[o].splice(u,1)}}class Cn{constructor(a,c={}){c1(this,c),this.type=a}}class pa extends Cn{constructor(a,c={}){super("error",c1({error:a},c))}}class Xr{on(a,c){return this._listeners=this._listeners||{},Wt(a,c,this._listeners),this}off(a,c){return nn(a,c,this._listeners),nn(a,c,this._oneTimeListeners),this}once(a,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Wt(a,c,this._oneTimeListeners),this):new Promise(u=>this.once(a,u))}fire(a,c){"string"==typeof a&&(a=new Cn(a,c||{}));const u=a.type;if(this.listens(u)){a.target=this;const h=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const x of h)x.call(this,a);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const x of g)nn(u,x,this._oneTimeListeners),x.call(this,a);const y=this._eventedParent;y&&(c1(a,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),y.fire(a))}else a instanceof pa&&console.error(a.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,c){return this._eventedParent=a,this._eventedParentData=c,this}}var qe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ma(o,...a){for(const c of a)for(const u in c)o[u]=c[u];return o}function Qn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Fa(o){if(Array.isArray(o))return o.map(Fa);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const a={};for(const c in o)a[c]=Fa(o[c]);return a}return Qn(o)}class M3 extends Error{constructor(a,c){super(c),this.message=c,this.key=a}}var Kr=M3;class ts{constructor(a,c=[]){this.parent=a,this.bindings={};for(const[u,h]of c)this.bindings[u]=h}concat(a){return new ts(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}var Jn=ts;const Ci={kind:"null"},bt={kind:"number"},D1={kind:"string"},It={kind:"boolean"},lr={kind:"color"},vn={kind:"object"},w1={kind:"value"},ns={kind:"collator"},rn={kind:"formatted"},n1={kind:"resolvedImage"};function ei(o,a){return{kind:"array",itemType:o,N:a}}function yn(o){if("array"===o.kind){const a=yn(o.itemType);return"number"==typeof o.N?`array<${a}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${a}>`}return o.kind}const ql=[Ci,bt,D1,It,lr,rn,vn,ei(w1),n1];function hi(o,a){if("error"===a.kind)return null;if("array"===o.kind){if("array"===a.kind&&(0===a.N&&"value"===a.itemType.kind||!hi(o.itemType,a.itemType))&&("number"!=typeof o.N||o.N===a.N))return null}else{if(o.kind===a.kind)return null;if("value"===o.kind)for(const c of ql)if(!hi(c,a))return null}return`Expected ${yn(o)} but found ${yn(a)} instead.`}function rt(o,a){return a.some(c=>c.kind===o.kind)}function Qr(o,a){return a.some(c=>"null"===c?null===o:"array"===c?Array.isArray(o):"object"===c?o&&!Array.isArray(o)&&"object"==typeof o:c===typeof o)}var x1,pn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Xs(o){return(o=Math.round(o))<0?0:o>255?255:o}function is(o){return Xs("%"===o[o.length-1]?parseFloat(o)/100*255:parseInt(o))}function rs(o){return(a="%"===o[o.length-1]?parseFloat(o)/100:parseFloat(o))<0?0:a>1?1:a;var a}function Jr(o,a,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?o+(a-o)*c*6:2*c<1?a:3*c<2?o+(a-o)*(2/3-c)*6:o}try{x1={}.parseCSSColor=function(o){var a,c=o.replace(/ /g,"").toLowerCase();if(c in pn)return pn[c].slice();if("#"===c[0])return 4===c.length?(a=parseInt(c.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===c.length&&(a=parseInt(c.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var u=c.indexOf("("),h=c.indexOf(")");if(-1!==u&&h+1===c.length){var g=c.substr(0,u),y=c.substr(u+1,h-(u+1)).split(","),x=1;switch(g){case"rgba":if(4!==y.length)return null;x=rs(y.pop());case"rgb":return 3!==y.length?null:[is(y[0]),is(y[1]),is(y[2]),x];case"hsla":if(4!==y.length)return null;x=rs(y.pop());case"hsl":if(3!==y.length)return null;var M=(parseFloat(y[0])%360+360)%360/360,z=rs(y[1]),E=rs(y[2]),H=E<=.5?E*(z+1):E+z-E*z,I=2*E-H;return[Xs(255*Jr(I,H,M+1/3)),Xs(255*Jr(I,H,M)),Xs(255*Jr(I,H,M-1/3)),x];default:return null}}return null}}catch{}class Un{constructor(a,c,u,h=1){this.r=a,this.g=c,this.b=u,this.a=h}static parse(a){if(!a)return;if(a instanceof Un)return a;if("string"!=typeof a)return;const c=x1(a);return c?new Un(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[a,c,u,h]=this.toArray();return`rgba(${Math.round(a)},${Math.round(c)},${Math.round(u)},${h})`}toArray(){const{r:a,g:c,b:u,a:h}=this;return 0===h?[0,0,0,0]:[255*a/h,255*c/h,255*u/h,h]}toArray01(){const{r:a,g:c,b:u,a:h}=this;return 0===h?[0,0,0,0]:[a/h,c/h,u/h,h]}toArray01PremultipliedAlpha(){const{r:a,g:c,b:u,a:h}=this;return[a,c,u,h]}}Un.black=new Un(0,0,0,1),Un.white=new Un(1,1,1,1),Un.transparent=new Un(0,0,0,0),Un.red=new Un(1,0,0,1),Un.blue=new Un(0,0,1,1);var ti=Un;class Gc{constructor(a,c,u){this.sensitivity=a?c?"variant":"case":c?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,c){return this.collator.compare(a,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $c{constructor(a,c,u,h,g){this.text=a.normalize?a.normalize():a,this.image=c,this.scale=u,this.fontStack=h,this.textColor=g}}class ri{constructor(a){this.sections=a}static fromString(a){return new ri([new $c(a,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(a=>0!==a.text.length||a.image&&0!==a.image.name.length)}static factory(a){return a instanceof ri?a:ri.fromString(a)}toString(){return 0===this.sections.length?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const c of this.sections){if(c.image){a.push(["image",c.image.name]);continue}a.push(c.text);const u={};c.fontStack&&(u["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(u["font-scale"]=c.scale),c.textColor&&(u["text-color"]=["rgba"].concat(c.textColor.toArray())),a.push(u)}return a}}class C2{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new C2({name:a,available:!1}):null}serialize(){return["image",this.name]}}function Wl(o,a,c,u){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof a&&a>=0&&a<=255&&"number"==typeof c&&c>=0&&c<=255?void 0===u||"number"==typeof u&&u>=0&&u<=1?null:`Invalid rgba value [${[o,a,c,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof u?[o,a,c,u]:[o,a,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function z3(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof ti||o instanceof Gc||o instanceof ri||o instanceof C2)return!0;if(Array.isArray(o)){for(const a of o)if(!z3(a))return!1;return!0}if("object"==typeof o){for(const a in o)if(!z3(o[a]))return!1;return!0}return!1}function pi(o){if(null===o)return Ci;if("string"==typeof o)return D1;if("boolean"==typeof o)return It;if("number"==typeof o)return bt;if(o instanceof ti)return lr;if(o instanceof Gc)return ns;if(o instanceof ri)return rn;if(o instanceof C2)return n1;if(Array.isArray(o)){const a=o.length;let c;for(const u of o){const h=pi(u);if(c){if(c===h)continue;c=w1;break}c=h}return ei(c||w1,a)}return vn}function Ks(o){const a=typeof o;return null===o?"":"string"===a||"number"===a||"boolean"===a?String(o):o instanceof ti||o instanceof ri||o instanceof C2?o.toString():JSON.stringify(o)}class b4{constructor(a,c){this.type=a,this.value=c}static parse(a,c){if(2!==a.length)return c.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!z3(a[1]))return c.error("invalid value");const u=a[1];let h=pi(u);const g=c.expectedType;return"array"!==h.kind||0!==h.N||!g||"array"!==g.kind||"number"==typeof g.N&&0!==g.N||(h=g),new b4(h,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ti?["rgba"].concat(this.value.toArray()):this.value instanceof ri?this.value.serialize():this.value}}var as=b4,Zi=class{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}};const wi={string:D1,number:bt,boolean:It,object:vn};class on{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");let u,h=1;const g=a[0];if("array"===g){let x,M;if(a.length>2){const z=a[1];if("string"!=typeof z||!(z in wi)||"object"===z)return c.error('The item type argument of "array" must be one of string, number, boolean',1);x=wi[z],h++}else x=w1;if(a.length>3){if(null!==a[2]&&("number"!=typeof a[2]||a[2]<0||a[2]!==Math.floor(a[2])))return c.error('The length argument to "array" must be a positive integer literal',2);M=a[2],h++}u=ei(x,M)}else u=wi[g];const y=[];for(;h<a.length;h++){const x=c.parse(a[h],h,w1);if(!x)return null;y.push(x)}return new on(u,y)}evaluate(a){for(let c=0;c<this.args.length;c++){const u=this.args[c].evaluate(a);if(!hi(this.type,pi(u)))return u;if(c===this.args.length-1)throw new Zi(`Expected value to be of type ${yn(this.type)}, but found ${yn(pi(u))} instead.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,c=[a.kind];if("array"===a.kind){const u=a.itemType;if("string"===u.kind||"number"===u.kind||"boolean"===u.kind){c.push(u.kind);const h=a.N;("number"==typeof h||this.args.length>1)&&c.push(h)}}return c.concat(this.args.map(u=>u.serialize()))}}var Na=on;class qc{constructor(a){this.type=rn,this.sections=a}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");const u=a[1];if(!Array.isArray(u)&&"object"==typeof u)return c.error("First argument must be an image or text section.");const h=[];let g=!1;for(let y=1;y<=a.length-1;++y){const x=a[y];if(g&&"object"==typeof x&&!Array.isArray(x)){g=!1;let M=null;if(x["font-scale"]&&(M=c.parse(x["font-scale"],1,bt),!M))return null;let z=null;if(x["text-font"]&&(z=c.parse(x["text-font"],1,ei(D1)),!z))return null;let E=null;if(x["text-color"]&&(E=c.parse(x["text-color"],1,lr),!E))return null;const H=h[h.length-1];H.scale=M,H.font=z,H.textColor=E}else{const M=c.parse(a[y],1,w1);if(!M)return null;const z=M.type.kind;if("string"!==z&&"value"!==z&&"null"!==z&&"resolvedImage"!==z)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:M,scale:null,font:null,textColor:null})}}return new qc(h)}evaluate(a){return new ri(this.sections.map(c=>{const u=c.content.evaluate(a);return pi(u)===n1?new $c("",u,null,null,null):new $c(Ks(u),null,c.scale?c.scale.evaluate(a):null,c.font?c.font.evaluate(a).join(","):null,c.textColor?c.textColor.evaluate(a):null)}))}eachChild(a){for(const c of this.sections)a(c.content),c.scale&&a(c.scale),c.font&&a(c.font),c.textColor&&a(c.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const c of this.sections){a.push(c.content.serialize());const u={};c.scale&&(u["font-scale"]=c.scale.serialize()),c.font&&(u["text-font"]=c.font.serialize()),c.textColor&&(u["text-color"]=c.textColor.serialize()),a.push(u)}return a}}class Eo{constructor(a){this.type=n1,this.input=a}static parse(a,c){if(2!==a.length)return c.error("Expected two arguments.");const u=c.parse(a[1],1,D1);return u?new Eo(u):c.error("No image name provided.")}evaluate(a){const c=this.input.evaluate(a),u=C2.fromString(c);return u&&a.availableImages&&(u.available=a.availableImages.indexOf(c)>-1),u}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const at={"to-boolean":It,"to-color":lr,"to-number":bt,"to-string":D1};class x4{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");const u=a[0];if(("to-boolean"===u||"to-string"===u)&&2!==a.length)return c.error("Expected one argument.");const h=at[u],g=[];for(let y=1;y<a.length;y++){const x=c.parse(a[y],y,w1);if(!x)return null;g.push(x)}return new x4(h,g)}evaluate(a){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(a));if("color"===this.type.kind){let c,u;for(const h of this.args){if(c=h.evaluate(a),u=null,c instanceof ti)return c;if("string"==typeof c){const g=a.parseColor(c);if(g)return g}else if(Array.isArray(c)&&(u=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Wl(c[0],c[1],c[2],c[3]),!u))return new ti(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Zi(u||`Could not parse color from value '${"string"==typeof c?c:String(JSON.stringify(c))}'`)}if("number"===this.type.kind){let c=null;for(const u of this.args){if(c=u.evaluate(a),null===c)return 0;const h=Number(c);if(!isNaN(h))return h}throw new Zi(`Could not convert ${JSON.stringify(c)} to number.`)}return"formatted"===this.type.kind?ri.fromString(Ks(this.args[0].evaluate(a))):"resolvedImage"===this.type.kind?C2.fromString(Ks(this.args[0].evaluate(a))):Ks(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if("formatted"===this.type.kind)return new qc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Eo(this.args[0]).serialize();const a=[`to-${this.type.kind}`];return this.eachChild(c=>{a.push(c.serialize())}),a}}var l1=x4;const os=["Unknown","Point","LineString","Polygon"];var ss=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?os[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,a=this.featureDistanceData.scale,{x:c,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(c*a-o[0])+this.featureDistanceData.bearing[1]*(u*a-o[1])}return 0}parseColor(o){let a=this._parseColorCache[o];return a||(a=this._parseColorCache[o]=ti.parse(o)),a}};class Oa{constructor(a,c,u,h){this.name=a,this.type=c,this._evaluate=u,this.args=h}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,c){const u=a[0],h=Oa.definitions[u];if(!h)return c.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter(([z])=>!Array.isArray(z)||z.length===a.length-1);let M=null;for(const[z,E]of x){M=new Ie(c.registry,c.path,null,c.scope);const H=[];let I=!1;for(let N=1;N<a.length;N++){const O=a[N],j=Array.isArray(z)?z[N-1]:z.type,X=M.parse(O,1+H.length,j);if(!X){I=!0;break}H.push(X)}if(!I)if(Array.isArray(z)&&z.length!==H.length)M.error(`Expected ${z.length} arguments, but found ${H.length} instead.`);else{for(let N=0;N<H.length;N++){const O=Array.isArray(z)?z[N]:z.type,j=H[N];M.concat(N+1).checkSubtype(O,j.type)}if(0===M.errors.length)return new Oa(u,g,E,H)}}if(1===x.length)c.errors.push(...M.errors);else{const z=(x.length?x:y).map(([H])=>{return I=H,Array.isArray(I)?`(${I.map(yn).join(", ")})`:`(${yn(I.type)}...)`;var I}).join(" | "),E=[];for(let H=1;H<a.length;H++){const I=c.parse(a[H],1+E.length);if(!I)return null;E.push(yn(I.type))}c.error(`Expected arguments of type ${z}, but found (${E.join(", ")}) instead.`)}return null}static register(a,c){Oa.definitions=c;for(const u in c)a[u]=Oa}}var Ba=Oa;class Qs{constructor(a,c,u){this.type=ns,this.locale=u,this.caseSensitive=a,this.diacriticSensitive=c}static parse(a,c){if(2!==a.length)return c.error("Expected one argument.");const u=a[1];if("object"!=typeof u||Array.isArray(u))return c.error("Collator options argument must be an object.");const h=c.parse(void 0!==u["case-sensitive"]&&u["case-sensitive"],1,It);if(!h)return null;const g=c.parse(void 0!==u["diacritic-sensitive"]&&u["diacritic-sensitive"],1,It);if(!g)return null;let y=null;return u.locale&&(y=c.parse(u.locale,1,D1),!y)?null:new Qs(h,g,y)}evaluate(a){return new Gc(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}const Tr=8192;function w2(o,a){o[0]=Math.min(o[0],a[0]),o[1]=Math.min(o[1],a[1]),o[2]=Math.max(o[2],a[0]),o[3]=Math.max(o[3],a[1])}function cs(o,a){return!(o[0]<=a[0]||o[2]>=a[2]||o[1]<=a[1]||o[3]>=a[3])}function C4(o,a){const c=(180+o[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,h=Math.pow(2,a.z);return[Math.round(c*h*Tr),Math.round(u*h*Tr)]}function Qt(o,a,c){const u=o[0]-a[0],h=o[1]-a[1],g=o[0]-c[0],y=o[1]-c[1];return u*y-g*h==0&&u*g<=0&&h*y<=0}function ls(o,a){let c=!1;for(let y=0,x=a.length;y<x;y++){const M=a[y];for(let z=0,E=M.length;z<E-1;z++){if(Qt(o,M[z],M[z+1]))return!1;(h=M[z])[1]>(u=o)[1]!=(g=M[z+1])[1]>u[1]&&u[0]<(g[0]-h[0])*(u[1]-h[1])/(g[1]-h[1])+h[0]&&(c=!c)}}var u,h,g;return c}function w4(o,a){for(let c=0;c<a.length;c++)if(ls(o,a[c]))return!0;return!1}function M2(o,a,c,u){const h=u[0]-c[0],g=u[1]-c[1],y=(o[0]-c[0])*g-h*(o[1]-c[1]),x=(a[0]-c[0])*g-h*(a[1]-c[1]);return y>0&&x<0||y<0&&x>0}function Js(o,a,c){for(const z of c)for(let E=0;E<z.length-1;++E)if((x=[(y=z[E+1])[0]-(g=z[E])[0],y[1]-g[1]])[0]*(M=[(h=a)[0]-(u=o)[0],h[1]-u[1]])[1]-x[1]*M[0]!=0&&M2(u,h,g,y)&&M2(g,y,u,h))return!0;var u,h,g,y,x,M;return!1}function us(o,a){for(let c=0;c<o.length;++c)if(!ls(o[c],a))return!1;for(let c=0;c<o.length-1;++c)if(Js(o[c],o[c+1],a))return!1;return!0}function Tn(o,a){for(let c=0;c<a.length;c++)if(us(o,a[c]))return!0;return!1}function S3(o,a,c){const u=[];for(let h=0;h<o.length;h++){const g=[];for(let y=0;y<o[h].length;y++){const x=C4(o[h][y],c);w2(a,x),g.push(x)}u.push(g)}return u}function D3(o,a,c){const u=[];for(let h=0;h<o.length;h++){const g=S3(o[h],a,c);u.push(g)}return u}function M4(o,a,c,u){if(o[0]<c[0]||o[0]>c[2]){const h=.5*u;let g=o[0]-c[0]>h?-u:c[0]-o[0]>h?u:0;0===g&&(g=o[0]-c[2]>h?-u:c[2]-o[0]>h?u:0),o[0]+=g}w2(a,o)}function Hr(o,a,c,u){const h=Math.pow(2,u.z)*Tr,g=[u.x*Tr,u.y*Tr],y=[];if(!o)return y;for(const x of o)for(const M of x){const z=[M.x+g[0],M.y+g[1]];M4(z,a,c,h),y.push(z)}return y}function an(o,a,c,u){const h=Math.pow(2,u.z)*Tr,g=[u.x*Tr,u.y*Tr],y=[];if(!o)return y;for(const M of o){const z=[];for(const E of M){const H=[E.x+g[0],E.y+g[1]];w2(a,H),z.push(H)}y.push(z)}if(a[2]-a[0]<=h/2){(x=a)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const M of y)for(const z of M)M4(z,a,c,h)}var x;return y}class Ua{constructor(a,c){this.type=It,this.geojson=a,this.geometries=c}static parse(a,c){if(2!==a.length)return c.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(z3(a[1])){const u=a[1];if("FeatureCollection"===u.type)for(let h=0;h<u.features.length;++h){const g=u.features[h].geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new Ua(u,u.features[h].geometry)}else if("Feature"===u.type){const h=u.geometry.type;if("Polygon"===h||"MultiPolygon"===h)return new Ua(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new Ua(u,u)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(null!=a.geometry()&&null!=a.canonicalID()){if("Point"===a.geometryType())return function(c,u){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=c.canonicalID();if(!y)return!1;if("Polygon"===u.type){const x=S3(u.coordinates,g,y),M=Hr(c.geometry(),h,g,y);if(!cs(h,g))return!1;for(const z of M)if(!ls(z,x))return!1}if("MultiPolygon"===u.type){const x=D3(u.coordinates,g,y),M=Hr(c.geometry(),h,g,y);if(!cs(h,g))return!1;for(const z of M)if(!w4(z,x))return!1}return!0}(a,this.geometries);if("LineString"===a.geometryType())return function(c,u){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=c.canonicalID();if(!y)return!1;if("Polygon"===u.type){const x=S3(u.coordinates,g,y),M=an(c.geometry(),h,g,y);if(!cs(h,g))return!1;for(const z of M)if(!us(z,x))return!1}if("MultiPolygon"===u.type){const x=D3(u.coordinates,g,y),M=an(c.geometry(),h,g,y);if(!cs(h,g))return!1;for(const z of M)if(!Tn(z,x))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var A3=Ua;function ec(o){if(o instanceof Ba&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof A3)return!1;let a=!0;return o.eachChild(c=>{a&&!ec(c)&&(a=!1)}),a}function ds(o){if(o instanceof Ba&&"feature-state"===o.name)return!1;let a=!0;return o.eachChild(c=>{a&&!ds(c)&&(a=!1)}),a}function Vo(o,a){if(o instanceof Ba&&a.indexOf(o.name)>=0)return!1;let c=!0;return o.eachChild(u=>{c&&!Vo(u,a)&&(c=!1)}),c}class ga{constructor(a,c){this.type=c.type,this.name=a,this.boundExpression=c}static parse(a,c){if(2!==a.length||"string"!=typeof a[1])return c.error("'var' expression requires exactly one string literal argument.");const u=a[1];return c.scope.has(u)?new ga(u,c.scope.get(u)):c.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var B2=ga;class Wc{constructor(a,c=[],u,h=new Jn,g=[]){this.registry=a,this.path=c,this.key=c.map(y=>`[${y}]`).join(""),this.scope=h,this.errors=g,this.expectedType=u}parse(a,c,u,h,g={}){return c?this.concat(c,u,h)._parse(a,g):this._parse(a,g)}_parse(a,c){function u(h,g,y){return"assert"===y?new Na(g,[h]):"coerce"===y?new l1(g,[h]):h}if(null!==a&&"string"!=typeof a&&"boolean"!=typeof a&&"number"!=typeof a||(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=a[0];if("string"!=typeof h)return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[h];if(g){let y=g.parse(a,this);if(!y)return null;if(this.expectedType){const x=this.expectedType,M=y.type;if("string"!==x.kind&&"number"!==x.kind&&"boolean"!==x.kind&&"object"!==x.kind&&"array"!==x.kind||"value"!==M.kind)if("color"!==x.kind&&"formatted"!==x.kind&&"resolvedImage"!==x.kind||"value"!==M.kind&&"string"!==M.kind){if(this.checkSubtype(x,M))return null}else y=u(y,x,c.typeAnnotation||"coerce");else y=u(y,x,c.typeAnnotation||"assert")}if(!(y instanceof as)&&"resolvedImage"!==y.type.kind&&_a(y)){const x=new ss;try{y=new as(y.type,y.evaluate(x))}catch(M){return this.error(M.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===a?"'undefined' value invalid. Use null instead.":"object"==typeof a?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,c,u){const h="number"==typeof a?this.path.concat(a):this.path,g=u?this.scope.concat(u):this.scope;return new Wc(this.registry,h,c||null,g,this.errors)}error(a,...c){const u=`${this.key}${c.map(h=>`[${h}]`).join("")}`;this.errors.push(new Kr(u,a))}checkSubtype(a,c){const u=hi(a,c);return u&&this.error(u),u}}var Ie=Wc;function _a(o){if(o instanceof B2)return _a(o.boundExpression);if(o instanceof Ba&&"error"===o.name||o instanceof Qs||o instanceof A3)return!1;const a=o instanceof l1||o instanceof Na;let c=!0;return o.eachChild(u=>{c=a?c&&_a(u):c&&u instanceof as}),!!c&&ec(o)&&Vo(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function r1(o,a){const c=o.length-1;let u,h,g=0,y=c,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),u=o[x],h=o[x+1],u<=a){if(x===c||a<h)return x;g=x+1}else{if(!(u>a))throw new Zi("Input is not a number.");y=x-1}return 0}class Lo{constructor(a,c,u){this.type=a,this.input=c,this.labels=[],this.outputs=[];for(const[h,g]of u)this.labels.push(h),this.outputs.push(g)}static parse(a,c){if(a.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");const u=c.parse(a[1],1,bt);if(!u)return null;const h=[];let g=null;c.expectedType&&"value"!==c.expectedType.kind&&(g=c.expectedType);for(let y=1;y<a.length;y+=2){const x=1===y?-1/0:a[y],M=a[y+1],z=y,E=y+1;if("number"!=typeof x)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(h.length&&h[h.length-1][0]>=x)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const H=c.parse(M,E,g);if(!H)return null;g=g||H.type,h.push([x,H])}return new Lo(g,u,h)}evaluate(a){const c=this.labels,u=this.outputs;if(1===c.length)return u[0].evaluate(a);const h=this.input.evaluate(a);if(h<=c[0])return u[0].evaluate(a);const g=c.length;return h>=c[g-1]?u[g-1].evaluate(a):u[r1(c,h)].evaluate(a)}eachChild(a){a(this.input);for(const c of this.outputs)a(c)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let c=0;c<this.labels.length;c++)c>0&&a.push(this.labels[c]),a.push(this.outputs[c].serialize());return a}}var tc=Lo;function N1(o,a,c){return o*(1-c)+a*c}var nc=Object.freeze({__proto__:null,number:N1,color:function(o,a,c){return new ti(N1(o.r,a.r,c),N1(o.g,a.g,c),N1(o.b,a.b,c),N1(o.a,a.a,c))},array:function(o,a,c){return o.map((u,h)=>N1(u,a[h],c))}});const z4=.95047,Zc=1.08883,ur=4/29,dr=6/29,U2=3*dr*dr,ea=Math.PI/180,bn=180/Math.PI;function To(o){return o>.008856451679035631?Math.pow(o,1/3):o/U2+ur}function Ho(o){return o>dr?o*o*o:U2*(o-ur)}function ko(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function fs(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function fr(o){const a=fs(o.r),c=fs(o.g),u=fs(o.b),h=To((.4124564*a+.3575761*c+.1804375*u)/z4),g=To((.2126729*a+.7151522*c+.072175*u)/1);return{l:116*g-16,a:500*(h-g),b:200*(g-To((.0193339*a+.119192*c+.9503041*u)/Zc)),alpha:o.a}}function hs(o){let a=(o.l+16)/116,c=isNaN(o.a)?a:a+o.a/500,u=isNaN(o.b)?a:a-o.b/200;return a=1*Ho(a),c=z4*Ho(c),u=Zc*Ho(u),new ti(ko(3.2404542*c-1.5371385*a-.4985314*u),ko(-.969266*c+1.8760108*a+.041556*u),ko(.0556434*c-.2040259*a+1.0572252*u),o.alpha)}function Zl(o,a,c){const u=a-o;return o+c*(u>180||u<-180?u-360*Math.round(u/360):u)}const Bt={forward:fr,reverse:hs,interpolate:function(o,a,c){return{l:N1(o.l,a.l,c),a:N1(o.a,a.a,c),b:N1(o.b,a.b,c),alpha:N1(o.alpha,a.alpha,c)}}},ja={forward:function(o){const{l:a,a:c,b:u}=fr(o),h=Math.atan2(u,c)*bn;return{h:h<0?h+360:h,c:Math.sqrt(c*c+u*u),l:a,alpha:o.a}},reverse:function(o){const a=o.h*ea,c=o.c;return hs({l:o.l,a:Math.cos(a)*c,b:Math.sin(a)*c,alpha:o.alpha})},interpolate:function(o,a,c){return{h:Zl(o.h,a.h,c),c:N1(o.c,a.c,c),l:N1(o.l,a.l,c),alpha:N1(o.alpha,a.alpha,c)}}};var S4=Object.freeze({__proto__:null,lab:Bt,hcl:ja});class ic{constructor(a,c,u,h,g){this.type=a,this.operator=c,this.interpolation=u,this.input=h,this.labels=[],this.outputs=[];for(const[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(a,c,u,h){let g=0;if("exponential"===a.name)g=g1(c,a.base,u,h);else if("linear"===a.name)g=g1(c,1,u,h);else if("cubic-bezier"===a.name){const y=a.controlPoints;g=new Zn(y[0],y[1],y[2],y[3]).solve(g1(c,1,u,h))}return g}static parse(a,c){let[u,h,g,...y]=a;if(!Array.isArray(h)||0===h.length)return c.error("Expected an interpolation type expression.",1);if("linear"===h[0])h={name:"linear"};else if("exponential"===h[0]){const z=h[1];if("number"!=typeof z)return c.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:z}}else{if("cubic-bezier"!==h[0])return c.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const z=h.slice(1);if(4!==z.length||z.some(E=>"number"!=typeof E||E<0||E>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:z}}}if(a.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(g=c.parse(g,2,bt),!g)return null;const x=[];let M=null;"interpolate-hcl"===u||"interpolate-lab"===u?M=lr:c.expectedType&&"value"!==c.expectedType.kind&&(M=c.expectedType);for(let z=0;z<y.length;z+=2){const E=y[z],H=y[z+1],I=z+3,N=z+4;if("number"!=typeof E)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(x.length&&x[x.length-1][0]>=E)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const O=c.parse(H,N,M);if(!O)return null;M=M||O.type,x.push([E,O])}return"number"===M.kind||"color"===M.kind||"array"===M.kind&&"number"===M.itemType.kind&&"number"==typeof M.N?new ic(M,u,h,g,x):c.error(`Type ${yn(M)} is not interpolatable.`)}evaluate(a){const c=this.labels,u=this.outputs;if(1===c.length)return u[0].evaluate(a);const h=this.input.evaluate(a);if(h<=c[0])return u[0].evaluate(a);const g=c.length;if(h>=c[g-1])return u[g-1].evaluate(a);const y=r1(c,h),x=ic.interpolationFactor(this.interpolation,h,c[y],c[y+1]),M=u[y].evaluate(a),z=u[y+1].evaluate(a);return"interpolate"===this.operator?nc[this.type.kind.toLowerCase()](M,z,x):"interpolate-hcl"===this.operator?ja.reverse(ja.interpolate(ja.forward(M),ja.forward(z),x)):Bt.reverse(Bt.interpolate(Bt.forward(M),Bt.forward(z),x))}eachChild(a){a(this.input);for(const c of this.outputs)a(c)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const c=[this.operator,a,this.input.serialize()];for(let u=0;u<this.labels.length;u++)c.push(this.labels[u],this.outputs[u].serialize());return c}}function g1(o,a,c,u){const h=u-c,g=o-c;return 0===h?0:1===a?g/h:(Math.pow(a,g)-1)/(Math.pow(a,h)-1)}var ta=ic;class rc{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expectected at least one argument.");let u=null;const h=c.expectedType;h&&"value"!==h.kind&&(u=h);const g=[];for(const x of a.slice(1)){const M=c.parse(x,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!M)return null;u=u||M.type,g.push(M)}const y=h&&g.some(x=>hi(h,x.type));return new rc(y?w1:u,g)}evaluate(a){let c,u=null,h=0;for(const g of this.args){if(h++,u=g.evaluate(a),u&&u instanceof C2&&!u.available&&(c||(c=u),u=null,h===this.args.length))return c;if(null!==u)break}return u}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(c=>{a.push(c.serialize())}),a}}var je=rc;class Mi{constructor(a,c){this.type=c.type,this.bindings=[].concat(a),this.result=c}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const c of this.bindings)a(c[1]);a(this.result)}static parse(a,c){if(a.length<4)return c.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const u=[];for(let g=1;g<a.length-1;g+=2){const y=a[g];if("string"!=typeof y)return c.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return c.error("Variable names must contain only alphanumeric characters or '_'.",g);const x=c.parse(a[g+1],g+1);if(!x)return null;u.push([y,x])}const h=c.parse(a[a.length-1],a.length-1,c.expectedType,u);return h?new Mi(u,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[c,u]of this.bindings)a.push(c,u.serialize());return a.push(this.result.serialize()),a}}var xn=Mi;class mi{constructor(a,c,u){this.type=a,this.index=c,this.input=u}static parse(a,c){if(3!==a.length)return c.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,bt),h=c.parse(a[2],2,ei(c.expectedType||w1));return u&&h?new mi(h.type.itemType,u,h):null}evaluate(a){const c=this.index.evaluate(a),u=this.input.evaluate(a);if(c<0)throw new Zi(`Array index out of bounds: ${c} < 0.`);if(c>=u.length)throw new Zi(`Array index out of bounds: ${c} > ${u.length-1}.`);if(c!==Math.floor(c))throw new Zi(`Array index must be an integer, but found ${c} instead.`);return u[c]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var u2=mi;class va{constructor(a,c){this.type=It,this.needle=a,this.haystack=c}static parse(a,c){if(3!==a.length)return c.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,w1),h=c.parse(a[2],2,w1);return u&&h?rt(u.type,[It,D1,bt,Ci,w1])?new va(u,h):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${yn(u.type)} instead`):null}evaluate(a){const c=this.needle.evaluate(a),u=this.haystack.evaluate(a);if(null==u)return!1;if(!Qr(c,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${yn(pi(c))} instead.`);if(!Qr(u,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${yn(pi(u))} instead.`);return u.indexOf(c)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var z2=va;class ps{constructor(a,c,u){this.type=bt,this.needle=a,this.haystack=c,this.fromIndex=u}static parse(a,c){if(a.length<=2||a.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,w1),h=c.parse(a[2],2,w1);if(!u||!h)return null;if(!rt(u.type,[It,D1,bt,Ci,w1]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${yn(u.type)} instead`);if(4===a.length){const g=c.parse(a[3],3,bt);return g?new ps(u,h,g):null}return new ps(u,h)}evaluate(a){const c=this.needle.evaluate(a),u=this.haystack.evaluate(a);if(!Qr(c,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${yn(pi(c))} instead.`);if(!Qr(u,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${yn(pi(u))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(a);return u.indexOf(c,h)}return u.indexOf(c)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var E3=ps;class Io{constructor(a,c,u,h,g,y){this.inputType=a,this.type=c,this.input=u,this.cases=h,this.outputs=g,this.otherwise=y}static parse(a,c){if(a.length<5)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return c.error("Expected an even number of arguments.");let u,h;c.expectedType&&"value"!==c.expectedType.kind&&(h=c.expectedType);const g={},y=[];for(let z=2;z<a.length-1;z+=2){let E=a[z];const H=a[z+1];Array.isArray(E)||(E=[E]);const I=c.concat(z);if(0===E.length)return I.error("Expected at least one branch label.");for(const O of E){if("number"!=typeof O&&"string"!=typeof O)return I.error("Branch labels must be numbers or strings.");if("number"==typeof O&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof O&&Math.floor(O)!==O)return I.error("Numeric branch labels must be integer values.");if(u){if(I.checkSubtype(u,pi(O)))return null}else u=pi(O);if(void 0!==g[String(O)])return I.error("Branch labels must be unique.");g[String(O)]=y.length}const N=c.parse(H,z,h);if(!N)return null;h=h||N.type,y.push(N)}const x=c.parse(a[1],1,w1);if(!x)return null;const M=c.parse(a[a.length-1],a.length-1,h);return M?"value"!==x.type.kind&&c.concat(1).checkSubtype(u,x.type)?null:new Io(u,h,x,g,y,M):null}evaluate(a){const c=this.input.evaluate(a);return(pi(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],c=Object.keys(this.cases).sort(),u=[],h={};for(const y of c){const x=h[this.cases[y]];void 0===x?(h[this.cases[y]]=u.length,u.push([this.cases[y],[y]])):u[x][1].push(y)}const g=y=>"number"===this.inputType.kind?Number(y):y;for(const[y,x]of u)a.push(1===x.length?g(x[0]):x.map(g)),a.push(this.outputs[y].serialize());return a.push(this.otherwise.serialize()),a}}var kr=Io;class kt{constructor(a,c,u){this.type=a,this.branches=c,this.otherwise=u}static parse(a,c){if(a.length<4)return c.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return c.error("Expected an odd number of arguments.");let u;c.expectedType&&"value"!==c.expectedType.kind&&(u=c.expectedType);const h=[];for(let y=1;y<a.length-1;y+=2){const x=c.parse(a[y],y,It);if(!x)return null;const M=c.parse(a[y+1],y+1,u);if(!M)return null;h.push([x,M]),u=u||M.type}const g=c.parse(a[a.length-1],a.length-1,u);return g?new kt(u,h,g):null}evaluate(a){for(const[c,u]of this.branches)if(c.evaluate(a))return u.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[c,u]of this.branches)a(c),a(u);a(this.otherwise)}outputDefined(){return this.branches.every(([a,c])=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(c=>{a.push(c.serialize())}),a}}var B1=kt;class Hn{constructor(a,c,u,h){this.type=a,this.input=c,this.beginIndex=u,this.endIndex=h}static parse(a,c){if(a.length<=2||a.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const u=c.parse(a[1],1,w1),h=c.parse(a[2],2,bt);if(!u||!h)return null;if(!rt(u.type,[ei(w1),D1,w1]))return c.error(`Expected first argument to be of type array or string, but found ${yn(u.type)} instead`);if(4===a.length){const g=c.parse(a[3],3,bt);return g?new Hn(u.type,u,h,g):null}return new Hn(u.type,u,h)}evaluate(a){const c=this.input.evaluate(a),u=this.beginIndex.evaluate(a);if(!Qr(c,["string","array"]))throw new Zi(`Expected first argument to be of type array or string, but found ${yn(pi(c))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(a);return c.slice(u,h)}return c.slice(u)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var hr=Hn;function na(o,a){return"=="===o||"!="===o?"boolean"===a.kind||"string"===a.kind||"number"===a.kind||"null"===a.kind||"value"===a.kind:"string"===a.kind||"number"===a.kind||"value"===a.kind}function Ti(o,a,c,u){return 0===u.compare(a,c)}function Ir(o,a,c){const u="=="!==o&&"!="!==o;return class eU{constructor(g,y,x){this.type=It,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument="value"===g.type.kind||"value"===y.type.kind}static parse(g,y){if(3!==g.length&&4!==g.length)return y.error("Expected two or three arguments.");const x=g[0];let M=y.parse(g[1],1,w1);if(!M)return null;if(!na(x,M.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${yn(M.type)}'.`);let z=y.parse(g[2],2,w1);if(!z)return null;if(!na(x,z.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${yn(z.type)}'.`);if(M.type.kind!==z.type.kind&&"value"!==M.type.kind&&"value"!==z.type.kind)return y.error(`Cannot compare types '${yn(M.type)}' and '${yn(z.type)}'.`);u&&("value"===M.type.kind&&"value"!==z.type.kind?M=new Na(z.type,[M]):"value"!==M.type.kind&&"value"===z.type.kind&&(z=new Na(M.type,[z])));let E=null;if(4===g.length){if("string"!==M.type.kind&&"string"!==z.type.kind&&"value"!==M.type.kind&&"value"!==z.type.kind)return y.error("Cannot use collator to compare non-string types.");if(E=y.parse(g[3],3,ns),!E)return null}return new eU(M,z,E)}evaluate(g){const y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const M=pi(y),z=pi(x);if(M.kind!==z.kind||"string"!==M.kind&&"number"!==M.kind)throw new Zi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${M.kind}, ${z.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const M=pi(y),z=pi(x);if("string"!==M.kind||"string"!==z.kind)return a(g,y,x)}return this.collator?c(g,y,x,this.collator.evaluate(g)):a(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[o];return this.eachChild(y=>{g.push(y.serialize())}),g}}}const ai=Ir("==",function(o,a,c){return a===c},Ti),ac=Ir("!=",function(o,a,c){return a!==c},function(o,a,c,u){return!Ti(0,a,c,u)}),oc=Ir("<",function(o,a,c){return a<c},function(o,a,c,u){return u.compare(a,c)<0}),U1=Ir(">",function(o,a,c){return a>c},function(o,a,c,u){return u.compare(a,c)>0}),sc=Ir("<=",function(o,a,c){return a<=c},function(o,a,c,u){return u.compare(a,c)<=0}),cc=Ir(">=",function(o,a,c){return a>=c},function(o,a,c,u){return u.compare(a,c)>=0});class Yc{constructor(a,c,u,h,g,y){this.type=D1,this.number=a,this.locale=c,this.currency=u,this.unit=h,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(a,c){if(3!==a.length)return c.error("Expected two arguments.");const u=c.parse(a[1],1,bt);if(!u)return null;const h=a[2];if("object"!=typeof h||Array.isArray(h))return c.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=c.parse(h.locale,1,D1),!g))return null;let y=null;if(h.currency&&(y=c.parse(h.currency,1,D1),!y))return null;let x=null;if(h.unit&&(x=c.parse(h.unit,1,D1),!x))return null;let M=null;if(h["min-fraction-digits"]&&(M=c.parse(h["min-fraction-digits"],1,bt),!M))return null;let z=null;return h["max-fraction-digits"]&&(z=c.parse(h["max-fraction-digits"],1,bt),!z)?null:new Yc(u,g,y,x,M,z)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class S2{constructor(a){this.type=bt,this.input=a}static parse(a,c){if(2!==a.length)return c.error(`Expected 1 argument, but found ${a.length-1} instead.`);const u=c.parse(a[1],1);return u?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?c.error(`Expected argument of type string or array, but found ${yn(u.type)} instead.`):new S2(u):null}evaluate(a){const c=this.input.evaluate(a);if("string"==typeof c||Array.isArray(c))return c.length;throw new Zi(`Expected value to be of type string or array, but found ${yn(pi(c))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(c=>{a.push(c.serialize())}),a}}const zi={"==":ai,"!=":ac,">":U1,"<":oc,">=":cc,"<=":sc,array:Na,at:u2,boolean:Na,case:B1,coalesce:je,collator:Qs,format:qc,image:Eo,in:z2,"index-of":E3,interpolate:ta,"interpolate-hcl":ta,"interpolate-lab":ta,length:S2,let:xn,literal:as,match:kr,number:Na,"number-format":Yc,object:Na,slice:hr,step:tc,string:Na,"to-boolean":l1,"to-color":l1,"to-number":l1,"to-string":l1,var:B2,within:A3};function ms(o,[a,c,u,h]){a=a.evaluate(o),c=c.evaluate(o),u=u.evaluate(o);const g=h?h.evaluate(o):1,y=Wl(a,c,u,g);if(y)throw new Zi(y);return new ti(a/255*g,c/255*g,u/255*g,g)}function Ga(o,a){return o in a}function pr(o,a){const c=a[o];return void 0===c?null:c}function mr(o){return{type:o}}Ba.register(zi,{error:[{kind:"error"},[D1],(o,[a])=>{throw new Zi(a.evaluate(o))}],typeof:[D1,[w1],(o,[a])=>yn(pi(a.evaluate(o)))],"to-rgba":[ei(bt,4),[lr],(o,[a])=>a.evaluate(o).toArray()],rgb:[lr,[bt,bt,bt],ms],rgba:[lr,[bt,bt,bt,bt],ms],has:{type:It,overloads:[[[D1],(o,[a])=>Ga(a.evaluate(o),o.properties())],[[D1,vn],(o,[a,c])=>Ga(a.evaluate(o),c.evaluate(o))]]},get:{type:w1,overloads:[[[D1],(o,[a])=>pr(a.evaluate(o),o.properties())],[[D1,vn],(o,[a,c])=>pr(a.evaluate(o),c.evaluate(o))]]},"feature-state":[w1,[D1],(o,[a])=>pr(a.evaluate(o),o.featureState||{})],properties:[vn,[],o=>o.properties()],"geometry-type":[D1,[],o=>o.geometryType()],id:[w1,[],o=>o.id()],zoom:[bt,[],o=>o.globals.zoom],pitch:[bt,[],o=>o.globals.pitch||0],"distance-from-center":[bt,[],o=>o.distanceFromCenter()],"heatmap-density":[bt,[],o=>o.globals.heatmapDensity||0],"line-progress":[bt,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[bt,[],o=>o.globals.skyRadialProgress||0],accumulated:[w1,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[bt,mr(bt),(o,a)=>{let c=0;for(const u of a)c+=u.evaluate(o);return c}],"*":[bt,mr(bt),(o,a)=>{let c=1;for(const u of a)c*=u.evaluate(o);return c}],"-":{type:bt,overloads:[[[bt,bt],(o,[a,c])=>a.evaluate(o)-c.evaluate(o)],[[bt],(o,[a])=>-a.evaluate(o)]]},"/":[bt,[bt,bt],(o,[a,c])=>a.evaluate(o)/c.evaluate(o)],"%":[bt,[bt,bt],(o,[a,c])=>a.evaluate(o)%c.evaluate(o)],ln2:[bt,[],()=>Math.LN2],pi:[bt,[],()=>Math.PI],e:[bt,[],()=>Math.E],"^":[bt,[bt,bt],(o,[a,c])=>Math.pow(a.evaluate(o),c.evaluate(o))],sqrt:[bt,[bt],(o,[a])=>Math.sqrt(a.evaluate(o))],log10:[bt,[bt],(o,[a])=>Math.log(a.evaluate(o))/Math.LN10],ln:[bt,[bt],(o,[a])=>Math.log(a.evaluate(o))],log2:[bt,[bt],(o,[a])=>Math.log(a.evaluate(o))/Math.LN2],sin:[bt,[bt],(o,[a])=>Math.sin(a.evaluate(o))],cos:[bt,[bt],(o,[a])=>Math.cos(a.evaluate(o))],tan:[bt,[bt],(o,[a])=>Math.tan(a.evaluate(o))],asin:[bt,[bt],(o,[a])=>Math.asin(a.evaluate(o))],acos:[bt,[bt],(o,[a])=>Math.acos(a.evaluate(o))],atan:[bt,[bt],(o,[a])=>Math.atan(a.evaluate(o))],min:[bt,mr(bt),(o,a)=>Math.min(...a.map(c=>c.evaluate(o)))],max:[bt,mr(bt),(o,a)=>Math.max(...a.map(c=>c.evaluate(o)))],abs:[bt,[bt],(o,[a])=>Math.abs(a.evaluate(o))],round:[bt,[bt],(o,[a])=>{const c=a.evaluate(o);return c<0?-Math.round(-c):Math.round(c)}],floor:[bt,[bt],(o,[a])=>Math.floor(a.evaluate(o))],ceil:[bt,[bt],(o,[a])=>Math.ceil(a.evaluate(o))],"filter-==":[It,[D1,w1],(o,[a,c])=>o.properties()[a.value]===c.value],"filter-id-==":[It,[w1],(o,[a])=>o.id()===a.value],"filter-type-==":[It,[D1],(o,[a])=>o.geometryType()===a.value],"filter-<":[It,[D1,w1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u<h}],"filter-id-<":[It,[w1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c<u}],"filter->":[It,[D1,w1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u>h}],"filter-id->":[It,[w1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c>u}],"filter-<=":[It,[D1,w1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u<=h}],"filter-id-<=":[It,[w1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c<=u}],"filter->=":[It,[D1,w1],(o,[a,c])=>{const u=o.properties()[a.value],h=c.value;return typeof u==typeof h&&u>=h}],"filter-id->=":[It,[w1],(o,[a])=>{const c=o.id(),u=a.value;return typeof c==typeof u&&c>=u}],"filter-has":[It,[w1],(o,[a])=>a.value in o.properties()],"filter-has-id":[It,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[It,[ei(D1)],(o,[a])=>a.value.indexOf(o.geometryType())>=0],"filter-id-in":[It,[ei(w1)],(o,[a])=>a.value.indexOf(o.id())>=0],"filter-in-small":[It,[D1,ei(w1)],(o,[a,c])=>c.value.indexOf(o.properties()[a.value])>=0],"filter-in-large":[It,[D1,ei(w1)],(o,[a,c])=>function(u,h,g,y){for(;g<=y;){const x=g+y>>1;if(h[x]===u)return!0;h[x]>u?y=x-1:g=x+1}return!1}(o.properties()[a.value],c.value,0,c.value.length-1)],all:{type:It,overloads:[[[It,It],(o,[a,c])=>a.evaluate(o)&&c.evaluate(o)],[mr(It),(o,a)=>{for(const c of a)if(!c.evaluate(o))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(o,[a,c])=>a.evaluate(o)||c.evaluate(o)],[mr(It),(o,a)=>{for(const c of a)if(c.evaluate(o))return!0;return!1}]]},"!":[It,[It],(o,[a])=>!a.evaluate(o)],"is-supported-script":[It,[D1],(o,[a])=>{const c=o.globals&&o.globals.isSupportedScript;return!c||c(a.evaluate(o))}],upcase:[D1,[D1],(o,[a])=>a.evaluate(o).toUpperCase()],downcase:[D1,[D1],(o,[a])=>a.evaluate(o).toLowerCase()],concat:[D1,mr(w1),(o,a)=>a.map(c=>Ks(c.evaluate(o))).join("")],"resolved-locale":[D1,[ns],(o,[a])=>a.evaluate(o).resolvedLocale()]});var Ro=zi;function Dn(o){return{result:"success",value:o}}function lc(o){return{result:"error",value:o}}function $a(o){return"data-driven"===o["property-type"]}function ia(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Yi(o){return!!o.expression&&o.expression.interpolated}function _1(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function ya(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function d2(o){return o}function D4(o,a){const c="color"===a.type,u=o.stops&&"object"==typeof o.stops[0][0],h=u||!(u||void 0!==o.property),g=o.type||(Yi(a)?"exponential":"interval");if(c&&((o=ma({},o)).stops&&(o.stops=o.stops.map(z=>[z[0],ti.parse(z[1])])),o.default=ti.parse(o.default?o.default:a.default)),o.colorSpace&&"rgb"!==o.colorSpace&&!S4[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let y,x,M;if("exponential"===g)y=qa;else if("interval"===g)y=Xc;else if("categorical"===g){y=j2,x=Object.create(null);for(const z of o.stops)x[z[0]]=z[1];M=typeof o.stops[0][0]}else{if("identity"!==g)throw new Error(`Unknown function type "${g}"`);y=Wa}if(u){const z={},E=[];for(let N=0;N<o.stops.length;N++){const O=o.stops[N],j=O[0].zoom;void 0===z[j]&&(z[j]={zoom:j,type:o.type,property:o.property,default:o.default,stops:[]},E.push(j)),z[j].stops.push([O[0].value,O[1]])}const H=[];for(const N of E)H.push([z[N].zoom,D4(z[N],a)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:ta.interpolationFactor.bind(void 0,I),zoomStops:H.map(N=>N[0]),evaluate:({zoom:N},O)=>qa({stops:H,base:o.base},a,N).evaluate(N,O)}}if(h){const z="exponential"===g?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:ta.interpolationFactor.bind(void 0,z),zoomStops:o.stops.map(E=>E[0]),evaluate:({zoom:E})=>y(o,a,E,x,M)}}return{kind:"source",evaluate(z,E){const H=E&&E.properties?E.properties[o.property]:void 0;return void 0===H?Hi(o.default,a.default):y(o,a,H,x,M)}}}function Hi(o,a,c){return void 0!==o?o:void 0!==a?a:void 0!==c?c:void 0}function j2(o,a,c,u,h){return Hi(typeof c===h?u[c]:void 0,o.default,a.default)}function Xc(o,a,c){if("number"!==_1(c))return Hi(o.default,a.default);const u=o.stops.length;if(1===u||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[u-1][0])return o.stops[u-1][1];const h=r1(o.stops.map(g=>g[0]),c);return o.stops[h][1]}function qa(o,a,c){const u=void 0!==o.base?o.base:1;if("number"!==_1(c))return Hi(o.default,a.default);const h=o.stops.length;if(1===h||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[h-1][0])return o.stops[h-1][1];const g=r1(o.stops.map(E=>E[0]),c),y=function(E,H,I,N){const O=N-I,j=E-I;return 0===O?0:1===H?j/O:(Math.pow(H,j)-1)/(Math.pow(H,O)-1)}(c,u,o.stops[g][0],o.stops[g+1][0]),x=o.stops[g][1],M=o.stops[g+1][1];let z=nc[a.type]||d2;if(o.colorSpace&&"rgb"!==o.colorSpace){const E=S4[o.colorSpace];z=(H,I)=>E.reverse(E.interpolate(E.forward(H),E.forward(I),y))}return"function"==typeof x.evaluate?{evaluate(...E){const H=x.evaluate.apply(void 0,E),I=M.evaluate.apply(void 0,E);if(void 0!==H&&void 0!==I)return z(H,I,y)}}:z(x,M,y)}function Wa(o,a,c){return"color"===a.type?c=ti.parse(c):"formatted"===a.type?c=ri.fromString(c.toString()):"resolvedImage"===a.type?c=C2.fromString(c.toString()):_1(c)===a.type||"enum"===a.type&&a.values[c]||(c=void 0),Hi(c,o.default,a.default)}class T{constructor(a,c){var u;this.expression=a,this._warningHistory={},this._evaluator=new ss,this._defaultValue=c?"color"===(u=c).type&&(ya(u.default)||Array.isArray(u.default))?new ti(0,0,0,0):"color"===u.type?ti.parse(u.default)||null:void 0===u.default?null:u.default:null,this._enumValues=c&&"enum"===c.type?c.values:null}evaluateWithoutErrorHandling(a,c,u,h,g,y,x,M){return this._evaluator.globals=a,this._evaluator.feature=c,this._evaluator.featureState=u,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=M||null,this.expression.evaluate(this._evaluator)}evaluate(a,c,u,h,g,y,x,M){this._evaluator.globals=a,this._evaluator.feature=c||null,this._evaluator.featureState=u||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=M||null;try{const z=this.expression.evaluate(this._evaluator);if(null==z||"number"==typeof z&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new Zi(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console<"u"&&console.warn(z.message)),this._defaultValue}}}function k(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in Ro}function $(o,a){const c=new Ie(Ro,[],a?function(h){const g={color:lr,string:D1,number:bt,enum:D1,boolean:It,formatted:rn,resolvedImage:n1};return"array"===h.type?ei(g[h.value]||w1,h.length):g[h.type]}(a):void 0),u=c.parse(o,void 0,void 0,void 0,a&&"string"===a.type?{typeAnnotation:"coerce"}:void 0);return u?Dn(new T(u,a)):lc(c.errors)}class ge{constructor(a,c){this.kind=a,this._styleExpression=c,this.isStateDependent="constant"!==a&&!ds(c.expression)}evaluateWithoutErrorHandling(a,c,u,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(a,c,u,h,g,y)}evaluate(a,c,u,h,g,y){return this._styleExpression.evaluate(a,c,u,h,g,y)}}class Je{constructor(a,c,u,h){this.kind=a,this.zoomStops=u,this._styleExpression=c,this.isStateDependent="camera"!==a&&!ds(c.expression),this.interpolationType=h}evaluateWithoutErrorHandling(a,c,u,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(a,c,u,h,g,y)}evaluate(a,c,u,h,g,y){return this._styleExpression.evaluate(a,c,u,h,g,y)}interpolationFactor(a,c,u){return this.interpolationType?ta.interpolationFactor(this.interpolationType,a,c,u):0}}function Zt(o,a){if("error"===(o=$(o,a)).result)return o;const c=o.value.expression,u=ec(c);if(!u&&!$a(a))return lc([new Kr("","data expressions not supported")]);const h=Vo(c,["zoom","pitch","distance-from-center"]);if(!h&&!ia(a))return lc([new Kr("","zoom expressions not supported")]);const g=Xi(c);return g||h?g instanceof Kr?lc([g]):g instanceof ta&&!Yi(a)?lc([new Kr("",'"interpolate" expressions cannot be used with this property')]):Dn(g?new Je(u?"camera":"composite",o.value,g.labels,g instanceof ta?g.interpolation:void 0):new ge(u?"constant":"source",o.value)):lc([new Kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class An{constructor(a,c){this._parameters=a,this._specification=c,ma(this,D4(this._parameters,this._specification))}static deserialize(a){return new An(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Xi(o){let a=null;if(o instanceof xn)a=Xi(o.result);else if(o instanceof je){for(const c of o.args)if(a=Xi(c),a)break}else(o instanceof tc||o instanceof ta)&&o.input instanceof Ba&&"zoom"===o.input.name&&(a=o);return a instanceof Kr||o.eachChild(c=>{const u=Xi(c);u instanceof Kr?a=u:!a&&u?a=new Kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&u&&a!==u&&(a=new Kr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}class _t{constructor(a,c,u,h){this.message=(a?`${a}: `:"")+u,h&&(this.identifier=h),null!=c&&c.__line__&&(this.line=c.__line__)}}function Ki(o){const a=o.key,c=o.value,u=o.valueSpec||{},h=o.objectElementValidators||{},g=o.style,y=o.styleSpec;let x=[];const M=_1(c);if("object"!==M)return[new _t(a,c,`object expected, ${M} found`)];for(const z in c){const E=z.split(".")[0];let I;h[E]?I=h[E]:u[E]?I=Fn:h["*"]?I=h["*"]:u["*"]&&(I=Fn),I?x=x.concat(I({key:(a&&`${a}.`)+z,value:c[z],valueSpec:u[E]||u["*"],style:g,styleSpec:y,object:c,objectKey:z},c)):x.push(new _t(a,c[z],`unknown property "${z}"`))}for(const z in u)h[z]||u[z].required&&void 0===u[z].default&&void 0===c[z]&&x.push(new _t(a,c,`missing required property "${z}"`));return x}function V3(o){const a=o.value,c=o.valueSpec,u=o.style,h=o.styleSpec,g=o.key,y=o.arrayElementValidator||Fn;if("array"!==_1(a))return[new _t(g,a,`array expected, ${_1(a)} found`)];if(c.length&&a.length!==c.length)return[new _t(g,a,`array length ${c.length} expected, length ${a.length} found`)];if(c["min-length"]&&a.length<c["min-length"])return[new _t(g,a,`array length at least ${c["min-length"]} expected, length ${a.length} found`)];let x={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};h.$version<7&&(x.function=c.function),"object"===_1(c.value)&&(x=c.value);let M=[];for(let z=0;z<a.length;z++)M=M.concat(y({array:a,arrayIndex:z,value:a[z],valueSpec:x,style:u,styleSpec:h,key:`${g}[${z}]`}));return M}function h6(o){const a=o.key,c=o.value,u=o.valueSpec;let h=_1(c);if("number"===h&&c!=c&&(h="NaN"),"number"!==h)return[new _t(a,c,`number expected, ${h} found`)];if("minimum"in u){let g=u.minimum;if("array"===_1(u.minimum)&&(g=u.minimum[o.arrayIndex]),c<g)return[new _t(a,c,`${c} is less than the minimum value ${g}`)]}if("maximum"in u){let g=u.maximum;if("array"===_1(u.maximum)&&(g=u.maximum[o.arrayIndex]),c>g)return[new _t(a,c,`${c} is greater than the maximum value ${g}`)]}return[]}function A4(o){const a=o.valueSpec,c=Qn(o.value.type);let u,h,g,y={};const x="categorical"!==c&&void 0===o.value.property,M=!x,z="array"===_1(o.value.stops)&&"array"===_1(o.value.stops[0])&&"object"===_1(o.value.stops[0][0]),E=Ki({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(N){if("identity"===c)return[new _t(N.key,N.value,'identity function may not have a "stops" property')];let O=[];const j=N.value;return O=O.concat(V3({key:N.key,value:j,valueSpec:N.valueSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:H})),"array"===_1(j)&&0===j.length&&O.push(new _t(N.key,j,"array must have at least one stop")),O},default:function(N){return Fn({key:N.key,value:N.value,valueSpec:a,style:N.style,styleSpec:N.styleSpec})}}});return"identity"===c&&x&&E.push(new _t(o.key,o.value,'missing required property "property"')),"identity"===c||o.value.stops||E.push(new _t(o.key,o.value,'missing required property "stops"')),"exponential"===c&&o.valueSpec.expression&&!Yi(o.valueSpec)&&E.push(new _t(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(M&&!$a(o.valueSpec)?E.push(new _t(o.key,o.value,"property functions not supported")):x&&!ia(o.valueSpec)&&E.push(new _t(o.key,o.value,"zoom functions not supported"))),"categorical"!==c&&!z||void 0!==o.value.property||E.push(new _t(o.key,o.value,'"property" property is required')),E;function H(N){let O=[];const j=N.value,X=N.key;if("array"!==_1(j))return[new _t(X,j,`array expected, ${_1(j)} found`)];if(2!==j.length)return[new _t(X,j,`array length 2 expected, length ${j.length} found`)];if(z){if("object"!==_1(j[0]))return[new _t(X,j,`object expected, ${_1(j[0])} found`)];if(void 0===j[0].zoom)return[new _t(X,j,"object stop key must have zoom")];if(void 0===j[0].value)return[new _t(X,j,"object stop key must have value")];const ae=Qn(j[0].zoom);if("number"!=typeof ae)return[new _t(X,j[0].zoom,"stop zoom values must be numbers")];if(g&&g>ae)return[new _t(X,j[0].zoom,"stop zoom values must appear in ascending order")];ae!==g&&(g=ae,h=void 0,y={}),O=O.concat(Ki({key:`${X}[0]`,value:j[0],valueSpec:{zoom:{}},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:h6,value:I}}))}else O=O.concat(I({key:`${X}[0]`,value:j[0],valueSpec:{},style:N.style,styleSpec:N.styleSpec},j));return k(Fa(j[1]))?O.concat([new _t(`${X}[1]`,j[1],"expressions are not allowed in function stops.")]):O.concat(Fn({key:`${X}[1]`,value:j[1],valueSpec:a,style:N.style,styleSpec:N.styleSpec}))}function I(N,O){const j=_1(N.value),X=Qn(N.value),ae=null!==N.value?N.value:O;if(u){if(j!==u)return[new _t(N.key,ae,`${j} stop domain type must match previous stop domain type ${u}`)]}else u=j;if("number"!==j&&"string"!==j&&"boolean"!==j&&"number"!=typeof X&&"string"!=typeof X&&"boolean"!=typeof X)return[new _t(N.key,ae,"stop domain value must be a number, string, or boolean")];if("number"!==j&&"categorical"!==c){let me=`number expected, ${j} found`;return $a(a)&&void 0===c&&(me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _t(N.key,ae,me)]}return"categorical"!==c||"number"!==j||"number"==typeof X&&isFinite(X)&&Math.floor(X)===X?"categorical"!==c&&"number"===j&&"number"==typeof X&&"number"==typeof h&&void 0!==h&&X<h?[new _t(N.key,ae,"stop domain values must appear in ascending order")]:(h=X,"categorical"===c&&X in y?[new _t(N.key,ae,"stop domain values must be unique")]:(y[X]=!0,[])):[new _t(N.key,ae,`integer expected, found ${String(X)}`)]}}function L3(o){const a=("property"===o.expressionContext?Zt:$)(Fa(o.value),o.valueSpec);if("error"===a.result)return a.value.map(u=>new _t(`${o.key}${u.key}`,o.value,u.message));const c=a.value.expression||a.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!c.outputDefined())return[new _t(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!ds(c))return[new _t(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext)return m5(c,o);if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!Vo(c,["zoom","feature-state"]))return[new _t(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!ec(c))return[new _t(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function m5(o,a){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const h of a.valueSpec.expression.parameters)c.delete(h);if(0===c.size)return[];const u=[];return o instanceof Ba&&c.has(o.name)?[new _t(a.key,a.value,`["${o.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(o.eachChild(h=>{u.push(...m5(h,a))}),u)}function Yl(o){const a=o.key,c=o.value,u=o.valueSpec,h=[];return Array.isArray(u.values)?-1===u.values.indexOf(Qn(c))&&h.push(new _t(a,c,`expected one of [${u.values.join(", ")}], ${JSON.stringify(c)} found`)):-1===Object.keys(u.values).indexOf(Qn(c))&&h.push(new _t(a,c,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(c)} found`)),h}function p6(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const a of o.slice(1))if(!p6(a)&&"boolean"!=typeof a)return!1;return!0;default:return!0}}function T3(o,a="fill"){if(null==o)return{filter:()=>!0,needGeometry:!1,needFeature:!1};p6(o)||(o=wn(o));const c=o;let u=!0;try{u=function(z){if(!f2(z))return z;let E=Fa(z);return E4(E),E=Kc(E),E}(c)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(c,null,2)}\n        `)}const h=qe[`filter_${a}`],g=$(u,h);let y=null;if("error"===g.result)throw new Error(g.value.map(z=>`${z.key}: ${z.message}`).join(", "));y=(z,E,H)=>g.value.evaluate(z,E,{},H);let x=null,M=null;if(u!==c){const z=$(c,h);if("error"===z.result)throw new Error(z.value.map(E=>`${E.key}: ${E.message}`).join(", "));x=(E,H,I,N,O)=>z.value.evaluate(E,H,{},I,void 0,void 0,N,O),M=!ec(z.value.expression)}return{filter:y,dynamicFilter:x||void 0,needGeometry:m6(u),needFeature:!!M}}function Kc(o){if(!Array.isArray(o))return o;const a=function(c){if(Xl.has(c[0]))for(let u=1;u<c.length;u++)if(f2(c[u]))return!0;return c}(o);return!0===a?a:a.map(c=>Kc(c))}function E4(o){let a=!1;const c=[];if("case"===o[0]){for(let u=1;u<o.length-1;u+=2)a=a||f2(o[u]),c.push(o[u+1]);c.push(o[o.length-1])}else if("match"===o[0]){a=a||f2(o[1]);for(let u=2;u<o.length-1;u+=2)c.push(o[u+1]);c.push(o[o.length-1])}else if("step"===o[0]){a=a||f2(o[1]);for(let u=1;u<o.length-1;u+=2)c.push(o[u+1])}a&&(o.length=0,o.push("any",...c));for(let u=1;u<o.length;u++)E4(o[u])}function f2(o){if(!Array.isArray(o))return!1;if("pitch"===(a=o[0])||"distance-from-center"===a)return!0;var a;for(let c=1;c<o.length;c++)if(f2(o[c]))return!0;return!1}const Xl=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function uc(o,a){return o<a?-1:o>a?1:0}function m6(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let a=1;a<o.length;a++)if(m6(o[a]))return!0;return!1}function wn(o){if(!o)return!0;const a=o[0];return o.length<=1?"any"!==a:"=="===a?V4(o[1],o[2],"=="):"!="===a?dc(V4(o[1],o[2],"==")):"<"===a||">"===a||"<="===a||">="===a?V4(o[1],o[2],a):"any"===a?(c=o.slice(1),["any"].concat(c.map(wn))):"all"===a?["all"].concat(o.slice(1).map(wn)):"none"===a?["all"].concat(o.slice(1).map(wn).map(dc)):"in"===a?L4(o[1],o.slice(2)):"!in"===a?dc(L4(o[1],o.slice(2))):"has"===a?g6(o[1]):"!has"===a?dc(g6(o[1])):"within"!==a||o;var c}function V4(o,a,c){switch(o){case"$type":return[`filter-type-${c}`,a];case"$id":return[`filter-id-${c}`,a];default:return[`filter-${c}`,o,a]}}function L4(o,a){if(0===a.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(c=>typeof c!=typeof a[0])?["filter-in-large",o,["literal",a.sort(uc)]]:["filter-in-small",o,["literal",a]]}}function g6(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function dc(o){return["!",o]}function T4(o){return p6(Fa(o.value))?L3(ma({},o,{expressionContext:"filter",valueSpec:o.styleSpec[`filter_${o.layerType||"fill"}`]})):_6(o)}function _6(o){const a=o.value,c=o.key;if("array"!==_1(a))return[new _t(c,a,`array expected, ${_1(a)} found`)];const u=o.styleSpec;let h,g=[];if(a.length<1)return[new _t(c,a,"filter array must have at least 1 element")];switch(g=g.concat(Yl({key:`${c}[0]`,value:a[0],valueSpec:u.filter_operator,style:o.style,styleSpec:o.styleSpec})),Qn(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"===Qn(a[1])&&g.push(new _t(c,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":3!==a.length&&g.push(new _t(c,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(h=_1(a[1]),"string"!==h&&g.push(new _t(`${c}[1]`,a[1],`string expected, ${h} found`)));for(let y=2;y<a.length;y++)h=_1(a[y]),"$type"===Qn(a[1])?g=g.concat(Yl({key:`${c}[${y}]`,value:a[y],valueSpec:u.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==h&&"number"!==h&&"boolean"!==h&&g.push(new _t(`${c}[${y}]`,a[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<a.length;y++)g=g.concat(_6({key:`${c}[${y}]`,value:a[y],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":h=_1(a[1]),2!==a.length?g.push(new _t(c,a,`filter array for "${a[0]}" operator must have 2 elements`)):"string"!==h&&g.push(new _t(`${c}[1]`,a[1],`string expected, ${h} found`));break;case"within":h=_1(a[1]),2!==a.length?g.push(new _t(c,a,`filter array for "${a[0]}" operator must have 2 elements`)):"object"!==h&&g.push(new _t(`${c}[1]`,a[1],`object expected, ${h} found`))}return g}function Qc(o,a){const c=o.key,u=o.style,h=o.styleSpec,g=o.value,y=o.objectKey,x=h[`${a}_${o.layerType}`];if(!x)return[];const M=y.match(/^(.*)-transition$/);if("paint"===a&&M&&x[M[1]]&&x[M[1]].transition)return Fn({key:c,value:g,valueSpec:h.transition,style:u,styleSpec:h});const z=o.valueSpec||x[y];if(!z)return[new _t(c,g,`unknown property "${y}"`)];let E;if("string"===_1(g)&&$a(z)&&!z.tokens&&(E=/^{([^}]+)}$/.exec(g))){const I=`\`{ "type": "identity", "property": ${E?JSON.stringify(E[1]):'"_"'} }\``;return[new _t(c,g,`"${y}" does not support interpolation syntax\nUse an identity property function instead: ${I}.`)]}const H=[];return"symbol"===o.layerType&&("text-field"===y&&u&&!u.glyphs&&H.push(new _t(c,g,'use of "text-field" requires a style "glyphs" property')),"text-font"===y&&ya(Fa(g))&&"identity"===Qn(g.type)&&H.push(new _t(c,g,'"text-font" does not support identity functions'))),H.concat(Fn({key:o.key,value:g,valueSpec:z,style:u,styleSpec:h,expressionContext:"property",propertyType:a,propertyKey:y}))}function v6(o){return Qc(o,"paint")}function gr(o){return Qc(o,"layout")}function H4(o){let a=[];const c=o.value,u=o.key,h=o.style,g=o.styleSpec;c.type||c.ref||a.push(new _t(u,c,'either "type" or "ref" is required'));let y=Qn(c.type);const x=Qn(c.ref);if(c.id){const M=Qn(c.id);for(let z=0;z<o.arrayIndex;z++){const E=h.layers[z];Qn(E.id)===M&&a.push(new _t(u,c.id,`duplicate layer id "${c.id}", previously used at line ${E.id.__line__}`))}}if("ref"in c){let M;["type","source","source-layer","filter","layout"].forEach(z=>{z in c&&a.push(new _t(u,c[z],`"${z}" is prohibited for ref layers`))}),h.layers.forEach(z=>{Qn(z.id)===x&&(M=z)}),M?M.ref?a.push(new _t(u,c.ref,"ref cannot reference another ref layer")):y=Qn(M.type):"string"==typeof x&&a.push(new _t(u,c.ref,`ref layer "${x}" not found`))}else if("background"!==y&&"sky"!==y)if(c.source){const M=h.sources&&h.sources[c.source],z=M&&Qn(M.type);M?"vector"===z&&"raster"===y?a.push(new _t(u,c.source,`layer "${c.id}" requires a raster source`)):"raster"===z&&"raster"!==y?a.push(new _t(u,c.source,`layer "${c.id}" requires a vector source`)):"vector"!==z||c["source-layer"]?"raster-dem"===z&&"hillshade"!==y?a.push(new _t(u,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==y||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||"geojson"===z&&M.lineMetrics||a.push(new _t(u,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new _t(u,c,`layer "${c.id}" must specify a "source-layer"`)):a.push(new _t(u,c.source,`source "${c.source}" not found`))}else a.push(new _t(u,c,'missing required property "source"'));return a=a.concat(Ki({key:u,value:c,valueSpec:g.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Fn({key:`${u}.type`,value:c.type,valueSpec:g.layer.type,style:o.style,styleSpec:o.styleSpec,object:c,objectKey:"type"}),filter:M=>T4(ma({layerType:y},M)),layout:M=>Ki({layer:c,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":z=>gr(ma({layerType:y},z))}}),paint:M=>Ki({layer:c,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":z=>v6(ma({layerType:y},z))}})}})),a}function fc(o){const a=o.value,c=o.key,u=_1(a);return"string"!==u?[new _t(c,a,`string expected, ${u} found`)]:[]}const Si={promoteId:function({key:o,value:a}){if("string"===_1(a))return fc({key:o,value:a});{const c=[];for(const u in a)c.push(...fc({key:`${o}.${u}`,value:a[u]}));return c}}};function H3(o){const a=o.value,c=o.key,u=o.styleSpec,h=o.style;if(!a.type)return[new _t(c,a,'"type" is required')];const g=Qn(a.type);let y;switch(g){case"vector":case"raster":case"raster-dem":return y=Ki({key:c,value:a,valueSpec:u[`source_${g.replace("-","_")}`],style:o.style,styleSpec:u,objectElementValidators:Si}),y;case"geojson":if(y=Ki({key:c,value:a,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:Si}),a.cluster)for(const x in a.clusterProperties){const[M,z]=a.clusterProperties[x],E="string"==typeof M?[M,["accumulated"],["get",x]]:M;y.push(...L3({key:`${c}.${x}.map`,value:z,expressionContext:"cluster-map"})),y.push(...L3({key:`${c}.${x}.reduce`,value:E,expressionContext:"cluster-reduce"}))}return y;case"video":return Ki({key:c,value:a,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return Ki({key:c,value:a,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new _t(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yl({key:`${c}.type`,value:a.type,valueSpec:{values:k3(u)},style:h,styleSpec:u})}}function k3(o){return o.source.reduce((a,c)=>{const u=o[c];return"enum"===u.type.type&&(a=a.concat(Object.keys(u.type.values))),a},[])}function _r(o){const a=o.value,c=o.styleSpec,u=c.light,h=o.style;let g=[];const y=_1(a);if(void 0===a)return g;if("object"!==y)return g=g.concat([new _t("light",a,`object expected, ${y} found`)]),g;for(const x in a){const M=x.match(/^(.*)-transition$/);g=g.concat(M&&u[M[1]]&&u[M[1]].transition?Fn({key:x,value:a[x],valueSpec:c.transition,style:h,styleSpec:c}):u[x]?Fn({key:x,value:a[x],valueSpec:u[x],style:h,styleSpec:c}):[new _t(x,a[x],`unknown property "${x}"`)])}return g}function Kl(o){const a=o.value,c=o.key,u=o.style,h=o.styleSpec,g=h.terrain;let y=[];const x=_1(a);if(void 0===a)return y;if("object"!==x)return y=y.concat([new _t("terrain",a,`object expected, ${x} found`)]),y;for(const M in a){const z=M.match(/^(.*)-transition$/);y=y.concat(z&&g[z[1]]&&g[z[1]].transition?Fn({key:M,value:a[M],valueSpec:h.transition,style:u,styleSpec:h}):g[M]?Fn({key:M,value:a[M],valueSpec:g[M],style:u,styleSpec:h}):[new _t(M,a[M],`unknown property "${M}"`)])}if(a.source){const M=u.sources&&u.sources[a.source],z=M&&Qn(M.type);M?"raster-dem"!==z&&y.push(new _t(c,a.source,`terrain cannot be used with a source of type ${String(z)}, it only be used with a "raster-dem" source type`)):y.push(new _t(c,a.source,`source "${a.source}" not found`))}else y.push(new _t(c,a,'terrain is missing required property "source"'));return y}function Ql(o){const a=o.value,c=o.style,u=o.styleSpec,h=u.fog;let g=[];const y=_1(a);if(void 0===a)return g;if("object"!==y)return g=g.concat([new _t("fog",a,`object expected, ${y} found`)]),g;for(const x in a){const M=x.match(/^(.*)-transition$/);g=g.concat(M&&h[M[1]]&&h[M[1]].transition?Fn({key:x,value:a[x],valueSpec:u.transition,style:c,styleSpec:u}):h[x]?Fn({key:x,value:a[x],valueSpec:h[x],style:c,styleSpec:u}):[new _t(x,a[x],`unknown property "${x}"`)])}return g}const Po={"*":()=>[],array:V3,boolean:function(o){const a=o.value,c=o.key,u=_1(a);return"boolean"!==u?[new _t(c,a,`boolean expected, ${u} found`)]:[]},number:h6,color:function(o){const a=o.key,c=o.value,u=_1(c);return"string"!==u?[new _t(a,c,`color expected, ${u} found`)]:null===x1(c)?[new _t(a,c,`color expected, "${c}" found`)]:[]},enum:Yl,filter:T4,function:A4,layer:H4,object:Ki,source:H3,light:_r,terrain:Kl,fog:Ql,string:fc,formatted:function(o){return 0===fc(o).length?[]:L3(o)},resolvedImage:function(o){return 0===fc(o).length?[]:L3(o)},projection:function(o){const a=o.value,c=o.styleSpec,u=c.projection,h=o.style;let g=[];const y=_1(a);if("object"===y)for(const x in a)g=g.concat(Fn({key:x,value:a[x],valueSpec:u[x],style:h,styleSpec:c}));else"string"!==y&&(g=g.concat([new _t("projection",a,`object or string expected, ${y} found`)]));return g}};function Fn(o){const a=o.value,c=o.valueSpec,u=o.styleSpec;return c.expression&&ya(Qn(a))?A4(o):c.expression&&k(Fa(a))?L3(o):c.type&&Po[c.type]?Po[c.type](o):Ki(ma({},o,{valueSpec:c.type?u[c.type]:c}))}function g5(o){const a=o.value,c=o.key,u=fc(o);return u.length||(-1===a.indexOf("{fontstack}")&&u.push(new _t(c,a,'"glyphs" url must include a "{fontstack}" token')),-1===a.indexOf("{range}")&&u.push(new _t(c,a,'"glyphs" url must include a "{range}" token'))),u}function I3(o,a=qe){return Za(Fn({key:"",value:o,valueSpec:a.$root,styleSpec:a,style:o,objectElementValidators:{glyphs:g5,"*":()=>[]}}))}const _5=o=>Za(v6(o)),Fo=o=>Za(gr(o));function Za(o){return o.slice().sort((a,c)=>a.line&&c.line?a.line-c.line:0)}function k4(o,a){let c=!1;if(a&&a.length)for(const u of a)o.fire(new pa(new Error(u.message))),c=!0;return c}var v1=ba;function ba(o,a,c){var u=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var h=new Int32Array(this.arrayBuffer);o=h[0],this.d=(a=h[1])+2*(c=h[2]);for(var g=0;g<this.d*this.d;g++){var y=h[3+g],x=h[3+g+1];u.push(y===x?null:h.subarray(y,x))}var M=h[3+u.length+1];this.keys=h.subarray(h[3+u.length],M),this.bboxes=h.subarray(M),this.insert=this._insertReadonly}else{this.d=a+2*c;for(var z=0;z<this.d*this.d;z++)u.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=o,this.padding=c,this.scale=a/o,this.uid=0;var E=c/a*o;this.min=-E,this.max=o+E}ba.prototype.insert=function(o,a,c,u,h){this._forEachCell(a,c,u,h,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(u),this.bboxes.push(h)},ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ba.prototype._insertCell=function(o,a,c,u,h,g){this.cells[h].push(g)},ba.prototype.query=function(o,a,c,u,h){var g=this.min,y=this.max;if(o<=g&&a<=g&&y<=c&&y<=u&&!h)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(o,a,c,u,this._queryCell,x,{},h),x},ba.prototype._queryCell=function(o,a,c,u,h,g,y,x){var M=this.cells[h];if(null!==M)for(var z=this.keys,E=this.bboxes,H=0;H<M.length;H++){var I=M[H];if(void 0===y[I]){var N=4*I;(x?x(E[N+0],E[N+1],E[N+2],E[N+3]):o<=E[N+2]&&a<=E[N+3]&&c>=E[N+0]&&u>=E[N+1])?(y[I]=!0,g.push(z[I])):y[I]=!1}}},ba.prototype._forEachCell=function(o,a,c,u,h,g,y,x){for(var M=this._convertToCellCoord(o),z=this._convertToCellCoord(a),E=this._convertToCellCoord(c),H=this._convertToCellCoord(u),I=M;I<=E;I++)for(var N=z;N<=H;N++){var O=this.d*N+I;if((!x||x(this._convertFromCellCoord(I),this._convertFromCellCoord(N),this._convertFromCellCoord(I+1),this._convertFromCellCoord(N+1)))&&h.call(this,o,a,c,u,O,g,y,x))return}},ba.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},ba.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,a=3+this.cells.length+1+1,c=0,u=0;u<this.cells.length;u++)c+=this.cells[u].length;var h=new Int32Array(a+c+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var g=a,y=0;y<o.length;y++){var x=o[y];h[3+y]=g,h.set(x,g),g+=x.length}return h[3+o.length]=g,h.set(this.keys,g),h[3+o.length+1]=g+=this.keys.length,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer};const Jl={};function Et(o,a,c={}){Object.defineProperty(o,"_classRegistryKey",{value:a,writeable:!1}),Jl[a]={klass:o,omit:c.omit||[]}}Et(Object,"Object"),v1.serialize=function(o,a){const c=o.toArrayBuffer();return a&&a.push(c),{buffer:c}},v1.deserialize=function(o){return new v1(o.buffer)},Object.defineProperty(v1,"name",{value:"Grid"}),Et(v1,"Grid"),Et(ti,"Color"),Et(Error,"Error"),Et(p1,"AJAXError"),Et(C2,"ResolvedImage"),Et(An,"StylePropertyFunction"),Et(T,"StyleExpression",{omit:["_evaluator"]}),Et(Je,"ZoomDependentExpression"),Et(ge,"ZoomConstantExpression"),Et(Ba,"CompoundExpression",{omit:["_evaluate"]});for(const o in Ro)Jl[Ro[o]._classRegistryKey]||Et(Ro[o],`Expression${o}`);function y6(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function R3(o){return Ye.ImageBitmap&&o instanceof Ye.ImageBitmap}function Jc(o,a){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(y6(o)||R3(o))return a&&a.push(o),o;if(ArrayBuffer.isView(o)){const c=o;return a&&a.push(c.buffer),c}if(o instanceof Ye.ImageData)return a&&a.push(o.data.buffer),o;if(Array.isArray(o)){const c=[];for(const u of o)c.push(Jc(u,a));return c}if("object"==typeof o){const c=o.constructor,u=c._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const h=c.serialize?c.serialize(o,a):{};if(!c.serialize){for(const g in o)o.hasOwnProperty(g)&&(Jl[u].omit.indexOf(g)>=0||(h[g]=Jc(o[g],a)));o instanceof Error&&(h.message=o.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(h.$name=u),h}throw new Error("can't serialize object of type "+typeof o)}function P3(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||y6(o)||R3(o)||ArrayBuffer.isView(o)||o instanceof Ye.ImageData)return o;if(Array.isArray(o))return o.map(P3);if("object"==typeof o){const a=o.$name||"Object",{klass:c}=Jl[a];if(!c)throw new Error(`can't deserialize unregistered class ${a}`);if(c.deserialize)return c.deserialize(o);const u=Object.create(c.prototype);for(const h of Object.keys(o))"$name"!==h&&(u[h]=P3(o[h]));return u}throw new Error("can't deserialize object of type "+typeof o)}const F3=o=>o>=1536&&o<=1791,mt=o=>o>=1872&&o<=1919,ln=o=>o>=2208&&o<=2303,ki=o=>o>=11904&&o<=12031,Di=o=>o>=12032&&o<=12255,Ii=o=>o>=12272&&o<=12287,e3=o=>o>=12288&&o<=12351,gs=o=>o>=12352&&o<=12447,G2=o=>o>=12448&&o<=12543,t3=o=>o>=12544&&o<=12591,I4=o=>o>=12704&&o<=12735,b6=o=>o>=12736&&o<=12783,x6=o=>o>=12784&&o<=12799,e0=o=>o>=12800&&o<=13055,D2=o=>o>=13056&&o<=13311,Ya=o=>o>=13312&&o<=19903,R4=o=>o>=19968&&o<=40959,hc=o=>o>=40960&&o<=42127,Xa=o=>o>=42128&&o<=42191,C6=o=>o>=44032&&o<=55215,t0=o=>o>=63744&&o<=64255,P4=o=>o>=64336&&o<=65023,N3=o=>o>=65040&&o<=65055,m=o=>o>=65072&&o<=65103,l=o=>o>=65104&&o<=65135,f=o=>o>=65136&&o<=65279,v=o=>o>=65280&&o<=65519;function b(o){for(const a of o)if(A(a.charCodeAt(0)))return!0;return!1}function w(o){for(const a of o)if(!D(a.charCodeAt(0)))return!1;return!0}function D(o){return!(F3(o)||mt(o)||ln(o)||P4(o)||f(o))}function A(o){return!(746!==o&&747!==o&&(o<4352||!(I4(o)||t3(o)||m(o)&&!(o>=65097&&o<=65103)||t0(o)||D2(o)||ki(o)||b6(o)||!(!e3(o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||Ya(o)||R4(o)||e0(o)||(a=o,a>=12592&&a<=12687)||(a=>a>=43360&&a<=43391)(o)||(a=>a>=55216&&a<=55295)(o)||(a=>a>=4352&&a<=4607)(o)||C6(o)||gs(o)||Ii(o)||(a=>a>=12688&&a<=12703)(o)||Di(o)||x6(o)||G2(o)&&12540!==o||!(!v(o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!l(o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||(a=>a>=5120&&a<=5759)(o)||(a=>a>=6320&&a<=6399)(o)||N3(o)||(a=>a>=19904&&a<=19967)(o)||hc(o)||Xa(o))));var a}function L(o){return!(A(o)||(a=o,(c=a)>=128&&c<=255&&(167===a||169===a||174===a||177===a||188===a||189===a||190===a||215===a||247===a)||(c=>c>=8192&&c<=8303)(a)&&(8214===a||8224===a||8225===a||8240===a||8241===a||8251===a||8252===a||8258===a||8263===a||8264===a||8265===a||8273===a)||(c=>c>=8448&&c<=8527)(a)||(c=>c>=8528&&c<=8591)(a)||(c=>c>=8960&&c<=9215)(a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||9003===a||a>=9085&&a<=9114||a>=9150&&a<=9165||9167===a||a>=9169&&a<=9179||a>=9186&&a<=9215)||(c=>c>=9216&&c<=9279)(a)&&9251!==a||(c=>c>=9280&&c<=9311)(a)||(c=>c>=9312&&c<=9471)(a)||(c=>c>=9632&&c<=9727)(a)||(c=>c>=9728&&c<=9983)(a)&&!(a>=9754&&a<=9759)||(c=>c>=11008&&c<=11263)(a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||e3(a)||G2(a)||(c=>c>=57344&&c<=63743)(a)||m(a)||l(a)||v(a)||8734===a||8756===a||8757===a||a>=9984&&a<=10087||a>=10102&&a<=10131||65532===a||65533===a));var a,c}function P(o){return o>=1424&&o<=2303||P4(o)||f(o)}function R(o,a){return!(!a&&P(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||(c=o,c>=6016&&c<=6143));var c}function B(o){for(const a of o)if(P(a.charCodeAt(0)))return!0;return!1}const Y="deferred",J="loading",ee="loaded";let te=null,Q="unavailable",Z=null;const se=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(Q="error"),te&&te(o)};function oe(){ue.fire(new Cn("pluginStateChange",{pluginStatus:Q,pluginURL:Z}))}const ue=new Xr,ye=function(){return Q},_e=function(){if(Q!==Y||!Z)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Q=J,oe(),Z&&Do({url:Z},o=>{o?se(o):(Q=ee,oe())})},Ce={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Q===ee||null!=Ce.applyArabicShaping,isLoading:()=>Q===J,setState(o){Q=o.pluginStatus,Z=o.pluginURL},isParsed:()=>null!=Ce.applyArabicShaping&&null!=Ce.processBidirectionalText&&null!=Ce.processStyledBidirectionalText,getPluginURL:()=>Z};class Se{constructor(a,c){this.zoom=a,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.transition=c.transition,this.pitch=c.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(a){return function(c,u){for(const h of c)if(!R(h.charCodeAt(0),u))return!1;return!0}(a,Ce.isLoaded())}}class Te{constructor(a,c){this.property=a,this.value=c,this.expression=function(u,h){if(ya(u))return new An(u,h);if(k(u)){const g=Zt(u,h);if("error"===g.result)throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=u;return"string"==typeof u&&"color"===h.type&&(g=ti.parse(u)),{kind:"constant",evaluate:()=>g}}}(void 0===c?a.specification.default:c,a.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(a,c,u){return this.property.possiblyEvaluate(this,a,c,u)}}class Re{constructor(a){this.property=a,this.value=new Te(a,void 0)}transitioned(a,c){return new Ee(this.property,this.value,c,c1({},a.transition,this.transition),a.now)}untransitioned(){return new Ee(this.property,this.value,null,{},0)}}class gt{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return ii(this._values[a].value.value)}setValue(a,c){this._values.hasOwnProperty(a)||(this._values[a]=new Re(this._values[a].property)),this._values[a].value=new Te(this._values[a].property,null===c?void 0:ii(c))}getTransition(a){return ii(this._values[a].transition)}setTransition(a,c){this._values.hasOwnProperty(a)||(this._values[a]=new Re(this._values[a].property)),this._values[a].transition=ii(c)||void 0}serialize(){const a={};for(const c of Object.keys(this._values)){const u=this.getValue(c);void 0!==u&&(a[c]=u);const h=this.getTransition(c);void 0!==h&&(a[`${c}-transition`]=h)}return a}transitioned(a,c){const u=new et(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].transitioned(a,c._values[h]);return u}untransitioned(){const a=new et(this._properties);for(const c of Object.keys(this._values))a._values[c]=this._values[c].untransitioned();return a}}class Ee{constructor(a,c,u,h,g){const y=h.delay||0,x=h.duration||0;g=g||0,this.property=a,this.value=c,this.begin=g+y,this.end=this.begin+x,a.specification.transition&&(h.delay||h.duration)&&(this.prior=u)}possiblyEvaluate(a,c,u){const h=a.now||0,g=this.value.possiblyEvaluate(a,c,u),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(a,c,u);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(a,c,u),g,fa(x))}}return g}}class et{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,c,u){const h=new Pe(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(a,c,u);return h}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Be{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return ii(this._values[a].value)}setValue(a,c){this._values[a]=new Te(this._values[a].property,null===c?void 0:ii(c))}serialize(){const a={};for(const c of Object.keys(this._values)){const u=this.getValue(c);void 0!==u&&(a[c]=u)}return a}possiblyEvaluate(a,c,u){const h=new Pe(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(a,c,u);return h}}class ct{constructor(a,c,u){this.property=a,this.value=c,this.parameters=u}isConstant(){return"constant"===this.value.kind}constantOr(a){return"constant"===this.value.kind?this.value.value:a}evaluate(a,c,u,h){return this.property.evaluate(this.value,this.parameters,a,c,u,h)}}class Pe{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class ze{constructor(a){this.specification=a}possiblyEvaluate(a,c){return a.expression.evaluate(c)}interpolate(a,c,u){const h=nc[this.specification.type];return h?h(a,c,u):a}}class Ne{constructor(a,c){this.specification=a,this.overrides=c}possiblyEvaluate(a,c,u,h){return new ct(this,"constant"===a.expression.kind||"camera"===a.expression.kind?{kind:"constant",value:a.expression.evaluate(c,null,{},u,h)}:a.expression,c)}interpolate(a,c,u){if("constant"!==a.value.kind||"constant"!==c.value.kind)return a;if(void 0===a.value.value||void 0===c.value.value)return new ct(this,{kind:"constant",value:void 0},a.parameters);const h=nc[this.specification.type];return h?new ct(this,{kind:"constant",value:h(a.value.value,c.value.value,u)},a.parameters):a}evaluate(a,c,u,h,g,y){return"constant"===a.kind?a.value:a.evaluate(c,u,h,g,y)}}class ot{constructor(a){this.specification=a}possiblyEvaluate(a,c,u,h){return!!a.expression.evaluate(c,null,{},u,h)}interpolate(){return!1}}class ut{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const c=new Se(0,{});for(const u in a){const h=a[u];h.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new Te(h,void 0),y=this.defaultTransitionablePropertyValues[u]=new Re(h);this.defaultTransitioningPropertyValues[u]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate(c)}}}function Pt(o,a){return 256*(o=f1(Math.floor(o),0,255))+f1(Math.floor(a),0,255)}Et(Ne,"DataDrivenProperty"),Et(ze,"DataConstantProperty"),Et(ot,"ColorRampProperty");const L1={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Dt{constructor(a,c){this._structArray=a,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class zt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,c){return a._trim(),c&&(a.isTransferred=!0,c.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const c=Object.create(this.prototype);return c.arrayBuffer=a.arrayBuffer,c.length=a.length,c.capacity=a.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ft(o,a=1){let c=0,u=0;return{members:o.map(h=>{const g=L1[h.type].BYTES_PER_ELEMENT,y=c=A1(c,Math.max(a,g)),x=h.components||1;return u=Math.max(u,g),c+=g*x,{name:h.name,type:h.type,components:x,offset:y}}),size:A1(c,Math.max(u,a)),alignment:a}}function A1(o,a){return Math.ceil(o/a)*a}class Ut extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c){const u=this.length;return this.resize(u+1),this.emplace(u,a,c)}emplace(a,c,u){const h=2*a;return this.int16[h+0]=c,this.int16[h+1]=u,a}}Ut.prototype.bytesPerElement=4,Et(Ut,"StructArrayLayout2i4");class mn extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,c,u)}emplace(a,c,u,h){const g=3*a;return this.int16[g+0]=c,this.int16[g+1]=u,this.int16[g+2]=h,a}}mn.prototype.bytesPerElement=6,Et(mn,"StructArrayLayout3i6");class un extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=4*a;return this.int16[y+0]=c,this.int16[y+1]=u,this.int16[y+2]=h,this.int16[y+3]=g,a}}un.prototype.bytesPerElement=8,Et(un,"StructArrayLayout4i8");class Nn extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,x){const M=this.length;return this.resize(M+1),this.emplace(M,a,c,u,h,g,y,x)}emplace(a,c,u,h,g,y,x,M){const z=6*a,E=12*a,H=3*a;return this.int16[z+0]=c,this.int16[z+1]=u,this.uint8[E+4]=h,this.uint8[E+5]=g,this.uint8[E+6]=y,this.uint8[E+7]=x,this.float32[H+2]=M,a}}Nn.prototype.bytesPerElement=12,Et(Nn,"StructArrayLayout2i4ub1f12");class Mn extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=4*a;return this.float32[y+0]=c,this.float32[y+1]=u,this.float32[y+2]=h,this.float32[y+3]=g,a}}Mn.prototype.bytesPerElement=16,Et(Mn,"StructArrayLayout4f16");class oi extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,a,c,u,h,g)}emplace(a,c,u,h,g,y){const x=6*a,M=3*a;return this.uint16[x+0]=c,this.uint16[x+1]=u,this.uint16[x+2]=h,this.uint16[x+3]=g,this.float32[M+2]=y,a}}oi.prototype.bytesPerElement=12,Et(oi,"StructArrayLayout4ui1f12");class h2 extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=4*a;return this.uint16[y+0]=c,this.uint16[y+1]=u,this.uint16[y+2]=h,this.uint16[y+3]=g,a}}h2.prototype.bytesPerElement=8,Et(h2,"StructArrayLayout4ui8");class Ka extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,a,c,u,h,g,y)}emplace(a,c,u,h,g,y,x){const M=6*a;return this.int16[M+0]=c,this.int16[M+1]=u,this.int16[M+2]=h,this.int16[M+3]=g,this.int16[M+4]=y,this.int16[M+5]=x,a}}Ka.prototype.bytesPerElement=12,Et(Ka,"StructArrayLayout6i12");class Qa extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,x,M,z,E,H,I){const N=this.length;return this.resize(N+1),this.emplace(N,a,c,u,h,g,y,x,M,z,E,H,I)}emplace(a,c,u,h,g,y,x,M,z,E,H,I,N){const O=12*a;return this.int16[O+0]=c,this.int16[O+1]=u,this.int16[O+2]=h,this.int16[O+3]=g,this.uint16[O+4]=y,this.uint16[O+5]=x,this.uint16[O+6]=M,this.uint16[O+7]=z,this.int16[O+8]=E,this.int16[O+9]=H,this.int16[O+10]=I,this.int16[O+11]=N,a}}Qa.prototype.bytesPerElement=24,Et(Qa,"StructArrayLayout4i4ui4i24");class jn extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,a,c,u,h,g,y)}emplace(a,c,u,h,g,y,x){const M=10*a,z=5*a;return this.int16[M+0]=c,this.int16[M+1]=u,this.int16[M+2]=h,this.float32[z+2]=g,this.float32[z+3]=y,this.float32[z+4]=x,a}}jn.prototype.bytesPerElement=20,Et(jn,"StructArrayLayout3i3f20");class kn extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.uint32[1*a+0]=c,a}}kn.prototype.bytesPerElement=4,Et(kn,"StructArrayLayout1ul4");class T1 extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,x,M,z,E,H,I,N){const O=this.length;return this.resize(O+1),this.emplace(O,a,c,u,h,g,y,x,M,z,E,H,I,N)}emplace(a,c,u,h,g,y,x,M,z,E,H,I,N,O){const j=20*a,X=10*a;return this.int16[j+0]=c,this.int16[j+1]=u,this.int16[j+2]=h,this.int16[j+3]=g,this.int16[j+4]=y,this.float32[X+3]=x,this.float32[X+4]=M,this.float32[X+5]=z,this.float32[X+6]=E,this.int16[j+14]=H,this.uint32[X+8]=I,this.uint16[j+18]=N,this.uint16[j+19]=O,a}}T1.prototype.bytesPerElement=40,Et(T1,"StructArrayLayout5i4f1i1ul2ui40");class si extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,x){const M=this.length;return this.resize(M+1),this.emplace(M,a,c,u,h,g,y,x)}emplace(a,c,u,h,g,y,x,M){const z=8*a;return this.int16[z+0]=c,this.int16[z+1]=u,this.int16[z+2]=h,this.int16[z+4]=g,this.int16[z+5]=y,this.int16[z+6]=x,this.int16[z+7]=M,a}}si.prototype.bytesPerElement=16,Et(si,"StructArrayLayout3i2i2i16");class Ri extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,a,c,u,h,g)}emplace(a,c,u,h,g,y){const x=4*a,M=8*a;return this.float32[x+0]=c,this.float32[x+1]=u,this.float32[x+2]=h,this.int16[M+6]=g,this.int16[M+7]=y,a}}Ri.prototype.bytesPerElement=16,Et(Ri,"StructArrayLayout2f1f2i16");class In extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=12*a,x=3*a;return this.uint8[y+0]=c,this.uint8[y+1]=u,this.float32[x+1]=h,this.float32[x+2]=g,a}}In.prototype.bytesPerElement=12,Et(In,"StructArrayLayout2ub2f12");class p2 extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,c,u)}emplace(a,c,u,h){const g=3*a;return this.float32[g+0]=c,this.float32[g+1]=u,this.float32[g+2]=h,a}}p2.prototype.bytesPerElement=12,Et(p2,"StructArrayLayout3f12");class Qi extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,c,u)}emplace(a,c,u,h){const g=3*a;return this.uint16[g+0]=c,this.uint16[g+1]=u,this.uint16[g+2]=h,a}}Qi.prototype.bytesPerElement=6,Et(Qi,"StructArrayLayout3ui6");class Ja extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,x,M,z,E,H,I,N,O,j,X,ae,me,re,de,ve){const he=this.length;return this.resize(he+1),this.emplace(he,a,c,u,h,g,y,x,M,z,E,H,I,N,O,j,X,ae,me,re,de,ve)}emplace(a,c,u,h,g,y,x,M,z,E,H,I,N,O,j,X,ae,me,re,de,ve,he){const ke=30*a,Ve=15*a,Ge=60*a;return this.int16[ke+0]=c,this.int16[ke+1]=u,this.int16[ke+2]=h,this.float32[Ve+2]=g,this.float32[Ve+3]=y,this.uint16[ke+8]=x,this.uint16[ke+9]=M,this.uint32[Ve+5]=z,this.uint32[Ve+6]=E,this.uint32[Ve+7]=H,this.uint16[ke+16]=I,this.uint16[ke+17]=N,this.uint16[ke+18]=O,this.float32[Ve+10]=j,this.float32[Ve+11]=X,this.uint8[Ge+48]=ae,this.uint8[Ge+49]=me,this.uint8[Ge+50]=re,this.uint32[Ve+13]=de,this.int16[ke+28]=ve,this.uint8[Ge+58]=he,a}}Ja.prototype.bytesPerElement=60,Et(Ja,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class n3 extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g,y,x,M,z,E,H,I,N,O,j,X,ae,me,re,de,ve,he,ke,Ve,Ge,We,Fe,Ke,nt,st){const dt=this.length;return this.resize(dt+1),this.emplace(dt,a,c,u,h,g,y,x,M,z,E,H,I,N,O,j,X,ae,me,re,de,ve,he,ke,Ve,Ge,We,Fe,Ke,nt,st)}emplace(a,c,u,h,g,y,x,M,z,E,H,I,N,O,j,X,ae,me,re,de,ve,he,ke,Ve,Ge,We,Fe,Ke,nt,st,dt){const Oe=38*a,yt=19*a;return this.int16[Oe+0]=c,this.int16[Oe+1]=u,this.int16[Oe+2]=h,this.float32[yt+2]=g,this.float32[yt+3]=y,this.int16[Oe+8]=x,this.int16[Oe+9]=M,this.int16[Oe+10]=z,this.int16[Oe+11]=E,this.int16[Oe+12]=H,this.int16[Oe+13]=I,this.uint16[Oe+14]=N,this.uint16[Oe+15]=O,this.uint16[Oe+16]=j,this.uint16[Oe+17]=X,this.uint16[Oe+18]=ae,this.uint16[Oe+19]=me,this.uint16[Oe+20]=re,this.uint16[Oe+21]=de,this.uint16[Oe+22]=ve,this.uint16[Oe+23]=he,this.uint16[Oe+24]=ke,this.uint16[Oe+25]=Ve,this.uint16[Oe+26]=Ge,this.uint16[Oe+27]=We,this.uint16[Oe+28]=Fe,this.uint32[yt+15]=Ke,this.float32[yt+16]=nt,this.float32[yt+17]=st,this.float32[yt+18]=dt,a}}n3.prototype.bytesPerElement=76,Et(n3,"StructArrayLayout3i2f6i15ui1ul3f76");class vr extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.float32[1*a+0]=c,a}}vr.prototype.bytesPerElement=4,Et(vr,"StructArrayLayout1f4");class Rr extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,u,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,a,c,u,h,g)}emplace(a,c,u,h,g,y){const x=5*a;return this.float32[x+0]=c,this.float32[x+1]=u,this.float32[x+2]=h,this.float32[x+3]=g,this.float32[x+4]=y,a}}Rr.prototype.bytesPerElement=20,Et(Rr,"StructArrayLayout5f20");class eo extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,c,u,h)}emplace(a,c,u,h,g){const y=6*a;return this.uint32[3*a+0]=c,this.uint16[y+2]=u,this.uint16[y+3]=h,this.uint16[y+4]=g,a}}eo.prototype.bytesPerElement=12,Et(eo,"StructArrayLayout1ul3ui12");class No extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c){const u=this.length;return this.resize(u+1),this.emplace(u,a,c)}emplace(a,c,u){const h=2*a;return this.uint16[h+0]=c,this.uint16[h+1]=u,a}}No.prototype.bytesPerElement=4,Et(No,"StructArrayLayout2ui4");class _s extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.uint16[1*a+0]=c,a}}_s.prototype.bytesPerElement=2,Et(_s,"StructArrayLayout1ui2");class Oo extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c){const u=this.length;return this.resize(u+1),this.emplace(u,a,c)}emplace(a,c,u){const h=2*a;return this.float32[h+0]=c,this.float32[h+1]=u,a}}Oo.prototype.bytesPerElement=8,Et(Oo,"StructArrayLayout2f8");class i3 extends Dt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}i3.prototype.size=40;class v5 extends T1{get(a){return new i3(this,a)}}Et(v5,"CollisionBoxArray");class y5 extends Dt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}y5.prototype.size=60;class b5 extends Ja{get(a){return new y5(this,a)}}Et(b5,"PlacedSymbolArray");class O3 extends Dt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(a){this._structArray.uint32[this._pos4+15]=a}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}O3.prototype.size=76;class E7 extends n3{get(a){return new O3(this,a)}}Et(E7,"SymbolInstanceArray");class Vt extends vr{getoffsetX(a){return this.float32[1*a+0]}}Et(Vt,"GlyphOffsetArray");class w6 extends Ut{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}Et(w6,"SymbolLineVertexArray");class V7 extends Dt{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}V7.prototype.size=12;class x5 extends eo{get(a){return new V7(this,a)}}Et(x5,"FeatureIndexArray");class pc extends No{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}Et(pc,"FillExtrusionCentroidArray");const F4=Ft([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),N4=Ft([{name:"a_dash",components:4,type:"Uint16"}]);var to={},L7={get exports(){return to},set exports(o){to=o}},n0={};({get exports(){return n0},set exports(o){n0=o}}).exports=function(o,a){var c,u,h,g,y,x,M,z;for(u=o.length-(c=3&o.length),h=a,y=3432918353,x=461845907,z=0;z<u;)M=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,h=27492+(65535&(g=5*(65535&(h=(h^=M=(65535&(M=(M=(65535&M)*y+(((M>>>16)*y&65535)<<16)&4294967295)<<15|M>>>17))*x+(((M>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(M=0,c){case 3:M^=(255&o.charCodeAt(z+2))<<16;case 2:M^=(255&o.charCodeAt(z+1))<<8;case 1:h^=M=(65535&(M=(M=(65535&(M^=255&o.charCodeAt(z)))*y+(((M>>>16)*y&65535)<<16)&4294967295)<<15|M>>>17))*x+(((M>>>16)*x&65535)<<16)&4294967295}return h^=o.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var r3={};({get exports(){return r3},set exports(o){r3=o}}).exports=function(o,a){for(var c,u=o.length,h=a^u,g=0;u>=4;)c=1540483477*(65535&(c=255&o.charCodeAt(g)|(255&o.charCodeAt(++g))<<8|(255&o.charCodeAt(++g))<<16|(255&o.charCodeAt(++g))<<24))+((1540483477*(c>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),u-=4,++g;switch(u){case 3:h^=(255&o.charCodeAt(g+2))<<16;case 2:h^=(255&o.charCodeAt(g+1))<<8;case 1:h=1540483477*(65535&(h^=255&o.charCodeAt(g)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var um=n0,dm=r3;L7.exports=um,to.murmur3=um,to.murmur2=dm;class vt{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,c,u,h){this.ids.push(fm(a)),this.positions.push(c,u,h)}getPositions(a){const c=fm(a);let u=0,h=this.ids.length-1;for(;u<h;){const y=u+h>>1;this.ids[y]>=c?h=y:u=y+1}const g=[];for(;this.ids[u]===c;)g.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return g}static serialize(a,c){const u=new Float64Array(a.ids),h=new Uint32Array(a.positions);return T7(u,h,0,u.length-1),c&&c.push(u.buffer,h.buffer),{ids:u,positions:h}}static deserialize(a){const c=new vt;return c.ids=a.ids,c.positions=a.positions,c.indexed=!0,c}}function fm(o){const a=+o;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:to(String(o))}function T7(o,a,c,u){for(;c<u;){const h=o[c+u>>1];let g=c-1,y=u+1;for(;;){do{g++}while(o[g]<h);do{y--}while(o[y]>h);if(g>=y)break;C5(o,g,y),C5(a,3*g,3*y),C5(a,3*g+1,3*y+1),C5(a,3*g+2,3*y+2)}y-c<u-y?(T7(o,a,c,y),c=y+1):(T7(o,a,y+1,u),u=y)}}function C5(o,a,c){const u=o[a];o[a]=o[c],o[c]=u}Et(vt,"FeaturePositionMap");class a3{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,c){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,c),this.initialized=!0),!!this.location}}class w5 extends a3{constructor(a){super(a),this.current=0}set(a,c,u){this.fetchUniformLocation(a,c)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class hm extends a3{constructor(a){super(a),this.current=[0,0,0,0]}set(a,c,u){this.fetchUniformLocation(a,c)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class pm extends a3{constructor(a){super(a),this.current=ti.transparent}set(a,c,u){this.fetchUniformLocation(a,c)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const r0=new Float32Array(16),Nx=new Float32Array(9),Ox=new Float32Array(4);function Pi(o){return[Pt(255*o.r,255*o.g),Pt(255*o.b,255*o.a)]}class B3{constructor(a,c,u){this.value=a,this.uniformNames=c.map(h=>`u_${h}`),this.type=u}setUniform(a,c,u,h,g){c.set(a,g,h.constantOr(this.value))}getBinding(a,c){return"color"===this.type?new pm(a):new w5(a)}}class vs{constructor(a,c){this.uniformNames=c.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,c,u,h,g){const y="u_pattern"===g||"u_dash"===g?this.pattern:"u_pixel_ratio"===g?this.pixelRatio:null;y&&c.set(a,g,y)}getBinding(a,c){return"u_pattern"===c||"u_dash"===c?new hm(a):new w5(a)}}class mc{constructor(a,c,u,h){this.expression=a,this.type=u,this.maxValue=0,this.paintVertexAttributes=c.map(g=>({name:`a_${g}`,type:"Float32",components:"color"===u?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(a,c,u,h,g,y){const x=this.paintVertexArray.length,M=this.expression.evaluate(new Se(0),c,{},g,h,y);this.paintVertexArray.resize(a),this._setPaintValue(x,a,M)}updatePaintArray(a,c,u,h,g){const y=this.expression.evaluate({zoom:0},u,h,void 0,g);this._setPaintValue(a,c,y)}_setPaintValue(a,c,u){if("color"===this.type){const h=Pi(u);for(let g=a;g<c;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=a;h<c;h++)this.paintVertexArray.emplace(h,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ai{constructor(a,c,u,h,g,y){this.expression=a,this.uniformNames=c.map(x=>`u_${x}_t`),this.type=u,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=c.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===u?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(a,c,u,h,g,y){const x=this.expression.evaluate(new Se(this.zoom),c,{},g,h,y),M=this.expression.evaluate(new Se(this.zoom+1),c,{},g,h,y),z=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(z,a,x,M)}updatePaintArray(a,c,u,h,g){const y=this.expression.evaluate({zoom:this.zoom},u,h,void 0,g),x=this.expression.evaluate({zoom:this.zoom+1},u,h,void 0,g);this._setPaintValue(a,c,y,x)}_setPaintValue(a,c,u,h){if("color"===this.type){const g=Pi(u),y=Pi(h);for(let x=a;x<c;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=a;g<c;g++)this.paintVertexArray.emplace(g,u,h);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(h))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,c,u,h,g){const y=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=f1(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);c.set(a,g,x)}getBinding(a,c){return new w5(a)}}class ra{constructor(a,c,u,h,g){this.expression=a,this.layerId=g,this.paintVertexAttributes=("array"===u?N4:F4).members;for(let y=0;y<c.length;++y);this.paintVertexArray=new h}populatePaintArray(a,c,u){const h=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(h,a,c.patterns&&c.patterns[this.layerId],u)}updatePaintArray(a,c,u,h,g,y){this._setPaintValues(a,c,u.patterns&&u.patterns[this.layerId],y)}_setPaintValues(a,c,u,h){if(!h||!u)return;const g=h[u];if(!g)return;const{tl:y,br:x,pixelRatio:M}=g;for(let z=a;z<c;z++)this.paintVertexArray.emplace(z,y[0],y[1],x[0],x[1],M)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gc{constructor(a,c,u=(()=>!0)){this.binders={},this._buffers=[];const h=[];for(const g in a.paint._values){if(!u(g))continue;const y=a.paint.get(g);if(!(y instanceof ct&&$a(y.property.specification)))continue;const x=mm(g,a.type),M=y.value,z=y.property.specification.type,E=!!y.property.useIntegerZoom,H="line-dasharray"===g||g.endsWith("pattern"),I="line-dasharray"===g&&"constant"!==a.layout.get("line-cap").value.kind;if("constant"!==M.kind||I)if("source"===M.kind||I||H){const N=_m(g,z,"source");this.binders[g]=H?new ra(M,x,z,N,a.id):new mc(M,x,z,N),h.push(`/a_${g}`)}else{const N=_m(g,z,"composite");this.binders[g]=new Ai(M,x,z,E,c,N),h.push(`/z_${g}`)}else this.binders[g]=H?new vs(M.value,x):new B3(M.value,x,z),h.push(`/u_${g}`)}this.cacheKey=h.sort().join("")}getMaxValue(a){const c=this.binders[a];return c instanceof mc||c instanceof Ai?c.maxValue:0}populatePaintArrays(a,c,u,h,g,y){for(const x in this.binders){const M=this.binders[x];(M instanceof mc||M instanceof Ai||M instanceof ra)&&M.populatePaintArray(a,c,u,h,g,y)}}setConstantPatternPositions(a){for(const c in this.binders){const u=this.binders[c];u instanceof vs&&u.setConstantPatternPositions(a)}}updatePaintArrays(a,c,u,h,g,y){let x=!1;for(const M in a){const z=c.getPositions(M);for(const E of z){const H=u.feature(E.index);for(const I in this.binders){const N=this.binders[I];if((N instanceof mc||N instanceof Ai||N instanceof ra)&&!0===N.expression.isStateDependent){const O=h.paint.get(I);N.expression=O.value,N.updatePaintArray(E.start,E.end,H,a[M],g,y),x=!0}}}}return x}defines(){const a=[];for(const c in this.binders){const u=this.binders[c];(u instanceof B3||u instanceof vs)&&a.push(...u.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return a}getBinderAttributes(){const a=[];for(const c in this.binders){const u=this.binders[c];if(u instanceof mc||u instanceof Ai||u instanceof ra)for(let h=0;h<u.paintVertexAttributes.length;h++)a.push(u.paintVertexAttributes[h].name)}return a}getBinderUniforms(){const a=[];for(const c in this.binders){const u=this.binders[c];if(u instanceof B3||u instanceof vs||u instanceof Ai)for(const h of u.uniformNames)a.push(h)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const c=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof B3||h instanceof vs||h instanceof Ai)for(const g of h.uniformNames)c.push({name:g,property:u,binding:h.getBinding(a,g)})}return c}setUniforms(a,c,u,h,g){for(const{name:y,property:x,binding:M}of u)this.binders[x].setUniform(a,M,g,h.get(x),y)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const c=this.binders[a];(c instanceof mc||c instanceof Ai||c instanceof ra)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(a){for(const c in this.binders){const u=this.binders[c];(u instanceof mc||u instanceof Ai||u instanceof ra)&&u.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const c=this.binders[a];(c instanceof mc||c instanceof Ai||c instanceof ra)&&c.destroy()}}}class ys{constructor(a,c,u=(()=>!0)){this.programConfigurations={};for(const h of a)this.programConfigurations[h.id]=new gc(h,c,u);this.needsUpload=!1,this._featureMap=new vt,this._bufferOffset=0}populatePaintArrays(a,c,u,h,g,y,x){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(a,c,h,g,y,x);void 0!==c.id&&this._featureMap.add(c.id,u,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,c,u,h,g){for(const y of u)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(a,this._featureMap,c,y,h,g)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const a0={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function mm(o,a){return a0[o]||[o.replace(`${a}-`,"").replace(/-/g,"_")]}const Bx={"line-pattern":{source:oi,composite:oi},"fill-pattern":{source:oi,composite:oi},"fill-extrusion-pattern":{source:oi,composite:oi},"line-dasharray":{source:h2,composite:h2}},gm={color:{source:Oo,composite:Mn},number:{source:vr,composite:Oo}};function _m(o,a,c){const u=Bx[o];return u&&u[c]||gm[a][c]}Et(B3,"ConstantBinder"),Et(vs,"PatternConstantBinder"),Et(mc,"SourceExpressionBinder"),Et(ra,"PatternCompositeBinder"),Et(Ai,"CompositeExpressionBinder"),Et(gc,"ProgramConfiguration",{omit:["_buffers"]}),Et(ys,"ProgramConfigurationSet");const yr="-transition";class xa extends Xr{constructor(a,c){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==a.type&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,"background"!==a.type&&"sky"!==a.type&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),c.layout&&(this._unevaluatedLayout=new Be(c.layout)),c.paint)){this._transitionablePaint=new gt(c.paint);for(const u in a.paint)this.setPaintProperty(u,a.paint[u],{validate:!1});for(const u in a.layout)this.setLayoutProperty(u,a.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pe(c.paint)}}getLayoutProperty(a){return"visibility"===a?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,c,u={}){null!=c&&this._validate(Fo,`layers.${this.id}.layout.${a}`,a,c,u)||("visibility"!==a?this._unevaluatedLayout.setValue(a,c):this.visibility=c)}getPaintProperty(a){return Ar(a,yr)?this._transitionablePaint.getTransition(a.slice(0,-yr.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,c,u={}){if(null!=c&&this._validate(_5,`layers.${this.id}.paint.${a}`,a,c,u))return!1;if(Ar(a,yr))return this._transitionablePaint.setTransition(a.slice(0,-yr.length),c||void 0),!1;{const h=this._transitionablePaint._values[a],g=h.value.isDataDriven(),y=h.value;this._transitionablePaint.setValue(a,c),this._handleSpecialPaintPropertyUpdate(a);const x=this._transitionablePaint._values[a].value,M=x.isDataDriven(),z=Ar(a,"pattern")||"line-dasharray"===a;return M||g||z||this._handleOverridablePaintPropertyUpdate(a,y,x)}}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getProgramConfiguration(a){return null}_handleOverridablePaintPropertyUpdate(a,c,u){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||"none"===this.visibility}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,c){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,c)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),V1(a,(c,u)=>!(void 0===c||"layout"===u&&!Object.keys(c).length||"paint"===u&&!Object.keys(c).length))}_validate(a,c,u,h,g={}){return(!g||!1!==g.validate)&&k4(this,a.call(I3,{key:c,layerType:this.type,objectKey:u,value:h,styleSpec:qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const c=this.paint.get(a);if(c instanceof ct&&$a(c.property.specification)&&("source"===c.value.kind||"composite"===c.value.kind)&&c.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=T3(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const O4=Ft([{name:"a_pos",components:2,type:"Int16"}],4),Ux=Ft([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ui{constructor(a=[]){this.segments=a}prepareSegment(a,c,u,h){let g=this.segments[this.segments.length-1];return a>ui.MAX_VERTEX_ARRAY_LENGTH&&tn(`Max vertices per segment is ${ui.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!g||g.vertexLength+a>ui.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h)&&(g={vertexOffset:c.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},void 0!==h&&(g.sortKey=h),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const a of this.segments)for(const c in a.vaos)a.vaos[c].destroy()}static simpleSegment(a,c,u,h){return new ui([{vertexOffset:a,primitiveOffset:c,vertexLength:u,primitiveLength:h,vaos:{},sortKey:0}])}}ui.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Et(ui,"SegmentVector");var a1=8192;class o3{constructor(a,c){a&&(c?this.setSouthWest(a).setNorthEast(c):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof sn?new sn(a.lng,a.lat):sn.convert(a),this}setSouthWest(a){return this._sw=a instanceof sn?new sn(a.lng,a.lat):sn.convert(a),this}extend(a){const c=this._sw,u=this._ne;let h,g;if(a instanceof sn)h=a,g=a;else{if(!(a instanceof o3))return Array.isArray(a)?4===a.length||a.every(Array.isArray)?this.extend(o3.convert(a)):this.extend(sn.convert(a)):"object"==typeof a&&null!==a&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(sn.convert(a)):this;if(h=a._sw,g=a._ne,!h||!g)return this}return c||u?(c.lng=Math.min(h.lng,c.lng),c.lat=Math.min(h.lat,c.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new sn(h.lng,h.lat),this._ne=new sn(g.lng,g.lat)),this}getCenter(){return new sn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new sn(this.getWest(),this.getNorth())}getSouthEast(){return new sn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:c,lat:u}=sn.convert(a);let h=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h}static convert(a){return!a||a instanceof o3?a:new o3(a)}}var M6=1e-6,aa=typeof Float32Array<"u"?Float32Array:Array;function H7(){var o=new aa(9);return aa!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function k7(o,a,c){var u=a[0],h=a[1],g=a[2],y=a[3],x=a[4],M=a[5],z=a[6],E=a[7],H=a[8],I=c[0],N=c[1],O=c[2],j=c[3],X=c[4],ae=c[5],me=c[6],re=c[7],de=c[8];return o[0]=I*u+N*y+O*z,o[1]=I*h+N*x+O*E,o[2]=I*g+N*M+O*H,o[3]=j*u+X*y+ae*z,o[4]=j*h+X*x+ae*E,o[5]=j*g+X*M+ae*H,o[6]=me*u+re*y+de*z,o[7]=me*h+re*x+de*E,o[8]=me*g+re*M+de*H,o}function Ca(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function B4(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=a[4],x=a[5],M=a[6],z=a[7],E=a[8],H=a[9],I=a[10],N=a[11],O=a[12],j=a[13],X=a[14],ae=a[15],me=c*x-u*y,re=c*M-h*y,de=c*z-g*y,ve=u*M-h*x,he=u*z-g*x,ke=h*z-g*M,Ve=E*j-H*O,Ge=E*X-I*O,We=E*ae-N*O,Fe=H*X-I*j,Ke=H*ae-N*j,nt=I*ae-N*X,st=me*nt-re*Ke+de*Fe+ve*We-he*Ge+ke*Ve;return st?(o[0]=(x*nt-M*Ke+z*Fe)*(st=1/st),o[1]=(h*Ke-u*nt-g*Fe)*st,o[2]=(j*ke-X*he+ae*ve)*st,o[3]=(I*he-H*ke-N*ve)*st,o[4]=(M*We-y*nt-z*Ge)*st,o[5]=(c*nt-h*We+g*Ge)*st,o[6]=(X*de-O*ke-ae*re)*st,o[7]=(E*ke-I*de+N*re)*st,o[8]=(y*Ke-x*We+z*Ve)*st,o[9]=(u*We-c*Ke-g*Ve)*st,o[10]=(O*he-j*de+ae*me)*st,o[11]=(H*de-E*he-N*me)*st,o[12]=(x*Ge-y*Fe-M*Ve)*st,o[13]=(c*Fe-u*Ge+h*Ve)*st,o[14]=(j*re-O*ve-X*me)*st,o[15]=(E*ve-H*re+I*me)*st,o):null}function bs(o,a,c){var u=a[0],h=a[1],g=a[2],y=a[3],x=a[4],M=a[5],z=a[6],E=a[7],H=a[8],I=a[9],N=a[10],O=a[11],j=a[12],X=a[13],ae=a[14],me=a[15],re=c[0],de=c[1],ve=c[2],he=c[3];return o[0]=re*u+de*x+ve*H+he*j,o[1]=re*h+de*M+ve*I+he*X,o[2]=re*g+de*z+ve*N+he*ae,o[3]=re*y+de*E+ve*O+he*me,o[4]=(re=c[4])*u+(de=c[5])*x+(ve=c[6])*H+(he=c[7])*j,o[5]=re*h+de*M+ve*I+he*X,o[6]=re*g+de*z+ve*N+he*ae,o[7]=re*y+de*E+ve*O+he*me,o[8]=(re=c[8])*u+(de=c[9])*x+(ve=c[10])*H+(he=c[11])*j,o[9]=re*h+de*M+ve*I+he*X,o[10]=re*g+de*z+ve*N+he*ae,o[11]=re*y+de*E+ve*O+he*me,o[12]=(re=c[12])*u+(de=c[13])*x+(ve=c[14])*H+(he=c[15])*j,o[13]=re*h+de*M+ve*I+he*X,o[14]=re*g+de*z+ve*N+he*ae,o[15]=re*y+de*E+ve*O+he*me,o}function wa(o,a,c){var u,h,g,y,x,M,z,E,H,I,N,O,j=c[0],X=c[1],ae=c[2];return a===o?(o[12]=a[0]*j+a[4]*X+a[8]*ae+a[12],o[13]=a[1]*j+a[5]*X+a[9]*ae+a[13],o[14]=a[2]*j+a[6]*X+a[10]*ae+a[14],o[15]=a[3]*j+a[7]*X+a[11]*ae+a[15]):(h=a[1],g=a[2],y=a[3],x=a[4],M=a[5],z=a[6],E=a[7],H=a[8],I=a[9],N=a[10],O=a[11],o[0]=u=a[0],o[1]=h,o[2]=g,o[3]=y,o[4]=x,o[5]=M,o[6]=z,o[7]=E,o[8]=H,o[9]=I,o[10]=N,o[11]=O,o[12]=u*j+x*X+H*ae+a[12],o[13]=h*j+M*X+I*ae+a[13],o[14]=g*j+z*X+N*ae+a[14],o[15]=y*j+E*X+O*ae+a[15]),o}function s3(o,a,c){var u=c[0],h=c[1],g=c[2];return o[0]=a[0]*u,o[1]=a[1]*u,o[2]=a[2]*u,o[3]=a[3]*u,o[4]=a[4]*h,o[5]=a[5]*h,o[6]=a[6]*h,o[7]=a[7]*h,o[8]=a[8]*g,o[9]=a[9]*g,o[10]=a[10]*g,o[11]=a[11]*g,o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o}function xs(o,a,c){var u=Math.sin(c),h=Math.cos(c),g=a[4],y=a[5],x=a[6],M=a[7],z=a[8],E=a[9],H=a[10],I=a[11];return a!==o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[4]=g*h+z*u,o[5]=y*h+E*u,o[6]=x*h+H*u,o[7]=M*h+I*u,o[8]=z*h-g*u,o[9]=E*h-y*u,o[10]=H*h-x*u,o[11]=I*h-M*u,o}function z6(o,a,c){var u=Math.sin(c),h=Math.cos(c),g=a[0],y=a[1],x=a[2],M=a[3],z=a[8],E=a[9],H=a[10],I=a[11];return a!==o&&(o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=g*h-z*u,o[1]=y*h-E*u,o[2]=x*h-H*u,o[3]=M*h-I*u,o[8]=g*u+z*h,o[9]=y*u+E*h,o[10]=x*u+H*h,o[11]=M*u+I*h,o}function M5(o,a){return o[0]=a[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function U4(o,a,c){var u,h,g,y=c[0],x=c[1],M=c[2],z=Math.hypot(y,x,M);return z<M6?null:(y*=z=1/z,x*=z,M*=z,u=Math.sin(a),h=Math.cos(a),o[0]=y*y*(g=1-h)+h,o[1]=x*y*g+M*u,o[2]=M*y*g-x*u,o[3]=0,o[4]=y*x*g-M*u,o[5]=x*x*g+h,o[6]=M*x*g+y*u,o[7]=0,o[8]=y*M*g+x*u,o[9]=x*M*g-y*u,o[10]=M*M*g+h,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}Math.hypot||(Math.hypot=function(){for(var o=0,a=arguments.length;a--;)o+=arguments[a]*arguments[a];return Math.sqrt(o)});var S6=bs;function D6(){var o=new aa(3);return aa!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function I7(o){var a=new aa(3);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a}function o0(o){return Math.hypot(o[0],o[1],o[2])}function Bo(o,a,c){var u=new aa(3);return u[0]=o,u[1]=a,u[2]=c,u}function Ma(o,a,c){return o[0]=a[0]+c[0],o[1]=a[1]+c[1],o[2]=a[2]+c[2],o}function z5(o,a,c){return o[0]=a[0]-c[0],o[1]=a[1]-c[1],o[2]=a[2]-c[2],o}function vm(o,a,c){return o[0]=a[0]*c[0],o[1]=a[1]*c[1],o[2]=a[2]*c[2],o}function j4(o,a,c){return o[0]=Math.min(a[0],c[0]),o[1]=Math.min(a[1],c[1]),o[2]=Math.min(a[2],c[2]),o}function s0(o,a,c){return o[0]=Math.max(a[0],c[0]),o[1]=Math.max(a[1],c[1]),o[2]=Math.max(a[2],c[2]),o}function no(o,a,c){return o[0]=a[0]*c,o[1]=a[1]*c,o[2]=a[2]*c,o}function c0(o,a,c,u){return o[0]=a[0]+c[0]*u,o[1]=a[1]+c[1]*u,o[2]=a[2]+c[2]*u,o}function br(o,a){var c=a[0],u=a[1],h=a[2],g=c*c+u*u+h*h;return g>0&&(g=1/Math.sqrt(g)),o[0]=a[0]*g,o[1]=a[1]*g,o[2]=a[2]*g,o}function io(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]}function G4(o,a,c){var u=a[0],h=a[1],g=a[2],y=c[0],x=c[1],M=c[2];return o[0]=h*M-g*x,o[1]=g*y-u*M,o[2]=u*x-h*y,o}function ci(o,a,c){var u=a[0],h=a[1],g=a[2],y=c[3]*u+c[7]*h+c[11]*g+c[15];return o[0]=(c[0]*u+c[4]*h+c[8]*g+c[12])/(y=y||1),o[1]=(c[1]*u+c[5]*h+c[9]*g+c[13])/y,o[2]=(c[2]*u+c[6]*h+c[10]*g+c[14])/y,o}function R7(o,a,c){var u=c[0],h=c[1],g=c[2],y=a[0],x=a[1],M=a[2],z=h*M-g*x,E=g*y-u*M,H=u*x-h*y,I=h*H-g*E,N=g*z-u*H,O=u*E-h*z,j=2*c[3];return E*=j,H*=j,N*=2,O*=2,o[0]=y+(z*=j)+(I*=2),o[1]=x+E+N,o[2]=M+H+O,o}var $4,Cs=z5,P7=vm,jx=o0;function F7(o,a,c){return o[0]=a[0]*c,o[1]=a[1]*c,o[2]=a[2]*c,o[3]=a[3]*c,o}function N7(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=c*c+u*u+h*h+g*g;return y>0&&(y=1/Math.sqrt(y)),o[0]=c*y,o[1]=u*y,o[2]=h*y,o[3]=g*y,o}function _c(o,a,c){var u=a[0],h=a[1],g=a[2],y=a[3];return o[0]=c[0]*u+c[4]*h+c[8]*g+c[12]*y,o[1]=c[1]*u+c[5]*h+c[9]*g+c[13]*y,o[2]=c[2]*u+c[6]*h+c[10]*g+c[14]*y,o[3]=c[3]*u+c[7]*h+c[11]*g+c[15]*y,o}function ym(){var o=new aa(4);return aa!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function bm(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function A6(o,a,c){c*=.5;var u=a[0],h=a[1],g=a[2],y=a[3],x=Math.sin(c),M=Math.cos(c);return o[0]=u*M+y*x,o[1]=h*M+g*x,o[2]=g*M-h*x,o[3]=y*M-u*x,o}function xm(o,a,c){c*=.5;var u=a[0],h=a[1],g=a[2],y=a[3],x=Math.sin(c),M=Math.cos(c);return o[0]=u*M-g*x,o[1]=h*M+y*x,o[2]=g*M+u*x,o[3]=y*M-h*x,o}D6(),$4=new aa(4),aa!=Float32Array&&($4[0]=0,$4[1]=0,$4[2]=0,$4[3]=0);var Gx=N7;D6(),Bo(1,0,0),Bo(0,1,0),ym(),ym(),H7();const $x=Ft([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Cm}=$x,wm=Ft([{name:"a_pos_3",components:3,type:"Int16"}]);var l0=Ft([{name:"a_pos",type:"Int16",components:2}]);class E6{constructor(a,c){this.pos=a,this.dir=c}intersectsPlane(a,c,u){const h=io(c,this.dir);if(Math.abs(h)<1e-6)return!1;const g=((a[0]-this.pos[0])*c[0]+(a[1]-this.pos[1])*c[1]+(a[2]-this.pos[2])*c[2])/h;return u[0]=this.pos[0]+this.dir[0]*g,u[1]=this.pos[1]+this.dir[1]*g,u[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(a,c,u){if(j=(N=this.pos)[0],X=N[1],ae=N[2],me=(O=a)[0],re=O[1],de=O[2],Math.abs(j-me)<=M6*Math.max(1,Math.abs(j),Math.abs(me))&&Math.abs(X-re)<=M6*Math.max(1,Math.abs(X),Math.abs(re))&&Math.abs(ae-de)<=M6*Math.max(1,Math.abs(ae),Math.abs(de))||0===c)return u[0]=u[1]=u[2]=0,!1;var N,O,j,X,ae,me,re,de;const[h,g,y]=this.dir,x=this.pos[0]-a[0],M=this.pos[1]-a[1],z=this.pos[2]-a[2],E=h*h+g*g+y*y,H=2*(x*h+M*g+z*y),I=H*H-4*E*(x*x+M*M+z*z-c*c);if(I<0){const N=Math.max(-H/2,0),O=x+h*N,j=M+g*N,X=z+y*N,ae=Math.hypot(O,j,X);return u[0]=O*c/ae,u[1]=j*c/ae,u[2]=X*c/ae,!1}{const N=(-H-Math.sqrt(I))/(2*E);if(N<0){const O=Math.hypot(x,M,z);return u[0]=x*c/O,u[1]=M*c/O,u[2]=z*c/O,!1}return u[0]=x+h*N,u[1]=M+g*N,u[2]=z+y*N,!0}}}class u0{constructor(a,c,u,h,g){this.TL=a,this.TR=c,this.BR=u,this.BL=h,this.horizon=g}static fromInvProjectionMatrix(a,c,u){const h=[-1,1,1],g=[1,1,1],y=[1,-1,1],x=[-1,-1,1],M=ci(h,h,a),z=ci(g,g,a),E=ci(y,y,a),H=ci(x,x,a);return new u0(M,z,E,H,c/u)}}class V6{constructor(a,c){this.points=a,this.planes=c}static fromInvProjectionMatrix(a,c,u,h){const g=Math.pow(2,u),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const z=_c([],M,a),E=1/z[3]/c*g;return(H=z)[0]=(I=z)[0]*(N=[E,E,h?1/z[3]:E,E])[0],H[1]=I[1]*N[1],H[2]=I[2]*N[2],H[3]=I[3]*N[3],H;var H,I,N}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const z=br([],G4([],Cs([],y[M[0]],y[M[1]]),Cs([],y[M[2]],y[M[1]]))),E=-io(z,y[M[1]]);return z.concat(E)});return new V6(y,x)}}class $2{static fromPoints(a){const c=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const h of a)j4(c,c,h),s0(u,u,h);return new $2(c,u)}static applyTransform(a,c){const u=a.getCorners();for(let h=0;h<u.length;++h)ci(u[h],u[h],c);return $2.fromPoints(u)}constructor(a,c){this.min=a,this.max=c,this.center=no([],Ma([],this.min,this.max),.5)}quadrant(a){const c=[a%2==0,a<2],u=I7(this.min),h=I7(this.max);for(let g=0;g<c.length;g++)u[g]=c[g]?this.min[g]:this.center[g],h[g]=c[g]?this.center[g]:this.max[g];return h[2]=this.max[2],new $2(u,h)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,c=this.max;return[[a[0],a[1],a[2]],[c[0],a[1],a[2]],[c[0],c[1],a[2]],[a[0],c[1],a[2]],[a[0],a[1],c[2]],[c[0],a[1],c[2]],[c[0],c[1],c[2]],[a[0],c[1],c[2]]]}intersects(a){const c=this.getCorners();let u=!0;for(let h=0;h<a.planes.length;h++){const g=a.planes[h];let y=0;for(let x=0;x<c.length;x++)y+=io(g,c[x])+g[3]>=0;if(0===y)return 0;y!==c.length&&(u=!1)}if(u)return 2;for(let h=0;h<3;h++){let g=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let x=0;x<a.points.length;x++){const M=a.points[x][h]-this.min[h];g=Math.min(g,M),y=Math.max(y,M)}if(y<0||g>this.max[h]-this.min[h])return 0}return 1}}const Uo=a1/Math.PI/2,d0=[64,32,16],ro=-Uo,ao=Uo,O7=[new $2([ro,ro,ro],[ao,ao,ao]),new $2([ro,ro,ro],[0,0,ao]),new $2([0,ro,ro],[ao,0,ao]),new $2([ro,0,ro],[0,ao,ao]),new $2([0,0,ro],[ao,ao,ao])];function q4(o){return o*Uo/m0}function B7(o,a,c,u=!0){const h=no([],o._camera.position,o.worldSize),g=[a,c,1,1];_c(g,g,o.pixelMatrixInverse),F7(g,g,1/g[3]);const y=br([],Cs([],g,h)),x=o.globeMatrix,M=[x[12],x[13],x[14]],z=Cs([],M,h),E=o0(z),H=br([],z),I=o.worldSize/(2*Math.PI),N=io(H,y),O=Math.asin(I/E);if(O<Math.acos(N)){if(!u)return null;const We=[],Fe=[];no(We,y,E/N),br(Fe,Cs(Fe,We,z)),br(y,Ma(y,z,no(y,Fe,Math.tan(O)*E)))}const j=[];new E6(h,y).closestPointOnSphere(M,I,j);const X=br([],Kn(x,0)),ae=br([],Kn(x,1)),me=br([],Kn(x,2)),re=io(X,j),de=io(ae,j),ve=io(me,j),he=ni(Math.asin(-de/I));let ke=ni(Math.atan2(re,ve));ke=o.center.lng+function(We,Fe){const Ke=(Fe-We+180)%360-180;return Ke<-180?Ke+360:Ke}(o.center.lng,ke);const Ve=oo(ke),Ge=f1(so(he),0,1);return new K4(Ve,Ge)}class Mm{constructor(a,c,u){this.a=Cs([],a,u),this.b=Cs([],c,u),this.center=u;const h=br([],this.a),g=br([],this.b);this.angle=Math.acos(io(h,g))}}function S5(o,a){if(0===o.angle)return null;let c;return c=0===o.a[a]?1/o.angle*.5*Math.PI:1/o.angle*Math.atan(o.b[a]/o.a[a]/Math.sin(o.angle)-1/Math.tan(o.angle)),c<0||c>1?null:function(u,h,g,y){const x=Math.sin(g);return u*(Math.sin((1-y)*g)/x)+h*(Math.sin(y*g)/x)}(o.a[a],o.b[a],o.angle,f1(c,0,1))+o.center[a]}function jo(o){if(o.z<=1)return O7[o.z+2*o.y+o.x];const a=h0(f0(o));return $2.fromPoints(a)}function U3(o,a,c){return no(o,o,1-c),c0(o,o,a,c)}function U7(o,a){const c=Y4(a.zoom);if(0===c)return jo(o);const u=f0(o),h=h0(u),g=oo(u.getWest())*a.worldSize,y=oo(u.getEast())*a.worldSize,x=so(u.getNorth())*a.worldSize,M=so(u.getSouth())*a.worldSize,z=[g,x,0],E=[y,x,0],H=[g,M,0],I=[y,M,0],N=B4([],a.globeMatrix);return ci(z,z,N),ci(E,E,N),ci(H,H,N),ci(I,I,N),h[0]=U3(h[0],H,c),h[1]=U3(h[1],I,c),h[2]=U3(h[2],E,c),h[3]=U3(h[3],z,c),$2.fromPoints(h)}function Pr(o,a,c){for(const u of o)ci(u,u,a),no(u,u,c)}function f0({x:o,y:a,z:c}){const u=1/(1<<c),h=new sn(A2(o*u),e2((a+1)*u)),g=new sn(A2((o+1)*u),e2(a*u));return new o3(h,g)}function h0(o){const a=F1(o.getNorth()),c=F1(o.getSouth()),u=Math.cos(a),h=Math.cos(c),g=Math.sin(a),y=Math.sin(c),x=o.getWest(),M=o.getEast();return[Fi(h,y,x),Fi(h,y,M),Fi(u,g,M),Fi(u,g,x)]}function Fi(o,a,c,u=Uo){return c=F1(c),[o*Math.sin(c)*u,-a*u,o*Math.cos(c)*u]}function ws(o,a,c){return Fi(Math.cos(F1(o)),Math.sin(F1(o)),a,c)}function W4(o,a,c,u){const h=1<<c.z,g=(o/a1+c.x)/h;return ws(e2((a/a1+c.y)/h),A2(g),u)}function p0({min:o,max:a}){return 16383/Math.max(a[0]-o[0],a[1]-o[1],a[2]-o[2])}const j7=new Float64Array(16);function Z4(o){const a=p0(o),c=M5(j7,[a,a,a]);return wa(c,c,((u=[])[0]=-(h=o.min)[0],u[1]=-h[1],u[2]=-h[2],u));var u,h}function A5(o){const a=(u=o.min,(c=j7)[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=u[0],c[13]=u[1],c[14]=u[2],c[15]=1,c);var c,u;const h=1/p0(o);return s3(a,a,[h,h,h])}function E5(o,a,c,u,h){const g=function(M){const z=a1/(2*Math.PI);return M/(2*Math.PI)/z}(c),y=[o,a,-c/(2*Math.PI)],x=Ca(new Float64Array(16));return wa(x,x,y),s3(x,x,[g,g,g]),xs(x,x,F1(-h)),z6(x,x,F1(-u)),x}function Y4(o){return c2(5,6,o)}function V5(o,a){const c=ws(a.lat,a.lng);return y=(h=z5([],function(O){const j=ws(O._center.lat,O._center.lng);let X=G4([],Bo(0,1,0),j);const ae=U4([],-O.angle,j);X=ci(X,X,ae),U4(ae,-O._pitch,X);const me=br([],j);return no(me,me,q4(O.cameraToCenterDistance/O.pixelsPerMeter)),ci(me,me,ae),Ma([],j,me)}(o),c))[0],x=h[1],M=h[2],z=(g=c)[0],E=g[1],H=g[2],N=(I=Math.sqrt(y*y+x*x+M*M)*Math.sqrt(z*z+E*E+H*H))&&io(h,g)/I,Math.acos(Math.min(Math.max(N,-1),1));var h,g,y,x,M,z,E,H,I,N}function L5(o,a){return V5(o,a)>Math.PI/2*1.01}const G7=F1(85),T5=Math.cos(G7),H5=Math.sin(G7),m0=6371008.8,X4=2*Math.PI*m0;class sn{constructor(a,c){if(isNaN(a)||isNaN(c))throw new Error(`Invalid LngLat object: (${a}, ${c})`);if(this.lng=+a,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sn(b2(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const c=Math.PI/180,u=this.lat*c,h=a.lat*c,g=Math.sin(u)*Math.sin(h)+Math.cos(u)*Math.cos(h)*Math.cos((a.lng-this.lng)*c);return m0*Math.acos(Math.min(g,1))}toBounds(a=0){const c=360*a/40075017,u=c/Math.cos(Math.PI/180*this.lat);return new o3(new sn(this.lng-u,this.lat-c),new sn(this.lng+u,this.lat+c))}toEcef(a){const c=q4(a);return ws(this.lat,this.lng,Uo+c)}static convert(a){if(a instanceof sn)return a;if(Array.isArray(a)&&(2===a.length||3===a.length))return new sn(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&"object"==typeof a&&null!==a)return new sn(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function k5(o){return X4*Math.cos(o*Math.PI/180)}function oo(o){return(180+o)/360}function so(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function co(o,a){return o/k5(a)}function A2(o){return 360*o-180}function e2(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function I5(o,a){return o*k5(e2(a))}const E2=85.051129;function L6(o){return 1/Math.cos(o*Math.PI/180)}class K4{constructor(a,c,u=0){this.x=+a,this.y=+c,this.z=+u}static fromLngLat(a,c=0){const u=sn.convert(a);return new K4(oo(u.lng),so(u.lat),co(c,u.lat))}toLngLat(){return new sn(A2(this.x),e2(this.y))}toAltitude(){return I5(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/X4*L6(e2(this.y))}}function R5(o,a,c,u,h,g,y,x,M){const z=(a+u)/2,E=(c+h)/2,H=new pt(z,E);x(H),function(I,N,O,j,X,ae){const me=O-X,re=j-ae;return Math.abs((j-N)*me-(O-I)*re)/Math.hypot(me,re)}(H.x,H.y,g.x,g.y,y.x,y.y)>=M?(R5(o,a,c,z,E,g,H,x,M),R5(o,z,E,u,h,H,y,x,M)):o.push(y)}function $7(o,a,c){let u=o[0],h=u.x,g=u.y;a(u);const y=[u];for(let x=1;x<o.length;x++){const M=o[x],{x:z,y:E}=M;a(M),R5(y,h,g,z,E,u,M,a,c),h=z,g=E,u=M}return y}function P5(o,a,c,u){if(u(a,c)){const h=a.add(c)._mult(.5);P5(o,a,h,u),P5(o,h,c,u)}else o.push(c)}function zm(o,a){let c=o[0];const u=[c];for(let h=1;h<o.length;h++){const g=o[h];P5(u,c,g,a),c=g}return u}const F5=Math.pow(2,14)-1,N5=-F5-1;function O5(o,a){const c=Math.round(o.x*a),u=Math.round(o.y*a);return o.x=f1(c,N5,F5),o.y=f1(u,N5,F5),(c<o.x||c>o.x+1||u<o.y||u>o.y+1)&&tn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o}function Ms(o,a,c){const u=o.loadGeometry(),h=o.extent,g=a1/h;if(a&&c&&c.projection.isReprojectedInTileSpace){const y=1<<a.z,{scale:x,x:M,y:z,projection:E}=c,H=I=>{const N=A2((a.x+I.x/h)/y),O=e2((a.y+I.y/h)/y),j=E.project(N,O);I.x=(j.x*x-M)*h,I.y=(j.y*x-z)*h};for(let I=0;I<u.length;I++)if(1!==o.type)u[I]=$7(u[I],H,1);else{const N=[];for(const O of u[I])O.x<0||O.x>=h||O.y<0||O.y>=h||(H(O),N.push(O));u[I]=N}}for(const y of u)for(const x of y)O5(x,g);return u}function vc(o,a){return{type:o.type,id:o.id,properties:o.properties,geometry:a?Ms(o):[]}}function T6(o,a,c,u,h){o.emplaceBack(2*a+(u+1)/2,2*c+(h+1)/2)}function H6(o,a,c){o.emplaceBack(a.x,a.y,a.z,16384*c[0],16384*c[1],16384*c[2])}class k6{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new Ut,this.indexArray=new Qi,this.segments=new ui,this.programConfigurations=new ys(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,u,h){const g=this.layers[0],y=[];let x=null;"circle"===g.type&&(x=g.layout.get("circle-sort-key"));for(const{feature:z,id:E,index:H,sourceLayerIndex:I}of a){const N=this.layers[0]._featureFilter.needGeometry,O=vc(z,N);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),O,u))continue;const j=x?x.evaluate(O,{},u):void 0,X={id:E,properties:z.properties,type:z.type,sourceLayerIndex:I,index:H,geometry:N?O.geometry:Ms(z,u,h),patterns:{},sortKey:j};y.push(X)}x&&y.sort((z,E)=>z.sortKey-E.sortKey);let M=null;"globe"===h.projection.name&&(this.globeExtVertexArray=new Ka,M=h.projection);for(const z of y){const{geometry:E,index:H,sourceLayerIndex:I}=z,N=a[H].feature;this.addFeature(z,E,H,c.availableImages,u,M),c.featureIndex.insert(N,E,H,I,this.index)}}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,O4.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,Ux.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,c,u,h,g,y){for(const x of c)for(const M of x){const z=M.x,E=M.y;if(z<0||z>=a1||E<0||E>=a1)continue;if(y){const N=y.projectTilePoint(z,E,g),O=y.upVector(g,z,E),j=this.globeExtVertexArray;H6(j,N,O),H6(j,N,O),H6(j,N,O),H6(j,N,O)}const H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),I=H.vertexLength;T6(this.layoutVertexArray,z,E,-1,-1),T6(this.layoutVertexArray,z,E,1,-1),T6(this.layoutVertexArray,z,E,1,1),T6(this.layoutVertexArray,z,E,-1,1),this.indexArray.emplaceBack(I,I+1,I+2),this.indexArray.emplaceBack(I,I+2,I+3),H.vertexLength+=4,H.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,{},h,g)}}function B5(o,a){for(let c=0;c<o.length;c++)if(c3(a,o[c]))return!0;for(let c=0;c<a.length;c++)if(c3(o,a[c]))return!0;return!!j5(o,a)}function j3(o,a,c){return!!c3(o,a)||!!Q4(a,o,c)}function U5(o,a){if(1===o.length)return G5(a,o[0]);for(let c=0;c<a.length;c++){const u=a[c];for(let h=0;h<u.length;h++)if(c3(o,u[h]))return!0}for(let c=0;c<o.length;c++)if(G5(a,o[c]))return!0;for(let c=0;c<a.length;c++)if(j5(o,a[c]))return!0;return!1}function q7(o,a,c){if(o.length>1){if(j5(o,a))return!0;for(let u=0;u<a.length;u++)if(Q4(a[u],o,c))return!0}for(let u=0;u<o.length;u++)if(Q4(o[u],a,c))return!0;return!1}function j5(o,a){if(0===o.length||0===a.length)return!1;for(let c=0;c<o.length-1;c++){const u=o[c],h=o[c+1];for(let g=0;g<a.length-1;g++)if(qx(u,h,a[g],a[g+1]))return!0}return!1}function qx(o,a,c,u){return or(o,c,u)!==or(a,c,u)&&or(o,a,c)!==or(o,a,u)}function Q4(o,a,c){const u=c*c;if(1===a.length)return o.distSqr(a[0])<u;for(let h=1;h<a.length;h++)if(W7(o,a[h-1],a[h])<u)return!0;return!1}function W7(o,a,c){const u=a.distSqr(c);if(0===u)return o.distSqr(a);const h=((o.x-a.x)*(c.x-a.x)+(o.y-a.y)*(c.y-a.y))/u;return o.distSqr(h<0?a:h>1?c:c.sub(a)._mult(h)._add(a))}function G5(o,a){let c,u,h,g=!1;for(let y=0;y<o.length;y++){c=o[y];for(let x=0,M=c.length-1;x<c.length;M=x++)u=c[x],h=c[M],u.y>a.y!=h.y>a.y&&a.x<(h.x-u.x)*(a.y-u.y)/(h.y-u.y)+u.x&&(g=!g)}return g}function c3(o,a){let c=!1;for(let u=0,h=o.length-1;u<o.length;h=u++){const g=o[u],y=o[h];g.y>a.y!=y.y>a.y&&a.x<(y.x-g.x)*(a.y-g.y)/(y.y-g.y)+g.x&&(c=!c)}return c}function $5(o,a,c,u,h){for(const y of o)if(a<=y.x&&c<=y.y&&u>=y.x&&h>=y.y)return!0;const g=[new pt(a,c),new pt(a,h),new pt(u,h),new pt(u,c)];if(o.length>2)for(const y of g)if(c3(o,y))return!0;for(let y=0;y<o.length-1;y++)if(q5(o[y],o[y+1],g))return!0;return!1}function q5(o,a,c){const u=c[0],h=c[2];if(o.x<u.x&&a.x<u.x||o.x>h.x&&a.x>h.x||o.y<u.y&&a.y<u.y||o.y>h.y&&a.y>h.y)return!1;const g=or(o,a,c[0]);return g!==or(o,a,c[1])||g!==or(o,a,c[2])||g!==or(o,a,c[3])}function G3(o,a,c){const u=a.paint.get(o).value;return"constant"===u.kind?u.value:c.programConfigurations.get(a.id).getMaxValue(o)}function $3(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function g0(o,a,c,u,h){if(!a[0]&&!a[1])return o;const g=pt.convert(a)._mult(h);"viewport"===c&&g._rotate(-u);const y=[];for(let x=0;x<o.length;x++)y.push(o[x].sub(g));return y}function W5(o,a,c,u){const h=pt.convert(o)._mult(u);return"viewport"===a&&h._rotate(-c),h}Et(k6,"CircleBucket",{omit:["layers"]});const Z5=new ut({"circle-sort-key":new Ne(qe.layout_circle["circle-sort-key"])});var Y5={paint:new ut({"circle-radius":new Ne(qe.paint_circle["circle-radius"]),"circle-color":new Ne(qe.paint_circle["circle-color"]),"circle-blur":new Ne(qe.paint_circle["circle-blur"]),"circle-opacity":new Ne(qe.paint_circle["circle-opacity"]),"circle-translate":new ze(qe.paint_circle["circle-translate"]),"circle-translate-anchor":new ze(qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ze(qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ze(qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ne(qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ne(qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ne(qe.paint_circle["circle-stroke-opacity"])}),layout:Z5};function I6(o,a,c,u,h,g,y,x,M){if(g&&o.queryGeometry.isAboveHorizon)return!1;g&&(M*=o.pixelToTileUnitsFactor);const z=o.tileID.canonical,E=c.projection.upVectorScale(z,c.center.lat,c.worldSize).metersToTile;for(const H of a)for(const I of H){const N=I.add(x),O=h&&c.elevation?c.elevation.exaggeration()*h.getElevationAt(N.x,N.y,!0):0,j=c.projection.projectTilePoint(N.x,N.y,z);if(O>0){const re=c.projection.upVector(z,N.x,N.y);j.x+=re[0]*E*O,j.y+=re[1]*E*O,j.z+=re[2]*E*O}const X=g?N:_0(j.x,j.y,j.z,u),ae=g?o.tilespaceRays.map(re=>Sm(re,O)):o.queryGeometry.screenGeometry,me=_c([],[j.x,j.y,j.z,1],u);if(!y&&g?M*=me[3]/c.cameraToCenterDistance:y&&!g&&(M*=c.cameraToCenterDistance/me[3]),g){const re=e2((I.y/a1+z.y)/(1<<z.z));M/=c.projection.pixelsPerMeter(re,1)/co(1,re)}if(j3(ae,X,M))return!0}return!1}function _0(o,a,c,u){const h=_c([],[o,a,c,1],u);return new pt(h[0]/h[3],h[1]/h[3])}const Z7=Bo(0,0,0),Y7=Bo(0,0,1);function Sm(o,a){const c=D6();return Z7[2]=a,o.intersectsPlane(Z7,Y7,c),new pt(c[0],c[1])}class X7 extends k6{}function K7(o,{width:a,height:c},u,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==a*c*u)throw new RangeError("mismatched image size")}else h=new Uint8Array(a*c*u);return o.width=a,o.height=c,o.data=h,o}function X5(o,a,c){const{width:u,height:h}=a;u===o.width&&h===o.height||(R6(o,a,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,u),height:Math.min(o.height,h)},c),o.width=u,o.height=h,o.data=a.data)}function R6(o,a,c,u,h,g){if(0===h.width||0===h.height)return a;if(h.width>o.width||h.height>o.height||c.x>o.width-h.width||c.y>o.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>a.width||h.height>a.height||u.x>a.width-h.width||u.y>a.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=o.data,x=a.data;for(let M=0;M<h.height;M++){const z=((c.y+M)*o.width+c.x)*g,E=((u.y+M)*a.width+u.x)*g;for(let H=0;H<h.width*g;H++)x[E+H]=y[z+H]}return a}Et(X7,"HeatmapBucket",{omit:["layers"]});class lo{constructor(a,c){K7(this,a,1,c)}resize(a){X5(this,new lo(a),1)}clone(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,c,u,h,g){R6(a,c,u,h,g,1)}}class xr{constructor(a,c){K7(this,a,4,c)}resize(a){X5(this,new xr(a),4)}replace(a,c){c?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new xr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,c,u,h,g){R6(a,c,u,h,g,4)}}Et(lo,"AlphaImage"),Et(xr,"RGBAImage");var J4={paint:new ut({"heatmap-radius":new Ne(qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ne(qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ze(qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ot(qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ze(qe.paint_heatmap["heatmap-opacity"])})};function K5(o){const a={},c=o.resolution||256,u=o.clips?o.clips.length:1,h=o.image||new xr({width:c,height:u}),g=(y,x,M)=>{a[o.evaluationKey]=M;const z=o.expression.evaluate(a);h.data[y+x+0]=Math.floor(255*z.r/z.a),h.data[y+x+1]=Math.floor(255*z.g/z.a),h.data[y+x+2]=Math.floor(255*z.b/z.a),h.data[y+x+3]=Math.floor(255*z.a)};if(o.clips)for(let y=0,x=0;y<u;++y,x+=4*c)for(let M=0,z=0;M<c;M++,z+=4){const E=M/(c-1),{start:H,end:I}=o.clips[y];g(x,z,H*(1-E)+I*E)}else for(let y=0,x=0;y<c;y++,x+=4)g(0,x,y/(c-1));return h}var Dm={paint:new ut({"hillshade-illumination-direction":new ze(qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ze(qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ze(qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ze(qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ze(qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ze(qe.paint_hillshade["hillshade-accent-color"])})};const Wx=Ft([{name:"a_pos",components:2,type:"Int16"}],4),{members:Am}=Wx;var l3={};function P6(o,a,c){c=c||2;var u,h,g,y,x,M,z,E=a&&a.length,H=E?a[0]*c:o.length,I=Q5(o,0,H,c,!0),N=[];if(!I||I.next===I.prev)return N;if(E&&(I=function(j,X,ae,me){var re,de,ve,he=[];for(re=0,de=X.length;re<de;re++)(ve=Q5(j,X[re]*me,re<de-1?X[re+1]*me:j.length,me,!1))===ve.next&&(ve.steiner=!0),he.push(Tm(ve));for(he.sort(Em),re=0;re<he.length;re++)ae=Vm(he[re],ae);return ae}(o,a,I,c)),o.length>80*c){u=g=o[0],h=y=o[1];for(var O=c;O<H;O+=c)(x=o[O])<u&&(u=x),(M=o[O+1])<h&&(h=M),x>g&&(g=x),M>y&&(y=M);z=0!==(z=Math.max(g-u,y-h))?32767/z:0}return q3(I,N,c,u,h,z,0),N}function Q5(o,a,c,u,h){var g,y;if(h===nu(o,a,c,u)>0)for(g=a;g<c;g+=u)y=nf(g,o[g],o[g+1],y);else for(g=c-u;g>=a;g-=u)y=nf(g,o[g],o[g+1],y);return y&&F6(y,y.next)&&(y0(y),y=y.next),y}function zs(o,a){if(!o)return o;a||(a=o);var c,u=o;do{if(c=!1,u.steiner||!F6(u,u.next)&&0!==gi(u.prev,u,u.next))u=u.next;else{if(y0(u),(u=a=u.prev)===u.next)break;c=!0}}while(c||u!==a);return a}function q3(o,a,c,u,h,g,y){if(o){!y&&g&&function(E,H,I,N){var O=E;do{0===O.z&&(O.z=J5(O.x,O.y,H,I,N)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next}while(O!==E);O.prevZ.nextZ=null,O.prevZ=null,function(j){var X,ae,me,re,de,ve,he,ke,Ve=1;do{for(ae=j,j=null,de=null,ve=0;ae;){for(ve++,me=ae,he=0,X=0;X<Ve&&(he++,me=me.nextZ);X++);for(ke=Ve;he>0||ke>0&&me;)0!==he&&(0===ke||!me||ae.z<=me.z)?(re=ae,ae=ae.nextZ,he--):(re=me,me=me.nextZ,ke--),de?de.nextZ=re:j=re,re.prevZ=de,de=re;ae=me}de.nextZ=null,Ve*=2}while(ve>1)}(O)}(o,u,h,g);for(var x,M,z=o;o.prev!==o.next;)if(x=o.prev,M=o.next,g?J7(o,u,h,g):Q7(o))a.push(x.i/c|0),a.push(o.i/c|0),a.push(M.i/c|0),y0(o),o=M.next,z=M.next;else if((o=M)===z){y?1===y?q3(o=ef(zs(o),a,c),a,c,u,h,g,2):2===y&&W3(o,a,c,u,h,g):q3(zs(o),a,c,u,h,g,1);break}}}function Q7(o){var a=o.prev,c=o,u=o.next;if(gi(a,c,u)>=0)return!1;for(var h=a.x,g=c.x,y=u.x,x=a.y,M=c.y,z=u.y,E=h<g?h<y?h:y:g<y?g:y,H=x<M?x<z?x:z:M<z?M:z,I=h>g?h>y?h:y:g>y?g:y,N=x>M?x>z?x:z:M>z?M:z,O=u.next;O!==a;){if(O.x>=E&&O.x<=I&&O.y>=H&&O.y<=N&&V2(h,x,g,M,y,z,O.x,O.y)&&gi(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function J7(o,a,c,u){var h=o.prev,g=o,y=o.next;if(gi(h,g,y)>=0)return!1;for(var x=h.x,M=g.x,z=y.x,E=h.y,H=g.y,I=y.y,N=x<M?x<z?x:z:M<z?M:z,O=E<H?E<I?E:I:H<I?H:I,j=x>M?x>z?x:z:M>z?M:z,X=E>H?E>I?E:I:H>I?H:I,ae=J5(N,O,a,c,u),me=J5(j,X,a,c,u),re=o.prevZ,de=o.nextZ;re&&re.z>=ae&&de&&de.z<=me;){if(re.x>=N&&re.x<=j&&re.y>=O&&re.y<=X&&re!==h&&re!==y&&V2(x,E,M,H,z,I,re.x,re.y)&&gi(re.prev,re,re.next)>=0||(re=re.prevZ,de.x>=N&&de.x<=j&&de.y>=O&&de.y<=X&&de!==h&&de!==y&&V2(x,E,M,H,z,I,de.x,de.y)&&gi(de.prev,de,de.next)>=0))return!1;de=de.nextZ}for(;re&&re.z>=ae;){if(re.x>=N&&re.x<=j&&re.y>=O&&re.y<=X&&re!==h&&re!==y&&V2(x,E,M,H,z,I,re.x,re.y)&&gi(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;de&&de.z<=me;){if(de.x>=N&&de.x<=j&&de.y>=O&&de.y<=X&&de!==h&&de!==y&&V2(x,E,M,H,z,I,de.x,de.y)&&gi(de.prev,de,de.next)>=0)return!1;de=de.nextZ}return!0}function ef(o,a,c){var u=o;do{var h=u.prev,g=u.next.next;!F6(h,g)&&tf(h,u,u.next,g)&&v0(h,g)&&v0(g,h)&&(a.push(h.i/c|0),a.push(u.i/c|0),a.push(g.i/c|0),y0(u),y0(u.next),u=o=g),u=u.next}while(u!==o);return zs(u)}function W3(o,a,c,u,h,g){var y=o;do{for(var x=y.next.next;x!==y.prev;){if(y.i!==x.i&&Ss(y,x)){var M=eu(y,x);return y=zs(y,y.next),M=zs(M,M.next),q3(y,a,c,u,h,g,0),void q3(M,a,c,u,h,g,0)}x=x.next}y=y.next}while(y!==o)}function Em(o,a){return o.x-a.x}function Vm(o,a){var c=function(h,g){var y,x=g,M=h.x,z=h.y,E=-1/0;do{if(z<=x.y&&z>=x.next.y&&x.next.y!==x.y){var H=x.x+(z-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(H<=M&&H>E&&(E=H,y=x.x<x.next.x?x:x.next,H===M))return y}x=x.next}while(x!==g);if(!y)return null;var I,N=y,O=y.x,j=y.y,X=1/0;x=y;do{M>=x.x&&x.x>=O&&M!==x.x&&V2(z<j?M:E,z,O,j,z<j?E:M,z,x.x,x.y)&&(I=Math.abs(z-x.y)/(M-x.x),v0(x,h)&&(I<X||I===X&&(x.x>y.x||x.x===y.x&&Lm(y,x)))&&(y=x,X=I)),x=x.next}while(x!==N);return y}(o,a);if(!c)return a;var u=eu(c,o);return zs(u,u.next),zs(c,c.next)}function Lm(o,a){return gi(o.prev,o,a.prev)<0&&gi(a.next,o,o.next)<0}function J5(o,a,c,u,h){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-c)*h|0)|o<<8))|o<<4))|o<<2))|o<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-u)*h|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Tm(o){var a=o,c=o;do{(a.x<c.x||a.x===c.x&&a.y<c.y)&&(c=a),a=a.next}while(a!==o);return c}function V2(o,a,c,u,h,g,y,x){return(h-y)*(a-x)>=(o-y)*(g-x)&&(o-y)*(u-x)>=(c-y)*(a-x)&&(c-y)*(g-x)>=(h-y)*(u-x)}function Ss(o,a){return o.next.i!==a.i&&o.prev.i!==a.i&&!function(c,u){var h=c;do{if(h.i!==c.i&&h.next.i!==c.i&&h.i!==u.i&&h.next.i!==u.i&&tf(h,h.next,c,u))return!0;h=h.next}while(h!==c);return!1}(o,a)&&(v0(o,a)&&v0(a,o)&&function(c,u){var h=c,g=!1,y=(c.x+u.x)/2,x=(c.y+u.y)/2;do{h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next}while(h!==c);return g}(o,a)&&(gi(o.prev,o,a.prev)||gi(o,a.prev,a))||F6(o,a)&&gi(o.prev,o,o.next)>0&&gi(a.prev,a,a.next)>0)}function gi(o,a,c){return(a.y-o.y)*(c.x-a.x)-(a.x-o.x)*(c.y-a.y)}function F6(o,a){return o.x===a.x&&o.y===a.y}function tf(o,a,c,u){var h=O6(gi(o,a,c)),g=O6(gi(o,a,u)),y=O6(gi(c,u,o)),x=O6(gi(c,u,a));return h!==g&&y!==x||!(0!==h||!N6(o,c,a))||!(0!==g||!N6(o,u,a))||!(0!==y||!N6(c,o,u))||!(0!==x||!N6(c,a,u))}function N6(o,a,c){return a.x<=Math.max(o.x,c.x)&&a.x>=Math.min(o.x,c.x)&&a.y<=Math.max(o.y,c.y)&&a.y>=Math.min(o.y,c.y)}function O6(o){return o>0?1:o<0?-1:0}function v0(o,a){return gi(o.prev,o,o.next)<0?gi(o,a,o.next)>=0&&gi(o,o.prev,a)>=0:gi(o,a,o.prev)<0||gi(o,o.next,a)<0}function eu(o,a){var c=new tu(o.i,o.x,o.y),u=new tu(a.i,a.x,a.y),h=o.next,g=a.prev;return o.next=a,a.prev=o,c.next=h,h.prev=c,u.next=c,c.prev=u,g.next=u,u.prev=g,u}function nf(o,a,c,u){var h=new tu(o,a,c);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function y0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function tu(o,a,c){this.i=o,this.x=a,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nu(o,a,c,u){for(var h=0,g=a,y=c-u;g<c;g+=u)h+=(o[y]-o[g])*(o[g+1]+o[y+1]),y=g;return h}function B6(o,a,c,u,h){Ds(o,a,c||0,u||o.length-1,h||rf)}function Ds(o,a,c,u,h){for(;u>c;){if(u-c>600){var g=u-c+1,y=a-c+1,x=Math.log(g),M=.5*Math.exp(2*x/3),z=.5*Math.sqrt(x*M*(g-M)/g)*(y-g/2<0?-1:1);Ds(o,a,Math.max(c,Math.floor(a-y*M/g+z)),Math.min(u,Math.floor(a+(g-y)*M/g+z)),h)}var E=o[a],H=c,I=u;for(yc(o,c,a),h(o[u],E)>0&&yc(o,c,u);H<I;){for(yc(o,H,I),H++,I--;h(o[H],E)<0;)H++;for(;h(o[I],E)>0;)I--}0===h(o[c],E)?yc(o,c,I):yc(o,++I,u),I<=a&&(c=I+1),a<=I&&(u=I-1)}}function yc(o,a,c){var u=o[a];o[a]=o[c],o[c]=u}function rf(o,a){return o<a?-1:o>a?1:0}function U6(o,a){const c=o.length;if(c<=1)return[o];const u=[];let h,g;for(let y=0;y<c;y++){const x=K1(o[y]);0!==x&&(o[y].area=Math.abs(x),void 0===g&&(g=x<0),g===x<0?(h&&u.push(h),h=[o[y]]):h.push(o[y]))}if(h&&u.push(h),a>1)for(let y=0;y<u.length;y++)u[y].length<=a||(B6(u[y],a,1,u[y].length-1,af),u[y]=u[y].slice(0,a));return u}function af(o,a){return a.area-o.area}function sf(o,a,c){const u=c.patternDependencies;let h=!1;for(const g of a){const y=g.paint.get(`${o}-pattern`);y.isConstant()||(h=!0);const x=y.constantOr(null);x&&(h=!0,u[x]=!0)}return h}function cf(o,a,c,u,h){const g=h.patternDependencies;for(const y of a){const x=y.paint.get(`${o}-pattern`).value;if("constant"!==x.kind){let M=x.evaluate({zoom:u},c,{},h.availableImages);M=M&&M.name?M.name:M,g[M]=!0,c.patterns[y.id]=M}}return c}({get exports(){return l3},set exports(o){l3=o}}).exports=P6,l3.default=P6,P6.deviation=function(o,a,c,u){var h=a&&a.length,g=Math.abs(nu(o,0,h?a[0]*c:o.length,c));if(h)for(var y=0,x=a.length;y<x;y++)g-=Math.abs(nu(o,a[y]*c,y<x-1?a[y+1]*c:o.length,c));var M=0;for(y=0;y<u.length;y+=3){var z=u[y]*c,E=u[y+1]*c,H=u[y+2]*c;M+=Math.abs((o[z]-o[H])*(o[E+1]-o[z+1])-(o[z]-o[E])*(o[H+1]-o[z+1]))}return 0===g&&0===M?0:Math.abs((M-g)/g)},P6.flatten=function(o){for(var a=o[0][0].length,c={vertices:[],holes:[],dimensions:a},u=0,h=0;h<o.length;h++){for(var g=0;g<o[h].length;g++)for(var y=0;y<a;y++)c.vertices.push(o[h][g][y]);h>0&&c.holes.push(u+=o[h-1].length)}return c};class iu{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ut,this.indexArray=new Qi,this.indexArray2=new No,this.programConfigurations=new ys(a.layers,a.zoom),this.segments=new ui,this.segments2=new ui,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.projection=a.projection}populate(a,c,u,h){this.hasPattern=sf("fill",this.layers,c);const g=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:x,id:M,index:z,sourceLayerIndex:E}of a){const H=this.layers[0]._featureFilter.needGeometry,I=vc(x,H);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),I,u))continue;const N=g?g.evaluate(I,{},u,c.availableImages):void 0,O={id:M,properties:x.properties,type:x.type,sourceLayerIndex:E,index:z,geometry:H?I.geometry:Ms(x,u,h),patterns:{},sortKey:N};y.push(O)}g&&y.sort((x,M)=>x.sortKey-M.sortKey);for(const x of y){const{geometry:M,index:z,sourceLayerIndex:E}=x;if(this.hasPattern){const H=cf("fill",this.layers,x,this.zoom,c);this.patternFeatures.push(H)}else this.addFeature(x,M,z,u,{},c.availableImages);c.featureIndex.insert(a[z].feature,M,z,E,this.index)}}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}addFeatures(a,c,u,h,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,c,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Am),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,c,u,h,g,y=[]){for(const x of U6(c,500)){let M=0;for(const O of x)M+=O.length;const z=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),E=z.vertexLength,H=[],I=[];for(const O of x){if(0===O.length)continue;O!==x[0]&&I.push(H.length/2);const j=this.segments2.prepareSegment(O.length,this.layoutVertexArray,this.indexArray2),X=j.vertexLength;this.layoutVertexArray.emplaceBack(O[0].x,O[0].y),this.indexArray2.emplaceBack(X+O.length-1,X),H.push(O[0].x),H.push(O[0].y);for(let ae=1;ae<O.length;ae++)this.layoutVertexArray.emplaceBack(O[ae].x,O[ae].y),this.indexArray2.emplaceBack(X+ae-1,X+ae),H.push(O[ae].x),H.push(O[ae].y);j.vertexLength+=O.length,j.primitiveLength+=O.length}const N=l3(H,I);for(let O=0;O<N.length;O+=3)this.indexArray.emplaceBack(E+N[O],E+N[O+1],E+N[O+2]);z.vertexLength+=M,z.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,g,y,h)}}Et(iu,"FillBucket",{omit:["layers","patternFeatures"]});const ru=new ut({"fill-sort-key":new Ne(qe.layout_fill["fill-sort-key"])});var au={paint:new ut({"fill-antialias":new ze(qe.paint_fill["fill-antialias"]),"fill-opacity":new Ne(qe.paint_fill["fill-opacity"]),"fill-color":new Ne(qe.paint_fill["fill-color"]),"fill-outline-color":new Ne(qe.paint_fill["fill-outline-color"]),"fill-translate":new ze(qe.paint_fill["fill-translate"]),"fill-translate-anchor":new ze(qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ne(qe.paint_fill["fill-pattern"])}),layout:ru};const Zx=Ft([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Yx=Ft([{name:"a_centroid_pos",components:2,type:"Uint16"}]),lf=Ft([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Hm}=Zx;var j6={},km=pt,uf=Z3;function Z3(o,a,c,u,h){this.properties={},this.extent=c,this.type=0,this._pbf=o,this._geometry=-1,this._keys=u,this._values=h,o.readFields(G6,this,a)}function G6(o,a,c){1==o?a.id=c.readVarint():2==o?function(u,h){for(var g=u.readVarint()+u.pos;u.pos<g;){var y=h._keys[u.readVarint()],x=h._values[u.readVarint()];h.properties[y]=x}}(c,a):3==o?a.type=c.readVarint():4==o&&(a._geometry=c.pos)}function df(o){for(var a,c,u=0,h=0,g=o.length,y=g-1;h<g;y=h++)u+=((c=o[y]).x-(a=o[h]).x)*(a.y+c.y);return u}Z3.types=["Unknown","Point","LineString","Polygon"],Z3.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var a,c=o.readVarint()+o.pos,u=1,h=0,g=0,y=0,x=[];o.pos<c;){if(h<=0){var M=o.readVarint();u=7&M,h=M>>3}if(h--,1===u||2===u)g+=o.readSVarint(),y+=o.readSVarint(),1===u&&(a&&x.push(a),a=[]),a.push(new km(g,y));else{if(7!==u)throw new Error("unknown command "+u);a&&a.push(a[0].clone())}}return a&&x.push(a),x},Z3.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var a=o.readVarint()+o.pos,c=1,u=0,h=0,g=0,y=1/0,x=-1/0,M=1/0,z=-1/0;o.pos<a;){if(u<=0){var E=o.readVarint();c=7&E,u=E>>3}if(u--,1===c||2===c)(h+=o.readSVarint())<y&&(y=h),h>x&&(x=h),(g+=o.readSVarint())<M&&(M=g),g>z&&(z=g);else if(7!==c)throw new Error("unknown command "+c)}return[y,M,x,z]},Z3.prototype.toGeoJSON=function(o,a,c){var u,h,g=this.extent*Math.pow(2,c),y=this.extent*o,x=this.extent*a,M=this.loadGeometry(),z=Z3.types[this.type];function E(N){for(var O=0;O<N.length;O++){var j=N[O];N[O]=[360*(j.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(j.y+x)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(u=0;u<M.length;u++)H[u]=M[u][0];E(M=H);break;case 2:for(u=0;u<M.length;u++)E(M[u]);break;case 3:for(M=function(N){var O=N.length;if(O<=1)return[N];for(var j,X,ae=[],me=0;me<O;me++){var re=df(N[me]);0!==re&&(void 0===X&&(X=re<0),X===re<0?(j&&ae.push(j),j=[N[me]]):j.push(N[me]))}return j&&ae.push(j),ae}(M),u=0;u<M.length;u++)for(h=0;h<M[u].length;h++)E(M[u][h])}1===M.length?M=M[0]:z="Multi"+z;var I={type:"Feature",geometry:{type:z,coordinates:M},properties:this.properties};return"id"in this&&(I.id=this.id),I};var ou=uf,ff=Wn;function Wn(o,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(hf,this,a),this.length=this._features.length}function hf(o,a,c){15===o?a.version=c.readVarint():1===o?a.name=c.readString():5===o?a.extent=c.readVarint():2===o?a._features.push(c.pos):3===o?a._keys.push(c.readString()):4===o&&a._values.push(function(u){for(var h=null,g=u.readVarint()+u.pos;u.pos<g;){var y=u.readVarint()>>3;h=1===y?u.readString():2===y?u.readFloat():3===y?u.readDouble():4===y?u.readVarint64():5===y?u.readVarint():6===y?u.readSVarint():7===y?u.readBoolean():null}return h}(c))}Wn.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var a=this._pbf.readVarint()+this._pbf.pos;return new ou(this._pbf,a,this.extent,this._keys,this._values)};var Im=ff;function bc(o,a,c){if(3===o){var u=new Im(c,c.readVarint()+c.pos);u.length&&(a[u.name]=u)}}var b0=j6.VectorTile=function(o,a){this.layers=o.readFields(bc,{},a)},$6=j6.VectorTileFeature=uf;function q6(o,a,c,u){const h=[],g=0===u?(y,x,M,z,E,H)=>{y.push(new pt(H,M+(H-x)/(z-x)*(E-M)))}:(y,x,M,z,E,H)=>{y.push(new pt(x+(H-M)/(E-M)*(z-x),H))};for(const y of o){const x=[];for(const M of y){if(M.length<=2)continue;const z=[];for(let I=0;I<M.length-1;I++){const N=M[I].x,O=M[I].y,j=M[I+1].x,X=M[I+1].y,ae=0===u?N:O,me=0===u?j:X;ae<a?me>a&&g(z,N,O,j,X,a):ae>c?me<c&&g(z,N,O,j,X,c):z.push(M[I]),me<a&&ae>=a&&g(z,N,O,j,X,a),me>c&&ae<=c&&g(z,N,O,j,X,c)}let E=M[M.length-1];const H=0===u?E.x:E.y;H>=a&&H<=c&&z.push(E),z.length&&(E=z[z.length-1],z[0].x===E.x&&z[0].y===E.y||z.push(z[0]),x.push(z))}x.length&&h.push(x)}return h}j6.VectorTileLayer=ff;const Rm=$6.types,Pm=Math.pow(2,13);function el(o,a,c,u,h,g,y,x){o.emplaceBack((a<<1)+y,(c<<1)+g,(Math.floor(u*Pm)<<1)+h,Math.round(x))}function W6(o,a,c){o.emplaceBack(a.x,a.y,a.z,16384*c[0],16384*c[1],16384*c[2])}class Fm{constructor(){this.acc=new pt(0,0),this.polyCount=[]}startRing(a){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new pt(a.x,a.y),this.max=new pt(a.x,a.y))}append(a,c){this.currentPolyCount.edges++,this.acc._add(a);const u=this.min,h=this.max;a.x<u.x?u.x=a.x:a.x>h.x&&(h.x=a.x),a.y<u.y?u.y=a.y:a.y>h.y&&(h.y=a.y),((0===a.x||a.x===a1)&&a.x===c.x)!=((0===a.y||a.y===a1)&&a.y===c.y)&&this.processBorderOverlap(a,c),c.x<0!=a.x<0&&this.addBorderIntersection(0,N1(c.y,a.y,(0-c.x)/(a.x-c.x))),c.x>a1!=a.x>a1&&this.addBorderIntersection(1,N1(c.y,a.y,(a1-c.x)/(a.x-c.x))),c.y<0!=a.y<0&&this.addBorderIntersection(2,N1(c.x,a.x,(0-c.y)/(a.y-c.y))),c.y>a1!=a.y>a1&&this.addBorderIntersection(3,N1(c.x,a.x,(a1-c.y)/(a.y-c.y)))}addBorderIntersection(a,c){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[a];c<u[0]&&(u[0]=c),c>u[1]&&(u[1]=c)}processBorderOverlap(a,c){if(a.x===c.x){if(a.y===c.y)return;const u=0===a.x?0:1;this.addBorderIntersection(u,c.y),this.addBorderIntersection(u,a.y)}else{const u=0===a.y?2:3;this.addBorderIntersection(u,c.x),this.addBorderIntersection(u,a.x)}}centroid(){const a=this.polyCount.reduce((c,u)=>c+u.edges,0);return 0!==a?this.acc.div(a)._round():new pt(0,0)}span(){return new pt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((a,c)=>a+ +(c[0]!==Number.MAX_VALUE),0)}}class xc{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.layoutVertexArray=new un,this.centroidVertexArray=new pc,this.indexArray=new Qi,this.programConfigurations=new ys(a.layers,a.zoom),this.segments=new ui,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.enableTerrain=a.enableTerrain}populate(a,c,u,h){this.features=[],this.hasPattern=sf("fill-extrusion",this.layers,c),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const y=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*y/(y*y+1)/a1/(1<<g.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:y,index:x,sourceLayerIndex:M}of a){const z=this.layers[0]._featureFilter.needGeometry,E=vc(g,z);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),E,u))continue;const H={id:y,sourceLayerIndex:M,index:x,geometry:z?E.geometry:Ms(g,u,h),properties:g.properties,type:g.type,patterns:{}},I=this.layoutVertexArray.length;this.hasPattern?this.features.push(cf("fill-extrusion",this.layers,H,this.zoom,c)):this.addFeature(H,H.geometry,x,u,{},c.availableImages,h),c.featureIndex.insert(g,H.geometry,x,M,this.index,I)}this.sortBorders()}addFeatures(a,c,u,h,g){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,c,u,h,g)}this.sortBorders()}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Hm),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,lf.members,!0))),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,Yx.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,c,u,h,g,y,x){const M=[new pt(0,0),new pt(a1,a1)],z=x.projection,E="globe"===z.name,H=this.enableTerrain&&!E?new Fm:null,I="Polygon"===Rm[a.type];E&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ka);const N=U6(c,500);for(let ae=N.length-1;ae>=0;ae--){const me=N[ae];(0===me.length||(O=me[0]).every(re=>re.x<=0)||O.every(re=>re.x>=a1)||O.every(re=>re.y<=0)||O.every(re=>re.y>=a1))&&N.splice(ae,1)}var O;let j;if(E)j=uu(N,M,h);else{j=[];for(const ae of N)j.push({polygon:ae,bounds:M})}const X=I?this.edgeRadius:0;for(const{polygon:ae,bounds:me}of j){let re=0,de=0;for(const he of ae)I&&!he[0].equals(he[he.length-1])&&he.push(he[0]),de+=I?he.length-1:he.length;const ve=this.segments.prepareSegment((I?5:4)*de,this.layoutVertexArray,this.indexArray);if(I){const he=[],ke=[];re=ve.vertexLength;for(const Ge of ae){let We,Fe;Ge.length&&Ge!==ae[0]&&ke.push(he.length/2),We=Ge[1].sub(Ge[0])._perp()._unit();for(let Ke=1;Ke<Ge.length;Ke++){const nt=Ge[Ke],st=Ge[Ke===Ge.length-1?1:Ke+1];let{x:dt,y:Oe}=nt;if(X){Fe=st.sub(nt)._perp()._unit();const yt=We.add(Fe)._unit(),jt=X*Math.min(4,1/(We.x*yt.x+We.y*yt.y));dt+=jt*yt.x,Oe+=jt*yt.y,We=Fe}el(this.layoutVertexArray,dt,Oe,0,0,1,1,0),ve.vertexLength++,he.push(nt.x,nt.y),E&&W6(this.layoutVertexExtArray,z.projectTilePoint(dt,Oe,h),z.upVector(h,dt,Oe))}}const Ve=l3(he,ke);for(let Ge=0;Ge<Ve.length;Ge+=3)this.indexArray.emplaceBack(re+Ve[Ge],re+Ve[Ge+2],re+Ve[Ge+1]),ve.primitiveLength++}for(const he of ae){H&&he.length&&H.startRing(he[0]);let ke,Ve,Ge,We=he.length>4&&mf(he[he.length-2],he[0],he[1]),Fe=X?pf(he[he.length-2],he[0],he[1],X):0;Ve=he[1].sub(he[0])._perp()._unit();let Ke=!0;for(let nt=1,st=0;nt<he.length;nt++){let dt=he[nt-1],Oe=he[nt];const yt=he[nt===he.length-1?1:nt+1];if(H&&I&&H.currentPolyCount.top++,cu(Oe,dt,me)){X&&(Ve=yt.sub(Oe)._perp()._unit(),Ke=!Ke);continue}H&&H.append(Oe,dt);const jt=Oe.sub(dt)._perp(),wt=jt.x/(Math.abs(jt.x)+Math.abs(jt.y)),Lt=jt.y>0?1:0,Ct=dt.dist(Oe);if(st+Ct>32768&&(st=0),X){Ge=yt.sub(Oe)._perp()._unit();let H1=su(dt,Oe,yt,x0(Ve,Ge),X);isNaN(H1)&&(H1=0);const Kt=Oe.sub(dt)._unit();dt=dt.add(Kt.mult(Fe))._round(),Oe=Oe.add(Kt.mult(-H1))._round(),Fe=H1,Ve=Ge}const Xt=ve.vertexLength,G1=he.length>4&&mf(dt,Oe,yt);let O1=gf(st,We,Ke);if(el(this.layoutVertexArray,dt.x,dt.y,wt,Lt,0,0,O1),el(this.layoutVertexArray,dt.x,dt.y,wt,Lt,0,1,O1),st+=Ct,O1=gf(st,G1,!Ke),We=G1,el(this.layoutVertexArray,Oe.x,Oe.y,wt,Lt,0,0,O1),el(this.layoutVertexArray,Oe.x,Oe.y,wt,Lt,0,1,O1),ve.vertexLength+=4,this.indexArray.emplaceBack(Xt+0,Xt+1,Xt+2),this.indexArray.emplaceBack(Xt+1,Xt+3,Xt+2),ve.primitiveLength+=2,X){const H1=re+(1===nt?he.length-2:nt-2),Kt=1===nt?re:H1+1;if(this.indexArray.emplaceBack(Xt+1,H1,Xt+3),this.indexArray.emplaceBack(H1,Kt,Xt+3),ve.primitiveLength+=2,void 0===ke&&(ke=Xt),!cu(yt,he[nt],me)){const zn=nt===he.length-1?ke:ve.vertexLength;this.indexArray.emplaceBack(Xt+2,Xt+3,zn),this.indexArray.emplaceBack(Xt+3,zn+1,zn),this.indexArray.emplaceBack(Xt+3,Kt,zn+1),ve.primitiveLength+=3}Ke=!Ke}if(E){const H1=this.layoutVertexExtArray,Kt=z.projectTilePoint(dt.x,dt.y,h),zn=z.projectTilePoint(Oe.x,Oe.y,h),u1=z.upVector(h,dt.x,dt.y),W1=z.upVector(h,Oe.x,Oe.y);W6(H1,Kt,u1),W6(H1,Kt,u1),W6(H1,zn,W1),W6(H1,zn,W1)}}I&&(re+=he.length-1)}}if(H&&H.polyCount.length>0){if(H.borders){H.vertexArrayOffset=this.centroidVertexArray.length;const ae=H.borders,me=this.featuresOnBorder.push(H)-1;for(let re=0;re<4;re++)ae[re][0]!==Number.MAX_VALUE&&this.borders[re].push(me)}this.encodeCentroid(H.borders?void 0:H.centroid(),H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,g,y,h)}sortBorders(){for(let a=0;a<4;a++)this.borders[a].sort((c,u)=>this.featuresOnBorder[c].borders[a][0]-this.featuresOnBorder[u].borders[a][0])}encodeCentroid(a,c,u=!0){let h,g;if(a)if(0!==a.y){const x=c.span()._mult(this.tileToMeter);h=(Math.max(a.x,1)<<3)+Math.min(7,Math.round(x.x/10)),g=(Math.max(a.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else h=Math.ceil(7*(a.x+450)),g=0;else h=0,g=+u;let y=u?this.centroidVertexArray.length:c.vertexArrayOffset;for(const x of c.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let M=0;M<x.top;M++)this.centroidVertexArray.emplace(y++,h,g);for(let M=0;M<2*x.edges;M++)this.centroidVertexArray.emplace(y++,0,g),this.centroidVertexArray.emplace(y++,h,g)}}}function x0(o,a){const c=o.add(a)._unit();return o.x*c.x+o.y*c.y}function pf(o,a,c,u){const h=a.sub(o)._perp()._unit(),g=c.sub(a)._perp()._unit();return su(o,a,c,x0(h,g),u)}function su(o,a,c,u,h){const g=Math.sqrt(1-u*u);return Math.min(o.dist(a)/3,a.dist(c)/3,h*g/u)}function cu(o,a,c){return o.x<c[0].x&&a.x<c[0].x||o.x>c[1].x&&a.x>c[1].x||o.y<c[0].y&&a.y<c[0].y||o.y>c[1].y&&a.y>c[1].y}function mf(o,a,c){if(o.x<0||o.x>=a1||a.x<0||a.x>=a1||c.x<0||c.x>=a1)return!1;const u=c.sub(a),h=u.perp(),g=o.sub(a);return(u.x*g.x+u.y*g.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(g.x*g.x+g.y*g.y))>-.866&&h.x*g.x+h.y*g.y<0}function gf(o,a,c){const u=a?2|o:-3&o;return c?1|u:-2&u}function lu(){const o=Math.PI/32,a=Math.tan(o),c=m0;return c*Math.sqrt(1+2*a*a)-c}function uu(o,a,c){const u=1<<c.z,h=A2(c.x/u),g=A2((c.x+1)/u),y=e2(c.y/u),x=e2((c.y+1)/u);return function(M,z,E,H,I=0,N){const O=[];if(!M.length||!E||!H)return O;const j=(he,ke)=>{for(const Ve of he)O.push({polygon:Ve,bounds:ke})},X=Math.ceil(Math.log2(E)),ae=Math.ceil(Math.log2(H)),me=X-ae,re=[];for(let he=0;he<Math.abs(me);he++)re.push(me>0?0:1);for(let he=0;he<Math.min(X,ae);he++)re.push(0),re.push(1);let de=M;if(de=q6(de,z[0].y-I,z[1].y+I,1),de=q6(de,z[0].x-I,z[1].x+I,0),!de.length)return O;const ve=[];for(re.length?ve.push({polygons:de,bounds:z,depth:0}):j(de,z);ve.length;){const he=ve.pop(),ke=he.depth,Ve=re[ke],Ge=he.bounds[0],We=he.bounds[1],Fe=0===Ve?Ge.x:Ge.y,Ke=0===Ve?We.x:We.y,nt=N?N(Ve,Fe,Ke):.5*(Fe+Ke),st=q6(he.polygons,Fe-I,nt+I,Ve),dt=q6(he.polygons,nt-I,Ke+I,Ve);if(st.length){const Oe=[Ge,new pt(0===Ve?nt:We.x,1===Ve?nt:We.y)];re.length>ke+1?ve.push({polygons:st,bounds:Oe,depth:ke+1}):j(st,Oe)}if(dt.length){const Oe=[new pt(0===Ve?nt:Ge.x,1===Ve?nt:Ge.y),We];re.length>ke+1?ve.push({polygons:dt,bounds:Oe,depth:ke+1}):j(dt,Oe)}}return O}(o,a,Math.ceil((g-h)/11.25),Math.ceil((y-x)/11.25),1,(M,z,E)=>{if(0===M)return.5*(z+E);{const H=e2((c.y+z/a1)/u);return(so(.5*(e2((c.y+E/a1)/u)+H))*u-c.y)*a1}})}Et(xc,"FillExtrusionBucket",{omit:["layers","features"]}),Et(Fm,"PartMetadata");const du=new ut({"fill-extrusion-edge-radius":new ze(qe["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Xx={paint:new ut({"fill-extrusion-opacity":new ze(qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ne(qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ze(qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ze(qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ne(qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ne(qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ne(qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ze(qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ze(qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ze(qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:du};function Z6(o,a,c){var u=2*Math.PI*6378137/256/Math.pow(2,c);return[o*u-2*Math.PI*6378137/2,a*u-2*Math.PI*6378137/2]}class Y6{constructor(a,c,u){this.z=a,this.x=c,this.y=u,this.key=tl(0,a,a,c,u)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,c){const u=(y=this.y,x=this.z,M=Z6(256*(g=this.x),256*(y=Math.pow(2,x)-y-1),x),z=Z6(256*(g+1),256*(y+1),x),M[0]+","+M[1]+","+z[0]+","+z[1]),h=function(g,y,x){let M,z="";for(let E=g;E>0;E--)M=1<<E-1,z+=(y&M?1:0)+(x&M?2:0);return z}(this.z,this.x,this.y);var g,y,x,M,z;return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===c?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class X6{constructor(a,c){this.wrap=a,this.canonical=c,this.key=tl(a,c.z,c.z,c.x,c.y)}}class q2{constructor(a,c,u,h,g){this.overscaledZ=a,this.wrap=c,this.canonical=new Y6(u,+h,+g),this.key=0===c&&a===u?this.canonical.key:tl(c,a,u,h,g)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const c=this.canonical.z-a;return a>this.canonical.z?new q2(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new q2(a,this.wrap,a,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(a,c=!0){if(this.overscaledZ===a&&c)return this.key;if(a>this.canonical.z)return tl(this.wrap*+c,a,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-a;return tl(this.wrap*+c,a,a,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const c=this.canonical.z-a.canonical.z;return 0===a.overscaledZ||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>c&&a.canonical.y===this.canonical.y>>c}children(a){if(this.overscaledZ>=a)return[new q2(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,u=2*this.canonical.x,h=2*this.canonical.y;return[new q2(c,this.wrap,c,u,h),new q2(c,this.wrap,c,u+1,h),new q2(c,this.wrap,c,u,h+1),new q2(c,this.wrap,c,u+1,h+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new q2(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new q2(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new X6(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function tl(o,a,c,u,h){const g=1<<Math.min(c,22);let y=g*(h%g)+u%g;return o&&c<22&&(y+=g*g*((o<0?-2*o-1:2*o)%(1<<2*(22-c)))),16*(32*y+c)+(a-c)}Et(Y6,"CanonicalTileID"),Et(q2,"OverscaledTileID",{omit:["projMatrix"]});class uo extends pt{constructor(a,c,u){super(a,c),this.z=u}}function C0(o,a){return o.x*a.x+o.y*a.y}function K6(o,a){if(1===o.length){let c=0;const u=a[c++];let h;for(;!h||u.equals(h);)if(h=a[c++],!h)return 1/0;for(;c<a.length;c++){const g=a[c],y=o[0],x=h.sub(u),M=g.sub(u),z=y.sub(u),E=C0(x,x),H=C0(x,M),I=C0(M,M),N=C0(z,x),O=C0(z,M),j=E*I-H*H,X=(I*N-H*O)/j,ae=(E*O-H*N)/j,me=u.z*(1-X-ae)+h.z*X+g.z*ae;if(isFinite(me))return me}return 1/0}{let c=1/0;for(const u of a)c=Math.min(c,u.z);return c}}function w0(o,a,c,u,h,g,y,x){const M=y*h.getElevationAt(o,a,!0,!0),z=0!==g[0],E=z?0===g[1]?y*(g[0]/7-450):y*function(H,I,N){const O=Math.floor(I[0]/8),j=Math.floor(I[1]/8),X=10*(I[0]-8*O),ae=10*(I[1]-8*j),me=H.getElevationAt(O,j,!0,!0),re=H.getMeterToDEM(N),de=Math.floor(.5*(X*re-1)),ve=Math.floor(.5*(ae*re-1)),he=H.tileCoordToPixel(O,j),ke=2*de+1,Ve=2*ve+1,Ge=(jt=ke,wt=Ve,[(dt=H).getElevationAtPixel(Oe=he.x-de,yt=he.y-ve,!0),dt.getElevationAtPixel(Oe+wt,yt,!0),dt.getElevationAtPixel(Oe,yt+wt,!0),dt.getElevationAtPixel(Oe+jt,yt+wt,!0)]),We=Math.abs(Ge[0]-Ge[1]),Fe=Math.abs(Ge[2]-Ge[3]),Ke=Math.abs(Ge[0]-Ge[2])+Math.abs(Ge[1]-Ge[3]),nt=Math.min(.25,.5*re*(We+Fe)/ke),st=Math.min(.25,.5*re*Ke/Ve);var dt,Oe,yt,jt,wt;return me+Math.max(nt*X,st*ae)}(h,g,x):M;return{base:M+(0===c)?-1:c,top:z?Math.max(E+u,M+c+2):M+u}}const Nm=Ft([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:fu}=Nm,Q6=Ft([{name:"a_packed",components:4,type:"Float32"}]),{members:As}=Q6,_f=$6.types,hu=Math.cos(Math.PI/180*37.5);class J6{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Nn,this.layoutVertexArray2=new Mn,this.indexArray=new Qi,this.programConfigurations=new ys(a.layers,a.zoom),this.segments=new ui,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,u,h){this.hasPattern=sf("line",this.layers,c);const g=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:E,id:H,index:I,sourceLayerIndex:N}of a){const O=this.layers[0]._featureFilter.needGeometry,j=vc(E,O);if(!this.layers[0]._featureFilter.filter(new Se(this.zoom),j,u))continue;const X=g?g.evaluate(j,{},u):void 0,ae={id:H,properties:E.properties,type:E.type,sourceLayerIndex:N,index:I,geometry:O?j.geometry:Ms(E,u,h),patterns:{},sortKey:X};y.push(ae)}g&&y.sort((E,H)=>E.sortKey-H.sortKey);const{lineAtlas:x,featureIndex:M}=c,z=this.addConstantDashes(x);for(const E of y){const{geometry:H,index:I,sourceLayerIndex:N}=E;if(z&&this.addFeatureDashes(E,x),this.hasPattern){const O=cf("line",this.layers,E,this.zoom,c);this.patternFeatures.push(O)}else this.addFeature(E,H,I,u,x.positions,c.availableImages);M.insert(a[I].feature,H,I,N,this.index)}}addConstantDashes(a){let c=!1;for(const u of this.layers){const h=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if("constant"!==h.kind||"constant"!==g.kind)c=!0;else{const y=g.value,x=h.value;if(!x)continue;a.addDash(x,y)}}return c}addFeatureDashes(a,c){const u=this.zoom;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if("constant"===g.kind&&"constant"===y.kind)continue;let x,M;if("constant"===g.kind){if(x=g.value,!x)continue}else x=g.evaluate({zoom:u},a);M="constant"===y.kind?y.value:y.evaluate({zoom:u},a),c.addDash(x,M),a.patterns[h.id]=c.getKey(x,M)}}update(a,c,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,u,h)}addFeatures(a,c,u,h,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,c,u,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,As)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,fu),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,c,u,h,g,y){const x=this.layers[0].layout,M=x.get("line-join").evaluate(a,{}),z=x.get("line-cap").evaluate(a,{}),E=x.get("line-miter-limit"),H=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const I of c)this.addLine(I,a,M,z,E,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,g,y,h)}addLine(a,c,u,h,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<a.length-1;ae++)this.totalDistance+=a[ae].dist(a[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x="Polygon"===_f[c.type];let M=a.length;for(;M>=2&&a[M-1].equals(a[M-2]);)M--;let z=0;for(;z<M-1&&a[z].equals(a[z+1]);)z++;if(M<(x?3:2))return;"bevel"===u&&(g=1.05);const E=this.overscaling<=16?122880/(512*this.overscaling):0,H=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let I,N,O,j,X;this.e1=this.e2=-1,x&&(I=a[M-2],X=a[z].sub(I)._unit()._perp());for(let ae=z;ae<M;ae++){if(O=ae===M-1?x?a[z+1]:void 0:a[ae+1],O&&a[ae].equals(O))continue;X&&(j=X),I&&(N=I),I=a[ae],X=O?O.sub(I)._unit()._perp():j,j=j||X;let me=j.add(X);0===me.x&&0===me.y||me._unit();const re=j.x*X.x+j.y*X.y,de=me.x*X.x+me.y*X.y,ve=0!==de?1/de:1/0,he=2*Math.sqrt(2-2*de),ke=de<hu&&N&&O,Ve=j.x*X.y-j.y*X.x>0;if(ke&&ae>z){const Fe=I.dist(N);if(Fe>2*E){const Ke=I.sub(I.sub(N)._mult(E/Fe)._round());this.updateDistance(N,Ke),this.addCurrentVertex(Ke,j,0,0,H),N=Ke}}const Ge=N&&O;let We=Ge?u:x?"butt":h;if(Ge&&"round"===We&&(ve<y?We="miter":ve<=2&&(We="fakeround")),"miter"===We&&ve>g&&(We="bevel"),"bevel"===We&&(ve>2&&(We="flipbevel"),ve<g&&(We="miter")),N&&this.updateDistance(N,I),"miter"===We)me._mult(ve),this.addCurrentVertex(I,me,0,0,H);else if("flipbevel"===We){if(ve>100)me=X.mult(-1);else{const Fe=ve*j.add(X).mag()/j.sub(X).mag();me._perp()._mult(Fe*(Ve?-1:1))}this.addCurrentVertex(I,me,0,0,H),this.addCurrentVertex(I,me.mult(-1),0,0,H)}else if("bevel"===We||"fakeround"===We){const Fe=-Math.sqrt(ve*ve-1),Ke=Ve?Fe:0,nt=Ve?0:Fe;if(N&&this.addCurrentVertex(I,j,Ke,nt,H),"fakeround"===We){const st=Math.round(180*he/Math.PI/20);for(let dt=1;dt<st;dt++){let Oe=dt/st;if(.5!==Oe){const jt=Oe-.5;Oe+=Oe*jt*(Oe-1)*((1.0904+re*(re*(3.55645-1.43519*re)-3.2452))*jt*jt+(.848013+re*(.215638*re-1.06021)))}const yt=X.sub(j)._mult(Oe)._add(j)._unit()._mult(Ve?-1:1);this.addHalfVertex(I,yt.x,yt.y,!1,Ve,0,H)}}O&&this.addCurrentVertex(I,X,-Ke,-nt,H)}else if("butt"===We)this.addCurrentVertex(I,me,0,0,H);else if("square"===We){const Fe=N?1:-1;N||this.addCurrentVertex(I,me,Fe,Fe,H),this.addCurrentVertex(I,me,0,0,H),N&&this.addCurrentVertex(I,me,Fe,Fe,H)}else"round"===We&&(N&&(this.addCurrentVertex(I,j,0,0,H),this.addCurrentVertex(I,j,1,1,H,!0)),O&&(this.addCurrentVertex(I,X,-1,-1,H,!0),this.addCurrentVertex(I,X,0,0,H)));if(ke&&ae<M-1){const Fe=I.dist(O);if(Fe>2*E){const Ke=I.add(O.sub(I)._mult(E/Fe)._round());this.updateDistance(I,Ke),this.addCurrentVertex(Ke,X,0,0,H),I=Ke}}}}addCurrentVertex(a,c,u,h,g,y=!1){const x=c.y*h-c.x,M=-c.y-c.x*h;this.addHalfVertex(a,c.x+c.y*u,c.y-c.x*u,y,!1,u,g),this.addHalfVertex(a,x,M,y,!0,-h,g)}addHalfVertex({x:a,y:c},u,h,g,y,x,M){this.layoutVertexArray.emplaceBack((a<<1)+(g?1:0),(c<<1)+(y?1:0),Math.round(63*u)+128,Math.round(63*h)+128,1+(0===x?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const z=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),M.primitiveLength++),y?this.e2=z:this.e1=z}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,c){this.distance+=a.dist(c),this.updateScaledDistance()}}Et(J6,"LineBucket",{omit:["layers","patternFeatures"]});const Om=new ut({"line-cap":new Ne(qe.layout_line["line-cap"]),"line-join":new Ne(qe.layout_line["line-join"]),"line-miter-limit":new ze(qe.layout_line["line-miter-limit"]),"line-round-limit":new ze(qe.layout_line["line-round-limit"]),"line-sort-key":new Ne(qe.layout_line["line-sort-key"])});var pu={paint:new ut({"line-opacity":new Ne(qe.paint_line["line-opacity"]),"line-color":new Ne(qe.paint_line["line-color"]),"line-translate":new ze(qe.paint_line["line-translate"]),"line-translate-anchor":new ze(qe.paint_line["line-translate-anchor"]),"line-width":new Ne(qe.paint_line["line-width"]),"line-gap-width":new Ne(qe.paint_line["line-gap-width"]),"line-offset":new Ne(qe.paint_line["line-offset"]),"line-blur":new Ne(qe.paint_line["line-blur"]),"line-dasharray":new Ne(qe.paint_line["line-dasharray"]),"line-pattern":new Ne(qe.paint_line["line-pattern"]),"line-gradient":new ot(qe.paint_line["line-gradient"]),"line-trim-offset":new ze(qe.paint_line["line-trim-offset"])}),layout:Om};const Y3=new class extends Ne{possiblyEvaluate(o,a){return a=new Se(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,transition:a.transition}),super.possiblyEvaluate(o,a)}evaluate(o,a,c,u){return a=c1({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(o,a,c,u)}}(pu.paint.properties["line-width"].specification);function vf(o,a){return a>0?a+2*o:o}Y3.useIntegerZoom=!0;const Bm=Ft([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Um=Ft([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),mu=Ft([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ft([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jm=Ft([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),yf=Ft([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ft([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bf=Ft([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xf=Ft([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ft([{name:"triangle",components:3,type:"Uint16"}]),Ft([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ft([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ft([{type:"Float32",name:"offsetX"}]),Ft([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var W2=24;const Es=128;function Cc(o,a){const{expression:c}=a;if("constant"===c.kind)return{kind:"constant",layoutSize:c.evaluate(new Se(o+1))};if("source"===c.kind)return{kind:"source"};{const{zoomStops:u,interpolationType:h}=c;let g=0;for(;g<u.length&&u[g]<=o;)g++;g=Math.max(0,g-1);let y=g;for(;y<u.length&&u[y]<o+1;)y++;y=Math.min(u.length-1,y);const x=u[g],M=u[y];return"composite"===c.kind?{kind:"composite",minZoom:x,maxZoom:M,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:M,minSize:c.evaluate(new Se(x)),maxSize:c.evaluate(new Se(M)),interpolationType:h}}}function e8(o,{uSize:a,uSizeT:c},{lowerSize:u,upperSize:h}){return"source"===o.kind?u/Es:"composite"===o.kind?N1(u/Es,h/Es,c):a}function Go(o,a){let c=0,u=0;if("constant"===o.kind)u=o.layoutSize;else if("source"!==o.kind){const{interpolationType:h,minZoom:g,maxZoom:y}=o,x=h?f1(ta.interpolationFactor(h,a,g,y),0,1):0;"camera"===o.kind?u=N1(o.minSize,o.maxSize,x):c=x}return{uSizeT:c,uSize:u}}var Nt=Object.freeze({__proto__:null,getSizeData:Cc,evaluateSizeForFeature:e8,evaluateSizeForZoom:Go,SIZE_PACK_FACTOR:Es});function Gm(o,a,c){return o.sections.forEach(u=>{u.text=function(h,g,y){const x=g.layout.get("text-transform").evaluate(y,{});return"uppercase"===x?h=h.toLocaleUpperCase():"lowercase"===x&&(h=h.toLocaleLowerCase()),Ce.applyArabicShaping&&(h=Ce.applyArabicShaping(h)),h}(u.text,a,c)}),o}const wc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function fo(o){return"\ufe36"===o||"\ufe48"===o||"\ufe38"===o||"\ufe44"===o||"\ufe42"===o||"\ufe3e"===o||"\ufe3c"===o||"\ufe3a"===o||"\ufe18"===o||"\ufe40"===o||"\ufe10"===o||"\ufe13"===o||"\ufe14"===o||"\uff40"===o||"\uffe3"===o||"\ufe11"===o||"\ufe12"===o}function $m(o){return"\ufe35"===o||"\ufe47"===o||"\ufe37"===o||"\ufe43"===o||"\ufe41"===o||"\ufe3d"===o||"\ufe3b"===o||"\ufe39"===o||"\ufe17"===o||"\ufe3f"===o}var M0=En,Mc=function(o,a,c,u,h){var g,y,x=8*h-u-1,M=(1<<x)-1,z=M>>1,E=-7,H=c?h-1:0,I=c?-1:1,N=o[a+H];for(H+=I,g=N&(1<<-E)-1,N>>=-E,E+=x;E>0;g=256*g+o[a+H],H+=I,E-=8);for(y=g&(1<<-E)-1,g>>=-E,E+=u;E>0;y=256*y+o[a+H],H+=I,E-=8);if(0===g)g=1-z;else{if(g===M)return y?NaN:1/0*(N?-1:1);y+=Math.pow(2,u),g-=z}return(N?-1:1)*y*Math.pow(2,g-u)},Cf=function(o,a,c,u,h,g){var y,x,M,z=8*g-h-1,E=(1<<z)-1,H=E>>1,I=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,N=u?0:g-1,O=u?1:-1,j=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(x=isNaN(a)?1:0,y=E):(y=Math.floor(Math.log(a)/Math.LN2),a*(M=Math.pow(2,-y))<1&&(y--,M*=2),(a+=y+H>=1?I/M:I*Math.pow(2,1-H))*M>=2&&(y++,M/=2),y+H>=E?(x=0,y=E):y+H>=1?(x=(a*M-1)*Math.pow(2,h),y+=H):(x=a*Math.pow(2,H-1)*Math.pow(2,h),y=0));h>=8;o[c+N]=255&x,N+=O,x/=256,h-=8);for(y=y<<h|x,z+=h;z>0;o[c+N]=255&y,N+=O,y/=256,z-=8);o[c+N-O]|=128*j};function En(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}En.Varint=0,En.Fixed64=1,En.Bytes=2,En.Fixed32=5;var z0=4294967296,wf=1/z0,t8=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function oa(o){return o.type===En.Bytes?o.readVarint()+o.pos:o.pos+1}function Mf(o,a,c){var u=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));c.realloc(u);for(var h=c.pos-1;h>=o;h--)c.buf[h+u]=c.buf[h]}function qm(o,a){for(var c=0;c<o.length;c++)a.writeVarint(o[c])}function Wm(o,a){for(var c=0;c<o.length;c++)a.writeSVarint(o[c])}function zf(o,a){for(var c=0;c<o.length;c++)a.writeFloat(o[c])}function Zm(o,a){for(var c=0;c<o.length;c++)a.writeDouble(o[c])}function Ym(o,a){for(var c=0;c<o.length;c++)a.writeBoolean(o[c])}function il(o,a){for(var c=0;c<o.length;c++)a.writeFixed32(o[c])}function zc(o,a){for(var c=0;c<o.length;c++)a.writeSFixed32(o[c])}function Xm(o,a){for(var c=0;c<o.length;c++)a.writeFixed64(o[c])}function Km(o,a){for(var c=0;c<o.length;c++)a.writeSFixed64(o[c])}function gu(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+16777216*o[a+3]}function S0(o,a,c){o[c]=a,o[c+1]=a>>>8,o[c+2]=a>>>16,o[c+3]=a>>>24}function _u(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+(o[a+3]<<24)}function Kx(o,a,c){a.glyphs=[],1===o&&c.readMessage(Sf,a)}function Sf(o,a,c){if(3===o){const{id:u,bitmap:h,width:g,height:y,left:x,top:M,advance:z}=c.readMessage(Df,{});a.glyphs.push({id:u,bitmap:new lo({width:g+6,height:y+6},h),metrics:{width:g,height:y,left:x,top:M,advance:z}})}else 4===o?a.ascender=c.readSVarint():5===o&&(a.descender=c.readSVarint())}function Df(o,a,c){1===o?a.id=c.readVarint():2===o?a.bitmap=c.readBytes():3===o?a.width=c.readVarint():4===o?a.height=c.readVarint():5===o?a.left=c.readSVarint():6===o?a.top=c.readSVarint():7===o&&(a.advance=c.readVarint())}function vu(o){let a=0,c=0;for(const y of o)a+=y.w*y.h,c=Math.max(c,y.w);o.sort((y,x)=>x.h-y.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),c),h:1/0}];let h=0,g=0;for(const y of o)for(let x=u.length-1;x>=0;x--){const M=u[x];if(!(y.w>M.w||y.h>M.h)){if(y.x=M.x,y.y=M.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===M.w&&y.h===M.h){const z=u.pop();x<u.length&&(u[x]=z)}else y.h===M.h?(M.x+=y.w,M.w-=y.w):y.w===M.w?(M.y+=y.h,M.h-=y.h):(u.push({x:M.x+y.w,y:M.y,w:M.w-y.w,h:y.h}),M.y+=y.h,M.h-=y.h);break}}return{w:h,h:g,fill:a/(h*g)||0}}En.prototype={destroy:function(){this.buf=null},readFields:function(o,a,c){for(c=c||this.length;this.pos<c;){var u=this.readVarint(),h=u>>3,g=this.pos;this.type=7&u,o(h,a,this),this.pos===g&&this.skip(u)}return a},readMessage:function(o,a){return this.readFields(o,a,this.readVarint()+this.pos)},readFixed32:function(){var o=gu(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=_u(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=gu(this.buf,this.pos)+gu(this.buf,this.pos+4)*z0;return this.pos+=8,o},readSFixed64:function(){var o=gu(this.buf,this.pos)+_u(this.buf,this.pos+4)*z0;return this.pos+=8,o},readFloat:function(){var o=Mc(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Mc(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var a,c,u=this.buf;return a=127&(c=u[this.pos++]),c<128?a:(a|=(127&(c=u[this.pos++]))<<7,c<128?a:(a|=(127&(c=u[this.pos++]))<<14,c<128?a:(a|=(127&(c=u[this.pos++]))<<21,c<128?a:function(h,g,y){var x,M,z=y.buf;if(x=(112&(M=z[y.pos++]))>>4,M<128||(x|=(127&(M=z[y.pos++]))<<3,M<128)||(x|=(127&(M=z[y.pos++]))<<10,M<128)||(x|=(127&(M=z[y.pos++]))<<17,M<128)||(x|=(127&(M=z[y.pos++]))<<24,M<128)||(x|=(1&(M=z[y.pos++]))<<31,M<128))return function nl(o,a,c){return c?4294967296*a+(o>>>0):4294967296*(a>>>0)+(o>>>0)}(h,x,g);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(c=u[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,a=this.pos;return this.pos=o,o-a>=12&&t8?t8.decode(this.buf.subarray(a,o)):function(c,u,h){for(var g="",y=u;y<h;){var x,M,z,E=c[y],H=null,I=E>239?4:E>223?3:E>191?2:1;if(y+I>h)break;1===I?E<128&&(H=E):2===I?128==(192&(x=c[y+1]))&&(H=(31&E)<<6|63&x)<=127&&(H=null):3===I?(M=c[y+2],128==(192&(x=c[y+1]))&&128==(192&M)&&((H=(15&E)<<12|(63&x)<<6|63&M)<=2047||H>=55296&&H<=57343)&&(H=null)):4===I&&(M=c[y+2],z=c[y+3],128==(192&(x=c[y+1]))&&128==(192&M)&&128==(192&z)&&((H=(15&E)<<18|(63&x)<<12|(63&M)<<6|63&z)<=65535||H>=1114112)&&(H=null)),null===H?(H=65533,I=1):H>65535&&(H-=65536,g+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),g+=String.fromCharCode(H),y+=I}return g}(this.buf,a,o)},readBytes:function(){var o=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,o);return this.pos=o,a},readPackedVarint:function(o,a){if(this.type!==En.Bytes)return o.push(this.readVarint(a));var c=oa(this);for(o=o||[];this.pos<c;)o.push(this.readVarint(a));return o},readPackedSVarint:function(o){if(this.type!==En.Bytes)return o.push(this.readSVarint());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==En.Bytes)return o.push(this.readBoolean());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==En.Bytes)return o.push(this.readFloat());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==En.Bytes)return o.push(this.readDouble());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==En.Bytes)return o.push(this.readFixed32());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==En.Bytes)return o.push(this.readSFixed32());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==En.Bytes)return o.push(this.readFixed64());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==En.Bytes)return o.push(this.readSFixed64());var a=oa(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed64());return o},skip:function(o){var a=7&o;if(a===En.Varint)for(;this.buf[this.pos++]>127;);else if(a===En.Bytes)this.pos=this.readVarint()+this.pos;else if(a===En.Fixed32)this.pos+=4;else{if(a!==En.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(o,a){this.writeVarint(o<<3|a)},realloc:function(o){for(var a=this.length||16;a<this.pos+o;)a*=2;if(a!==this.length){var c=new Uint8Array(a);c.set(this.buf),this.buf=c,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),S0(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),S0(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),S0(this.buf,-1&o,this.pos),S0(this.buf,Math.floor(o*wf),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),S0(this.buf,-1&o,this.pos),S0(this.buf,Math.floor(o*wf),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(a,c){var u,h,g,x;if(a>=0?(u=a%4294967296|0,h=a/4294967296|0):(h=~(-a/4294967296),4294967295^(u=~(-a%4294967296))?u=u+1|0:(u=0,h=h+1|0)),a>=0x10000000000000000||a<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),g=u,(x=c).buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,x.buf[x.pos]=127&(g>>>=7),function(g,y){var x=(7&g)<<4;y.buf[y.pos++]|=x|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(h,c)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var a=this.pos;this.pos=function(u,h,g){for(var y,x,M=0;M<h.length;M++){if((y=h.charCodeAt(M))>55295&&y<57344){if(!x){y>56319||M+1===h.length?(u[g++]=239,u[g++]=191,u[g++]=189):x=y;continue}if(y<56320){u[g++]=239,u[g++]=191,u[g++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(u[g++]=239,u[g++]=191,u[g++]=189,x=null);y<128?u[g++]=y:(y<2048?u[g++]=y>>6|192:(y<65536?u[g++]=y>>12|224:(u[g++]=y>>18|240,u[g++]=y>>12&63|128),u[g++]=y>>6&63|128),u[g++]=63&y|128)}return g}(this.buf,o,this.pos);var c=this.pos-a;c>=128&&Mf(a,c,this),this.pos=a-1,this.writeVarint(c),this.pos+=c},writeFloat:function(o){this.realloc(4),Cf(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Cf(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var a=o.length;this.writeVarint(a),this.realloc(a);for(var c=0;c<a;c++)this.buf[this.pos++]=o[c]},writeRawMessage:function(o,a){this.pos++;var c=this.pos;o(a,this);var u=this.pos-c;u>=128&&Mf(c,u,this),this.pos=c-1,this.writeVarint(u),this.pos+=u},writeMessage:function(o,a,c){this.writeTag(o,En.Bytes),this.writeRawMessage(a,c)},writePackedVarint:function(o,a){a.length&&this.writeMessage(o,qm,a)},writePackedSVarint:function(o,a){a.length&&this.writeMessage(o,Wm,a)},writePackedBoolean:function(o,a){a.length&&this.writeMessage(o,Ym,a)},writePackedFloat:function(o,a){a.length&&this.writeMessage(o,zf,a)},writePackedDouble:function(o,a){a.length&&this.writeMessage(o,Zm,a)},writePackedFixed32:function(o,a){a.length&&this.writeMessage(o,il,a)},writePackedSFixed32:function(o,a){a.length&&this.writeMessage(o,zc,a)},writePackedFixed64:function(o,a){a.length&&this.writeMessage(o,Xm,a)},writePackedSFixed64:function(o,a){a.length&&this.writeMessage(o,Km,a)},writeBytesField:function(o,a){this.writeTag(o,En.Bytes),this.writeBytes(a)},writeFixed32Field:function(o,a){this.writeTag(o,En.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(o,a){this.writeTag(o,En.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(o,a){this.writeTag(o,En.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(o,a){this.writeTag(o,En.Fixed64),this.writeSFixed64(a)},writeVarintField:function(o,a){this.writeTag(o,En.Varint),this.writeVarint(a)},writeSVarintField:function(o,a){this.writeTag(o,En.Varint),this.writeSVarint(a)},writeStringField:function(o,a){this.writeTag(o,En.Bytes),this.writeString(a)},writeFloatField:function(o,a){this.writeTag(o,En.Fixed32),this.writeFloat(a)},writeDoubleField:function(o,a){this.writeTag(o,En.Fixed64),this.writeDouble(a)},writeBooleanField:function(o,a){this.writeVarintField(o,Boolean(a))}};class n8{constructor(a,{pixelRatio:c,version:u,stretchX:h,stretchY:g,content:y}){this.paddedRect=a,this.pixelRatio=c,this.stretchX=h,this.stretchY=g,this.content=y,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Af{constructor(a,c){const u={},h={};this.haveRenderCallbacks=[];const g=[];this.addImages(a,u,g),this.addImages(c,h,g);const{w:y,h:x}=vu(g),M=new xr({width:y||1,height:x||1});for(const z in a){const E=a[z],H=u[z].paddedRect;xr.copy(E.data,M,{x:0,y:0},{x:H.x+1,y:H.y+1},E.data)}for(const z in c){const E=c[z],H=h[z].paddedRect,I=H.x+1,N=H.y+1,O=E.data.width,j=E.data.height;xr.copy(E.data,M,{x:0,y:0},{x:I,y:N},E.data),xr.copy(E.data,M,{x:0,y:j-1},{x:I,y:N-1},{width:O,height:1}),xr.copy(E.data,M,{x:0,y:0},{x:I,y:N+j},{width:O,height:1}),xr.copy(E.data,M,{x:O-1,y:0},{x:I-1,y:N},{width:1,height:j}),xr.copy(E.data,M,{x:0,y:0},{x:I+O,y:N},{width:1,height:j})}this.image=M,this.iconPositions=u,this.patternPositions=h}addImages(a,c,u){for(const h in a){const g=a[h],y={x:0,y:0,w:g.data.width+2,h:g.data.height+2};u.push(y),c[h]=new n8(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(a,c){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>a.hasImage(u)),a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in a.updatedImages)this.patchUpdatedImage(this.iconPositions[u],a.getImage(u),c),this.patchUpdatedImage(this.patternPositions[u],a.getImage(u),c)}patchUpdatedImage(a,c,u){if(!a||!c||a.version===c.version)return;a.version=c.version;const[h,g]=a.tl;u.update(c.data,void 0,{x:h,y:g})}}Et(n8,"ImagePosition"),Et(Af,"ImageAtlas");const za={horizontal:1,vertical:2,horizontalOnly:3};class Fr{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,c){const u=new Fr;return u.scale=a||1,u.fontStack=c,u}static forImage(a){const c=new Fr;return c.imageName=a,c}}class rl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,c){const u=new rl;for(let h=0;h<a.sections.length;h++){const g=a.sections[h];g.image?u.addImageSection(g):u.addTextSection(g,c)}return u}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(a){this.text=function(c,u){let h="";for(let g=0;g<c.length;g++){const y=c.charCodeAt(g+1)||null,x=c.charCodeAt(g-1)||null;h+=!u&&(y&&L(y)&&!wc[c[g+1]]||x&&L(x)&&!wc[c[g-1]])||!wc[c[g]]?c[g]:wc[c[g]]}return h}(this.text,a)}trim(){let a=0;for(let u=0;u<this.text.length&&r8[this.text.charCodeAt(u)];u++)a++;let c=this.text.length;for(let u=this.text.length-1;u>=0&&u>=a&&r8[this.text.charCodeAt(u)];u--)c--;this.text=this.text.substring(a,c),this.sectionIndex=this.sectionIndex.slice(a,c)}substring(a,c){const u=new rl;return u.text=this.text.substring(a,c),u.sectionIndex=this.sectionIndex.slice(a,c),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,c)=>Math.max(a,this.sections[c].scale),0)}addTextSection(a,c){this.text+=a.text,this.sections.push(Fr.forText(a.scale,a.fontStack||c));const u=this.sections.length-1;for(let h=0;h<a.text.length;++h)this.sectionIndex.push(u)}addImageSection(a){const c=a.image?a.image.name:"";if(0===c.length)return void tn("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Fr.forImage(c)),this.sectionIndex.push(this.sections.length-1)):tn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function i8(o,a,c,u,h,g,y,x,M,z,E,H,I,N,O){const j=rl.fromFeature(o,h);H===za.vertical&&j.verticalizePunctuation(I);let X=[];const ae=function(he,ke,Ve,Ge,We,Fe){if(!he)return[];const Ke=[],nt=function(yt,jt,wt,Lt,Ct,Xt){let G1=0;for(let O1=0;O1<yt.length();O1++){const H1=yt.getSection(O1);G1+=Ef(yt.getCharCode(O1),H1,Lt,Ct,jt,Xt)}return G1/Math.max(1,Math.ceil(G1/wt))}(he,ke,Ve,Ge,We,Fe),st=he.text.indexOf("\u200b")>=0;let dt=0;for(let yt=0;yt<he.length();yt++){const jt=he.getSection(yt),wt=he.getCharCode(yt);if(r8[wt]||(dt+=Ef(wt,jt,Ge,We,ke,Fe)),yt<he.length()-1){const Lt=!((Oe=wt)<11904||!(I4(Oe)||t3(Oe)||m(Oe)||t0(Oe)||D2(Oe)||ki(Oe)||b6(Oe)||e3(Oe)||Ya(Oe)||R4(Oe)||e0(Oe)||v(Oe)||gs(Oe)||Ii(Oe)||Di(Oe)||x6(Oe)||G2(Oe)||N3(Oe)||Xa(Oe)||hc(Oe)));(Qm[wt]||Lt||jt.imageName)&&Ke.push(Tf(yt+1,dt,nt,Ke,Lf(wt,he.getCharCode(yt+1),Lt&&st),!1))}}var Oe;return Hf(Tf(he.length(),dt,nt,Ke,0,!0))}(j,z,g,a,u,N),{processBidirectionalText:me,processStyledBidirectionalText:re}=Ce;if(me&&1===j.sections.length){const he=me(j.toString(),ae);for(const ke of he){const Ve=new rl;Ve.text=ke,Ve.sections=j.sections;for(let Ge=0;Ge<ke.length;Ge++)Ve.sectionIndex.push(0);X.push(Ve)}}else if(re){const he=re(j.text,j.sectionIndex,ae);for(const ke of he){const Ve=new rl;Ve.text=ke[0],Ve.sectionIndex=ke[1],Ve.sections=j.sections,X.push(Ve)}}else X=function(he,ke){const Ve=[],Ge=he.text;let We=0;for(const Fe of ke)Ve.push(he.substring(We,Fe)),We=Fe;return We<Ge.length&&Ve.push(he.substring(We,Ge.length)),Ve}(j,ae);const de=[],ve={positionedLines:de,text:j.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:H,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(he,ke,Ve,Ge,We,Fe,Ke,nt,st,dt,Oe,yt){let jt=0,wt=0,Lt=0;const Ct="right"===nt?1:"left"===nt?0:.5;let Xt=!1;for(const u1 of We){const W1=u1.getSections();for(const Vn of W1){if(Vn.imageName)continue;const xt=ke[Vn.fontStack];if(xt&&(Xt=void 0!==xt.ascender&&void 0!==xt.descender,!Xt))break}if(!Xt)break}let G1=0;for(const u1 of We){u1.trim();const W1=u1.getMaxScale(),Vn=(W1-1)*W2,xt={positionedGlyphs:[],lineOffset:0};he.positionedLines[G1]=xt;const On=xt.positionedGlyphs;let gn=0;if(!u1.length()){wt+=Fe,++G1;continue}let Ze=0,Yn=0;for(let le=0;le<u1.length();le++){const pe=u1.getSection(le),ft=u1.getSectionIndex(le),dn=u1.getCharCode(le);let fn=pe.scale,Rn=null,Z1=null,Pn=null,Ni=W2,t2=0;const Oi=!(st===za.horizontal||!Oe&&!A(dn)||Oe&&(r8[dn]||(O1=dn,F3(O1)||mt(O1)||ln(O1)||P4(O1)||f(O1))));if(pe.imageName){const $t=Ge[pe.imageName];if(!$t)continue;Pn=pe.imageName,he.iconsInText=he.iconsInText||!0,Z1=$t.paddedRect;const Bi=$t.displaySize;fn=fn*W2/yt,Rn={width:Bi[0],height:Bi[1],left:1,top:-3,advance:Oi?Bi[1]:Bi[0],localGlyph:!1},t2=Xt?-Rn.height*fn:W1*W2-17-Bi[1]*fn,Ni=Rn.advance;const Ec=(Oi?Bi[0]:Bi[1])*fn-W2*W1;Ec>0&&Ec>gn&&(gn=Ec)}else{const $t=Ve[pe.fontStack];if(!$t)continue;$t[dn]&&(Z1=$t[dn]);const Bi=ke[pe.fontStack];if(!Bi)continue;const Ec=Bi.glyphs[dn];if(!Ec)continue;if(Rn=Ec.metrics,Ni=8203!==dn?W2:0,Xt){const Q3=void 0!==Bi.ascender?Math.abs(Bi.ascender):0,fl=void 0!==Bi.descender?Math.abs(Bi.descender):0,hl=(Q3+fl)*fn;Ze<hl&&(Ze=hl,Yn=(Q3-fl)/2*fn),t2=-Q3*fn}else t2=(W1-fn)*W2-17}Oi?(he.verticalizable=!0,On.push({glyph:dn,imageName:Pn,x:jt,y:wt+t2,vertical:Oi,scale:fn,localGlyph:Rn.localGlyph,fontStack:pe.fontStack,sectionIndex:ft,metrics:Rn,rect:Z1}),jt+=Ni*fn+dt):(On.push({glyph:dn,imageName:Pn,x:jt,y:wt+t2,vertical:Oi,scale:fn,localGlyph:Rn.localGlyph,fontStack:pe.fontStack,sectionIndex:ft,metrics:Rn,rect:Z1}),jt+=Rn.advance*fn+dt)}0!==On.length&&(Lt=Math.max(jt-dt,Lt),Xt?j1(On,Ct,gn,Yn,Fe*W1/2):j1(On,Ct,gn,0,Fe/2)),jt=0;const m2=Fe*W1+gn;xt.lineOffset=Math.max(gn,Vn),wt+=m2,++G1}var O1;const H1=wt,{horizontalAlign:Kt,verticalAlign:zn}=yu(Ke);(function(u1,W1,Vn,xt,On,gn){const Ze=(W1-Vn)*On,Yn=-gn*xt;for(const m2 of u1)for(const le of m2.positionedGlyphs)le.x+=Ze,le.y+=Yn})(he.positionedLines,Ct,Kt,zn,Lt,H1),he.top+=-zn*H1,he.bottom=he.top+H1,he.left+=-Kt*Lt,he.right=he.left+Lt,he.hasBaseline=Xt}(ve,a,c,u,X,y,x,M,H,z,I,O),!function(he){for(const ke of he)if(0!==ke.positionedGlyphs.length)return!1;return!0}(de)&&ve}const r8={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qm={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ef(o,a,c,u,h,g){if(a.imageName){const y=u[a.imageName];return y?y.displaySize[0]*a.scale*W2/g+h:0}{const y=c[a.fontStack],x=y&&y.glyphs[o];return x?x.metrics.advance*a.scale+h:0}}function Vf(o,a,c,u){const h=Math.pow(o-a,2);return u?o<a?h/2:2*h:h+Math.abs(c)*c}function Lf(o,a,c){let u=0;return 10===o&&(u-=1e4),c&&(u+=150),40!==o&&65288!==o||(u+=50),41!==a&&65289!==a||(u+=50),u}function Tf(o,a,c,u,h,g){let y=null,x=Vf(a,c,h,g);for(const M of u){const z=Vf(a-M.x,c,h,g)+M.badness;z<=x&&(y=M,x=z)}return{index:o,x:a,priorBreak:y,badness:x}}function Hf(o){return o?Hf(o.priorBreak).concat(o.index):[]}function yu(o){let a=.5,c=.5;switch(o){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:a,verticalAlign:c}}function j1(o,a,c,u,h){if(!(a||c||u||h))return;const g=o.length-1,y=o[g],x=(y.x+y.metrics.advance*y.scale)*a;for(let M=0;M<=g;M++)o[M].x-=x,o[M].y+=c+u+h}function Xe(o,a,c){const{horizontalAlign:u,verticalAlign:h}=yu(c),g=a[0]-o.displaySize[0]*u,y=a[1]-o.displaySize[1]*h;return{image:o,top:y,bottom:y+o.displaySize[1],left:g,right:g+o.displaySize[0]}}function bu(o,a,c,u,h,g){const y=o.image;let x;if(y.content){const X=y.content,ae=y.pixelRatio||1;x=[X[0]/ae,X[1]/ae,y.displaySize[0]-X[2]/ae,y.displaySize[1]-X[3]/ae]}const M=a.left*g,z=a.right*g;let E,H,I,N;"width"===c||"both"===c?(N=h[0]+M-u[3],H=h[0]+z+u[1]):(N=h[0]+(M+z-y.displaySize[0])/2,H=N+y.displaySize[0]);const O=a.top*g,j=a.bottom*g;return"height"===c||"both"===c?(E=h[1]+O-u[0],I=h[1]+j+u[2]):(E=h[1]+(O+j-y.displaySize[1])/2,I=E+y.displaySize[1]),{image:y,top:E,right:H,bottom:I,left:N,collisionPadding:x}}class Vs extends pt{constructor(a,c,u,h,g){super(a,c),this.angle=h,this.z=u,void 0!==g&&(this.segment=g)}clone(){return new Vs(this.x,this.y,this.z,this.angle,this.segment)}}function kf(o,a,c,u,h){if(void 0===a.segment)return!0;let g=a,y=a.segment+1,x=0;for(;x>-c/2;){if(y--,y<0)return!1;x-=o[y].dist(g),g=o[y]}x+=o[y].dist(o[y+1]),y++;const M=[];let z=0;for(;x<c/2;){const E=o[y],H=o[y+1];if(!H)return!1;let I=o[y-1].angleTo(E)-E.angleTo(H);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:x,angleDelta:I}),z+=I;x-M[0].distance>u;)z-=M.shift().angleDelta;if(z>h)return!1;y++,x+=E.dist(H)}return!0}function If(o){let a=0;for(let c=0;c<o.length-1;c++)a+=o[c].dist(o[c+1]);return a}function xu(o,a,c){return o?.6*a*c:0}function Rf(o,a){return Math.max(o?o.right-o.left:0,a?a.right-a.left:0)}function Pf(o,a,c,u,h,g){const y=xu(c,h,g),x=Rf(c,u)*g;let M=0;const z=If(o)/2;for(let E=0;E<o.length-1;E++){const H=o[E],I=o[E+1],N=H.dist(I);if(M+N>z){const O=(z-M)/N,j=N1(H.x,I.x,O),X=N1(H.y,I.y,O),ae=new Vs(j,X,0,I.angleTo(H),E);return!y||kf(o,ae,x,y,a)?ae:void 0}M+=N}}function Jm(o,a,c,u,h,g,y,x,M){const z=xu(u,g,y),E=Rf(u,h),H=E*y,I=0===o[0].x||o[0].x===M||0===o[0].y||o[0].y===M;return a-H<a/4&&(a=H+a/4),Ff(o,I?a/2*x%a:(E/2+2*g)*y*x%a,a,z,c,H,I,!1,M)}function Ff(o,a,c,u,h,g,y,x,M){const z=g/2,E=If(o);let H=0,I=a-c,N=[];for(let O=0;O<o.length-1;O++){const j=o[O],X=o[O+1],ae=j.dist(X),me=X.angleTo(j);for(;I+c<H+ae;){I+=c;const re=(I-H)/ae,de=N1(j.x,X.x,re),ve=N1(j.y,X.y,re);if(de>=0&&de<M&&ve>=0&&ve<M&&I-z>=0&&I+z<=E){const he=new Vs(de,ve,0,me,O);he._round(),u&&!kf(o,he,g,u,h)||N.push(he)}}H+=ae}return x||N.length||y||(N=Ff(o,H/2,c,u,h,g,y,!0,M)),N}function eg(o,a,c,u,h){const g=[];for(let y=0;y<o.length;y++){const x=o[y];let M;for(let z=0;z<x.length-1;z++){let E=x[z],H=x[z+1];E.x<a&&H.x<a||(E.x<a?E=new pt(a,E.y+(a-E.x)/(H.x-E.x)*(H.y-E.y))._round():H.x<a&&(H=new pt(a,E.y+(a-E.x)/(H.x-E.x)*(H.y-E.y))._round()),E.y<c&&H.y<c||(E.y<c?E=new pt(E.x+(c-E.y)/(H.y-E.y)*(H.x-E.x),c)._round():H.y<c&&(H=new pt(E.x+(c-E.y)/(H.y-E.y)*(H.x-E.x),c)._round()),E.x>=u&&H.x>=u||(E.x>=u?E=new pt(u,E.y+(u-E.x)/(H.x-E.x)*(H.y-E.y))._round():H.x>=u&&(H=new pt(u,E.y+(u-E.x)/(H.x-E.x)*(H.y-E.y))._round()),E.y>=h&&H.y>=h||(E.y>=h?E=new pt(E.x+(h-E.y)/(H.y-E.y)*(H.x-E.x),h)._round():H.y>=h&&(H=new pt(E.x+(h-E.y)/(H.y-E.y)*(H.x-E.x),h)._round()),M&&E.equals(M[M.length-1])||(M=[E],g.push(M)),M.push(H)))))}}return g}Et(Vs,"Anchor");const al=1e20;function Cu(o,a,c,u,h,g,y,x,M){for(let z=a;z<a+u;z++)Nr(o,c*g+z,g,h,y,x,M);for(let z=c;z<c+h;z++)Nr(o,z*g+a,1,u,y,x,M)}function Nr(o,a,c,u,h,g,y){g[0]=0,y[0]=-al,y[1]=al,h[0]=o[a];for(let x=1,M=0,z=0;x<u;x++){h[x]=o[a+x*c];const E=x*x;do{const H=g[M];z=(h[x]-h[H]+E-H*H)/(x-H)/2}while(z<=y[M]&&--M>-1);M++,g[M]=x,y[M]=z,y[M+1]=al}for(let x=0,M=0;x<u;x++){for(;y[M+1]<x;)M++;const z=g[M],E=x-z;o[a+x*c]=h[z]+E*E}}const wu={none:0,ideographs:1,all:2};class u3{constructor(a,c,u){this.requestManager=a,this.localGlyphMode=c,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a){this.url=a}getGlyphs(a,c){const u=[];for(const h in a)for(const g of a[h])u.push({stack:h,id:g});Dr(u,({stack:h,id:g},y)=>{let x=this.entries[h];x||(x=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let M=x.glyphs[g];if(void 0!==M)return void y(null,{stack:h,id:g,glyph:M});if(M=this._tinySDF(x,h,g),M)return x.glyphs[g]=M,void y(null,{stack:h,id:g,glyph:M});const z=Math.floor(g/256);if(256*z>65535)return void y(new Error("glyphs > 65535 not supported"));if(x.ranges[z])return void y(null,{stack:h,id:g,glyph:M});let E=x.requests[z];E||(E=x.requests[z]=[],u3.loadGlyphRange(h,z,this.url,this.requestManager,(H,I)=>{if(I){x.ascender=I.ascender,x.descender=I.descender;for(const N in I.glyphs)this._doesCharSupportLocalGlyph(+N)||(x.glyphs[+N]=I.glyphs[+N]);x.ranges[z]=!0}for(const N of E)N(H,I);delete x.requests[z]})),E.push((H,I)=>{H?y(H):I&&y(null,{stack:h,id:g,glyph:I.glyphs[g]||null})})},(h,g)=>{if(h)c(h);else if(g){const y={};for(const{stack:x,id:M,glyph:z}of g)void 0===y[x]&&(y[x]={}),void 0===y[x].glyphs&&(y[x].glyphs={}),y[x].glyphs[M]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics},y[x].ascender=this.entries[x].ascender,y[x].descender=this.entries[x].descender;c(null,y)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==wu.none&&(this.localGlyphMode===wu.all?!!this.localFontFamily:!!this.localFontFamily&&(R4(a)||C6(a)||gs(a)||G2(a)||e3(a)))}_tinySDF(a,c,u){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(u))return;let g=a.tinySDF;if(!g){let j="400";/bold/i.test(c)?j="900":/medium/i.test(c)?j="500":/light/i.test(c)&&(j="200"),g=a.tinySDF=new u3.TinySDF({fontFamily:h,fontWeight:j,fontSize:48,buffer:6,radius:16}),g.fontWeight=j}if(this.localGlyphs[g.fontWeight][u])return this.localGlyphs[g.fontWeight][u];const y=String.fromCharCode(u),{data:x,width:M,height:z,glyphWidth:E,glyphHeight:H,glyphLeft:I,glyphTop:N,glyphAdvance:O}=g.draw(y);return this.localGlyphs[g.fontWeight][u]={id:u,bitmap:new lo({width:M,height:z},x),metrics:{width:E/2,height:H/2,left:I/2,top:N/2-27,advance:O/2,localGlyph:!0}}}}function a8(o,a,c,u){const h=[],g=o.image,y=g.pixelRatio,x=g.paddedRect.w-2,M=g.paddedRect.h-2,z=o.right-o.left,E=o.bottom-o.top,H=g.stretchX||[[0,x]],I=g.stretchY||[[0,M]],N=(Fe,Ke)=>Fe+Ke[1]-Ke[0],O=H.reduce(N,0),j=I.reduce(N,0),X=x-O,ae=M-j;let me=0,re=O,de=0,ve=j,he=0,ke=X,Ve=0,Ge=ae;if(g.content&&u){const Fe=g.content;me=o8(H,0,Fe[0]),de=o8(I,0,Fe[1]),re=o8(H,Fe[0],Fe[2]),ve=o8(I,Fe[1],Fe[3]),he=Fe[0]-me,Ve=Fe[1]-de,ke=Fe[2]-Fe[0]-re,Ge=Fe[3]-Fe[1]-ve}const We=(Fe,Ke,nt,st)=>{const dt=Mu(Fe.stretch-me,re,z,o.left),Oe=zu(Fe.fixed-he,ke,Fe.stretch,O),yt=Mu(Ke.stretch-de,ve,E,o.top),jt=zu(Ke.fixed-Ve,Ge,Ke.stretch,j),wt=Mu(nt.stretch-me,re,z,o.left),Lt=zu(nt.fixed-he,ke,nt.stretch,O),Ct=Mu(st.stretch-de,ve,E,o.top),Xt=zu(st.fixed-Ve,Ge,st.stretch,j),G1=new pt(dt,yt),O1=new pt(wt,yt),H1=new pt(wt,Ct),Kt=new pt(dt,Ct),zn=new pt(Oe/y,jt/y),u1=new pt(Lt/y,Xt/y),W1=a*Math.PI/180;if(W1){const On=Math.sin(W1),gn=Math.cos(W1),Ze=[gn,-On,On,gn];G1._matMult(Ze),O1._matMult(Ze),Kt._matMult(Ze),H1._matMult(Ze)}const Vn=Fe.stretch+Fe.fixed,xt=Ke.stretch+Ke.fixed;return{tl:G1,tr:O1,bl:Kt,br:H1,tex:{x:g.paddedRect.x+1+Vn,y:g.paddedRect.y+1+xt,w:nt.stretch+nt.fixed-Vn,h:st.stretch+st.fixed-xt},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:zn,pixelOffsetBR:u1,minFontScaleX:ke/y/z,minFontScaleY:Ge/y/E,isSDF:c}};if(u&&(g.stretchX||g.stretchY)){const Fe=tg(H,X,O),Ke=tg(I,ae,j);for(let nt=0;nt<Fe.length-1;nt++){const st=Fe[nt],dt=Fe[nt+1];for(let Oe=0;Oe<Ke.length-1;Oe++)h.push(We(st,Ke[Oe],dt,Ke[Oe+1]))}}else h.push(We({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:M+1}));return h}function o8(o,a,c){let u=0;for(const h of o)u+=Math.max(a,Math.min(c,h[1]))-Math.max(a,Math.min(c,h[0]));return u}function tg(o,a,c){const u=[{fixed:-1,stretch:0}];for(const[h,g]of o){const y=u[u.length-1];u.push({fixed:h-y.stretch,stretch:y.stretch}),u.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return u.push({fixed:a+1,stretch:c}),u}function Mu(o,a,c,u){return o/a*c+u}function zu(o,a,c,u){return o-a*c/u}function ng(o,a,c,u){const h=a+o.positionedLines[u].lineOffset;return 0===u?c+h/2:c+(h+(a+o.positionedLines[u-1].lineOffset))/2}u3.loadGlyphRange=function(o,a,c,u,h){const g=256*a,y=g+255,x=u.transformRequest(u.normalizeGlyphsURL(c).replace("{fontstack}",o).replace("{range}",`${g}-${y}`),$s.Glyphs);Do(x,(M,z)=>{if(M)h(M);else if(z){const E={},H=new M0(z).readFields(Kx,{});for(const I of H.glyphs)E[I.id]=I;h(null,{glyphs:E,ascender:H.ascender,descender:H.descender})}})},u3.TinySDF=class{constructor({fontSize:o=24,buffer:a=3,radius:c=8,cutoff:u=.25,fontFamily:h="sans-serif",fontWeight:g="normal",fontStyle:y="normal"}={}){this.buffer=a,this.cutoff=u,this.radius=c;const x=this.size=o+4*a,M=this._createCanvas(x),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${y} ${g} ${o}px ${h}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(o){const a=document.createElement("canvas");return a.width=a.height=o,a}draw(o){const{width:a,actualBoundingBoxAscent:c,actualBoundingBoxDescent:u,actualBoundingBoxLeft:h,actualBoundingBoxRight:g}=this.ctx.measureText(o),y=Math.ceil(c),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-h))),M=Math.min(this.size-this.buffer,y+Math.ceil(u)),z=x+2*this.buffer,E=M+2*this.buffer,H=Math.max(z*E,0),I=new Uint8ClampedArray(H),N={data:I,width:z,height:E,glyphWidth:x,glyphHeight:M,glyphTop:y,glyphLeft:0,glyphAdvance:a};if(0===x||0===M)return N;const{ctx:O,buffer:j,gridInner:X,gridOuter:ae}=this;O.clearRect(j,j,x,M),O.fillText(o,j,j+y);const me=O.getImageData(j,j,x,M);ae.fill(al,0,H),X.fill(0,0,H);for(let re=0;re<M;re++)for(let de=0;de<x;de++){const ve=me.data[4*(re*x+de)+3]/255;if(0===ve)continue;const he=(re+j)*z+de+j;if(1===ve)ae[he]=0,X[he]=al;else{const ke=.5-ve;ae[he]=ke>0?ke*ke:0,X[he]=ke<0?ke*ke:0}}Cu(ae,0,0,z,E,z,this.f,this.v,this.z),Cu(X,j,j,x,M,z,this.f,this.v,this.z);for(let re=0;re<H;re++){const de=Math.sqrt(ae[re])-Math.sqrt(X[re]);I[re]=Math.round(255-255*(de/this.radius+this.cutoff))}return N}};class Nf{constructor(a=[],c=Qx){if(this.data=a,this.length=this.data.length,this.compare=c,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const a=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:c,compare:u}=this,h=c[a];for(;a>0;){const g=a-1>>1,y=c[g];if(u(h,y)>=0)break;c[a]=y,a=g}c[a]=h}_down(a){const{data:c,compare:u}=this,h=this.length>>1,g=c[a];for(;a<h;){let y=1+(a<<1),x=c[y];const M=y+1;if(M<this.length&&u(c[M],x)<0&&(y=M,x=c[M]),u(x,g)>=0)break;c[a]=x,a=y}c[a]=g}}function Qx(o,a){return o<a?-1:o>a?1:0}function ig(o,a=1,c=!1){let u=1/0,h=1/0,g=-1/0,y=-1/0;const x=o[0];for(let N=0;N<x.length;N++){const O=x[N];(!N||O.x<u)&&(u=O.x),(!N||O.y<h)&&(h=O.y),(!N||O.x>g)&&(g=O.x),(!N||O.y>y)&&(y=O.y)}const M=Math.min(g-u,y-h);let z=M/2;const E=new Nf([],ol);if(0===M)return new pt(u,h);for(let N=u;N<g;N+=M)for(let O=h;O<y;O+=M)E.push(new sl(N+z,O+z,z,o));let H=function(N){let O=0,j=0,X=0;const ae=N[0];for(let me=0,re=ae.length,de=re-1;me<re;de=me++){const ve=ae[me],he=ae[de],ke=ve.x*he.y-he.x*ve.y;j+=(ve.x+he.x)*ke,X+=(ve.y+he.y)*ke,O+=3*ke}return new sl(j/O,X/O,0,N)}(o),I=E.length;for(;E.length;){const N=E.pop();(N.d>H.d||!H.d)&&(H=N,c&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,I)),N.max-H.d<=a||(z=N.h/2,E.push(new sl(N.p.x-z,N.p.y-z,z,o)),E.push(new sl(N.p.x+z,N.p.y-z,z,o)),E.push(new sl(N.p.x-z,N.p.y+z,z,o)),E.push(new sl(N.p.x+z,N.p.y+z,z,o)),I+=4)}return c&&(console.log(`num probes: ${I}`),console.log(`best distance: ${H.d}`)),H.p}function ol(o,a){return a.max-o.max}class sl{constructor(a,c,u,h){this.p=new pt(a,c),this.h=u,this.d=function(g,y){let x=!1,M=1/0;for(let z=0;z<y.length;z++){const E=y[z];for(let H=0,I=E.length,N=I-1;H<I;N=H++){const O=E[H],j=E[N];O.y>g.y!=j.y>g.y&&g.x<(j.x-O.x)*(g.y-O.y)/(j.y-O.y)+O.x&&(x=!x),M=Math.min(M,W7(g,O,j))}}return(x?1:-1)*Math.sqrt(M)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const s8=Number.POSITIVE_INFINITY,c8=Math.sqrt(2);function Of(o,[a,c]){let u=0,h=0;if(c===s8){a<0&&(a=0);const g=a/c8;switch(o){case"top-right":case"top-left":h=g-7;break;case"bottom-right":case"bottom-left":h=7-g;break;case"bottom":h=7-a;break;case"top":h=a-7}switch(o){case"top-right":case"bottom-right":u=-g;break;case"top-left":case"bottom-left":u=g;break;case"left":u=a;break;case"right":u=-a}}else{switch(a=Math.abs(a),c=Math.abs(c),o){case"top-right":case"top-left":case"top":h=c-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-c}switch(o){case"top-right":case"bottom-right":case"right":u=-a;break;case"top-left":case"bottom-left":case"left":u=a}}return[u,h]}function Bf(o,a,c,u,h,g,y,x,M,z){o.createArrays(),o.tilePixelRatio=a1/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const E=o.layers[0].layout,H=o.layers[0]._unevaluatedLayout._values,I={};if("composite"===o.textSizeData.kind){const{minZoom:j,maxZoom:X}=o.textSizeData;I.compositeTextSizes=[H["text-size"].possiblyEvaluate(new Se(j),x),H["text-size"].possiblyEvaluate(new Se(X),x)]}if("composite"===o.iconSizeData.kind){const{minZoom:j,maxZoom:X}=o.iconSizeData;I.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new Se(j),x),H["icon-size"].possiblyEvaluate(new Se(X),x)]}I.layoutTextSize=H["text-size"].possiblyEvaluate(new Se(M+1),x),I.layoutIconSize=H["icon-size"].possiblyEvaluate(new Se(M+1),x),I.textMaxSize=H["text-size"].possiblyEvaluate(new Se(18),x);const N="map"===E.get("text-rotation-alignment")&&"point"!==E.get("symbol-placement"),O=E.get("text-size");for(const j of o.features){const X=E.get("text-font").evaluate(j,{},x).join(","),ae=O.evaluate(j,{},x),me=I.layoutTextSize.evaluate(j,{},x),re=(I.layoutIconSize.evaluate(j,{},x),{horizontal:{},vertical:void 0}),de=j.text;let ve,he=[0,0];if(de){const Ge=de.toString(),We=E.get("text-letter-spacing").evaluate(j,{},x)*W2,Fe=E.get("text-line-height").evaluate(j,{},x)*W2,Ke=w(Ge)?We:0,nt=E.get("text-anchor").evaluate(j,{},x),st=E.get("text-variable-anchor");if(!st){const wt=E.get("text-radial-offset").evaluate(j,{},x);he=wt?Of(nt,[wt*W2,s8]):E.get("text-offset").evaluate(j,{},x).map(Lt=>Lt*W2)}let dt=N?"center":E.get("text-justify").evaluate(j,{},x);const Oe="point"===E.get("symbol-placement"),yt=Oe?E.get("text-max-width").evaluate(j,{},x)*W2:1/0,jt=wt=>{o.allowVerticalPlacement&&b(Ge)&&(re.vertical=i8(de,a,c,h,X,yt,Fe,nt,wt,Ke,he,za.vertical,!0,me,ae))};if(!N&&st){const wt="auto"===dt?st.map(Ct=>Su(Ct)):[dt];let Lt=!1;for(let Ct=0;Ct<wt.length;Ct++){const Xt=wt[Ct];if(!re.horizontal[Xt])if(Lt)re.horizontal[Xt]=re.horizontal[0];else{const G1=i8(de,a,c,h,X,yt,Fe,"center",Xt,Ke,he,za.horizontal,!1,me,ae);G1&&(re.horizontal[Xt]=G1,Lt=1===G1.positionedLines.length)}}jt("left")}else{if("auto"===dt&&(dt=Su(nt)),Oe||E.get("text-writing-mode").indexOf("horizontal")>=0||!b(Ge)){const wt=i8(de,a,c,h,X,yt,Fe,nt,dt,Ke,he,za.horizontal,!1,me,ae);wt&&(re.horizontal[dt]=wt)}jt(Oe?"left":dt)}}let ke=!1;if(j.icon&&j.icon.name){const Ge=u[j.icon.name];Ge&&(ve=Xe(h[j.icon.name],E.get("icon-offset").evaluate(j,{},x),E.get("icon-anchor").evaluate(j,{},x)),ke=Ge.sdf,void 0===o.sdfIcons?o.sdfIcons=Ge.sdf:o.sdfIcons!==Ge.sdf&&tn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ge.pixelRatio!==o.pixelRatio||0!==E.get("icon-rotate").constantOr(1))&&(o.iconsNeedLinear=!0))}const Ve=jf(re.horizontal)||re.vertical;o.iconsInText||(o.iconsInText=!!Ve&&Ve.iconsInText),(Ve||ve)&&rg(o,j,re,ve,u,I,me,0,he,ke,y,x,z)}g&&o.generateCollisionDebugBuffers(M,o.collisionBoxArray)}function Su(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function rg(o,a,c,u,h,g,y,x,M,z,E,H,I){let N=g.textMaxSize.evaluate(a,{},H);void 0===N&&(N=y);const O=o.layers[0].layout,j=O.get("icon-offset").evaluate(a,{},H),X=jf(c.horizontal)||c.vertical,ae="globe"===I.name,me=y/24,re=o.tilePixelRatio*N/24,de=(Ke=o.overscaling,o.zoom>18&&Ke>2&&(Ke>>=1),Math.max(a1/(512*Ke),1)*O.get("symbol-spacing")),ve=O.get("text-padding")*o.tilePixelRatio,he=O.get("icon-padding")*o.tilePixelRatio,ke=F1(O.get("text-max-angle")),Ve="map"===O.get("text-rotation-alignment")&&"point"!==O.get("symbol-placement"),Ge="map"===O.get("icon-rotation-alignment")&&"point"!==O.get("symbol-placement"),We=O.get("symbol-placement"),Fe=de/2;var Ke;const nt=O.get("icon-text-fit");let st;u&&"none"!==nt&&(o.allowVerticalPlacement&&c.vertical&&(st=bu(u,c.vertical,nt,O.get("icon-text-fit-padding"),j,me)),X&&(u=bu(u,X,nt,O.get("icon-text-fit-padding"),j,me)));const dt=(Oe,yt,jt)=>{if(yt.x<0||yt.x>=a1||yt.y<0||yt.y>=a1)return;let wt=null;if(ae){const{x:Lt,y:Ct,z:Xt}=I.projectTilePoint(yt.x,yt.y,jt);wt={anchor:new Vs(Lt,Ct,Xt,0,void 0),up:I.upVector(jt,yt.x,yt.y)}}!function(Lt,Ct,Xt,G1,O1,H1,Kt,zn,u1,W1,Vn,xt,On,gn,Ze,Yn,m2,le,pe,ft,dn,fn,Rn,Z1,Pn){const Ni=Lt.addToLineVertexArray(Ct,G1);let t2,Oi,$t,Bi,Ec,Q3,fl,hl=0,M1=0,ch=0,Or=0,Gn=-1,ks=-1;const go={};let Xu=to("");const p3=Xt?Xt.anchor:Ct;let y8=0,b8=0;if(void 0===u1._unevaluatedLayout.getValue("text-radial-offset")?[y8,b8]=u1.layout.get("text-offset").evaluate(dn,{},Pn).map(Br=>Br*W2):(y8=u1.layout.get("text-radial-offset").evaluate(dn,{},Pn)*W2,b8=s8),Lt.allowVerticalPlacement&&O1.vertical){const Br=O1.vertical;if(Ze)Q3=Du(Br),zn&&(fl=Du(zn));else{const Y2=u1.layout.get("text-rotate").evaluate(dn,{},Pn)+90;$t=D0(W1,p3,Ct,Vn,xt,On,Br,gn,Y2,Yn),zn&&(Bi=D0(W1,p3,Ct,Vn,xt,On,zn,le,Y2))}}if(H1){const Br=u1.layout.get("icon-rotate").evaluate(dn,{},Pn),Y2="none"!==u1.layout.get("icon-text-fit"),_o=a8(H1,Br,Rn,Y2),Ku=zn?a8(zn,Br,Rn,Y2):void 0;Oi=D0(W1,p3,Ct,Vn,xt,On,H1,le,Br),hl=4*_o.length;const uh=Lt.iconSizeData;let Lc=null;"source"===uh.kind?(Lc=[Es*u1.layout.get("icon-size").evaluate(dn,{},Pn)],Lc[0]>d3&&tn(`${Lt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===uh.kind&&(Lc=[Es*fn.compositeIconSizes[0].evaluate(dn,{},Pn),Es*fn.compositeIconSizes[1].evaluate(dn,{},Pn)],(Lc[0]>d3||Lc[1]>d3)&&tn(`${Lt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Lt.addSymbols(Lt.icon,_o,Lc,ft,pe,dn,!1,Xt,Ct,Ni.lineStartIndex,Ni.lineLength,-1,Z1,Pn),Gn=Lt.icon.placedSymbolArray.length-1,Ku&&(M1=4*Ku.length,Lt.addSymbols(Lt.icon,Ku,Lc,ft,pe,dn,za.vertical,Xt,Ct,Ni.lineStartIndex,Ni.lineLength,-1,Z1,Pn),ks=Lt.icon.placedSymbolArray.length-1)}for(const Br in O1.horizontal){const Y2=O1.horizontal[Br];t2||(Xu=to(Y2.text),Ze?Ec=Du(Y2):t2=D0(W1,p3,Ct,Vn,xt,On,Y2,gn,u1.layout.get("text-rotate").evaluate(dn,{},Pn),Yn));const _o=1===Y2.positionedLines.length;if(ch+=Uf(Lt,Xt,Ct,Y2,Kt,u1,Ze,dn,Yn,Ni,O1.vertical?za.horizontal:za.horizontalOnly,_o?Object.keys(O1.horizontal):[Br],go,Gn,fn,Z1,Pn),_o)break}O1.vertical&&(Or+=Uf(Lt,Xt,Ct,O1.vertical,Kt,u1,Ze,dn,Yn,Ni,za.vertical,["vertical"],go,ks,fn,Z1,Pn));let Vc=-1;const x8=(Br,Y2)=>Br?Math.max(Br,Y2):Y2;Vc=x8(Ec,Vc),Vc=x8(Q3,Vc),Vc=x8(fl,Vc);const lh=Vc>-1?1:0;Lt.glyphOffsetArray.length>=f3.MAX_GLYPHS&&tn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==dn.sortKey&&Lt.addToSortKeyRanges(Lt.symbolInstances.length,dn.sortKey),Lt.symbolInstances.emplaceBack(p3.x,p3.y,p3.z,Ct.x,Ct.y,go.right>=0?go.right:-1,go.center>=0?go.center:-1,go.left>=0?go.left:-1,go.vertical>=0?go.vertical:-1,Gn,ks,Xu,void 0!==t2?t2:Lt.collisionBoxArray.length,void 0!==t2?t2+1:Lt.collisionBoxArray.length,void 0!==$t?$t:Lt.collisionBoxArray.length,void 0!==$t?$t+1:Lt.collisionBoxArray.length,void 0!==Oi?Oi:Lt.collisionBoxArray.length,void 0!==Oi?Oi+1:Lt.collisionBoxArray.length,Bi||Lt.collisionBoxArray.length,Bi?Bi+1:Lt.collisionBoxArray.length,Vn,ch,Or,hl,M1,lh,0,y8,b8,Vc)}(o,yt,wt,Oe,c,u,h,st,o.layers[0],o.collisionBoxArray,a.index,a.sourceLayerIndex,o.index,ve,Ve,M,0,he,Ge,j,a,g,z,E,H)};if("line"===We)for(const Oe of eg(a.geometry,0,0,a1,a1)){const yt=Jm(Oe,de,ke,c.vertical||X,u,24,re,o.overscaling,a1);for(const jt of yt)X&&Gf(o,X.text,Fe,jt)||dt(Oe,jt,H)}else if("line-center"===We){for(const Oe of a.geometry)if(Oe.length>1){const yt=Pf(Oe,ke,c.vertical||X,u,24,re);yt&&dt(Oe,yt,H)}}else if("Polygon"===a.type)for(const Oe of U6(a.geometry,0)){const yt=ig(Oe,16);dt(Oe[0],new Vs(yt.x,yt.y,0,0,void 0),H)}else if("LineString"===a.type)for(const Oe of a.geometry)dt(Oe,new Vs(Oe[0].x,Oe[0].y,0,0,void 0),H);else if("Point"===a.type)for(const Oe of a.geometry)for(const yt of Oe)dt([yt],new Vs(yt.x,yt.y,0,0,void 0),H)}const d3=32640;function Uf(o,a,c,u,h,g,y,x,M,z,E,H,I,N,O,j,X){const ae=function(de,ve,he,ke,Ve,Ge,We,Fe){const Ke=[];if(0===ve.positionedLines.length)return Ke;const nt=ke.layout.get("text-rotate").evaluate(Ge,{})*Math.PI/180,st=function(wt){const Lt=wt[0],Ct=wt[1],Xt=Lt*Ct;return Xt>0?[Lt,-Ct]:Xt<0?[-Lt,Ct]:0===Lt?[Ct,Lt]:[Ct,-Lt]}(he);let dt=Math.abs(ve.top-ve.bottom);for(const wt of ve.positionedLines)dt-=wt.lineOffset;const Oe=ve.positionedLines.length,yt=dt/Oe;let jt=ve.top-he[1];for(let wt=0;wt<Oe;++wt){const Lt=ve.positionedLines[wt];jt=ng(ve,yt,jt,wt);for(const Ct of Lt.positionedGlyphs){if(!Ct.rect)continue;const Xt=Ct.rect||{};let G1=4,O1=!0,H1=1,Kt=0;if(Ct.imageName){const Z1=We[Ct.imageName];if(!Z1)continue;if(Z1.sdf){tn("SDF images are not supported in formatted text and will be ignored.");continue}O1=!1,H1=Z1.pixelRatio,G1=1/H1}const zn=(Ve||Fe)&&Ct.vertical,u1=Ct.metrics.advance*Ct.scale/2,W1=Ct.metrics,Vn=Ct.rect;if(null===Vn)continue;Fe&&ve.verticalizable&&(Kt=Ct.imageName?u1-Ct.metrics.width*Ct.scale/2:0);const xt=Ve?[Ct.x+u1,Ct.y]:[0,0];let On=[0,0],gn=[0,0],Ze=!1;Ve||(zn?(gn=[Ct.x+u1+st[0],Ct.y+st[1]-Kt],Ze=!0):On=[Ct.x+u1+he[0],Ct.y+he[1]-Kt]);const Yn=Vn.w*Ct.scale/(H1*(Ct.localGlyph?2:1)),m2=Vn.h*Ct.scale/(H1*(Ct.localGlyph?2:1));let le,pe,ft,dn;if(zn){const Z1=Ct.y-jt,Pn=new pt(-u1,u1-Z1),Ni=-Math.PI/2,t2=new pt(...gn);le=new pt(-u1+On[0],On[1]),le._rotateAround(Ni,Pn)._add(t2),le.x+=-Z1+u1,le.y-=(W1.left-G1)*Ct.scale;const Oi=Ct.imageName?W1.advance*Ct.scale:W2*Ct.scale,$t=String.fromCharCode(Ct.glyph);fo($t)?le.x+=(1-G1)*Ct.scale:$m($t)?le.x+=Oi-W1.height*Ct.scale+(-G1-1)*Ct.scale:le.x+=Ct.imageName||W1.width+2*G1===Vn.w&&W1.height+2*G1===Vn.h?(Oi-m2)/2:(Oi-(W1.height+2*G1)*Ct.scale)/2,pe=new pt(le.x,le.y-Yn),ft=new pt(le.x+m2,le.y),dn=new pt(le.x+m2,le.y-Yn)}else{const Z1=(W1.left-G1)*Ct.scale-u1+On[0],Pn=(-W1.top-G1)*Ct.scale+On[1],Ni=Z1+Yn,t2=Pn+m2;le=new pt(Z1,Pn),pe=new pt(Ni,Pn),ft=new pt(Z1,t2),dn=new pt(Ni,t2)}if(nt){let Z1;Z1=Ve?new pt(0,0):Ze?new pt(st[0],st[1]):new pt(he[0],he[1]),le._rotateAround(nt,Z1),pe._rotateAround(nt,Z1),ft._rotateAround(nt,Z1),dn._rotateAround(nt,Z1)}const fn=new pt(0,0),Rn=new pt(0,0);Ke.push({tl:le,tr:pe,bl:ft,br:dn,tex:Xt,writingMode:ve.writingMode,glyphOffset:xt,sectionIndex:Ct.sectionIndex,isSDF:O1,pixelOffsetTL:fn,pixelOffsetBR:Rn,minFontScaleX:0,minFontScaleY:0})}}return Ke}(0,u,M,g,y,x,h,o.allowVerticalPlacement),me=o.textSizeData;let re=null;"source"===me.kind?(re=[Es*g.layout.get("text-size").evaluate(x,{},X)],re[0]>d3&&tn(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===me.kind&&(re=[Es*O.compositeTextSizes[0].evaluate(x,{},X),Es*O.compositeTextSizes[1].evaluate(x,{},X)],(re[0]>d3||re[1]>d3)&&tn(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,ae,re,M,y,x,E,a,c,z.lineStartIndex,z.lineLength,N,j,X);for(const de of H)I[de]=o.text.placedSymbolArray.length-1;return 4*ae.length}function jf(o){for(const a in o)return o[a];return null}function D0(o,a,c,u,h,g,y,x,M,z){let E=y.top,H=y.bottom,I=y.left,N=y.right;const O=y.collisionPadding;if(O&&(I-=O[0],E-=O[1],N+=O[2],H+=O[3]),M){const j=new pt(I,E),X=new pt(N,E),ae=new pt(I,H),me=new pt(N,H),re=F1(M);let de=new pt(0,0);z&&(de=new pt(z[0],z[1])),j._rotateAround(re,de),X._rotateAround(re,de),ae._rotateAround(re,de),me._rotateAround(re,de),I=Math.min(j.x,X.x,ae.x,me.x),N=Math.max(j.x,X.x,ae.x,me.x),E=Math.min(j.y,X.y,ae.y,me.y),H=Math.max(j.y,X.y,ae.y,me.y)}return o.emplaceBack(a.x,a.y,a.z,c.x,c.y,I,E,N,H,x,u,h,g),o.length-1}function Du(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const a=o.bottom-o.top;return a>0?Math.max(10,a):null}function Gf(o,a,c,u){const h=o.compareText;if(a in h){const g=h[a];for(let y=g.length-1;y>=0;y--)if(u.dist(g[y])<c)return!0}else h[a]=[];return h[a].push(u),!1}function Au(o,a){const c=o.fovAboveCenter,u=o.elevation?o.elevation.getMinElevationBelowMSL()*a:0,h=(o._camera.position[2]*o.worldSize-u)/Math.cos(o._pitch),g=Math.sin(c)*h/Math.sin(Math.max(Math.PI/2-o._pitch-c,.01)),y=Math.sin(o._pitch)*g+h;return Math.min(1.01*y,h*(1/o._horizonShift))}function Sc(o,a){if(!a.isReprojectedInTileSpace)return{scale:1<<o.z,x:o.x,y:o.y,x2:o.x+1,y2:o.y+1,projection:a};const c=Math.pow(2,-o.z),u=o.x*c,h=(o.x+1)*c,g=o.y*c,y=(o.y+1)*c,x=A2(u),M=A2(h),z=e2(g),E=e2(y),H=a.project(x,z),I=a.project(M,z),N=a.project(M,E),O=a.project(x,E);let j=Math.min(H.x,I.x,N.x,O.x),X=Math.min(H.y,I.y,N.y,O.y),ae=Math.max(H.x,I.x,N.x,O.x),me=Math.max(H.y,I.y,N.y,O.y);const re=c/16;function de(he,ke,Ve,Ge,We,Fe){const Ke=(Ve+We)/2,nt=(Ge+Fe)/2,st=a.project(A2(Ke),e2(nt)),dt=Math.max(0,j-st.x,X-st.y,st.x-ae,st.y-me);j=Math.min(j,st.x),ae=Math.max(ae,st.x),X=Math.min(X,st.y),me=Math.max(me,st.y),dt>re&&(de(he,st,Ve,Ge,Ke,nt),de(st,ke,Ke,nt,We,Fe))}de(H,I,u,g,h,g),de(I,N,h,g,h,y),de(N,O,h,y,u,y),de(O,H,u,y,u,g),j-=re,X-=re,ae+=re,me+=re;const ve=1/Math.max(ae-j,me-X);return{scale:ve,x:j*ve,y:X*ve,x2:ae*ve,y2:me*ve,projection:a}}const Jx=Ca(new Float32Array(16));class Ls{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,c){return{x:0,y:0,z:0}}unproject(a,c){return new sn(0,0)}projectTilePoint(a,c,u){return{x:a,y:c,z:0}}locationPoint(a,c,u=!0){return a._coordinatePoint(a.locationCoordinate(c),u)}pixelsPerMeter(a,c){return co(1,a)*c}pixelSpaceConversion(a,c,u){return 1}farthestPixelDistance(a){return Au(a,a.pixelsPerMeter)}pointCoordinate(a,c,u,h){const g=a.horizonLineFromTop(!1),y=new pt(c,Math.max(g,u));return a.rayIntersectionCoordinate(a.pointRayIntersection(y,h))}pointCoordinate3D(a,c,u){const h=new pt(c,u);if(a.elevation)return a.elevation.pointCoordinate(h);{const g=this.pointCoordinate(a,h.x,h.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(a,c){if(a.elevation)return!this.pointCoordinate3D(a,c.x,c.y);const u=a.horizonLineFromTop();return c.y<u}createInversionMatrix(a,c){return Jx}createTileMatrix(a,c,u){let h,g,y;const x=u.canonical,M=Ca(new Float64Array(16));if(this.isReprojectedInTileSpace){const z=Sc(x,this);h=1,g=z.x+u.wrap*z.scale,y=z.y,s3(M,M,[h/z.scale,h/z.scale,a.pixelsPerMeter/c])}else h=c/a.zoomScale(x.z),g=(x.x+Math.pow(2,x.z)*u.wrap)*h,y=x.y*h;return wa(M,M,[g,y,0]),s3(M,M,[h/a1,h/a1,1]),M}upVector(a,c,u){return[0,0,1]}upVectorScale(a,c,u){return{metersToTile:1}}}class ag extends Ls{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[c,u]=this.parallels=a.parallels||[29.5,45.5],h=Math.sin(F1(c));this.n=(h+Math.sin(F1(u)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(a,c){const{n:u,c:h,r0:g}=this,y=F1(a-this.center[0]),x=F1(c),M=Math.sqrt(h-2*u*Math.sin(x))/u;return{x:M*Math.sin(y*u),y:M*Math.cos(y*u)-g,z:0}}unproject(a,c){const{n:u,c:h,r0:g}=this,y=g+c;let x=Math.atan2(a,Math.abs(y))*Math.sign(y);y*u<0&&(x-=Math.PI*Math.sign(a)*Math.sign(y));const M=F1(this.center[0])*u;x=b2(x,-Math.PI-M,Math.PI-M);const z=f1(ni(x/u)+this.center[0],-180,180),E=Math.asin(f1((h-(a*a+y*y)*u*u)/(2*u),-1,1)),H=f1(ni(E),-E2,E2);return new sn(z,H)}}const l8=1.340264,q=-.081106,Ts=893e-6,A0=.003796,E0=Math.sqrt(3)/2;class og extends Ls{project(a,c){c=c/180*Math.PI,a=a/180*Math.PI;const u=Math.asin(E0*Math.sin(c)),h=u*u,g=h*h*h;return{x:.5*(a*Math.cos(u)/(E0*(l8+3*q*h+g*(7*Ts+9*A0*h)))/Math.PI+.5),y:1-.5*(u*(l8+q*h+g*(Ts+A0*h))/Math.PI+1),z:0}}unproject(a,c){a=(2*a-.5)*Math.PI;let u=c=(2*(1-c)-1)*Math.PI,h=u*u,g=h*h*h;for(let E,H,I,N=0;N<12&&(H=u*(l8+q*h+g*(Ts+A0*h))-c,I=l8+3*q*h+g*(7*Ts+9*A0*h),E=H/I,u=f1(u-E,-Math.PI/3,Math.PI/3),h=u*u,g=h*h*h,!(Math.abs(E)<1e-12));++N);const y=E0*a*(l8+3*q*h+g*(7*Ts+9*A0*h))/Math.cos(u),x=Math.asin(Math.sin(u)/E0),M=f1(180*y/Math.PI,-180,180),z=f1(180*x/Math.PI,-E2,E2);return new sn(M,z)}}class sg extends Ls{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,c){return{x:.5+a/360,y:.5-c/360,z:0}}unproject(a,c){const u=360*(a-.5),h=f1(360*(.5-c),-E2,E2);return new sn(u,h)}}const Dc=Math.PI/2;function Ac(o){return Math.tan((Dc+o)/2)}class Eu extends Ls{constructor(a){super(a),this.center=a.center||[0,30];const[c,u]=this.parallels=a.parallels||[30,30];let h=F1(c),g=F1(u);this.southernCenter=h+g<0,this.southernCenter&&(h=-h,g=-g);const y=Math.cos(h),x=Ac(h);this.n=h===g?Math.sin(h):Math.log(y/Math.cos(g))/Math.log(Ac(g)/x),this.f=y*Math.pow(Ac(h),this.n)/this.n}project(a,c){c=F1(c),this.southernCenter&&(c=-c),a=F1(a-this.center[0]);const u=1e-6,{n:h,f:g}=this;g>0?c<-Dc+u&&(c=-Dc+u):c>Dc-u&&(c=Dc-u);const y=g/Math.pow(Ac(c),h);let x=y*Math.sin(h*a),M=g-y*Math.cos(h*a);return x=.5*(x/Math.PI+.5),M=.5*(M/Math.PI+.5),{x,y:this.southernCenter?M:1-M,z:0}}unproject(a,c){a=(2*a-.5)*Math.PI,this.southernCenter&&(c=1-c),c=(2*(1-c)-.5)*Math.PI;const{n:u,f:h}=this,g=h-c,y=Math.sign(g),x=Math.sign(u)*Math.sqrt(a*a+g*g);let M=Math.atan2(a,Math.abs(g))*y;g*u<0&&(M-=Math.PI*Math.sign(a)*y);const z=f1(ni(M/u)+this.center[0],-180,180),E=f1(ni(2*Math.atan(Math.pow(h/x,1/u))-Dc),-E2,E2);return new sn(z,this.southernCenter?-E:E)}}class cl extends Ls{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,c){return{x:oo(a),y:so(c),z:0}}unproject(a,c){const u=A2(a),h=e2(c);return new sn(u,h)}}const u8=F1(E2);class d8 extends Ls{project(a,c){const u=(c=F1(c))*c,h=u*u;return{x:.5*((a=F1(a))*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(c*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(a,c){a=(2*a-.5)*Math.PI;let u=c=(2*(1-c)-1)*Math.PI,h=25,g=0,y=u*u;do{y=u*u;const z=y*y;g=(u*(1.007226+y*(.015085+z*(.028874*y-.044475-.005916*z)))-c)/(1.007226+y*(.045255+z*(.259866*y-.311325-.005916*11*z))),u=f1(u-g,-u8,u8)}while(Math.abs(g)>1e-6&&--h>0);y=u*u;const x=f1(ni(a/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),M=ni(u);return new sn(x,M)}}const Vu=F1(E2);class Lu extends Ls{project(a,c){c=F1(c),a=F1(a);const u=Math.cos(c),h=2/Math.PI,g=Math.acos(u*Math.cos(a/2)),y=Math.sin(g)/g,x=.5*(a*h+2*u*Math.sin(a/2)/y)||0,M=.5*(c+Math.sin(c)/y)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(M/Math.PI+1),z:0}}unproject(a,c){let u=a=(2*a-.5)*Math.PI,h=c=(2*(1-c)-1)*Math.PI,g=25;const y=1e-6;let x=0,M=0;do{const z=Math.cos(h),E=Math.sin(h),H=2*E*z,I=E*E,N=z*z,O=Math.cos(u/2),j=Math.sin(u/2),X=2*O*j,ae=j*j,me=1-N*O*O,re=me?1/me:0,de=me?Math.acos(z*O)*Math.sqrt(1/me):0,ve=.5*(2*de*z*j+2*u/Math.PI)-a,he=.5*(de*E+h)-c,ke=.5*re*(N*ae+de*z*O*I)+1/Math.PI,Ve=re*(X*H/4-de*E*j),Ge=.125*re*(H*j-de*E*N*X),We=.5*re*(I*O+de*ae*z)+.5,Fe=Ve*Ge-We*ke;x=(he*Ve-ve*We)/Fe,M=(ve*Ge-he*ke)/Fe,u=f1(u-x,-Math.PI,Math.PI),h=f1(h-M,-Vu,Vu)}while((Math.abs(x)>y||Math.abs(M)>y)&&--g>0);return new sn(ni(u),ni(h))}}class f8 extends Ls{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(F1(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,c){const{scale:u,cosPhi:h}=this;return{x:F1(a)*h*u+.5,y:-Math.sin(F1(c))/h*u+.5,z:0}}unproject(a,c){const{scale:u,cosPhi:h}=this,g=-(c-.5)/u,y=f1(ni((a-.5)/u)/h,-180,180),x=Math.asin(f1(g*h,-1,1)),M=f1(ni(x),-E2,E2);return new sn(y,M)}}class Tu extends cl{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,c,u){const h=W4(a,c,u);return ci(h,h,Z4(jo(u))),{x:h[0],y:h[1],z:h[2]}}locationPoint(a,c){const u=ws(c.lat,c.lng),h=br([],u),g=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(c),a._centerAltitude):a._centerAltitude;c0(u,u,h,co(1,0)*a1*g);const y=Ca(new Float64Array(16));return bs(y,a.pixelMatrix,a.globeMatrix),ci(u,u,y),new pt(u[0],u[1])}pixelsPerMeter(a,c){return co(1,0)*c}pixelSpaceConversion(a,c,u){const h=co(1,a)*c,g=N1(co(1,45)*c,h,u);return this.pixelsPerMeter(a,c)/g}createTileMatrix(a,c,u){const h=A5(jo(u.canonical));return bs(new Float64Array(16),a.globeMatrix,h)}createInversionMatrix(a,c){const{center:u}=a,h=Z4(jo(c));return z6(h,h,F1(u.lng)),xs(h,h,F1(u.lat)),s3(h,h,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(a,c,u,h){return B7(a,c,u,!0)||new K4(0,0)}pointCoordinate3D(a,c,u){const h=this.pointCoordinate(a,c,u,0);return[h.x,h.y,h.z]}isPointAboveHorizon(a,c){return!B7(a,c.x,c.y,!1)}farthestPixelDistance(a){const c=function(h,g){const y=h.cameraToCenterDistance,x=h._centerAltitude*g,M=h._camera,z=h._camera.forward(),E=Ma([],no([],z,-y),[0,0,x]),H=h.worldSize/(2*Math.PI),I=[0,0,-H],N=h.width/h.height,O=Math.tan(h.fovAboveCenter),j=no([],M.up(),O),X=no([],M.right(),O*N),ae=br([],Ma([],Ma([],z,j),X)),me=[];let re;if(new E6(E,ae).closestPointOnSphere(I,H,me)){const de=Ma([],me,I),ve=Cs([],de,E);re=Math.cos(h.fovAboveCenter)*o0(ve)}else{const de=Cs([],E,I),ve=Cs([],I,E);br(ve,ve);const he=o0(de)-H;re=Math.sqrt(he*(he+2*H));const ke=Math.acos(re/(H+he))-Math.acos(io(z,ve));re*=Math.cos(ke)}return 1.01*re}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),u=Y4(a.zoom);if(u>0){const h=Au(a,co(1,a.center.lat)*a.worldSize),g=a.worldSize/(2*Math.PI),y=Math.max(a.width,a.height)/a.worldSize*Math.PI;return N1(c,h+g*(1-Math.cos(y)),Math.pow(u,10))}return c}upVector(a,c,u){return W4(c,u,a,1)}upVectorScale(a){return{metersToTile:q4(p0(jo(a)))}}}function Hu(o){const a=o.parallels,c=!!a&&Math.abs(a[0]+a[1])<.01;switch(o.name){case"mercator":return new cl(o);case"equirectangular":return new sg(o);case"naturalEarth":return new d8(o);case"equalEarth":return new og(o);case"winkelTripel":return new Lu(o);case"albers":return c?new f8(o):new ag(o);case"lambertConformalConic":return c?new f8(o):new Eu(o);case"globe":return new Tu(o)}throw new Error(`Invalid projection name: ${o.name}`)}const ku=$6.types,cg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function h8(o,a,c,u,h,g,y,x,M,z,E,H,I){const N=x?Math.min(d3,Math.round(x[0])):0,O=x?Math.min(d3,Math.round(x[1])):0;o.emplaceBack(a,c,Math.round(32*u),Math.round(32*h),g,y,(N<<1)+(M?1:0),O,16*z,16*E,256*H,256*I)}function V0(o,a,c,u,h,g,y){o.emplaceBack(a,c,u,h,g,y)}function p8(o,a,c,u,h){o.emplaceBack(a,c,u,h),o.emplaceBack(a,c,u,h),o.emplaceBack(a,c,u,h),o.emplaceBack(a,c,u,h)}function $f(o){for(const a of o.sections)if(B(a.text))return!0;return!1}class m8{constructor(a){this.layoutVertexArray=new Qa,this.indexArray=new Qi,this.programConfigurations=a,this.segments=new ui,this.dynamicLayoutVertexArray=new Mn,this.opacityVertexArray=new kn,this.placedSymbolArray=new b5,this.globeExtVertexArray=new jn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(a,c,u,h){this.isEmpty()||(u&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Bm.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,mu.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,cg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,Um.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||h)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Et(m8,"SymbolBuffers");class Iu{constructor(a,c,u){this.layoutVertexArray=new a,this.layoutAttributes=c,this.indexArray=new u,this.segments=new ui,this.collisionVertexArray=new In,this.collisionVertexArrayExt=new p2}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,jm.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,yf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Et(Iu,"CollisionBuffers");class f3{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(y=>y.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ca([]),this.placementViewportMatrix=Ca([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cc(this.zoom,c["text-size"]),this.iconSizeData=Cc(this.zoom,c["icon-size"]);const u=this.layers[0].layout,h=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==g&&void 0!==h.constantOr(1),this.sortFeaturesByY=("viewport-y"===g||"auto"===g&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(y=>za[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=a.sourceID,this.projection=a.projection}createArrays(){this.text=new m8(new ys(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new m8(new ys(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new Vt,this.lineVertexArray=new w6,this.symbolInstances=new E7}calculateGlyphDependencies(a,c,u,h,g){for(let y=0;y<a.length;y++)if(c[a.charCodeAt(y)]=!0,h&&g){const x=wc[a.charAt(y)];x&&(c[x.charCodeAt(0)]=!0)}}populate(a,c,u,h){const g=this.layers[0],y=g.layout,x="globe"===this.projection.name,M=y.get("text-font"),z=y.get("text-field"),E=y.get("icon-image"),H=("constant"!==z.value.kind||z.value.value instanceof ri&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&("constant"!==M.value.kind||M.value.value.length>0),I="constant"!==E.value.kind||!!E.value.value||Object.keys(E.parameters).length>0,N=y.get("symbol-sort-key");if(this.features=[],!H&&!I)return;const O=c.iconDependencies,j=c.glyphDependencies,X=c.availableImages,ae=new Se(this.zoom);for(const{feature:me,id:re,index:de,sourceLayerIndex:ve}of a){const he=g._featureFilter.needGeometry,ke=vc(me,he);if(!g._featureFilter.filter(ae,ke,u))continue;if(he||(ke.geometry=Ms(me,u,h)),x&&1!==me.type&&u.z<=5){const Fe=ke.geometry,Ke=.98078528056,nt=(st,dt)=>io(W4(st.x,st.y,u,1),W4(dt.x,dt.y,u,1))<Ke;for(let st=0;st<Fe.length;st++)Fe[st]=zm(Fe[st],nt)}let Ve,Ge;if(H){const Fe=g.getValueAndResolveTokens("text-field",ke,u,X),Ke=ri.factory(Fe);$f(Ke)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ye()||this.hasRTLText&&Ce.isParsed())&&(Ve=Gm(Ke,g,ke))}if(I){const Fe=g.getValueAndResolveTokens("icon-image",ke,u,X);Ge=Fe instanceof C2?Fe:C2.fromString(Fe)}if(!Ve&&!Ge)continue;const We=this.sortFeaturesByKey?N.evaluate(ke,{},u):void 0;if(this.features.push({id:re,text:Ve,icon:Ge,index:de,sourceLayerIndex:ve,geometry:ke.geometry,properties:me.properties,type:ku[me.type],sortKey:We}),Ge&&(O[Ge.name]=!0),Ve){const Fe=M.evaluate(ke,{},u).join(","),Ke="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(za.vertical)>=0;for(const nt of Ve.sections)if(nt.image)O[nt.image.name]=!0;else{const st=b(Ve.toString()),dt=nt.fontStack||Fe,Oe=j[dt]=j[dt]||{};this.calculateGlyphDependencies(nt.text,Oe,Ke,this.allowVerticalPlacement,st)}}}"line"===y.get("symbol-placement")&&(this.features=function(me){const re={},de={},ve=[];let he=0;function ke(Fe){ve.push(me[Fe]),he++}function Ve(Fe,Ke,nt){const st=de[Fe];return delete de[Fe],de[Ke]=st,ve[st].geometry[0].pop(),ve[st].geometry[0]=ve[st].geometry[0].concat(nt[0]),st}function Ge(Fe,Ke,nt){const st=re[Ke];return delete re[Ke],re[Fe]=st,ve[st].geometry[0].shift(),ve[st].geometry[0]=nt[0].concat(ve[st].geometry[0]),st}function We(Fe,Ke,nt){const st=nt?Ke[0][Ke[0].length-1]:Ke[0][0];return`${Fe}:${st.x}:${st.y}`}for(let Fe=0;Fe<me.length;Fe++){const Ke=me[Fe],nt=Ke.geometry,st=Ke.text?Ke.text.toString():null;if(!st){ke(Fe);continue}const dt=We(st,nt),Oe=We(st,nt,!0);if(dt in de&&Oe in re&&de[dt]!==re[Oe]){const yt=Ge(dt,Oe,nt),jt=Ve(dt,Oe,ve[yt].geometry);delete re[dt],delete de[Oe],de[We(st,ve[jt].geometry,!0)]=jt,ve[yt].geometry=null}else dt in de?Ve(dt,Oe,nt):Oe in re?Ge(dt,Oe,nt):(ke(Fe),re[dt]=he-1,de[Oe]=he-1)}return ve.filter(Fe=>Fe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,re)=>me.sortKey-re.sortKey)}update(a,c,u,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,c,this.layers,u,h),this.icon.programConfigurations.updatePaintArrays(a,c,this.layers,u,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Hu(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,c){const u=this.lineVertexArray.length;if(void 0!==a.segment)for(const{x:h,y:g}of c)this.lineVertexArray.emplaceBack(h,g);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(a,c,u,h,g,y,x,M,z,E,H,I,N,O){const j=a.indexArray,X=a.layoutVertexArray,ae=a.globeExtVertexArray,me=a.segments.prepareSegment(4*c.length,X,j,this.canOverlap?y.sortKey:void 0),re=this.glyphOffsetArray.length,de=me.vertexLength,ve=this.allowVerticalPlacement&&x===za.vertical?Math.PI/2:0,he=y.text&&y.text.sections;for(let Ve=0;Ve<c.length;Ve++){const{tl:Ge,tr:We,bl:Fe,br:Ke,tex:nt,pixelOffsetTL:st,pixelOffsetBR:dt,minFontScaleX:Oe,minFontScaleY:yt,glyphOffset:jt,isSDF:wt,sectionIndex:Lt}=c[Ve],Ct=me.vertexLength,Xt=jt[1];if(h8(X,z.x,z.y,Ge.x,Xt+Ge.y,nt.x,nt.y,u,wt,st.x,st.y,Oe,yt),h8(X,z.x,z.y,We.x,Xt+We.y,nt.x+nt.w,nt.y,u,wt,dt.x,st.y,Oe,yt),h8(X,z.x,z.y,Fe.x,Xt+Fe.y,nt.x,nt.y+nt.h,u,wt,st.x,dt.y,Oe,yt),h8(X,z.x,z.y,Ke.x,Xt+Ke.y,nt.x+nt.w,nt.y+nt.h,u,wt,dt.x,dt.y,Oe,yt),M){const{x:G1,y:O1,z:H1}=M.anchor,[Kt,zn,u1]=M.up;V0(ae,G1,O1,H1,Kt,zn,u1),V0(ae,G1,O1,H1,Kt,zn,u1),V0(ae,G1,O1,H1,Kt,zn,u1),V0(ae,G1,O1,H1,Kt,zn,u1),p8(a.dynamicLayoutVertexArray,G1,O1,H1,ve)}else p8(a.dynamicLayoutVertexArray,z.x,z.y,z.z,ve);j.emplaceBack(Ct,Ct+1,Ct+2),j.emplaceBack(Ct+1,Ct+2,Ct+3),me.vertexLength+=4,me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(jt[0]),Ve!==c.length-1&&Lt===c[Ve+1].sectionIndex||a.programConfigurations.populatePaintArrays(X.length,y,y.index,{},N,O,he&&he[Lt])}const ke=M?M.anchor:z;a.placedSymbolArray.emplaceBack(ke.x,ke.y,ke.z,z.x,z.y,re,this.glyphOffsetArray.length-re,de,E,H,z.segment,u?u[0]:0,u?u[1]:0,h[0],h[1],x,0,!1,0,I,0)}_commitLayoutVertex(a,c,u,h,g,y,x){a.emplaceBack(c,u,h,g,y,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(a,c,u,h,g,y,x){const M=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),z=M.vertexLength,E=x.tileAnchorX,H=x.tileAnchorY;for(let N=0;N<4;N++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(c,-a.padding,-a.padding),u.collisionVertexArrayExt.emplaceBack(c,a.padding,-a.padding),u.collisionVertexArrayExt.emplaceBack(c,a.padding,a.padding),u.collisionVertexArrayExt.emplaceBack(c,-a.padding,a.padding),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,H,new pt(a.x1,a.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,H,new pt(a.x2,a.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,H,new pt(a.x2,a.y2)),this._commitLayoutVertex(u.layoutVertexArray,h,g,y,E,H,new pt(a.x1,a.y2)),M.vertexLength+=4;const I=u.indexArray;I.emplaceBack(z,z+1),I.emplaceBack(z+1,z+2),I.emplaceBack(z+2,z+3),I.emplaceBack(z+3,z),M.primitiveLength+=4}_addTextDebugCollisionBoxes(a,c,u,h,g,y){for(let x=h;x<g;x++){const M=u.get(x),z=this.getSymbolInstanceTextSize(a,y,c,x);this._addCollisionDebugVertices(M,z,this.textCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(a,c,u,h,g,y){for(let x=h;x<g;x++){const M=u.get(x),z=this.getSymbolInstanceIconSize(a,c,y.placedIconSymbolIndex);this._addCollisionDebugVertices(M,z,this.iconCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,y)}}generateCollisionDebugBuffers(a,c){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Iu(si,bf.members,No),this.iconCollisionBox=new Iu(si,bf.members,No);const u=Go(this.iconSizeData,a),h=Go(this.textSizeData,a);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(h,a,c,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(h,a,c,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(u,a,c,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(u,a,c,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(a,c,u,h){const g=this.text.placedSymbolArray.get(c.rightJustifiedTextSymbolIndex>=0?c.rightJustifiedTextSymbolIndex:c.centerJustifiedTextSymbolIndex>=0?c.centerJustifiedTextSymbolIndex:c.leftJustifiedTextSymbolIndex>=0?c.leftJustifiedTextSymbolIndex:c.verticalPlacedTextSymbolIndex>=0?c.verticalPlacedTextSymbolIndex:h),y=e8(this.textSizeData,a,g)/W2;return this.tilePixelRatio*y}getSymbolInstanceIconSize(a,c,u){const h=this.icon.placedSymbolArray.get(u),g=e8(this.iconSizeData,a,h);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(a,c,u){a.emplaceBack(c,-u,-u),a.emplaceBack(c,u,-u),a.emplaceBack(c,u,u),a.emplaceBack(c,-u,u)}_updateTextDebugCollisionBoxes(a,c,u,h,g,y){for(let x=h;x<g;x++){const M=u.get(x),z=this.getSymbolInstanceTextSize(a,y,c,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,z,M.padding)}}_updateIconDebugCollisionBoxes(a,c,u,h,g,y){for(let x=h;x<g;x++){const M=u.get(x),z=this.getSymbolInstanceIconSize(a,c,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,z,M.padding)}}updateCollisionDebugBuffers(a,c){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=Go(this.iconSizeData,a),h=Go(this.textSizeData,a);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(h,a,c,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(h,a,c,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(u,a,c,y.iconBoxStartIndex,y.iconBoxEndIndex,y.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,a,c,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,c,u,h,g,y,x,M,z){const E={};if(c<u){const{x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de,featureIndex:ve}=a.get(c);E.textBox={x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de},E.textFeatureIndex=ve}if(h<g){const{x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de,featureIndex:ve}=a.get(h);E.verticalTextBox={x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de},E.verticalTextFeatureIndex=ve}if(y<x){const{x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de,featureIndex:ve}=a.get(y);E.iconBox={x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de},E.iconFeatureIndex=ve}if(M<z){const{x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de,featureIndex:ve}=a.get(M);E.verticalIconBox={x1:H,y1:I,x2:N,y2:O,padding:j,projectedAnchorX:X,projectedAnchorY:ae,projectedAnchorZ:me,tileAnchorX:re,tileAnchorY:de},E.verticalIconFeatureIndex=ve}return E}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const u=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,c){const u=a.placedSymbolArray.get(c),h=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<h;g+=4)a.indexArray.emplaceBack(g,g+1,g+2),a.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const c=Math.sin(a),u=Math.cos(a),h=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);const M=this.symbolInstances.get(x);h.push(0|Math.round(c*M.tileAnchorX+u*M.tileAnchorY)),g.push(M.featureIndex)}return y.sort((x,M)=>h[x]-h[M]||g[M]-g[x]),y}addToSortKeyRanges(a,c){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===c?u.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const u=this.symbolInstances.get(c);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:z}=u;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),g>=0&&g!==h&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&y!==g&&y!==h&&this.addIndicesForPlacedSymbol(this.text,y),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Et(f3,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),f3.MAX_GLYPHS=65535,f3.addDynamicAttributes=p8;const Sa=new ut({"symbol-placement":new ze(qe.layout_symbol["symbol-placement"]),"symbol-spacing":new ze(qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ze(qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ne(qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ze(qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ze(qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ze(qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new ze(qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ze(qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ne(qe.layout_symbol["icon-size"]),"icon-text-fit":new ze(qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ze(qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ne(qe.layout_symbol["icon-image"]),"icon-rotate":new Ne(qe.layout_symbol["icon-rotate"]),"icon-padding":new ze(qe.layout_symbol["icon-padding"]),"icon-keep-upright":new ze(qe.layout_symbol["icon-keep-upright"]),"icon-offset":new Ne(qe.layout_symbol["icon-offset"]),"icon-anchor":new Ne(qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ze(qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ze(qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ze(qe.layout_symbol["text-rotation-alignment"]),"text-field":new Ne(qe.layout_symbol["text-field"]),"text-font":new Ne(qe.layout_symbol["text-font"]),"text-size":new Ne(qe.layout_symbol["text-size"]),"text-max-width":new Ne(qe.layout_symbol["text-max-width"]),"text-line-height":new Ne(qe.layout_symbol["text-line-height"]),"text-letter-spacing":new Ne(qe.layout_symbol["text-letter-spacing"]),"text-justify":new Ne(qe.layout_symbol["text-justify"]),"text-radial-offset":new Ne(qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ze(qe.layout_symbol["text-variable-anchor"]),"text-anchor":new Ne(qe.layout_symbol["text-anchor"]),"text-max-angle":new ze(qe.layout_symbol["text-max-angle"]),"text-writing-mode":new ze(qe.layout_symbol["text-writing-mode"]),"text-rotate":new Ne(qe.layout_symbol["text-rotate"]),"text-padding":new ze(qe.layout_symbol["text-padding"]),"text-keep-upright":new ze(qe.layout_symbol["text-keep-upright"]),"text-transform":new Ne(qe.layout_symbol["text-transform"]),"text-offset":new Ne(qe.layout_symbol["text-offset"]),"text-allow-overlap":new ze(qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ze(qe.layout_symbol["text-ignore-placement"]),"text-optional":new ze(qe.layout_symbol["text-optional"])});var Ru={paint:new ut({"icon-opacity":new Ne(qe.paint_symbol["icon-opacity"]),"icon-color":new Ne(qe.paint_symbol["icon-color"]),"icon-halo-color":new Ne(qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ne(qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ne(qe.paint_symbol["icon-halo-blur"]),"icon-translate":new ze(qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new ze(qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ne(qe.paint_symbol["text-opacity"]),"text-color":new Ne(qe.paint_symbol["text-color"],{runtimeType:lr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Ne(qe.paint_symbol["text-halo-color"]),"text-halo-width":new Ne(qe.paint_symbol["text-halo-width"]),"text-halo-blur":new Ne(qe.paint_symbol["text-halo-blur"]),"text-translate":new ze(qe.paint_symbol["text-translate"]),"text-translate-anchor":new ze(qe.paint_symbol["text-translate-anchor"])}),layout:Sa};class qf{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:Ci,this.defaultValue=a}evaluate(a){if(a.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(a.formattedSection))return c.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Et(qf,"FormatSectionOverride",{omit:["defaultValue"]});class Pu extends xa{constructor(a){super(a,Ru)}recalculate(a,c){super.recalculate(a,c),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const h=[];for(const g of u)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(a,c,u,h){const g=this.layout.get(a).evaluate(c,{},u,h),y=this._unevaluatedLayout._values[a];return y.isDataDriven()||k(y.value)||!g?g:(x=c.properties,g.replace(/{([^{}]+)}/g,(z,E)=>E in x?String(x[E]):""));var x}createBucket(a){return new f3(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of Ru.paint.overridableProperties){if(!Pu.hasPaintOverride(this.layout,a))continue;const c=this.paint.get(a),u=new qf(c),h=new T(u,c.property.specification);let g=null;g="constant"===c.value.kind||"source"===c.value.kind?new ge("source",h):new Je("composite",h,c.value.zoomStops,c.value._interpolationType),this.paint._values[a]=new ct(c.property,g,c.parameters)}}_handleOverridablePaintPropertyUpdate(a,c,u){return!(!this.layout||c.isDataDriven()||u.isDataDriven())&&Pu.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,c){const u=a.get("text-field"),h=Ru.paint.properties[c];let g=!1;const y=x=>{for(const M of x)if(h.overrides&&h.overrides.hasOverride(M))return void(g=!0)};if("constant"===u.value.kind&&u.value.value instanceof ri)y(u.value.value.sections);else if("source"===u.value.kind){const x=z=>{g||(z instanceof as&&pi(z.value)===rn?y(z.value.sections):z instanceof qc?y(z.sections):z.eachChild(x))},M=u.value;M._styleExpression&&x(M._styleExpression.expression)}return g}getProgramConfiguration(a){return new gc(this,a)}}var Fu={paint:new ut({"background-color":new ze(qe.paint_background["background-color"]),"background-pattern":new ze(qe.paint_background["background-pattern"]),"background-opacity":new ze(qe.paint_background["background-opacity"])})},Wf={paint:new ut({"raster-opacity":new ze(qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new ze(qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ze(qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ze(qe.paint_raster["raster-brightness-max"]),"raster-saturation":new ze(qe.paint_raster["raster-saturation"]),"raster-contrast":new ze(qe.paint_raster["raster-contrast"]),"raster-resampling":new ze(qe.paint_raster["raster-resampling"]),"raster-fade-duration":new ze(qe.paint_raster["raster-fade-duration"])})};class lg extends xa{constructor(a){super(a,{}),this.implementation=a}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}var ug={paint:new ut({"sky-type":new ze(qe.paint_sky["sky-type"]),"sky-atmosphere-sun":new ze(qe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ze(qe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ze(qe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ze(qe.paint_sky["sky-gradient-radius"]),"sky-gradient":new ot(qe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ze(qe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ze(qe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ze(qe.paint_sky["sky-opacity"])})};function Nu(o,a,c){const u=[0,0,1],h=bm([]);return xm(h,h,c?-F1(o)+Math.PI:F1(o)),A6(h,h,-F1(a)),R7(u,u,h),br(u,u)}const Zf={circle:class extends xa{constructor(o){super(o,Y5)}createBucket(o){return new k6(o)}queryRadius(o){const a=o;return G3("circle-radius",this,a)+G3("circle-stroke-width",this,a)+$3(this.paint.get("circle-translate"))}queryIntersectsFeature(o,a,c,u,h,g,y,x){const M=W5(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),z=this.paint.get("circle-radius").evaluate(a,c)+this.paint.get("circle-stroke-width").evaluate(a,c);return I6(o,u,g,y,x,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),M,z)}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new gc(this,o)}},heatmap:class extends xa{createBucket(o){return new X7(o)}constructor(o){super(o,J4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=K5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(o){return G3("heatmap-radius",this,o)}queryIntersectsFeature(o,a,c,u,h,g,y,x){const M=this.paint.get("heatmap-radius").evaluate(a,c);return I6(o,u,g,y,x,!0,!0,new pt(0,0),M)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new gc(this,o)}},hillshade:class extends xa{constructor(o){super(o,Dm)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends xa{constructor(o){super(o,au)}getProgramIds(){const o=this.paint.get("fill-pattern"),a=o&&o.constantOr(1),c=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&c.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),c}getProgramConfiguration(o){return new gc(this,o)}recalculate(o,a){super.recalculate(o,a);const c=this.paint._values["fill-outline-color"];"constant"===c.value.kind&&void 0===c.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new iu(o)}queryRadius(){return $3(this.paint.get("fill-translate"))}queryIntersectsFeature(o,a,c,u,h,g){return!o.queryGeometry.isAboveHorizon&&U5(g0(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends xa{constructor(o){super(o,Xx)}createBucket(o){return new xc(o)}queryRadius(){return $3(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new gc(this,o)}queryIntersectsFeature(o,a,c,u,h,g,y,x,M){const z=W5(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),E=this.paint.get("fill-extrusion-height").evaluate(a,c),H=this.paint.get("fill-extrusion-base").evaluate(a,c),I=[0,0],N=x&&g.elevation,O=g.elevation?g.elevation.exaggeration():1,j=o.tile.getBucket(this);if(N&&j instanceof xc){const de=j.centroidVertexArray,ve=M+1;ve<de.length&&(I[0]=de.geta_centroid_pos0(ve),I[1]=de.geta_centroid_pos1(ve))}if(0===I[0]&&1===I[1])return!1;"globe"===g.projection.name&&(u=uu([u],[new pt(0,0),new pt(a1,a1)],o.tileID.canonical).map(de=>de.polygon).flat());const X=N?x:null,[ae,me]=(ve=u,he=H,ke=E,Ve=z,Ge=y,We=X,Fe=I,Ke=O,nt=g.center.lat,"globe"===(de=g).projection.name?function(dt,Oe,yt,jt,wt,Lt,Ct,Xt,G1,O1,H1){const Kt=[],zn=[],u1=dt.projection.upVectorScale(H1,dt.center.lat,dt.worldSize).metersToTile,W1=[0,0,0,1],Vn=[0,0,0,1],xt=(gn,Ze,Yn,m2)=>{gn[0]=Ze,gn[1]=Yn,gn[2]=m2,gn[3]=1},On=lu();yt>0&&(yt+=On),jt+=On;for(const gn of Oe){const Ze=[],Yn=[];for(const m2 of gn){const le=m2.x+wt.x,pe=m2.y+wt.y,ft=dt.projection.projectTilePoint(le,pe,H1),dn=dt.projection.upVector(H1,m2.x,m2.y);let fn=yt,Rn=jt;if(Ct){const Z1=w0(le,pe,yt,jt,Ct,Xt,G1,O1);fn+=Z1.base,Rn+=Z1.top}0!==yt?xt(W1,ft.x+dn[0]*u1*fn,ft.y+dn[1]*u1*fn,ft.z+dn[2]*u1*fn):xt(W1,ft.x,ft.y,ft.z),xt(Vn,ft.x+dn[0]*u1*Rn,ft.y+dn[1]*u1*Rn,ft.z+dn[2]*u1*Rn),ci(W1,W1,Lt),ci(Vn,Vn,Lt),Ze.push(new uo(W1[0],W1[1],W1[2])),Yn.push(new uo(Vn[0],Vn[1],Vn[2]))}Kt.push(Ze),zn.push(Yn)}return[Kt,zn]}(de,ve,he,ke,Ve,Ge,We,Fe,Ke,nt,o.tileID.canonical):We?function(dt,Oe,yt,jt,wt,Lt,Ct,Xt,G1){const O1=[],H1=[],Kt=[0,0,0,1];for(const zn of dt){const u1=[],W1=[];for(const Vn of zn){const xt=Vn.x+jt.x,On=Vn.y+jt.y,gn=w0(xt,On,Oe,yt,Lt,Ct,Xt,G1);Kt[0]=xt,Kt[1]=On,Kt[2]=gn.base,Kt[3]=1,_c(Kt,Kt,wt),Kt[3]=Math.max(Kt[3],1e-5);const Ze=new uo(Kt[0]/Kt[3],Kt[1]/Kt[3],Kt[2]/Kt[3]);Kt[0]=xt,Kt[1]=On,Kt[2]=gn.top,Kt[3]=1,_c(Kt,Kt,wt),Kt[3]=Math.max(Kt[3],1e-5);const Yn=new uo(Kt[0]/Kt[3],Kt[1]/Kt[3],Kt[2]/Kt[3]);u1.push(Ze),W1.push(Yn)}O1.push(u1),H1.push(W1)}return[O1,H1]}(ve,he,ke,Ve,Ge,We,Fe,Ke,nt):function(dt,Oe,yt,jt,wt){const Lt=[],Ct=[],Xt=wt[8]*Oe,G1=wt[9]*Oe,O1=wt[10]*Oe,H1=wt[11]*Oe,Kt=wt[8]*yt,zn=wt[9]*yt,u1=wt[10]*yt,W1=wt[11]*yt;for(const Vn of dt){const xt=[],On=[];for(const gn of Vn){const Ze=gn.x+jt.x,Yn=gn.y+jt.y,m2=wt[0]*Ze+wt[4]*Yn+wt[12],le=wt[1]*Ze+wt[5]*Yn+wt[13],pe=wt[2]*Ze+wt[6]*Yn+wt[14],ft=wt[3]*Ze+wt[7]*Yn+wt[15],dn=m2+Xt,fn=le+G1,Rn=pe+O1,Z1=Math.max(ft+H1,1e-5),Pn=m2+Kt,Ni=le+zn,t2=pe+u1,Oi=Math.max(ft+W1,1e-5);xt.push(new uo(dn/Z1,fn/Z1,Rn/Z1)),On.push(new uo(Pn/Oi,Ni/Oi,t2/Oi))}Lt.push(xt),Ct.push(On)}return[Lt,Ct]}(ve,he,ke,Ve,Ge)),re=o.queryGeometry;var de,ve,he,ke,Ve,Ge,We,Fe,Ke,nt;return function(de,ve,he){let ke=1/0;U5(he,ve)&&(ke=K6(he,ve[0]));for(let Ve=0;Ve<ve.length;Ve++){const Ge=ve[Ve],We=de[Ve];for(let Fe=0;Fe<Ge.length-1;Fe++){const Ke=Ge[Fe],nt=[Ke,Ge[Fe+1],We[Fe+1],We[Fe],Ke];B5(he,nt)&&(ke=Math.min(ke,K6(he,nt)))}}return ke!==1/0&&ke}(ae,me,re.isPointQuery()?re.screenBounds:re.screenGeometry)}},line:class extends xa{constructor(o){super(o,pu),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if("line-gradient"===o){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof tc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(o,a){super.recalculate(o,a),this.paint._values["line-floorwidth"]=Y3.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new J6(o)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(o){return new gc(this,o)}queryRadius(o){const a=o,c=vf(G3("line-width",this,a),G3("line-gap-width",this,a)),u=G3("line-offset",this,a);return c/2+Math.abs(u)+$3(this.paint.get("line-translate"))}queryIntersectsFeature(o,a,c,u,h,g){if(o.queryGeometry.isAboveHorizon)return!1;const y=g0(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),x=o.pixelToTileUnitsFactor/2*vf(this.paint.get("line-width").evaluate(a,c),this.paint.get("line-gap-width").evaluate(a,c)),M=this.paint.get("line-offset").evaluate(a,c);return M&&(u=function(z,E){const H=[],I=new pt(0,0);for(let N=0;N<z.length;N++){const O=z[N],j=[];for(let X=0;X<O.length;X++){const me=O[X],re=O[X+1],de=0===X?I:me.sub(O[X-1])._unit()._perp(),ve=X===O.length-1?I:re.sub(me)._unit()._perp(),he=de._add(ve)._unit();he._mult(1/(he.x*ve.x+he.y*ve.y)),j.push(he._mult(E)._add(me))}H.push(j)}return H}(u,M*o.pixelToTileUnitsFactor)),function(z,E,H){for(let I=0;I<E.length;I++){const N=E[I];if(z.length>=3)for(let O=0;O<N.length;O++)if(c3(z,N[O]))return!0;if(q7(z,N,H))return!0}return!1}(y,u,x)}isTileClipped(){return!0}},symbol:Pu,background:class extends xa{constructor(o){super(o,Fu)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends xa{constructor(o){super(o,Wf)}getProgramIds(){return["raster"]}},sky:class extends xa{constructor(o){super(o,ug),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"sky-gradient"===o?this._updateColorRamp():"sky-atmosphere-sun"!==o&&"sky-atmosphere-halo-color"!==o&&"sky-atmosphere-color"!==o&&"sky-atmosphere-sun-intensity"!==o||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=K5({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(o,a){if("atmosphere"===this.paint.get("sky-type")){const u=this.paint.get("sky-atmosphere-sun"),h=!u,g=o.style.light,y=g.properties.get("position");return h&&"viewport"===g.properties.get("anchor")&&tn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?Nu(y.azimuthal,90-y.polar,a):Nu(u[0],90-u[1],a)}const c=this.paint.get("sky-gradient-center");return Nu(c[0],90-c[1],a)}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return"atmosphere"===o?["skyboxCapture","skybox"]:"gradient"===o?["skyboxGradient"]:null}}};class L0{constructor(a,c,u,h){this.context=a,this.format=u,this.texture=a.gl.createTexture(),this.update(c,h)}update(a,c,u){const{width:h,height:g}=a,{context:y}=this,{gl:x}=y,{HTMLImageElement:M,HTMLCanvasElement:z,HTMLVideoElement:E,ImageData:H,ImageBitmap:I}=Ye;if(x.bindTexture(x.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!c||!1!==c.premultiply)),u||this.size&&this.size[0]===h&&this.size[1]===g){const{x:N,y:O}=u||{x:0,y:0};a instanceof M||a instanceof z||a instanceof E||a instanceof H||I&&a instanceof I?x.texSubImage2D(x.TEXTURE_2D,0,N,O,x.RGBA,x.UNSIGNED_BYTE,a):x.texSubImage2D(x.TEXTURE_2D,0,N,O,h,g,x.RGBA,x.UNSIGNED_BYTE,a.data)}else this.size=[h,g],a instanceof M||a instanceof z||a instanceof E||a instanceof H||I&&a instanceof I?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,a):x.texImage2D(x.TEXTURE_2D,0,this.format,h,g,0,this.format,x.UNSIGNED_BYTE,a.data);this.useMipmap=Boolean(c&&c.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(a,c){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_2D,this.texture),a!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,a),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?a===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:a),this.filter=a),c!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,c),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class dg{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Ou{constructor(){this.tasks={},this.taskQueue=[],ar(["process"],this),this.invoker=new dg(this.process),this.nextId=0}add(a,c){const u=this.nextId++,h=function({type:g,isSymbolTile:y,zoom:x}){return x=x||0,"message"===g?0:"maybePrepare"!==g||y?"parseTile"!==g||y?"parseTile"===g&&y?300-x:"maybePrepare"===g&&y?400-x:500:200-x:100-x}(c);if(0===h){Er();try{a()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:a,metadata:c,priority:h,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Er();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const a=this.pick();if(null===a)return;const c=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!c)return;c.fn()}finally{}}pick(){let a=null,c=1/0;for(let h=0;h<this.taskQueue.length;h++){const g=this.tasks[this.taskQueue[h]];g.priority<c&&(c=g.priority,a=h)}if(null===a)return null;const u=this.taskQueue[a];return this.taskQueue.splice(a,1),u}remove(){this.invoker.remove()}}class Yf{constructor(a){this._stringToNumber={},this._numberToString=[];for(let c=0;c<a.length;c++){const u=a[c];this._stringToNumber[u]=c,this._numberToString[c]=u}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const fg=["tile","layer","source","sourceLayer","state"];class Xf{constructor(a,c,u,h,g){this.type="Feature",this._vectorTileFeature=a,this._z=c,this._x=u,this._y=h,this.properties=a.properties,this.id=g}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(a.id=this.id);for(const c of fg)void 0!==this[c]&&(a[c]=this[c]);return a}}const ho=32,Hs=33,Z2=new Uint16Array(8184);for(let o=0;o<2046;o++){let a=o+2,c=0,u=0,h=0,g=0,y=0,x=0;for(1&a?h=g=y=ho:c=u=x=ho;(a>>=1)>1;){const z=c+h>>1,E=u+g>>1;1&a?(h=c,g=u,c=y,u=x):(c=h,u=g,h=y,g=x),y=z,x=E}const M=4*o;Z2[M+0]=c,Z2[M+1]=u,Z2[M+2]=h,Z2[M+3]=g}const po=new Uint16Array(2178),h3=new Uint8Array(1089),g8=new Uint16Array(1089);function Bu(o){return 0===o?-.03125:32===o?.03125:0}var Kf=Ft([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Qf={type:2,extent:a1,loadGeometry:()=>[[new pt(0,0),new pt(8193,0),new pt(8193,8193),new pt(0,8193),new pt(0,0)]]};class Uu{constructor(a,c,u,h,g){this.tileID=a,this.uid=Ta(),this.uses=0,this.tileSize=c,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(a){const c=a+this.timeAdded;c<Q1.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Sc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,c,u){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(h,g){const y={};if(!g)return y;for(const x of h){const M=x.layerIds.map(z=>g.getLayer(z)).filter(Boolean);if(0!==M.length){x.layers=M,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(z=>M.filter(E=>E.id===z)[0]));for(const z of M)y[z.id]=x}}return y}(a.buckets,c.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const g=this.buckets[h];if(g instanceof f3){if(this.hasSymbolBuckets=!0,!u)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const g=this.buckets[h];if(g instanceof f3&&g.hasRTLText){this.hasRTLText=!0,Ce.isLoading()||Ce.isLoaded()||"deferred"!==ye()||_e();break}}this.queryPadding=0;for(const h in this.buckets){const g=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(h).queryRadius(g))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas)}else this.collisionBoxArray=new v5}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(a){return this.buckets[a.id]}upload(a){for(const u in this.buckets){const h=this.buckets[u];h.uploadPending()&&h.upload(a)}const c=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new L0(a,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new L0(a,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new L0(a,this.lineAtlas.image,c.ALPHA),this.lineAtlas.uploaded=!0)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,c,u,h,g,y,x,M){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:x,transform:y,params:g,tileTransform:this.tileTransform},a,c,u):{}}querySourceFeatures(a,c){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const h=u.loadVTLayers(),g=c?c.sourceLayer:"",y=h._geojsonTileLayer||h[g];if(!y)return;const x=T3(c&&c.filter),{z:M,x:z,y:E}=this.tileID.canonical,H={z:M,x:z,y:E};for(let I=0;I<y.length;I++){const N=y.feature(I);if(x.needGeometry){const X=vc(N,!0);if(!x.filter(new Se(this.tileID.overscaledZ),X,this.tileID.canonical))continue}else if(!x.filter(new Se(this.tileID.overscaledZ),N))continue;const O=u.getId(N,g),j=new Xf(N,M,z,E,O);j.tile=H,a.push(j)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const c=this.expirationTime;if(a.cacheControl){const u=q1(a.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const u=Date.now();let h=!1;if(this.expirationTime>u)h=!1;else if(c)if(this.expirationTime<c)h=!0;else{const g=this.expirationTime-c;g?this.expirationTime=u+Math.max(g,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(a,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(a).length||!c)return;const u=this.latestFeatureIndex.loadVTLayers(),h=c.style.listImages();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const y=this.buckets[g],x=y.layers[0].sourceLayer||"_geojsonTileLayer",M=u[x],z=a[x];if(!M||!z||0===Object.keys(z).length)continue;if(y.update(z,M,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof J6||y instanceof iu){const H=c.style._getSourceCache(y.layers[0].source);c._terrain&&c._terrain.enabled&&H&&y.programConfigurations.needsUpload&&c._terrain._clearRenderCacheForTile(H.id,this.tileID)}const E=c&&c.style&&c.style.getLayer(g);E&&(this.queryPadding=Math.max(this.queryPadding,E.queryRadius(y)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q1.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=Q1.now()+a}setTexture(a,c){const u=c.context,h=u.gl;this.texture=this.texture||c.getTileTexture(a.width),this.texture?this.texture.update(a,{useMipmap:!0}):(this.texture=new L0(u,a,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(a,c){const u={};for(const h of c)u[h]=!0;this.dependencies[a]=u}hasDependency(a,c){for(const u of a){const h=this.dependencies[u];if(h)for(const g of c)if(h[g])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,c){if(!c||"mercator"===c.name||this._tileDebugBuffer)return;const u=Ms(Qf,this.tileID.canonical,this.tileTransform)[0],h=new Ut,g=new _s;for(let y=0;y<u.length;y++){const{x,y:M}=u[y];h.emplaceBack(x,M),g.emplaceBack(y)}g.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(g),this._tileDebugBuffer=a.createVertexBuffer(h,l0.members),this._tileDebugSegments=ui.simpleSegment(0,0,h.length,g.length)}_makeTileBoundsBuffers(a,c){if(this._tileBoundsBuffer||!c||"mercator"===c.name)return;const u=Ms(Qf,this.tileID.canonical,this.tileTransform)[0];let h,g;if(this.isRaster){const y=function(x,M){const z=Sc(x,M),E=Math.pow(2,x.z);for(let X=0;X<Hs;X++)for(let ae=0;ae<Hs;ae++){const me=A2((x.x+(ae+Bu(ae))/ho)/E),re=e2((x.y+(X+Bu(X))/ho)/E),de=M.project(me,re),ve=X*Hs+ae;po[2*ve+0]=Math.round((de.x*z.scale-z.x)*a1),po[2*ve+1]=Math.round((de.y*z.scale-z.y)*a1)}h3.fill(0),g8.fill(0);for(let X=2045;X>=0;X--){const ae=4*X,me=Z2[ae+0],re=Z2[ae+1],de=Z2[ae+2],ve=Z2[ae+3],he=me+de>>1,ke=re+ve>>1,Ve=he+ke-re,Ge=ke+me-he,We=re*Hs+me,Fe=ve*Hs+de,Ke=ke*Hs+he,nt=Math.hypot((po[2*We+0]+po[2*Fe+0])/2-po[2*Ke+0],(po[2*We+1]+po[2*Fe+1])/2-po[2*Ke+1])>=16;h3[Ke]=h3[Ke]||(nt?1:0),X<1022&&(h3[Ke]=h3[Ke]||h3[(re+Ge>>1)*Hs+(me+Ve>>1)]||h3[(ve+Ge>>1)*Hs+(de+Ve>>1)])}const H=new un,I=new Qi;let N=0;function O(X,ae){const me=ae*Hs+X;return 0===g8[me]&&(H.emplaceBack(po[2*me+0],po[2*me+1],X*a1/ho,ae*a1/ho),g8[me]=++N),g8[me]-1}function j(X,ae,me,re,de,ve){const he=X+me>>1,ke=ae+re>>1;if(Math.abs(X-de)+Math.abs(ae-ve)>1&&h3[ke*Hs+he])j(de,ve,X,ae,he,ke),j(me,re,de,ve,he,ke);else{const Ve=O(X,ae),Ge=O(me,re),We=O(de,ve);I.emplaceBack(Ve,Ge,We)}}return j(0,0,ho,ho,ho,0),j(ho,ho,0,0,0,ho),{vertices:H,indices:I}}(this.tileID.canonical,c);h=y.vertices,g=y.indices}else{h=new un,g=new Qi;for(const{x,y:M}of u)h.emplaceBack(x,M,0,0);const y=l3(h.int16,void 0,4);for(let x=0;x<y.length;x+=3)g.emplaceBack(y[x],y[x+1],y[x+2])}this._tileBoundsBuffer=a.createVertexBuffer(h,Kf.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(g),this._tileBoundsSegments=ui.simpleSegment(0,0,h.length,g.length)}_makeGlobeTileDebugBuffers(a,c){const u=c.projection;if(!u||"globe"!==u.name||c.freezeTileCoverage)return;const h=this.tileID.canonical,g=Z4(U7(h,c)),y=Y4(c.zoom);let x;y>0&&(x=B4(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,h,c,g,x,y),this._makeGlobeTileDebugTextBuffer(a,h,c,g,x,y)}_globePoint(a,c,u,h,g,y,x){let M=W4(a,c,u);if(y){const z=1<<u.z,E=oo(h.center.lng),H=so(h.center.lat),I=(u.x+.5)/z-E;let N=0;I>.5?N=-1:I<-.5&&(N=1);let O=(a/a1+u.x)/z+N,j=(c/a1+u.y)/z;O=(O-E)*h._pixelsPerMercatorPixel+E,j=(j-H)*h._pixelsPerMercatorPixel+H;const X=[O*h.worldSize,j*h.worldSize,0];ci(X,X,y),M=U3(M,X,x)}return ci(M,M,g)}_makeGlobeTileDebugBorderBuffer(a,c,u,h,g,y){const x=new Ut,M=new _s,z=new mn,E=(I,N,O,j,X)=>{const ae=(O-I)/(X-1),me=(j-N)/(X-1),re=x.length;for(let de=0;de<X;de++){const ve=I+de*ae,he=N+de*me;x.emplaceBack(ve,he);const ke=this._globePoint(ve,he,c,u,h,g,y);z.emplaceBack(ke[0],ke[1],ke[2]),M.emplaceBack(re+de)}},H=a1;E(0,0,H,0,16),E(H,0,H,H,16),E(H,H,0,H,16),E(0,H,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(M),this._tileDebugBuffer=a.createVertexBuffer(x,l0.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(z,wm.members),this._tileDebugSegments=ui.simpleSegment(0,0,x.length,M.length)}_makeGlobeTileDebugTextBuffer(a,c,u,h,g,y){const x=new Ut,M=new Qi,z=new mn,E=25;M.reserve(32),x.reserve(E),z.reserve(E);const H=(I,N)=>E*I+N;for(let I=0;I<E;I++){const N=2048*I;for(let O=0;O<E;O++){const j=2048*O;x.emplaceBack(j,N);const X=this._globePoint(j,N,c,u,h,g,y);z.emplaceBack(X[0],X[1],X[2])}}for(let I=0;I<4;I++)for(let N=0;N<4;N++){const O=H(I,N),j=H(I,N+1),X=H(I+1,N),ae=H(I+1,N+1);M.emplaceBack(O,j,X),M.emplaceBack(X,j,ae)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(M),this._tileDebugTextBuffer=a.createVertexBuffer(x,l0.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(z,wm.members),this._tileDebugTextSegments=ui.simpleSegment(0,0,E,32)}}class ju{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,c,u){const h=String(c);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][h]=this.stateChanges[a][h]||{},c1(this.stateChanges[a][h],u),null===this.deletedStates[a]){this.deletedStates[a]={};for(const g in this.state[a])g!==h&&(this.deletedStates[a][g]=null)}else if(this.deletedStates[a]&&null===this.deletedStates[a][h]){this.deletedStates[a][h]={};for(const g in this.state[a][h])u[g]||(this.deletedStates[a][h][g]=null)}else for(const g in u)this.deletedStates[a]&&this.deletedStates[a][h]&&null===this.deletedStates[a][h][g]&&delete this.deletedStates[a][h][g]}removeFeatureState(a,c,u){if(null===this.deletedStates[a])return;const h=String(c);if(this.deletedStates[a]=this.deletedStates[a]||{},u&&void 0!==c)null!==this.deletedStates[a][h]&&(this.deletedStates[a][h]=this.deletedStates[a][h]||{},this.deletedStates[a][h][u]=null);else if(void 0!==c)if(this.stateChanges[a]&&this.stateChanges[a][h])for(u in this.deletedStates[a][h]={},this.stateChanges[a][h])this.deletedStates[a][h][u]=null;else this.deletedStates[a][h]=null;else this.deletedStates[a]=null}getState(a,c){const u=String(c),h=c1({},(this.state[a]||{})[u],(this.stateChanges[a]||{})[u]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){const g=this.deletedStates[a][c];if(null===g)return{};for(const y in g)delete h[y]}return h}initializeTileState(a,c){a.setFeatureState(this.state,c)}coalesceChanges(a,c){const u={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const g={};for(const y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),c1(this.state[h][y],this.stateChanges[h][y]),g[y]=this.state[h][y];u[h]=g}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const g={};if(null===this.deletedStates[h])for(const y in this.state[h])g[y]={},this.state[h][y]={};else for(const y in this.deletedStates[h]){if(null===this.deletedStates[h][y])this.state[h][y]={};else if(this.state[h][y])for(const x of Object.keys(this.deletedStates[h][y]))delete this.state[h][y][x];g[y]=this.state[h][y]}u[h]=u[h]||{},c1(u[h],g)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(u).length)for(const h in a)a[h].setFeatureState(u,c)}}class Jf{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,c){const u=this.toIdx(a,c);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(a,c){return this.leaves[this.toIdx(a,c)]}toIdx(a,c){return c*this.size+a}}function eh(o,a,c,u){let h=0,g=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(u[y])<1e-15){if(c[y]<o[y]||c[y]>a[y])return null}else{const x=1/u[y];let M=(o[y]-c[y])*x,z=(a[y]-c[y])*x;if(M>z){const E=M;M=z,z=E}if(M>h&&(h=M),z<g&&(g=z),h>g)return null}return h}function T0(o,a,c,u,h,g,y,x,M,z,E){const H=u-o,I=h-a,N=g-c,O=y-o,j=x-a,X=M-c,ae=E[1]*X-E[2]*j,me=E[2]*O-E[0]*X,re=E[0]*j-E[1]*O,de=H*ae+I*me+N*re;if(Math.abs(de)<1e-15)return null;const ve=1/de,he=z[0]-o,ke=z[1]-a,Ve=z[2]-c,Ge=(he*ae+ke*me+Ve*re)*ve;if(Ge<0||Ge>1)return null;const We=ke*N-Ve*I,Fe=Ve*H-he*N,Ke=he*I-ke*H,nt=(E[0]*We+E[1]*Fe+E[2]*Ke)*ve;return nt<0||Ge+nt>1?null:(O*We+j*Fe+X*Ke)*ve}function H0(o,a,c){return(o-a)/(c-a)}function k0(o,a,c,u,h,g,y,x,M){const z=1<<c,E=g-u,H=y-h,I=(o+1)/z*E+u,N=(a+0)/z*H+h,O=(a+1)/z*H+h;x[0]=(o+0)/z*E+u,x[1]=N,M[0]=I,M[1]=O}class hg{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const c=function(g){const y=Math.ceil(Math.log2(g.dim/8)),x=[];let M=Math.ceil(Math.pow(2,y));const z=1/M,E=(N,O,j,X,ae)=>{const me=X?1:0,re=(N+1)*j-me,de=O*j,ve=(O+1)*j-me;ae[0]=N*j,ae[1]=de,ae[2]=re,ae[3]=ve};let H=new Jf(M);const I=[];for(let N=0;N<M*M;N++){E(N%M,Math.floor(N/M),z,!1,I);const O=X3(I[0],I[1],g),j=X3(I[2],I[1],g),X=X3(I[2],I[3],g),ae=X3(I[0],I[3],g);H.minimums.push(Math.min(O,j,X,ae)),H.maximums.push(Math.max(O,j,X,ae)),H.leaves.push(1)}for(x.push(H),M/=2;M>=1;M/=2){const N=x[x.length-1];H=new Jf(M);for(let O=0;O<M*M;O++){E(O%M,Math.floor(O/M),2,!0,I);const j=N.getElevation(I[0],I[1]),X=N.getElevation(I[2],I[1]),ae=N.getElevation(I[2],I[3]),me=N.getElevation(I[0],I[3]),re=N.isLeaf(I[0],I[1]),de=N.isLeaf(I[2],I[1]),ve=N.isLeaf(I[2],I[3]),he=N.isLeaf(I[0],I[3]),ke=Math.min(j.min,X.min,ae.min,me.min),Ve=Math.max(j.max,X.max,ae.max,me.max),Ge=re&&de&&ve&&he;H.maximums.push(Ve),H.minimums.push(ke),H.leaves.push(Ve-ke<=5&&Ge?1:0)}x.push(H)}return x}(this.dem),u=c.length-1,h=c[u];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(c,0,0,u,0)}raycastRoot(a,c,u,h,g,y,x=1){return eh([a,c,-100],[u,h,this.maximums[0]*x],g,y)}raycast(a,c,u,h,g,y,x=1){if(!this.nodeCount)return null;const M=this.raycastRoot(a,c,u,h,g,y,x);if(null==M)return null;const z=[],E=[],H=[],I=[],N=[{idx:0,t:M,nodex:0,nodey:0,depth:0}];for(;N.length>0;){const{idx:O,t:j,nodex:X,nodey:ae,depth:me}=N.pop();if(this.leaves[O]){k0(X,ae,me,a,c,u,h,H,I);const de=1<<me,ve=(X+0)/de,he=(X+1)/de,ke=(ae+0)/de,Ve=(ae+1)/de,Ge=X3(ve,ke,this.dem)*x,We=X3(he,ke,this.dem)*x,Fe=X3(he,Ve,this.dem)*x,Ke=X3(ve,Ve,this.dem)*x,nt=T0(H[0],H[1],Ge,I[0],H[1],We,I[0],I[1],Fe,g,y),st=T0(I[0],I[1],Fe,H[0],I[1],Ke,H[0],H[1],Ge,g,y),dt=Math.min(null!==nt?nt:Number.MAX_VALUE,null!==st?st:Number.MAX_VALUE);if(dt!==Number.MAX_VALUE)return dt;{const Oe=c0([],g,y,j);if(_8(Ge,We,Ke,Fe,H0(Oe[0],H[0],I[0]),H0(Oe[1],H[1],I[1]))>=Oe[2])return j}continue}let re=0;for(let de=0;de<this._siblingOffset.length;de++){k0((X<<1)+this._siblingOffset[de][0],(ae<<1)+this._siblingOffset[de][1],me+1,a,c,u,h,H,I),H[2]=-100,I[2]=this.maximums[this.childOffsets[O]+de]*x;const ve=eh(H,I,g,y);if(null!=ve){const he=ve;z[de]=he;let ke=!1;for(let Ve=0;Ve<re&&!ke;Ve++)he>=z[E[Ve]]&&(E.splice(Ve,0,de),ke=!0);ke||(E[re]=de),re++}}for(let de=0;de<re;de++){const ve=E[de];N.push({idx:this.childOffsets[O]+ve,t:z[ve],nodex:(X<<1)+this._siblingOffset[ve][0],nodey:(ae<<1)+this._siblingOffset[ve][1],depth:me+1})}}return null}_addNode(a,c,u){return this.minimums.push(a),this.maximums.push(c),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(a,c,u,h,g){if(1===a[h].isLeaf(c,u))return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const y=h-1,x=a[y];let M=0,z=0;for(let E=0;E<this._siblingOffset.length;E++){const H=2*c+this._siblingOffset[E][0],I=2*u+this._siblingOffset[E][1],N=x.getElevation(H,I),O=x.isLeaf(H,I),j=this._addNode(N.min,N.max,O);O&&(M|=1<<E),z||(z=j)}for(let E=0;E<this._siblingOffset.length;E++)M&1<<E||this._construct(a,2*c+this._siblingOffset[E][0],2*u+this._siblingOffset[E][1],y,z+E)}}function _8(o,a,c,u,h,g){return N1(N1(o,c,g),N1(a,u,g),h)}function X3(o,a,c){const u=c.dim,h=f1(o*u-.5,0,u-1),g=f1(a*u-.5,0,u-1),y=Math.floor(h),x=Math.floor(g),M=Math.min(y+1,u-1),z=Math.min(x+1,u-1);return _8(c.get(y,x),c.get(M,x),c.get(y,z),c.get(M,z),h-y,g-x)}const Gu={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function th(o,a,c){return(256*o*256+256*a+c)/10-1e4}function nh(o,a,c){return 256*o+a+c/256-32768}class I0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,c,u,h=!1,g=!1){if(this.uid=a,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(u&&"mapbox"!==u&&"terrarium"!==u)return tn(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=c.height;const y=this.dim=c.height-2,x=new Uint32Array(c.data.buffer);if(this.pixels=new Uint8Array(c.data.buffer),this.encoding=u||"mapbox",this.borderReady=h,!h){for(let M=0;M<y;M++)x[this._idx(-1,M)]=x[this._idx(0,M)],x[this._idx(y,M)]=x[this._idx(y-1,M)],x[this._idx(M,-1)]=x[this._idx(M,0)],x[this._idx(M,y)]=x[this._idx(M,y-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(y,-1)]=x[this._idx(y-1,0)],x[this._idx(-1,y)]=x[this._idx(0,y-1)],x[this._idx(y,y)]=x[this._idx(y-1,y-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new hg(this)}get(a,c,u=!1){u&&(a=f1(a,-1,this.dim),c=f1(c,-1,this.dim));const h=4*this._idx(a,c);return("terrarium"===this.encoding?nh:th)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(a){return Gu[a]}get unpackVector(){return Gu[this.encoding]}_idx(a,c){if(a<-1||a>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(a+1)}static pack(a,c){const u=[0,0,0,0],h=I0.getUnpackVector(c);let g=Math.floor((a+h[3])/h[2]);return u[2]=g%256,g=Math.floor(g/256),u[1]=g%256,g=Math.floor(g/256),u[0]=g,u}getPixels(){return new xr({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,c,u){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let h=c*this.dim,g=c*this.dim+this.dim,y=u*this.dim,x=u*this.dim+this.dim;switch(c){case-1:h=g-1;break;case 1:g=h+1}switch(u){case-1:y=x-1;break;case 1:x=y+1}const M=-c*this.dim,z=-u*this.dim;for(let E=y;E<x;E++)for(let H=h;H<g;H++){const I=4*this._idx(H,E),N=4*this._idx(H+M,E+z);this.pixels[I+0]=a.pixels[N+0],this.pixels[I+1]=a.pixels[N+1],this.pixels[I+2]=a.pixels[N+2],this.pixels[I+3]=a.pixels[N+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Et(I0,"DEMData"),Et(hg,"DemMinMaxQuadTree",{omit:["dem"]});class $u{constructor(a,c){this.max=a,this.onRemove=c,this.reset()}reset(){for(const a in this.data)for(const c of this.data[a])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(a,c,u){const h=a.wrapped().key;void 0===this.data[h]&&(this.data[h]=[]);const g={value:c,timeout:void 0};if(void 0!==u&&(g.timeout=setTimeout(()=>{this.remove(a,g)},u)),this.data[h].push(g),this.order.push(h),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value}getByKey(a){const c=this.data[a];return c?c[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,c){if(!this.has(a))return this;const u=a.wrapped().key,h=void 0===c?0:this.data[u].indexOf(c),g=this.data[u][h];return this.data[u].splice(h,1),g.timeout&&clearTimeout(g.timeout),0===this.data[u].length&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(a){const c=[];for(const u in this.data)for(const h of this.data[u])a(h.value)||c.push(h);for(const u of c)this.remove(u.value.tileID,u)}}class sa{constructor(a,c,u){this.func=a,this.mask=c,this.range=u}}sa.ReadOnly=!1,sa.ReadWrite=!0,sa.disabled=new sa(519,sa.ReadOnly,[0,1]);class ul{constructor(a,c,u,h,g,y){this.test=a,this.ref=c,this.mask=u,this.fail=h,this.depthFail=g,this.pass=y}}ul.disabled=new ul({func:519,mask:0},0,0,7680,7680,7680);class ca{constructor(a,c,u){this.blendFunction=a,this.blendColor=c,this.mask=u}}ca.Replace=[1,0],ca.disabled=new ca(ca.Replace,ti.transparent,[!1,!1,!1,!1]),ca.unblended=new ca(ca.Replace,ti.transparent,[!0,!0,!0,!0]),ca.alphaBlended=new ca([1,771],ti.transparent,[!0,!0,!0,!0]);class mo{constructor(a,c,u){this.enable=a,this.mode=c,this.frontFace=u}}mo.disabled=new mo(!1,1029,2305),mo.backCCW=new mo(!0,1029,2305),mo.backCW=new mo(!0,1029,2304),mo.frontCW=new mo(!0,1028,2304),mo.frontCCW=new mo(!0,1028,2305);class K3 extends Xr{constructor(a,c,u){super(),this.id=a,this._onlySymbols=u,c.on("data",h=>{"source"===h.dataType&&"metadata"===h.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===h.dataType&&"content"===h.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new $u(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new ju,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(a){this.map=a,this._minTileCacheSize=void 0===this._minTileCacheSize&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const c=this._tiles[a];if("loaded"!==c.state&&"errored"!==c.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,c){return a.isSymbolTile=this._onlySymbols,this._source.loadTile(a,c)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a,()=>{})}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const u=this._tiles[c];u.upload(a),u.prepare(this.map.style.imageManager)}}getIds(){return F2(this._tiles).map(a=>a.tileID).sort(ih).map(a=>a.key)}getRenderableIds(a){const c=[];for(const u in this._tiles)this._isIdRenderable(+u,a)&&c.push(this._tiles[u]);return a?c.sort((u,h)=>{const g=u.tileID,y=h.tileID,x=new pt(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),M=new pt(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-y.overscaledZ||M.y-x.y||M.x-x.x}).map(u=>u.tileID.key):c.map(u=>u.tileID).sort(ih).map(u=>u.key)}hasRenderableParent(a){const c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)"errored"!==this._tiles[a].state&&this._reloadTile(+a,"reloading")}}_reloadTile(a,c){const u=this._tiles[a];u&&("loading"!==u.state&&(u.state=c),this._loadTile(u,this._tileLoaded.bind(this,u,a,c)))}_tileLoaded(a,c,u,h){if(h)if(a.state="errored",404!==h.status)this._source.fire(new pa(h,{tile:a}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else a.timeAdded=Q1.now(),"expired"===u&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),"raster-dem"===this._source.type&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new Cn("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const c=this.getRenderableIds();for(let h=0;h<c.length;h++){const g=c[h];if(a.neighboringTiles&&a.neighboringTiles[g]){const y=this.getTileByID(g);u(a,y),u(y,a)}}function u(h,g){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let y=g.tileID.canonical.x-h.tileID.canonical.x;const x=g.tileID.canonical.y-h.tileID.canonical.y,M=Math.pow(2,h.tileID.canonical.z),z=g.tileID.key;0===y&&0===x||Math.abs(x)>1||(Math.abs(y)>1&&(1===Math.abs(y+M)?y+=M:1===Math.abs(y-M)&&(y-=M)),g.dem&&h.dem&&(h.dem.backfillBorder(g.dem,y,x),h.neighboringTiles&&h.neighboringTiles[z]&&(h.neighboringTiles[z].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,c,u,h){for(const g in this._tiles){let y=this._tiles[g];if(h[g]||!y.hasData()||y.tileID.overscaledZ<=c||y.tileID.overscaledZ>u)continue;let x=y.tileID;for(;y&&y.tileID.overscaledZ>c+1;){const z=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[z.key],y&&y.hasData()&&(x=z)}let M=x;for(;M.overscaledZ>c;)if(M=M.scaledTo(M.overscaledZ-1),a[M.key]){h[x.key]=x;break}}}findLoadedParent(a,c){if(a.key in this._loadedParentTiles){const u=this._loadedParentTiles[a.key];return u&&u.tileID.overscaledZ>=c?u:null}for(let u=a.overscaledZ-1;u>=c;u--){const h=a.scaledTo(u),g=this._getLoadedTile(h);if(g)return g}}_getLoadedTile(a){const c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,c){c=c||this._source.tileSize;const u=Math.ceil(a.width/c)+1,h=Math.ceil(a.height/c)+1,g=Math.floor(u*h*5),y="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,g):g,x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(a){const c=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,c){const u={};for(const h in this._tiles){const g=this._tiles[h];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+c),u[g.tileID.key]=g}this._tiles=u;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(a,c,u){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let h;this.updateCacheSize(a,c),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new q2(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(h=a.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(x=>this._source.hasTile(x)))):h=[];const g=this._updateRetainedTiles(h);if(dl(this._source.type)&&0!==h.length){const x={},M={},z=Object.keys(g);for(const H of z){const I=g[H],N=this._tiles[H];if(!N||N.fadeEndTime&&N.fadeEndTime<=Q1.now())continue;const O=this.findLoadedParent(I,Math.max(I.overscaledZ-K3.maxOverzooming,this._source.minzoom));O&&(this._addTile(O.tileID),x[O.tileID.key]=O.tileID),M[H]=I}const E=h[h.length-1].overscaledZ;for(const H in this._tiles){const I=this._tiles[H];if(g[H]||!I.hasData())continue;let N=I.tileID;for(;N.overscaledZ>E;){N=N.scaledTo(N.overscaledZ-1);const O=this._tiles[N.key];if(O&&O.hasData()&&M[N.key]){g[H]=I.tileID;break}}}for(const H in x)g[H]||(this._coveredTiles[H]=!0,g[H]=x[H])}for(const x in g)this._tiles[x].clearFadeHold();const y=function(x,M){const z=[];for(const E in x)E in M||z.push(E);return z}(this._tiles,g);for(const x of y){const M=this._tiles[x];M.hasSymbolBuckets&&!M.holdingForFade()?M.setHoldDuration(this.map._fadeDuration):M.hasSymbolBuckets&&!M.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const c={};if(0===a.length)return c;const u={},h=a.reduce((z,E)=>Math.min(z,E.overscaledZ),1/0),g=a[0].overscaledZ,y=Math.max(g-K3.maxOverzooming,this._source.minzoom),x=Math.max(g+K3.maxUnderzooming,this._source.minzoom),M={};for(const z of a){const E=this._addTile(z);c[z.key]=z,E.hasData()||h<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,h,x,c);for(const z of a){let E=this._tiles[z.key];if(E.hasData())continue;if(z.canonical.z>=this._source.maxzoom){const I=z.children(this._source.maxzoom)[0],N=this.getTile(I);if(N&&N.hasData()){c[I.key]=I;continue}}else{const I=z.children(this._source.maxzoom);if(c[I[0].key]&&c[I[1].key]&&c[I[2].key]&&c[I[3].key])continue}let H=E.wasRequested();for(let I=z.overscaledZ-1;I>=y;--I){const N=z.scaledTo(I);if(u[N.key]||(u[N.key]=!0,E=this.getTile(N),!E&&H&&(E=this._addTile(N)),E&&(c[N.key]=N,H=E.wasRequested(),E.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const c=[];let u,h=this._tiles[a].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){u=this._loadedParentTiles[h.key];break}c.push(h.key);const g=h.scaledTo(h.overscaledZ-1);if(u=this._getLoadedTile(g),u)break;h=g}for(const g of c)this._loadedParentTiles[g]=u}}_addTile(a){let c=this._tiles[a.key];if(c)return c;c=this._cache.getAndRemove(a),c&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));const u=Boolean(c);if(!u){const h=this.map?this.map.painter:null;c=new Uu(a,this._source.tileSize*a.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))}return c?(c.uses++,this._tiles[a.key]=c,u||this._source.fire(new Cn("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(a,c){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const u=c.getExpiryTimeout();u&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},u))}_removeTile(a){const c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&"reloading"!==c.state?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,c,u){const h=[],g=this.transform;if(!g)return h;const y="globe"===g.projection.name,x=oo(g.center.lng);for(const M in this._tiles){const z=this._tiles[M];if(u&&z.clearQueryDebugViz(),z.holdingForFade())continue;let E;if(y){const H=z.tileID.canonical;if(0===H.z){const I=[Math.abs(f1(x,...R0(H,-1))-x),Math.abs(f1(x,...R0(H,1))-x)];E=[0,2*I.indexOf(Math.min(...I))-1]}else{const I=[Math.abs(f1(x,...R0(H,-1))-x),Math.abs(f1(x,...R0(H,0))-x),Math.abs(f1(x,...R0(H,1))-x)];E=[I.indexOf(Math.min(...I))-1]}}else E=[0];for(const H of E){const I=a.containsTile(z,g,c,H);I&&h.push(I)}}return h}getVisibleCoordinates(a){const c=this.getRenderableIds(a).map(u=>this._tiles[u].tileID);for(const u of c)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(dl(this._source.type))for(const a in this._tiles){const c=this._tiles[a];if(void 0!==c.fadeEndTime&&c.fadeEndTime>=Q1.now())return!0}return!1}setFeatureState(a,c,u){this._state.updateState(a=a||"_geojsonTileLayer",c,u)}removeFeatureState(a,c,u){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,u)}getFeatureState(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)}setDependencies(a,c,u){const h=this._tiles[a];h&&h.setDependencies(c,u)}reloadTilesForDependencies(a,c){for(const u in this._tiles)this._tiles[u].hasDependency(a,c)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(a,c))}_preloadTiles(a,c){const u=new Map,h=Array.isArray(a)?a:[a],g=this.map.painter.terrain,y=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const x of h){const M=x.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const z of M)u.set(z.key,z);this.usedForTerrain&&x.updateElevation(!1)}Dr(Array.from(u.values()),(x,M)=>{const z=new Uu(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(z,E=>{"raster-dem"===this._source.type&&z.dem&&this._backfillDEM(z),M(E,z)})},c)}}function ih(o,a){const c=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*a.wrap)-+(a.wrap<0);return o.overscaledZ-a.overscaledZ||u-c||a.canonical.y-o.canonical.y||a.canonical.x-o.canonical.x}function dl(o){return"raster"===o||"image"===o||"video"===o||"custom"===o}function R0(o,a){const c=1<<o.z;return[o.x/c+a,(o.x+1)/c+a]}K3.maxOverzooming=10,K3.maxUnderzooming=3;class Wu{constructor(a,c,u){this._demTile=a,this._dem=this._demTile.dem,this._scale=c,this._offset=u}static create(a,c,u){const h=u||a.findDEMTileFor(c);if(!h||!h.dem)return;const g=h.dem,y=h.tileID,x=1<<c.canonical.z-y.canonical.z;return new Wu(h,h.tileSize/a1/x,[(c.canonical.x/x-y.canonical.x)*g.dim,(c.canonical.y/x-y.canonical.y)*g.dim])}tileCoordToPixel(a,c){const u=c*this._scale+this._offset[1],h=Math.floor(a*this._scale+this._offset[0]),g=Math.floor(u);return new pt(h,g)}getElevationAt(a,c,u,h){const g=a*this._scale+this._offset[0],y=c*this._scale+this._offset[1],x=Math.floor(g),M=Math.floor(y),z=this._dem;return h=!!h,u?N1(N1(z.get(x,M,h),z.get(x,M+1,h),y-M),N1(z.get(x+1,M,h),z.get(x+1,M+1,h),y-M),g-x):z.get(x,M,h)}getElevationAtPixel(a,c,u){return this._dem.get(a,c,!!u)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*co(1,a)*this._dem.stride}}class rh{constructor(a,c){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new v1(a1,16,0),this.featureIndexArray=new x5,this.promoteId=c}insert(a,c,u,h,g,y=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,h,g,y);const M=this.grid;for(let z=0;z<c.length;z++){const E=c[z],H=[1/0,1/0,-1/0,-1/0];for(let I=0;I<E.length;I++){const N=E[I];H[0]=Math.min(H[0],N.x),H[1]=Math.min(H[1],N.y),H[2]=Math.max(H[2],N.x),H[3]=Math.max(H[3],N.y)}H[0]<a1&&H[1]<a1&&H[2]>=0&&H[3]>=0&&M.insert(x,H[0],H[1],H[2],H[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new b0(new M0(this.rawTileData)).layers,this.sourceLayerCoder=new Yf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,c,u,h){this.loadVTLayers();const g=a.params||{},y=T3(g.filter),x=a.tileResult,M=a.transform,z=x.bufferedTilespaceBounds,E=this.grid.query(z.min.x,z.min.y,z.max.x,z.max.y,(O,j,X,ae)=>$5(x.bufferedTilespaceGeometry,O,j,X,ae));E.sort(pg);let H=null;M.elevation&&E.length>0&&(H=Wu.create(M.elevation,this.tileID));const I={};let N;for(let O=0;O<E.length;O++){const j=E[O];if(j===N)continue;N=j;const X=this.featureIndexArray.get(j);let ae=null;this.loadMatchingFeature(I,X,y,g.layers,g.availableImages,c,u,h,(me,re,de,ve=0)=>(ae||(ae=Ms(me,this.tileID.canonical,a.tileTransform)),re.queryIntersectsFeature(x,me,de,ae,this.z,a.transform,a.pixelPosMatrix,H,ve)))}return I}loadMatchingFeature(a,c,u,h,g,y,x,M,z){const{featureIndex:E,bucketIndex:H,sourceLayerIndex:I,layoutVertexArrayOffset:N}=c,O=this.bucketLayerIDs[H];if(h&&!function(me,re){for(let de=0;de<me.length;de++)if(re.indexOf(me[de])>=0)return!0;return!1}(h,O))return;const j=this.sourceLayerCoder.decode(I),X=this.vtLayers[j].feature(E);if(u.needGeometry){const me=vc(X,!0);if(!u.filter(new Se(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!u.filter(new Se(this.tileID.overscaledZ),X))return;const ae=this.getId(X,j);for(let me=0;me<O.length;me++){const re=O[me];if(h&&h.indexOf(re)<0)continue;const de=y[re];if(!de)continue;let ve={};void 0!==ae&&M&&(ve=M.getState(de.sourceLayer||"_geojsonTileLayer",ae));const he=c1({},x[re]);he.paint=ah(he.paint,de.paint,X,ve,g),he.layout=ah(he.layout,de.layout,X,ve,g);const ke=!z||z(X,de,ve,N);if(!ke)continue;const Ve=new Xf(X,this.z,this.x,this.y,ae);Ve.layer=he;let Ge=a[re];void 0===Ge&&(Ge=a[re]=[]),Ge.push({featureIndex:E,feature:Ve,intersectionZ:ke})}}lookupSymbolFeatures(a,c,u,h,g,y,x,M){const z={};this.loadVTLayers();const E=T3(g);for(const H of a)this.loadMatchingFeature(z,{bucketIndex:u,sourceLayerIndex:h,featureIndex:H,layoutVertexArrayOffset:0},E,y,x,M,c);return z}loadFeature(a){const{featureIndex:c,sourceLayerIndex:u}=a;this.loadVTLayers();const h=this.sourceLayerCoder.decode(u),g=this.vtFeatures[h];if(g[c])return g[c];const y=this.vtLayers[h].feature(c);return g[c]=y,y}hasLayer(a){for(const c of this.bucketLayerIDs)for(const u of c)if(a===u)return!0;return!1}getId(a,c){let u=a.id;if(this.promoteId){const h="string"==typeof this.promoteId?this.promoteId:this.promoteId[c];null!=h&&(u=a.properties[h]),"boolean"==typeof u&&(u=Number(u))}return u}}function ah(o,a,c,u,h){return X1(o,(g,y)=>{const x=a instanceof Pe?a.get(y):null;return x&&x.evaluate?x.evaluate(c,u,h):x})}function pg(o,a){return a-o}Et(rh,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class oh{constructor(a,c){this.width=a,this.height=c,this.nextRow=0,this.image=new lo({width:a,height:c}),this.positions={},this.uploaded=!1}getDash(a,c){const u=this.getKey(a,c);return this.positions[u]}trim(){const a=this.width,c=this.height=rr(this.nextRow);this.image.resize({width:a,height:c})}getKey(a,c){return a.join(",")+c}getDashRanges(a,c,u){const h=[];let g=a.length%2==1?-a[a.length-1]*u:0,y=a[0]*u,x=!0;h.push({left:g,right:y,isDash:x,zeroLength:0===a[0]});let M=a[0];for(let z=1;z<a.length;z++){x=!x;const E=a[z];g=M*u,M+=E,y=M*u,h.push({left:g,right:y,isDash:x,zeroLength:0===E})}return h}addRoundDash(a,c,u){const h=c/2;for(let g=-u;g<=u;g++){const y=this.width*(this.nextRow+u+g);let x=0,M=a[x];for(let z=0;z<this.width;z++){z/M.right>1&&(M=a[++x]);const E=Math.abs(z-M.left),H=Math.abs(z-M.right),I=Math.min(E,H);let N;const O=g/u*(h+1);if(M.isDash){const j=h-Math.abs(O);N=Math.sqrt(I*I+j*j)}else N=h-Math.sqrt(I*I+O*O);this.image.data[y+z]=Math.max(0,Math.min(255,N+128))}}}addRegularDash(a,c){for(let M=a.length-1;M>=0;--M){const z=a[M],E=a[M+1];z.zeroLength?a.splice(M,1):E&&E.isDash===z.isDash&&(E.left=z.left,a.splice(M,1))}const u=a[0],h=a[a.length-1];u.isDash===h.isDash&&(u.left=h.left-this.width,h.right=u.right+this.width);const g=this.width*this.nextRow;let y=0,x=a[y];for(let M=0;M<this.width;M++){M/x.right>1&&(x=a[++y]);const z=Math.abs(M-x.left),E=Math.abs(M-x.right),H=Math.min(z,E);this.image.data[g+M]=Math.max(0,Math.min(255,(x.isDash?H:-H)+c+128))}}addDash(a,c){const u=this.getKey(a,c);if(this.positions[u])return this.positions[u];const h="round"===c,g=h?7:0,y=2*g+1;if(this.nextRow+y>this.height)return tn("LineAtlas out of space"),null;0===a.length&&a.push(1);let x=0;for(let E=0;E<a.length;E++)a[E]<0&&(tn("Negative value is found in line dasharray, replacing values with 0"),a[E]=0),x+=a[E];if(0!==x){const E=this.width/x,H=this.getDashRanges(a,this.width,E);h?this.addRoundDash(H,E,g):this.addRegularDash(H,"square"===c?.5*E:0)}const M=this.nextRow+g;this.nextRow+=y;const z={tl:[M,g],br:[x,0]};return this.positions[u]=z,z}}Et(oh,"LineAtlas");class sh{constructor(a){const c={},u=[];for(const x in a){const M=a[x],z=c[x]={};for(const E in M.glyphs){const H=M.glyphs[+E];if(!H||0===H.bitmap.width||0===H.bitmap.height)continue;const I=H.metrics.localGlyph?2:1,N={x:0,y:0,w:H.bitmap.width+2*I,h:H.bitmap.height+2*I};u.push(N),z[E]=N}}const{w:h,h:g}=vu(u),y=new lo({width:h||1,height:g||1});for(const x in a){const M=a[x];for(const z in M.glyphs){const E=M.glyphs[+z];if(!E||0===E.bitmap.width||0===E.bitmap.height)continue;const H=c[x][z],I=E.metrics.localGlyph?2:1;lo.copy(E.bitmap,y,{x:0,y:0},{x:H.x+I,y:H.y+I},E.bitmap)}}this.image=y,this.positions=c}}Et(sh,"GlyphAtlas");class mg{constructor(a){this.tileID=new q2(a.tileID.overscaledZ,a.tileID.wrap,a.tileID.canonical.z,a.tileID.canonical.x,a.tileID.canonical.y),this.tileZoom=a.tileZoom,this.uid=a.uid,this.zoom=a.zoom,this.canonical=a.tileID.canonical,this.pixelRatio=a.pixelRatio,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=a.showCollisionBoxes,this.collectResourceTiming=!!a.collectResourceTiming,this.returnDependencies=!!a.returnDependencies,this.promoteId=a.promoteId,this.enableTerrain=!!a.enableTerrain,this.isSymbolTile=a.isSymbolTile,this.tileTransform=Sc(a.tileID.canonical,a.projection),this.projection=a.projection}parse(a,c,u,h,g){this.status="parsing",this.data=a,this.collisionBoxArray=new v5;const y=new Yf(Object.keys(a.layers).sort()),x=new rh(this.tileID,this.promoteId);x.bucketLayerIDs=[];const M={},z=new oh(256,256),E={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:z,availableImages:u},H=c.familiesBySource[this.source];for(const ve in H){const he=a.layers[ve];if(!he)continue;let ke=!1,Ve=!1;for(const Fe of H[ve])"symbol"===Fe[0].type?ke=!0:Ve=!0;if(!0===this.isSymbolTile&&!ke||!1===this.isSymbolTile&&!Ve)continue;1===he.version&&tn(`Vector tile source "${this.source}" layer "${ve}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ge=y.encode(ve),We=[];for(let Fe=0;Fe<he.length;Fe++){const Ke=he.feature(Fe),nt=x.getId(Ke,ve);We.push({feature:Ke,id:nt,index:Fe,sourceLayerIndex:Ge})}for(const Fe of H[ve]){const Ke=Fe[0];void 0!==this.isSymbolTile&&"symbol"===Ke.type!==this.isSymbolTile||Ke.minzoom&&this.zoom<Math.floor(Ke.minzoom)||Ke.maxzoom&&this.zoom>=Ke.maxzoom||"none"!==Ke.visibility&&(Zu(Fe,this.zoom,u),(M[Ke.id]=Ke.createBucket({index:x.bucketLayerIDs.length,layers:Fe,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ge,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(We,E,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(Fe.map(nt=>nt.id)))}}let I,N,O,j;z.trim();const X={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ae=X1(E.glyphDependencies,ve=>Object.keys(ve).map(Number));Object.keys(ae).length?h.send("getGlyphs",{uid:this.uid,stacks:ae},(ve,he)=>{I||(I=ve,N=he,de.call(this))},void 0,!1,X):N={};const me=Object.keys(E.iconDependencies);me.length?h.send("getImages",{icons:me,source:this.source,tileID:this.tileID,type:"icons"},(ve,he)=>{I||(I=ve,O=he,de.call(this))},void 0,!1,X):O={};const re=Object.keys(E.patternDependencies);function de(){if(I)return g(I);if(N&&O&&j){const ve=new sh(N),he=new Af(O,j);for(const ke in M){const Ve=M[ke];Ve instanceof f3?(Zu(Ve.layers,this.zoom,u),Bf(Ve,N,ve.positions,O,he.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):Ve.hasPattern&&(Ve instanceof J6||Ve instanceof iu||Ve instanceof xc)&&(Zu(Ve.layers,this.zoom,u),Ve.addFeatures(E,this.tileID.canonical,he.patternPositions,u,this.tileTransform))}this.status="done",g(null,{buckets:F2(M).filter(ke=>!ke.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ve.image,lineAtlas:z,imageAtlas:he,glyphMap:this.returnDependencies?N:null,iconMap:this.returnDependencies?O:null,glyphPositions:this.returnDependencies?ve.positions:null})}}re.length?h.send("getImages",{icons:re,source:this.source,tileID:this.tileID,type:"patterns"},(ve,he)=>{I||(I=ve,j=he,de.call(this))},void 0,!1,X):j={},de.call(this)}}function Zu(o,a,c){const u=new Se(a);for(const h of o)h.recalculate(u,c)}class Yu{constructor(a){this.entries={},this.scheduler=a}request(a,c,u,h){const g=this.entries[a]=this.entries[a]||{callbacks:[]};if(g.result){const[y,x]=g.result;return this.scheduler?this.scheduler.add(()=>{h(y,x)},c):h(y,x),()=>{}}return g.callbacks.push(h),g.cancel||(g.cancel=u((y,x)=>{g.result=[y,x];for(const M of g.callbacks)this.scheduler?this.scheduler.add(()=>{M(y,x)},c):M(y,x);setTimeout(()=>delete this.entries[a],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(y=>y!==h),g.callbacks.length||(g.cancel(),delete this.entries[a]))}}}function ht(o,a,c){const u=JSON.stringify(o.request);return o.data&&(this.deduped.entries[u]={result:[null,o.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},h=>{const g=Do(o.request,(y,x,M,z)=>{y?h(y):x&&h(null,{vectorTile:c?void 0:new b0(new M0(x)),rawData:x,cacheControl:M,expires:z})});return()=>{g.cancel(),h()}},a)}p.ARRAY_TYPE=aa,p.AUTH_ERR_MSG=Jo,p.Aabb=$2,p.Actor=class{constructor(o,a,c){this.target=o,this.parent=a,this.mapId=c,this.callbacks={},this.cancelCallbacks={},ar(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Er()?o:Ye,this.scheduler=new Ou}send(o,a,c,u,h=!1,g){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(c.metadata=g,this.callbacks[y]=c);const x=l2(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:o,hasCallback:!!c,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:Jc(a,x)},x),{cancel:()=>{c&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(o){const a=o.data,c=a.id;if(c&&(!a.targetMapId||this.mapId===a.targetMapId))if("<cancel>"===a.type){const u=this.cancelCallbacks[c];delete this.cancelCallbacks[c],u&&u.cancel()}else if(a.mustQueue||Er()){const u=this.callbacks[c];this.cancelCallbacks[c]=this.scheduler.add(()=>this.processTask(c,a),u&&u.metadata||{type:"message"})}else this.processTask(c,a)}processTask(o,a){if("<response>"===a.type){const c=this.callbacks[o];delete this.callbacks[o],c&&(a.error?c(P3(a.error)):c(null,P3(a.data)))}else{const c=l2(this.globalScope)?void 0:[],u=a.hasCallback?(g,y)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:g?Jc(g):null,data:Jc(y,c)},c)}:g=>{},h=P3(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,h,u);else if(this.parent.getWorkerSource){const g=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,g[0],h.source)[g[1]](h,u)}else u(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},p.CanonicalTileID=Y6,p.Color=ti,p.ColorMode=ca,p.CullFaceMode=mo,p.DEMData=I0,p.DataConstantProperty=ze,p.DedupedRequest=Yu,p.DepthMode=sa,p.EXTENT=a1,p.Elevation=class{isDataAvailableAtPoint(o){const a=this._source();if(this.isUsingMockSource()||!a||o.y<0||o.y>1)return!1;const c=a.getSource().maxzoom,u=1<<c,h=Math.floor(o.x),g=Math.floor((o.x-h)*u),y=Math.floor(o.y*u),x=this.findDEMTileFor(new q2(c,h,c,g,y));return!(!x||!x.dem)}getAtPointOrZero(o,a=0){return this.getAtPoint(o,a)||0}getAtPoint(o,a,c=!0){if(this.isUsingMockSource())return null;null==a&&(a=null);const u=this._source();if(!u||o.y<0||o.y>1)return a;const h=u.getSource().maxzoom,g=1<<h,y=Math.floor(o.x),x=o.x-y,M=new q2(h,y,h,Math.floor(x*g),Math.floor(o.y*g)),z=this.findDEMTileFor(M);if(!z||!z.dem)return a;const E=z.dem,H=1<<z.tileID.canonical.z,I=(x*H-z.tileID.canonical.x)*E.dim,N=(o.y*H-z.tileID.canonical.y)*E.dim,O=Math.floor(I),j=Math.floor(N);return(c?this.exaggeration():1)*N1(N1(E.get(O,j),E.get(O,j+1),N-j),N1(E.get(O+1,j),E.get(O+1,j+1),N-j),I-O)}getAtTileOffset(o,a,c){const u=1<<o.canonical.z;return this.getAtPointOrZero(new K4(o.wrap+(o.canonical.x+a/a1)/u,(o.canonical.y+c/a1)/u))}getAtTileOffsetFunc(o,a,c,u){return h=>{const g=this.getAtTileOffset(o,h.x,h.y),y=u.upVector(o.canonical,h.x,h.y);return no(y,y,g*u.upVectorScale(o.canonical,a,c).metersToTile),y}}getForTilePoints(o,a,c,u){if(this.isUsingMockSource())return!1;const h=Wu.create(this,o,u);return!!h&&(a.forEach(g=>{g[2]=this.exaggeration()*h.getElevationAt(g[0],g[1],c)}),!0)}getMinMaxForTile(o){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(o);if(!a||!a.dem)return null;const c=a.dem.tree,u=a.tileID,h=1<<o.canonical.z-u.canonical.z;let g=o.canonical.x/h-u.canonical.x,y=o.canonical.y/h-u.canonical.y,x=0;for(let M=0;M<o.canonical.z-u.canonical.z&&!c.leaves[x];M++){g*=2,y*=2;const z=2*Math.floor(y)+Math.floor(g);x=c.childOffsets[x]+z,g%=1,y%=1}return{min:this.exaggeration()*c.minimums[x],max:this.exaggeration()*c.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,a,c){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},p.ErrorEvent=pa,p.EvaluationParameters=Se,p.Event=Cn,p.Evented=Xr,p.FillExtrusionBucket=xc,p.Frustum=V6,p.FrustumCorners=u0,p.GLOBE_RADIUS=Uo,p.GLOBE_SCALE_MATCH_LATITUDE=45,p.GLOBE_ZOOM_THRESHOLD_MAX=6,p.GLOBE_ZOOM_THRESHOLD_MIN=5,p.GlobeSharedBuffers=class{constructor(o){this._createGrid(o),this._createPoles(o)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const o of this._poleSegments)o.destroy();for(const o of this._gridSegments)o.withSkirts.destroy(),o.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const o of this._wireframeSegments)o.destroy()}}_fillGridMeshWithLods(o,a){const c=new Ut,u=new Qi,h=[],g=o+1+2,y=a[0]+1,x=a[0]+1+(1+a.length),M=(z,E,H)=>{let I=z===g-1?z-2:0===z?z:z-1;return I+=H?24575:0,[I,E]};for(let z=0;z<g;++z)c.emplaceBack(...M(z,0,!0));for(let z=0;z<y;++z)for(let E=0;E<g;++E)c.emplaceBack(...M(E,z,(0===E||E===g-1)&&!0));for(let z=0;z<a.length;++z){const E=a[z];for(let H=0;H<g;++H)c.emplaceBack(...M(H,E,!0))}for(let z=0;z<a.length;++z){const E=u.length,H=a[z]+1+2,I=new Qi;for(let j=0;j<H-1;j++){const X=j===H-2,ae=X?g*(x-a.length+z-j):g;for(let me=0;me<g-1;me++){const re=j*g+me;0===j||X||0===me||me===g-2?(I.emplaceBack(re+1,re,re+ae),I.emplaceBack(re+ae,re+ae+1,re+1)):(u.emplaceBack(re+1,re,re+ae),u.emplaceBack(re+ae,re+ae+1,re+1))}}const N=ui.simpleSegment(0,E,c.length,u.length-E);for(let j=0;j<I.uint16.length;j+=3)u.emplaceBack(I.uint16[j],I.uint16[j+1],I.uint16[j+2]);const O=ui.simpleSegment(0,E,c.length,u.length-E);h.push({withoutSkirts:N,withSkirts:O})}return{vertices:c,indices:u,segments:h}}_createGrid(o){const a=this._fillGridMeshWithLods(64,d0);this._gridSegments=a.segments,this._gridBuffer=o.createVertexBuffer(a.vertices,l0.members),this._gridIndexBuffer=o.createIndexBuffer(a.indices,!0)}_createPoles(o){const a=new Qi;for(let h=0;h<=64;h++)a.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=o.createIndexBuffer(a,!0);const c=new Rr,u=new Rr;this._poleSegments=[];for(let h=0,g=0;h<5;h++){const y=360/(1<<h);c.emplaceBack(0,-Uo,0,.5,0),u.emplaceBack(0,-Uo,0,.5,1);for(let x=0;x<=64;x++){const M=x/64,z=N1(0,y,M),[E,H,I]=Fi(T5,H5,z,Uo);c.emplaceBack(E,H,I,M,0),u.emplaceBack(E,H,I,M,1)}this._poleSegments.push(ui.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=o.createVertexBuffer(c,Cm,!1),this._poleSouthVertexBuffer=o.createVertexBuffer(u,Cm,!1)}getGridBuffers(o,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[o].withSkirts:this._gridSegments[o].withoutSkirts]}getPoleBuffers(o){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[o]]}getWirefameBuffers(o,a){if(!this._wireframeSegments){const c=new No,u=64,h=u+1+2,g=1;this._wireframeSegments=[];for(let y=0,x=0;y<d0.length;y++){const M=d0[y];for(let E=g;E<M+g;E++)for(let H=g;H<u+g;H++){const I=E*h+H;c.emplaceBack(I,I+1),c.emplaceBack(I,I+h),c.emplaceBack(I,I+h+1)}const z=M*u*3;this._wireframeSegments.push(ui.simpleSegment(0,x,(M+1)*h,z)),x+=z}this._wireframeIndexBuffer=o.createIndexBuffer(c)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[a]]}},p.GlyphManager=u3,p.ImagePosition=n8,p.LivePerformanceUtils=it,p.LngLat=sn,p.LngLatBounds=o3,p.LocalGlyphMode=wu,p.MAX_MERCATOR_LATITUDE=E2,p.MercatorCoordinate=K4,p.ONE_EM=W2,p.OverscaledTileID=q2,p.PerformanceMarkers=Le,p.Properties=ut,p.RGBAImage=xr,p.Ray=E6,p.RequestManager=class{constructor(o,a,c){this._transformRequestFn=o,this._customAccessToken=a,this._silenceAuthErrors=!!c,this._createSkuToken()}_createSkuToken(){const o=function(){let a="";for(let c=0;c<10;c++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",P2,a].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,a){return this._transformRequestFn&&this._transformRequestFn(o,a)||{url:o}}normalizeStyleURL(o,a){if(!Yr(o))return o;const c=x2(o);return c.path=`/styles/v1${c.path}`,this._makeAPIURL(c,this._customAccessToken||a)}normalizeGlyphsURL(o,a){if(!Yr(o))return o;const c=x2(o);return c.path=`/fonts/v1${c.path}`,this._makeAPIURL(c,this._customAccessToken||a)}normalizeSourceURL(o,a,c,u){if(!Yr(o))return o;const h=x2(o);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),c&&h.params.push(`language=${c}`),u&&h.params.push(`worldview=${u}`),this._makeAPIURL(h,this._customAccessToken||a)}normalizeSpriteURL(o,a,c,u){const h=x2(o);return Yr(o)?(h.path=`/styles/v1${h.path}/sprite${a}${c}`,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=`${a}${c}`,Ra(h))}normalizeTileURL(o,a,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!Yr(o))return o;const u=x2(o);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${a||c&&"raster"!==u.authority&&512===c?"@2x":""}${m1.supported?".webp":"$1"}`),"raster"===u.authority?u.path=`/${s1.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${s1.TILE_URL_VERSION}${u.path}`);const h=this._customAccessToken||function(g){for(const y of g){const x=y.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(u.params)||s1.ACCESS_TOKEN;return s1.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,h)}canonicalizeTileURL(o,a){const c=x2(o);if(!c.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!c.path.match(/\.[\w]+$/))return o;let u="mapbox://";c.path.match(/^\/raster\/v1\//)?u+=`raster/${c.path.replace(`/${s1.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${c.path.replace(`/${s1.TILE_URL_VERSION}/`,"")}`;let h=c.params;return a&&(h=h.filter(g=>!g.match(/^access_token=/))),h.length&&(u+=`?${h.join("&")}`),u}canonicalizeTileset(o,a){const c=!!a&&Yr(a),u=[];for(const h of o.tiles||[])es(h)?u.push(this.canonicalizeTileURL(h,c)):u.push(h);return u}_makeAPIURL(o,a){const c="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=x2(s1.API_URL);if(o.protocol=u.protocol,o.authority=u.authority,"http"===o.protocol){const h=o.params.indexOf("secure");h>=0&&o.params.splice(h,1)}if("/"!==u.path&&(o.path=`${u.path}${o.path}`),!s1.REQUIRE_ACCESS_TOKEN)return Ra(o);if(a=a||s1.ACCESS_TOKEN,!this._silenceAuthErrors){if(!a)throw new Error(`An API access token is required to use Mapbox GL. ${c}`);if("s"===a[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${c}`)}return o.params=o.params.filter(h=>-1===h.indexOf("access_token")),o.params.push(`access_token=${a||""}`),Ra(o)}},p.ResourceType=$s,p.SegmentVector=ui,p.SourceCache=K3,p.StencilMode=ul,p.StructArrayLayout1ui2=_s,p.StructArrayLayout2f1f2i16=Ri,p.StructArrayLayout2i4=Ut,p.StructArrayLayout2ui4=No,p.StructArrayLayout3f12=p2,p.StructArrayLayout3ui6=Qi,p.StructArrayLayout4i8=un,p.StructArrayLayout5f20=Rr,p.Texture=L0,p.Tile=Uu,p.Transitionable=gt,p.Uniform1f=w5,p.Uniform1i=class extends a3{constructor(o){super(o),this.current=0}set(o,a,c){this.fetchUniformLocation(o,a)&&this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},p.Uniform2f=class extends a3{constructor(o){super(o),this.current=[0,0]}set(o,a,c){this.fetchUniformLocation(o,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1])))}},p.Uniform3f=class extends a3{constructor(o){super(o),this.current=[0,0,0]}set(o,a,c){this.fetchUniformLocation(o,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2])))}},p.Uniform4f=hm,p.UniformColor=pm,p.UniformMatrix2f=class extends a3{constructor(o){super(o),this.current=Ox}set(o,a,c){if(this.fetchUniformLocation(o,a))for(let u=0;u<4;u++)if(c[u]!==this.current[u]){this.current=c,this.gl.uniformMatrix2fv(this.location,!1,c);break}}},p.UniformMatrix3f=class extends a3{constructor(o){super(o),this.current=Nx}set(o,a,c){if(this.fetchUniformLocation(o,a))for(let u=0;u<9;u++)if(c[u]!==this.current[u]){this.current=c,this.gl.uniformMatrix3fv(this.location,!1,c);break}}},p.UniformMatrix4f=class extends a3{constructor(o){super(o),this.current=r0}set(o,a,c){if(this.fetchUniformLocation(o,a)){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let u=1;u<16;u++)if(c[u]!==this.current[u]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}}},p.UnwrappedTileID=X6,p.ValidationError=_t,p.VectorTileFeature=$6,p.VectorTileWorkerSource=class extends Xr{constructor(o,a,c,u,h){super(),this.actor=o,this.layerIndex=a,this.availableImages=c,this.loadVectorData=h||ht,this.loading={},this.loaded={},this.deduped=new Yu(o.scheduler),this.isSpriteLoaded=u,this.scheduler=o.scheduler}loadTile(o,a){const c=o.uid,u=o&&o.request,h=u&&u.collectResourceTiming,g=this.loading[c]=new mg(o);g.abort=this.loadVectorData(o,(y,x)=>{const M=!this.loading[c];if(delete this.loading[c],M||y||!x)return g.status="done",M||(this.loaded[c]=g),a(y);const z=x.rawData,E={};x.expires&&(E.expires=x.expires),x.cacheControl&&(E.cacheControl=x.cacheControl),g.vectorTile=x.vectorTile||new b0(new M0(z));const H=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(I,N)=>{if(I||!N)return a(I);const O={};if(h){const j=Tt(u);j.length>0&&(O.resourceTiming=JSON.parse(JSON.stringify(j)))}a(null,c1({rawTileData:z.slice(0)},N,E,O))})};this.isSpriteLoaded?H():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(H,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):H()}),this.loaded=this.loaded||{},this.loaded[c]=g})}reloadTile(o,a){const c=this.loaded,u=o.uid,h=this;if(c&&c[u]){const g=c[u];g.showCollisionBoxes=o.showCollisionBoxes,g.enableTerrain=!!o.enableTerrain,g.projection=o.projection,g.tileTransform=Sc(o.tileID.canonical,o.projection);const y=(x,M)=>{const z=g.reloadCallback;z&&(delete g.reloadCallback,g.parse(g.vectorTile,h.layerIndex,this.availableImages,h.actor,z)),a(x,M)};"parsing"===g.status?g.reloadCallback=y:"done"===g.status&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(o,a){const c=o.uid,u=this.loading[c];u&&(u.abort&&u.abort(),delete this.loading[c]),a()}removeTile(o,a){const c=this.loaded,u=o.uid;c&&c[u]&&delete c[u],a()}},p.WritingMode=za,p.ZoomDependentExpression=Je,p.add=Ma,p.addDynamicAttributes=p8,p.adjoint=function(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=a[4],x=a[5],M=a[6],z=a[7],E=a[8];return o[0]=y*E-x*z,o[1]=h*z-u*E,o[2]=u*x-h*y,o[3]=x*M-g*E,o[4]=c*E-h*M,o[5]=h*g-c*x,o[6]=g*z-y*M,o[7]=u*M-c*z,o[8]=c*y-u*g,o},p.asyncAll=Dr,p.bezier=La,p.bindAll=ar,p.boundsAttributes=Kf,p.bufferConvexPolygon=function(o,a){const c=[];for(let u=0;u<o.length;u++){const h=b2(u-1,-1,o.length-1),g=b2(u+1,-1,o.length-1),y=o[u],x=o[g],M=o[h].sub(y).unit(),z=x.sub(y).unit(),E=z.angleWithSep(M.x,M.y),H=M.add(z).unit().mult(-1*a/Math.sin(E/2));c.push(y.add(H))}return c},p.cacheEntryPossiblyAdded=function(o){Gs++,Gs>So&&(o.getActor().send("enforceCacheSizeLimit",Li),Gs=0)},p.calculateGlobeLabelMatrix=function(o,a){const{x:c,y:u}=o.point,h=E5(c,u,o.worldSize/o._pixelsPerMercatorPixel,0,0);return bs(h,h,A5(jo(a)))},p.calculateGlobeMatrix=function(o){const{x:a,y:c}=o.point,{lng:u,lat:h}=o._center;return E5(a,c,o.worldSize,u,h)},p.calculateGlobeMercatorMatrix=function(o){const a=o.pixelsPerMeter,c=a/co(1,o.center.lat),u=Ca(new Float64Array(16));return wa(u,u,[o.point.x,o.point.y,0]),s3(u,u,[c,c,a]),Float32Array.from(u)},p.circumferenceAtLatitude=k5,p.clamp=f1,p.clearTileCache=function(o){if(!js())return;const a=Ye.caches.delete(li);o&&a.catch(o).then(()=>o())},p.clipLine=eg,p.clone=function(o){var a=new aa(16);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a},p.clone$1=ii,p.collisionCircleLayout=xf,p.config=s1,p.conjugate=function(o,a){return o[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o[3]=a[3],o},p.create=function(){var o=new aa(16);return aa!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},p.create$1=H7,p.createExpression=$,p.createLayout=Ft,p.createStyleLayer=function(o){return"custom"===o.type?new lg(o):new Zf[o.type](o)},p.cross=G4,p.degToRad=F1,p.distance=function(o,a){return Math.hypot(a[0]-o[0],a[1]-o[1],a[2]-o[2])},p.div=function(o,a,c){return o[0]=a[0]/c[0],o[1]=a[1]/c[1],o[2]=a[2]/c[2],o},p.dot=io,p.earthRadius=m0,p.ease=s2,p.easeCubicInOut=fa,p.ecefToLatLng=function([o,a,c]){const u=Math.hypot(o,a,c),h=Math.atan2(o,c),g=.5*Math.PI-Math.acos(-a/u);return new sn(ni(h),ni(g))},p.emitValidationErrors=k4,p.endsWith=Ar,p.enforceCacheSizeLimit=function(o){Zr(),Vr&&Vr.then(a=>{a.keys().then(c=>{for(let u=0;u<c.length-o;u++)a.delete(c[u])})})},p.evaluateSizeForFeature=e8,p.evaluateSizeForZoom=Go,p.evaluateVariableOffset=Of,p.evented=ue,p.exactEquals=function(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]&&o[3]===a[3]},p.exactEquals$1=function(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]},p.exported=Q1,p.exported$1=m1,p.extend=c1,p.extend$1=ma,p.fillExtrusionHeightLift=lu,p.filterObject=V1,p.fromMat4=function(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[4],o[4]=a[5],o[5]=a[6],o[6]=a[8],o[7]=a[9],o[8]=a[10],o},p.fromQuat=function(o,a){var c=a[0],u=a[1],h=a[2],g=a[3],y=c+c,x=u+u,M=h+h,z=c*y,E=u*y,H=u*x,I=h*y,N=h*x,O=h*M,j=g*y,X=g*x,ae=g*M;return o[0]=1-H-O,o[1]=E+ae,o[2]=I-X,o[3]=0,o[4]=E-ae,o[5]=1-z-O,o[6]=N+j,o[7]=0,o[8]=I+X,o[9]=N-j,o[10]=1-z-H,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},p.fromRotation=function(o,a){var c=Math.sin(a),u=Math.cos(a);return o[0]=u,o[1]=c,o[2]=0,o[3]=-c,o[4]=u,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},p.fromScaling=M5,p.furthestTileCorner=function(o){const a=Math.round((o+45+360)%360/90)%4;return qr[a]},p.getAABBPointSquareDist=function(o,a,c){let u=0;for(let h=0;h<2;++h){const g=c?c[h]:0;o[h]>g&&(u+=(o[h]-g)*(o[h]-g)),a[h]<g&&(u+=(g-a[h])*(g-a[h]))}return u},p.getAnchorAlignment=yu,p.getAnchorJustification=Su,p.getBounds=function(o){let a=1/0,c=1/0,u=-1/0,h=-1/0;for(const g of o)a=Math.min(a,g.x),c=Math.min(c,g.y),u=Math.max(u,g.x),h=Math.max(h,g.y);return{min:new pt(a,c),max:new pt(u,h)}},p.getColumn=Kn,p.getGridMatrix=function(o,a,c,u){const h=a.getNorth(),g=a.getSouth(),y=a.getWest(),x=a.getEast(),M=1<<o.z,z=x-y,E=h-g,H=z/64,I=-E/d0[c],N=[0,H,0,I,0,0,h,y,0];if(o.z>0){const O=180/u;k7(N,N,[O/z+1,0,0,0,O/E+1,0,-.5*O/H,.5*O/I,1])}return N[2]=M,N[5]=o.x,N[8]=o.y,N},p.getImage=jc,p.getJSON=function(o,a){return ka(c1(o,{type:"json"}),a)},p.getLatitudinalLod=function(o){const a=E2-5;o=f1(o,-a,a)/a*90;const c=Math.pow(Math.abs(Math.sin(F1(o))),3);return Math.round(c*(d0.length-1))},p.getMapSessionAPI=De,p.getPerformanceMeasurement=Tt,p.getProjection=Hu,p.getRTLTextPluginStatus=ye,p.getReferrer=Lr,p.getTilePoint=function(o,{x:a,y:c},u=0){return new pt(((a-u)*o.scale-o.x)*a1,(c*o.scale-o.y)*a1)},p.getTileVec3=function(o,a,c=0){return Bo(((a.x-c)*o.scale-o.x)*a1,(a.y*o.scale-o.y)*a1,I5(a.z,a.y))},p.getVideo=function(o,a){const c=Ye.document.createElement("video");c.muted=!0,c.onloadstart=function(){a(null,c)};for(let u=0;u<o.length;u++){const h=Ye.document.createElement("source");qs(o[u])||(c.crossOrigin="Anonymous"),h.src=o[u],c.appendChild(h)}return{cancel:()=>{}}},p.globeCenterToScreenPoint=function(o){const a=[0,0,0],c=Ca(new Float64Array(16));return bs(c,o.pixelMatrix,o.globeMatrix),ci(a,a,c),new pt(a[0],a[1])},p.globeDenormalizeECEF=A5,p.globeECEFOrigin=function(o,a){const c=[0,0,0];return ci(c,c,Z4(jo(a.canonical))),ci(c,c,o),c},p.globeMetersToEcef=q4,p.globeNormalizeECEF=Z4,p.globePixelsToTileUnits=function(o,a){return a1/(512*Math.pow(2,o))*p0(jo(a))},p.globePoleMatrixForTile=function(o,a,c){const u=Ca(new Float64Array(16)),h=(a/(1<<o)-.5)*Math.PI*2;return z6(u,c.globeMatrix,h),Float32Array.from(u)},p.globeTileBounds=jo,p.globeTiltAtLngLat=V5,p.globeToMercatorTransition=Y4,p.globeUseCustomAntiAliasing=function(o,a,c){const u=Y4(c.zoom),h=o.style.map._antialias,g=!!a.extStandardDerivatives,y=a.extStandardDerivativesForceOff||o.terrain&&o.terrain.exaggeration()>0;return 0===u&&!h&&!y&&g},p.identity=Ca,p.identity$1=bm,p.invert=B4,p.isFullscreen=function(){return!!Ye.document.fullscreenElement||!!Ye.document.webkitFullscreenElement},p.isLngLatBehindGlobe=L5,p.isMapAuthenticated=function(o){return we.has(o)},p.isMapboxURL=Yr,p.isSafariWithAntialiasingBug=function(o){const a=o.navigator?o.navigator.userAgent:null;return!!l2(o)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},p.latFromMercatorY=e2,p.latLngToECEF=ws,p.len=jx,p.length=o0,p.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},p.lngFromMercatorX=A2,p.loadVectorTile=ht,p.makeRequest=ka,p.mapValue=function(o,a,c,u,h){return f1((o-a)/(c-a)*(h-u)+u,u,h)},p.mercatorScale=L6,p.mercatorXfromLng=oo,p.mercatorYfromLat=so,p.mercatorZfromAltitude=co,p.mul=S6,p.mul$1=P7,p.multiply=bs,p.multiply$1=k7,p.multiply$2=vm,p.nextPowerOfTwo=rr,p.normalize=br,p.normalize$1=Gx,p.normalize$2=N7,p.number=N1,p.ortho=function(o,a,c,u,h,g,y){var x=1/(a-c),M=1/(u-h),z=1/(g-y);return o[0]=-2*x,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(a+c)*x,o[13]=(h+u)*M,o[14]=(y+g)*z,o[15]=1,o},p.pbf=M0,p.perspective=function(o,a,c,u,h){var g,y=1/Math.tan(a/2);return o[0]=y/c,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=y,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=h&&h!==1/0?(o[10]=(h+u)*(g=1/(u-h)),o[14]=2*h*u*g):(o[10]=-1,o[14]=-2*u),o},p.pick=function(o,a){const c={};for(let u=0;u<a.length;u++){const h=a[u];h in o&&(c[h]=o[h])}return c},p.plugin=Ce,p.pointGeometry=pt,p.polesInViewport=function(o){const a=Ca(new Float64Array(16));bs(a,o.pixelMatrix,o.globeMatrix);const c=[0,ro,0],u=[0,ao,0];return ci(c,c,a),ci(u,u,a),[c[0]>0&&c[0]<=o.width&&c[1]>0&&c[1]<=o.height&&!L5(o,new sn(o.center.lat,90)),u[0]>0&&u[0]<=o.width&&u[1]>0&&u[1]<=o.height&&!L5(o,new sn(o.center.lat,-90))]},p.polygonContainsPoint=c3,p.polygonIntersectsBox=$5,p.polygonIntersectsPolygon=B5,p.polygonizeBounds=function(o,a,c=0,u=!0){const h=new pt(c,c),g=o.sub(h),y=a.add(h),x=[g,new pt(y.x,g.y),y,new pt(g.x,y.y)];return u&&x.push(g.clone()),x},p.posAttributes=l0,p.postMapLoadEvent=ne,p.postPerformanceEvent=xe,p.postTurnstileEvent=U,p.potpack=vu,p.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},p.radToDeg=ni,p.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],p.registerForPluginStateChange=function(o){return o({pluginStatus:Q,pluginURL:Z}),ue.on("pluginStateChange",o),o},p.removeAuthState=function(o){we.delete(o)},p.renderColorRamp=K5,p.resample=$7,p.rotateX=xs,p.rotateX$1=A6,p.rotateY=z6,p.rotateY$1=xm,p.rotateZ=function(o,a,c){var u=Math.sin(c),h=Math.cos(c),g=a[0],y=a[1],x=a[2],M=a[3],z=a[4],E=a[5],H=a[6],I=a[7];return a!==o&&(o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=g*h+z*u,o[1]=y*h+E*u,o[2]=x*h+H*u,o[3]=M*h+I*u,o[4]=z*h-g*u,o[5]=E*h-y*u,o[6]=H*h-x*u,o[7]=I*h-M*u,o},p.rotateZ$1=function(o,a,c){c*=.5;var u=a[0],h=a[1],g=a[2],y=a[3],x=Math.sin(c),M=Math.cos(c);return o[0]=u*M+h*x,o[1]=h*M-u*x,o[2]=g*M+y*x,o[3]=y*M-g*x,o},p.scale=s3,p.scale$1=F7,p.scale$2=no,p.scaleAndAdd=c0,p.set=function(o,a,c,u){return o[0]=a,o[1]=c,o[2]=u,o},p.setCacheLimits=function(o,a){Li=o,So=a},p.setColumn=function(o,a,c){o[4*a+0]=c[0],o[4*a+1]=c[1],o[4*a+2]=c[2],o[4*a+3]=c[3]},p.setRTLTextPlugin=function(o,a,c=!1){if(Q===Y||Q===J||Q===ee)throw new Error("setRTLTextPlugin cannot be called multiple times.");Z=Q1.resolveURL(o),Q=Y,te=a,oe(),c||_e()},p.smoothstep=c2,p.spec=qe,p.squaredLength=function(o){var a=o[0],c=o[1],u=o[2];return a*a+c*c+u*u},p.storeAuthState=function(o,a){a?we.add(o):we.delete(o)},p.sub=Cs,p.subtract=z5,p.symbolSize=Nt,p.tileAABB=function(o,a,c,u,h,g,y,x,M){if("globe"===M.name)return function D5(o,a,c){const u=a/o.worldSize,h=o.globeMatrix;if(c.z<=1){const Ve=jo(c).getCorners();return Pr(Ve,h,u),$2.fromPoints(Ve)}const g=f0(c),y=h0(g);Pr(y,h,u);const x=Number.MAX_VALUE,M=[-x,-x,-x],z=[x,x,x];if(g.contains(o.center)){for(const We of y)j4(z,z,We),s0(M,M,We);M[2]=0;const Ve=o.point,Ge=[Ve.x*u,Ve.y*u,0];return j4(z,z,Ge),s0(M,M,Ge),new $2(z,M)}const E=[h[12]*u,h[13]*u,h[14]*u],H=g.getCenter(),I=f1(o.center.lat,-E2,E2),N=f1(H.lat,-E2,E2),O=oo(o.center.lng),j=so(I);let X=O-oo(H.lng);const ae=j-so(N);X>.5?X-=1:X<-.5&&(X+=1);let me=0;Math.abs(X)>Math.abs(ae)?me=X>=0?1:3:(me=ae>=0?0:2,c0(E,E,[h[4]*u,h[5]*u,h[6]*u],-Math.sin(F1(ae>=0?g.getSouth():g.getNorth()))*Uo));const re=y[me],de=y[(me+1)%4],ve=new Mm(re,de,E),he=[S5(ve,0)||re[0],S5(ve,1)||re[1],S5(ve,2)||re[2]],ke=Y4(o.zoom);if(ke>0){const Ve=function({x:We,y:Fe,z:Ke},nt,st,dt,Oe){const yt=1/(1<<Ke);let jt=We*yt,wt=jt+yt,Lt=Fe*yt,Ct=Lt+yt,Xt=0;const G1=(jt+wt)/2-dt;return G1>.5?Xt=-1:G1<-.5&&(Xt=1),jt=((jt+Xt)*nt-(dt*=nt))*st+dt,wt=((wt+Xt)*nt-dt)*st+dt,Lt=(Lt*nt-(Oe*=nt))*st+Oe,Ct=(Ct*nt-Oe)*st+Oe,[[jt,Ct,0],[wt,Ct,0],[wt,Lt,0],[jt,Lt,0]]}(c,a,o._pixelsPerMercatorPixel,O,j);for(let We=0;We<y.length;We++)U3(y[We],Ve[We],ke);const Ge=Ma([],Ve[me],Ve[(me+1)%4]);no(Ge,Ge,.5),U3(he,Ge,ke)}for(const Ve of y)j4(z,z,Ve),s0(M,M,Ve);return z[2]=Math.min(re[2],de[2]),j4(z,z,he),s0(M,M,he),new $2(z,M)}(o,a,new Y6(c,u,h));const z=Sc({z:c,x:u,y:h},M);return new $2([(g+z.x/z.scale)*a,a*(z.y/z.scale),y],[(g+z.x2/z.scale)*a,a*(z.y2/z.scale),x])},p.tileCornersToBounds=f0,p.tileTransform=Sc,p.transformMat3=function(o,a,c){var u=a[0],h=a[1],g=a[2];return o[0]=u*c[0]+h*c[3]+g*c[6],o[1]=u*c[1]+h*c[4]+g*c[7],o[2]=u*c[2]+h*c[5]+g*c[8],o},p.transformMat4=ci,p.transformMat4$1=_c,p.transformQuat=R7,p.transitionTileAABBinECEF=U7,p.translate=wa,p.transpose=function(o,a){if(o===a){var c=a[1],u=a[2],h=a[5];o[1]=a[3],o[2]=a[6],o[3]=c,o[5]=a[7],o[6]=u,o[7]=h}else o[0]=a[0],o[1]=a[3],o[2]=a[6],o[3]=a[1],o[4]=a[4],o[5]=a[7],o[6]=a[2],o[7]=a[5],o[8]=a[8];return o},p.triggerPluginCompletionEvent=se,p.uniqueId=Ta,p.updateGlobeVertexNormal=function(o,a,c,u,h){const g=5*a+2;o.float32[g+0]=c,o.float32[g+1]=u,o.float32[g+2]=h},p.validateCustomStyleLayer=function(o){const a=[],c=o.id;return void 0===c&&a.push({message:`layers.${c}: missing required property "id"`}),void 0===o.render&&a.push({message:`layers.${c}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&a.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),a},p.validateFilter=o=>Za(T4(o)),p.validateFog=o=>Za(Ql(o)),p.validateLayer=o=>Za(H4(o)),p.validateLight=o=>Za(_r(o)),p.validateSource=o=>Za(H3(o)),p.validateStyle=I3,p.validateTerrain=o=>Za(Kl(o)),p.values=F2,p.vectorTile=j6,p.version=nr,p.warnOnce=tn,p.window=Ye,p.wrap=b2}),Qe(0,function(p){function Ye(ie){if("number"==typeof ie||"boolean"==typeof ie||"string"==typeof ie||null==ie)return JSON.stringify(ie);if(Array.isArray(ie)){let G="[";for(const ne of ie)G+=`${Ye(ne)},`;return`${G}]`}let U="{";for(const G of Object.keys(ie).sort())U+=`${G}:${Ye(ie[G])},`;return`${U}}`}function nr(ie){let U="";for(const G of p.refProperties)U+=`/${Ye(ie[G])}`;return U}class $n{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,G){for(const fe of U)this._layerConfigs[fe.id]=fe,(this._layers[fe.id]=p.createStyleLayer(fe)).compileFilter(),this.keyCache[fe.id]&&delete this.keyCache[fe.id];for(const fe of G)delete this.keyCache[fe],delete this._layerConfigs[fe],delete this._layers[fe];this.familiesBySource={};const ne=function(fe,xe){const Ae={};for(let we=0;we<fe.length;we++){const Le=xe&&xe[fe[we].id]||nr(fe[we]);xe&&(xe[fe[we].id]=Le);let it=Ae[Le];it||(it=Ae[Le]=[]),it.push(fe[we])}const De=[];for(const we in Ae)De.push(Ae[we]);return De}(p.values(this._layerConfigs),this.keyCache);for(const fe of ne){const xe=fe.map(Mt=>this._layers[Mt.id]),Ae=xe[0];if("none"===Ae.visibility)continue;const De=Ae.source||"";let we=this.familiesBySource[De];we||(we=this.familiesBySource[De]={});const Le=Ae.sourceLayer||"_geojsonTileLayer";let it=we[Le];it||(it=we[Le]=[]),it.push(xe)}}}class s1{loadTile(U,G){const{uid:ne,encoding:fe,rawImageData:xe,padding:Ae,buildQuadTree:De}=U,we=p.window.ImageBitmap&&xe instanceof p.window.ImageBitmap?this.getImageData(xe,Ae):xe;G(null,new p.DEMData(ne,we,fe,Ae<1,De))}getImageData(U,G){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);const ne=this.offscreenCanvasContext.getImageData(-G,-G,U.width+2*G,U.height+2*G);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ne}}var m1=function ie(U,G){var ne,fe=U&&U.type;if("FeatureCollection"===fe)for(ne=0;ne<U.features.length;ne++)ie(U.features[ne],G);else if("GeometryCollection"===fe)for(ne=0;ne<U.geometries.length;ne++)ie(U.geometries[ne],G);else if("Feature"===fe)ie(U.geometry,G);else if("Polygon"===fe)fi(U.coordinates,G);else if("MultiPolygon"===fe)for(ne=0;ne<U.coordinates.length;ne++)fi(U.coordinates[ne],G);return U};function fi(ie,U){if(0!==ie.length){$i(ie[0],U);for(var G=1;G<ie.length;G++)$i(ie[G],!U)}}function $i(ie,U){for(var G=0,ne=0,fe=0,xe=ie.length,Ae=xe-1;fe<xe;Ae=fe++){var De=(ie[fe][0]-ie[Ae][0])*(ie[Ae][1]+ie[fe][1]),we=G+De;ne+=Math.abs(G)>=Math.abs(De)?G-we+De:De-we+G,G=we}G+ne>=0!=!!U&&ie.reverse()}const qi=p.VectorTileFeature.prototype.toGeoJSON;class Mo{constructor(U){this._feature=U,this.extent=p.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))}loadGeometry(){if(1===this._feature.type){const U=[];for(const G of this._feature.geometry)U.push([new p.pointGeometry(G[0],G[1])]);return U}{const U=[];for(const G of this._feature.geometry){const ne=[];for(const fe of G)ne.push(new p.pointGeometry(fe[0],fe[1]));U.push(ne)}return U}}toGeoJSON(U,G,ne){return qi.call(this,U,G,ne)}}class da{constructor(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.EXTENT,this.length=U.length,this._features=U}feature(U){return new Mo(this._features[U])}}var P2={},Zn={get exports(){return P2},set exports(ie){P2=ie}},Wi=p.pointGeometry,pt=p.vectorTile.VectorTileFeature,$1=Sr;function Sr(ie,U){this.options=U||{},this.features=ie,this.length=ie.length}function zo(ie,U){this.id="number"==typeof ie.id?ie.id:void 0,this.type=ie.type,this.rawGeometry=1===ie.type?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=U||4096}Sr.prototype.feature=function(ie){return new zo(this.features[ie],this.options.extent)},zo.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var U=0;U<ie.length;U++){for(var G=ie[U],ne=[],fe=0;fe<G.length;fe++)ne.push(new Wi(G[fe][0],G[fe][1]));this.geometry.push(ne)}return this.geometry},zo.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,U=1/0,G=-1/0,ne=1/0,fe=-1/0,xe=0;xe<ie.length;xe++)for(var Ae=ie[xe],De=0;De<Ae.length;De++){var we=Ae[De];U=Math.min(U,we.x),G=Math.max(G,we.x),ne=Math.min(ne,we.y),fe=Math.max(fe,we.y)}return[U,ne,G,fe]},zo.prototype.toGeoJSON=pt.prototype.toGeoJSON;var F1=p.pbf,ni=$1;function qr(ie){var U=new F1;return function(G,ne){for(var fe in G.layers)ne.writeMessage(3,fa,G.layers[fe])}(ie,U),U.finish()}function fa(ie,U){var G;U.writeVarintField(15,ie.version||1),U.writeStringField(1,ie.name||""),U.writeVarintField(5,ie.extent||4096);var ne={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<ie.length;G++)ne.feature=ie.feature(G),U.writeMessage(2,La,ne);var fe=ne.keys;for(G=0;G<fe.length;G++)U.writeStringField(3,fe[G]);var xe=ne.values;for(G=0;G<xe.length;G++)U.writeMessage(4,Dr,xe[G])}function La(ie,U){var G=ie.feature;void 0!==G.id&&U.writeVarintField(1,G.id),U.writeMessage(2,s2,ie),U.writeVarintField(3,G.type),U.writeMessage(4,b2,G)}function s2(ie,U){var G=ie.feature,ne=ie.keys,fe=ie.values,xe=ie.keycache,Ae=ie.valuecache;for(var De in G.properties){var we=G.properties[De],Le=xe[De];if(null!==we){void 0===Le&&(ne.push(De),xe[De]=Le=ne.length-1),U.writeVarint(Le);var it=typeof we;"string"!==it&&"boolean"!==it&&"number"!==it&&(we=JSON.stringify(we));var Mt=it+":"+we,tt=Ae[Mt];void 0===tt&&(fe.push(we),Ae[Mt]=tt=fe.length-1),U.writeVarint(tt)}}}function f1(ie,U){return(U<<3)+(7&ie)}function c2(ie){return ie<<1^ie>>31}function b2(ie,U){for(var G=ie.loadGeometry(),ne=ie.type,fe=0,xe=0,Ae=G.length,De=0;De<Ae;De++){var we=G[De],Le=1;1===ne&&(Le=we.length),U.writeVarint(f1(1,Le));for(var it=3===ne?we.length-1:we.length,Mt=0;Mt<it;Mt++){1===Mt&&1!==ne&&U.writeVarint(f1(2,it-1));var tt=we[Mt].x-fe,Tt=we[Mt].y-xe;U.writeVarint(c2(tt)),U.writeVarint(c2(Tt)),fe+=tt,xe+=Tt}3===ne&&U.writeVarint(f1(7,1))}}function Dr(ie,U){var G=typeof ie;"string"===G?U.writeStringField(1,ie):"boolean"===G?U.writeBooleanField(7,ie):"number"===G&&(ie%1!=0?U.writeDoubleField(3,ie):ie<0?U.writeSVarintField(6,ie):U.writeVarintField(5,ie))}function F2(ie,U,G,ne,fe,xe){if(fe-ne<=G)return;const Ae=ne+fe>>1;c1(ie,U,Ae,ne,fe,xe%2),F2(ie,U,G,ne,Ae-1,xe+1),F2(ie,U,G,Ae+1,fe,xe+1)}function c1(ie,U,G,ne,fe,xe){for(;fe>ne;){if(fe-ne>600){const Le=fe-ne+1,it=G-ne+1,Mt=Math.log(Le),tt=.5*Math.exp(2*Mt/3),Tt=.5*Math.sqrt(Mt*tt*(Le-tt)/Le)*(it-Le/2<0?-1:1);c1(ie,U,G,Math.max(ne,Math.floor(G-it*tt/Le+Tt)),Math.min(fe,Math.floor(G+(Le-it)*tt/Le+Tt)),xe)}const Ae=U[2*G+xe];let De=ne,we=fe;for(ir(ie,U,ne,G),U[2*fe+xe]>Ae&&ir(ie,U,ne,fe);De<we;){for(ir(ie,U,De,we),De++,we--;U[2*De+xe]<Ae;)De++;for(;U[2*we+xe]>Ae;)we--}U[2*ne+xe]===Ae?ir(ie,U,ne,we):(we++,ir(ie,U,we,fe)),we<=G&&(ne=we+1),G<=we&&(fe=we-1)}}function ir(ie,U,G,ne){Ta(ie,G,ne),Ta(U,2*G,2*ne),Ta(U,2*G+1,2*ne+1)}function Ta(ie,U,G){const ne=ie[U];ie[U]=ie[G],ie[G]=ne}function Wr(ie,U,G,ne){const fe=ie-G,xe=U-ne;return fe*fe+xe*xe}Zn.exports=qr,P2.fromVectorTileJs=qr,P2.fromGeojsonVt=function(ie,U){U=U||{};var G={};for(var ne in ie)G[ne]=new ni(ie[ne].features,U),G[ne].name=ne,G[ne].version=U.version,G[ne].extent=U.extent;return qr({layers:G})},P2.GeoJSONWrapper=ni;const rr=ie=>ie[0],Yt=ie=>ie[1];class ar{constructor(U,G=rr,ne=Yt,fe=64,xe=Float64Array){this.nodeSize=fe,this.points=U;const Ae=U.length<65536?Uint16Array:Uint32Array,De=this.ids=new Ae(U.length),we=this.coords=new xe(2*U.length);for(let Le=0;Le<U.length;Le++)De[Le]=Le,we[2*Le]=G(U[Le]),we[2*Le+1]=ne(U[Le]);F2(De,we,fe,0,De.length-1,0)}range(U,G,ne,fe){return function(xe,Ae,De,we,Le,it,Mt){const tt=[0,xe.length-1,0],Tt=[];let At,Rt;for(;tt.length;){const Ht=tt.pop(),b1=tt.pop(),Q1=tt.pop();if(b1-Q1<=Mt){for(let Cn=Q1;Cn<=b1;Cn++)At=Ae[2*Cn],Rt=Ae[2*Cn+1],At>=De&&At<=Le&&Rt>=we&&Rt<=it&&Tt.push(xe[Cn]);continue}const Wt=Math.floor((Q1+b1)/2);At=Ae[2*Wt],Rt=Ae[2*Wt+1],At>=De&&At<=Le&&Rt>=we&&Rt<=it&&Tt.push(xe[Wt]);const nn=(Ht+1)%2;(0===Ht?De<=At:we<=Rt)&&(tt.push(Q1),tt.push(Wt-1),tt.push(nn)),(0===Ht?Le>=At:it>=Rt)&&(tt.push(Wt+1),tt.push(b1),tt.push(nn))}return Tt}(this.ids,this.coords,U,G,ne,fe,this.nodeSize)}within(U,G,ne){return function(fe,xe,Ae,De,we,Le){const it=[0,fe.length-1,0],Mt=[],tt=we*we;for(;it.length;){const Tt=it.pop(),At=it.pop(),Rt=it.pop();if(At-Rt<=Le){for(let nn=Rt;nn<=At;nn++)Wr(xe[2*nn],xe[2*nn+1],Ae,De)<=tt&&Mt.push(fe[nn]);continue}const Ht=Math.floor((Rt+At)/2),b1=xe[2*Ht],Q1=xe[2*Ht+1];Wr(b1,Q1,Ae,De)<=tt&&Mt.push(fe[Ht]);const Wt=(Tt+1)%2;(0===Tt?Ae-we<=b1:De-we<=Q1)&&(it.push(Rt),it.push(Ht-1),it.push(Wt)),(0===Tt?Ae+we>=b1:De+we>=Q1)&&(it.push(Ht+1),it.push(At),it.push(Wt))}return Mt}(this.ids,this.coords,U,G,ne,this.nodeSize)}}const Ar={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},X1=Math.fround||(V1=new Float32Array(1),ie=>(V1[0]=+ie,V1[0]));var V1;class ii{constructor(U){this.options=l2(Object.create(Ar),U),this.trees=new Array(this.options.maxZoom+1)}load(U){const{log:G,minZoom:ne,maxZoom:fe,nodeSize:xe}=this.options;G&&console.time("total time");const Ae=`prepare ${U.length} points`;G&&console.time(Ae),this.points=U;let De=[];for(let we=0;we<U.length;we++)U[we].geometry&&De.push(tn(U[we],we));this.trees[fe+1]=new ar(De,ha,Kn,xe,Float32Array),G&&console.timeEnd(Ae);for(let we=fe;we>=ne;we--){const Le=+Date.now();De=this._cluster(De,we),this.trees[we]=new ar(De,ha,Kn,xe,Float32Array),G&&console.log("z%d: %d clusters in %dms",we,De.length,+Date.now()-Le)}return G&&console.timeEnd("total time"),this}getClusters(U,G){let ne=((U[0]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,U[1]));let xe=180===U[2]?180:((U[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)ne=-180,xe=180;else if(ne>xe){const it=this.getClusters([ne,fe,180,Ae],G),Mt=this.getClusters([-180,fe,xe,Ae],G);return it.concat(Mt)}const De=this.trees[this._limitZoom(G)],we=De.range(Er(ne),q1(Ae),Er(xe),q1(fe)),Le=[];for(const it of we){const Mt=De.points[it];Le.push(Mt.numPoints?or(Mt):this.points[Mt.index])}return Le}getChildren(U){const G=this._getOriginId(U),ne=this._getOriginZoom(U),fe="No cluster with the specified id.",xe=this.trees[ne];if(!xe)throw new Error(fe);const Ae=xe.points[G];if(!Ae)throw new Error(fe);const De=this.options.radius/(this.options.extent*Math.pow(2,ne-1)),we=xe.within(Ae.x,Ae.y,De),Le=[];for(const it of we){const Mt=xe.points[it];Mt.parentId===U&&Le.push(Mt.numPoints?or(Mt):this.points[Mt.index])}if(0===Le.length)throw new Error(fe);return Le}getLeaves(U,G,ne){const fe=[];return this._appendLeaves(fe,U,G=G||10,ne=ne||0,0),fe}getTile(U,G,ne){const fe=this.trees[this._limitZoom(U)],xe=Math.pow(2,U),{extent:Ae,radius:De}=this.options,we=De/Ae,Le=(ne-we)/xe,it=(ne+1+we)/xe,Mt={features:[]};return this._addTileFeatures(fe.range((G-we)/xe,Le,(G+1+we)/xe,it),fe.points,G,ne,xe,Mt),0===G&&this._addTileFeatures(fe.range(1-we/xe,Le,1,it),fe.points,xe,ne,xe,Mt),G===xe-1&&this._addTileFeatures(fe.range(0,Le,we/xe,it),fe.points,-1,ne,xe,Mt),Mt.features.length?Mt:null}getClusterExpansionZoom(U){let G=this._getOriginZoom(U)-1;for(;G<=this.options.maxZoom;){const ne=this.getChildren(U);if(G++,1!==ne.length)break;U=ne[0].properties.cluster_id}return G}_appendLeaves(U,G,ne,fe,xe){const Ae=this.getChildren(G);for(const De of Ae){const we=De.properties;if(we&&we.cluster?xe+we.point_count<=fe?xe+=we.point_count:xe=this._appendLeaves(U,we.cluster_id,ne,fe,xe):xe<fe?xe++:U.push(De),U.length===ne)break}return xe}_addTileFeatures(U,G,ne,fe,xe,Ae){for(const De of U){const we=G[De],Le=we.numPoints;let it,Mt,tt;if(Le)it=K1(we),Mt=we.x,tt=we.y;else{const Rt=this.points[we.index];it=Rt.properties,Mt=Er(Rt.geometry.coordinates[0]),tt=q1(Rt.geometry.coordinates[1])}const Tt={type:1,geometry:[[Math.round(this.options.extent*(Mt*xe-ne)),Math.round(this.options.extent*(tt*xe-fe))]],tags:it};let At;Le?At=we.id:this.options.generateId?At=we.index:this.points[we.index].id&&(At=this.points[we.index].id),void 0!==At&&(Tt.id=At),Ae.features.push(Tt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,G){const ne=[],{radius:fe,extent:xe,reduce:Ae,minPoints:De}=this.options,we=fe/(xe*Math.pow(2,G));for(let Le=0;Le<U.length;Le++){const it=U[Le];if(it.zoom<=G)continue;it.zoom=G;const Mt=this.trees[G+1],tt=Mt.within(it.x,it.y,we),Tt=it.numPoints||1;let At=Tt;for(const Rt of tt){const Ht=Mt.points[Rt];Ht.zoom>G&&(At+=Ht.numPoints||1)}if(At>Tt&&At>=De){let Rt=it.x*Tt,Ht=it.y*Tt,b1=Ae&&Tt>1?this._map(it,!0):null;const Q1=(Le<<5)+(G+1)+this.points.length;for(const Wt of tt){const nn=Mt.points[Wt];if(nn.zoom<=G)continue;nn.zoom=G;const Cn=nn.numPoints||1;Rt+=nn.x*Cn,Ht+=nn.y*Cn,nn.parentId=Q1,Ae&&(b1||(b1=this._map(it,!0)),Ae(b1,this._map(nn)))}it.parentId=Q1,ne.push(t1(Rt/At,Ht/At,Q1,At,b1))}else if(ne.push(it),At>1)for(const Rt of tt){const Ht=Mt.points[Rt];Ht.zoom<=G||(Ht.zoom=G,ne.push(Ht))}}return ne}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,G){if(U.numPoints)return G?l2({},U.properties):U.properties;const ne=this.points[U.index].properties,fe=this.options.map(ne);return G&&fe===ne?l2({},fe):fe}}function t1(ie,U,G,ne,fe){return{x:X1(ie),y:X1(U),zoom:1/0,id:G,parentId:-1,numPoints:ne,properties:fe}}function tn(ie,U){const[G,ne]=ie.geometry.coordinates;return{x:X1(Er(G)),y:X1(q1(ne)),zoom:1/0,index:U,parentId:-1}}function or(ie){return{type:"Feature",id:ie.id,properties:K1(ie),geometry:{type:"Point",coordinates:[(U=ie.x,360*(U-.5)),N2(ie.y)]}};var U}function K1(ie){const U=ie.numPoints,G=U>=1e4?`${Math.round(U/1e3)}k`:U>=1e3?Math.round(U/100)/10+"k":U;return l2(l2({},ie.properties),{cluster:!0,cluster_id:ie.id,point_count:U,point_count_abbreviated:G})}function Er(ie){return ie/360+.5}function q1(ie){const U=Math.sin(ie*Math.PI/180),G=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return G<0?0:G>1?1:G}function N2(ie){const U=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function l2(ie,U){for(const G in U)ie[G]=U[G];return ie}function ha(ie){return ie.x}function Kn(ie){return ie.y}function li(ie,U,G,ne){for(var fe,xe=ne,Ae=G-U>>1,De=G-U,we=ie[U],Le=ie[U+1],it=ie[G],Mt=ie[G+1],tt=U+3;tt<G;tt+=3){var Tt=Vr(ie[tt],ie[tt+1],we,Le,it,Mt);if(Tt>xe)fe=tt,xe=Tt;else if(Tt===xe){var At=Math.abs(tt-Ae);At<De&&(fe=tt,De=At)}}xe>ne&&(fe-U>3&&li(ie,U,fe,ne),ie[fe+2]=xe,G-fe>3&&li(ie,fe,G,ne))}function Vr(ie,U,G,ne,fe,xe){var Ae=fe-G,De=xe-ne;if(0!==Ae||0!==De){var we=((ie-G)*Ae+(U-ne)*De)/(Ae*Ae+De*De);we>1?(G=fe,ne=xe):we>0&&(G+=Ae*we,ne+=De*we)}return(Ae=ie-G)*Ae+(De=U-ne)*De}function O2(ie,U,G,ne){var fe={id:void 0===ie?null:ie,type:U,geometry:G,tags:ne,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(xe){var Ae=xe.geometry,De=xe.type;if("Point"===De||"MultiPoint"===De||"LineString"===De)Li(xe,Ae);else if("Polygon"===De||"MultiLineString"===De)for(var we=0;we<Ae.length;we++)Li(xe,Ae[we]);else if("MultiPolygon"===De)for(we=0;we<Ae.length;we++)for(var Le=0;Le<Ae[we].length;Le++)Li(xe,Ae[we][Le])}(fe),fe}function Li(ie,U){for(var G=0;G<U.length;G+=3)ie.minX=Math.min(ie.minX,U[G]),ie.minY=Math.min(ie.minY,U[G+1]),ie.maxX=Math.max(ie.maxX,U[G]),ie.maxY=Math.max(ie.maxY,U[G+1])}function So(ie,U,G,ne){if(U.geometry){var fe=U.geometry.coordinates,xe=U.geometry.type,Ae=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),De=[],we=U.id;if(G.promoteId?we=U.properties[G.promoteId]:G.generateId&&(we=ne||0),"Point"===xe)js(fe,De);else if("MultiPoint"===xe)for(var Le=0;Le<fe.length;Le++)js(fe[Le],De);else if("LineString"===xe)Zr(fe,De,Ae,!1);else if("MultiLineString"===xe){if(G.lineMetrics){for(Le=0;Le<fe.length;Le++)Zr(fe[Le],De=[],Ae,!1),ie.push(O2(we,"LineString",De,U.properties));return}Ha(fe,De,Ae,!1)}else if("Polygon"===xe)Ha(fe,De,Ae,!0);else{if("MultiPolygon"!==xe){if("GeometryCollection"===xe){for(Le=0;Le<U.geometry.geometries.length;Le++)So(ie,{id:we,geometry:U.geometry.geometries[Le],properties:U.properties},G,ne);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Le=0;Le<fe.length;Le++){var it=[];Ha(fe[Le],it,Ae,!0),De.push(it)}}ie.push(O2(we,xe,De,U.properties))}}function js(ie,U){U.push(Gs(ie[0])),U.push($s(ie[1])),U.push(0)}function Zr(ie,U,G,ne){for(var fe,xe,Ae=0,De=0;De<ie.length;De++){var we=Gs(ie[De][0]),Le=$s(ie[De][1]);U.push(we),U.push(Le),U.push(0),De>0&&(Ae+=ne?(fe*Le-we*xe)/2:Math.sqrt(Math.pow(we-fe,2)+Math.pow(Le-xe,2))),fe=we,xe=Le}var it=U.length-3;U[2]=1,li(U,0,it,G),U[it+2]=1,U.size=Math.abs(Ae),U.start=0,U.end=U.size}function Ha(ie,U,G,ne){for(var fe=0;fe<ie.length;fe++){var xe=[];Zr(ie[fe],xe,G,ne),U.push(xe)}}function Gs(ie){return ie/360+.5}function $s(ie){var U=Math.sin(ie*Math.PI/180),G=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return G<0?0:G>1?1:G}function p1(ie,U,G,ne,fe,xe,Ae,De){if(ne/=U,xe>=(G/=U)&&Ae<ne)return ie;if(Ae<G||xe>=ne)return null;for(var we=[],Le=0;Le<ie.length;Le++){var it=ie[Le],Mt=it.geometry,tt=it.type,Tt=0===fe?it.minX:it.minY,At=0===fe?it.maxX:it.maxY;if(Tt>=G&&At<ne)we.push(it);else if(!(At<G||Tt>=ne)){var Rt=[];if("Point"===tt||"MultiPoint"===tt)Lr(Mt,Rt,G,ne,fe);else if("LineString"===tt)ka(Mt,Rt,G,ne,fe,!1,De.lineMetrics);else if("MultiLineString"===tt)qs(Mt,Rt,G,ne,fe,!1);else if("Polygon"===tt)qs(Mt,Rt,G,ne,fe,!0);else if("MultiPolygon"===tt)for(var Ht=0;Ht<Mt.length;Ht++){var b1=[];qs(Mt[Ht],b1,G,ne,fe,!0),b1.length&&Rt.push(b1)}if(Rt.length){if(De.lineMetrics&&"LineString"===tt){for(Ht=0;Ht<Rt.length;Ht++)we.push(O2(it.id,tt,Rt[Ht],it.tags));continue}"LineString"!==tt&&"MultiLineString"!==tt||(1===Rt.length?(tt="LineString",Rt=Rt[0]):tt="MultiLineString"),"Point"!==tt&&"MultiPoint"!==tt||(tt=3===Rt.length?"Point":"MultiPoint"),we.push(O2(it.id,tt,Rt,it.tags))}}}return we.length?we:null}function Lr(ie,U,G,ne,fe){for(var xe=0;xe<ie.length;xe+=3){var Ae=ie[xe+fe];Ae>=G&&Ae<=ne&&(U.push(ie[xe]),U.push(ie[xe+1]),U.push(ie[xe+2]))}}function ka(ie,U,G,ne,fe,xe,Ae){for(var De,we,Le=Do(ie),it=0===fe?sr:Qo,Mt=ie.start,tt=0;tt<ie.length-3;tt+=3){var Tt=ie[tt],At=ie[tt+1],Rt=ie[tt+2],Ht=ie[tt+3],b1=ie[tt+4],Q1=0===fe?Tt:At,Wt=0===fe?Ht:b1,nn=!1;Ae&&(De=Math.sqrt(Math.pow(Tt-Ht,2)+Math.pow(At-b1,2))),Q1<G?Wt>G&&(we=it(Le,Tt,At,Ht,b1,G),Ae&&(Le.start=Mt+De*we)):Q1>ne?Wt<ne&&(we=it(Le,Tt,At,Ht,b1,ne),Ae&&(Le.start=Mt+De*we)):Ws(Le,Tt,At,Rt),Wt<G&&Q1>=G&&(we=it(Le,Tt,At,Ht,b1,G),nn=!0),Wt>ne&&Q1<=ne&&(we=it(Le,Tt,At,Ht,b1,ne),nn=!0),!xe&&nn&&(Ae&&(Le.end=Mt+De*we),U.push(Le),Le=Do(ie)),Ae&&(Mt+=De)}var Cn=ie.length-3;Tt=ie[Cn],At=ie[Cn+1],Rt=ie[Cn+2],(Q1=0===fe?Tt:At)>=G&&Q1<=ne&&Ws(Le,Tt,At,Rt),Cn=Le.length-3,xe&&Cn>=3&&(Le[Cn]!==Le[0]||Le[Cn+1]!==Le[1])&&Ws(Le,Le[0],Le[1],Le[2]),Le.length&&U.push(Le)}function Do(ie){var U=[];return U.size=ie.size,U.start=ie.start,U.end=ie.end,U}function qs(ie,U,G,ne,fe,xe){for(var Ae=0;Ae<ie.length;Ae++)ka(ie[Ae],U,G,ne,fe,xe,!1)}function Ws(ie,U,G,ne){ie.push(U),ie.push(G),ie.push(ne)}function sr(ie,U,G,ne,fe,xe){var Ae=(xe-U)/(ne-U);return ie.push(xe),ie.push(G+(fe-G)*Ae),ie.push(1),Ae}function Qo(ie,U,G,ne,fe,xe){var Ae=(xe-G)/(fe-G);return ie.push(U+(ne-U)*Ae),ie.push(xe),ie.push(1),Ae}function jc(ie,U){for(var G=[],ne=0;ne<ie.length;ne++){var fe,xe=ie[ne],Ae=xe.type;if("Point"===Ae||"MultiPoint"===Ae||"LineString"===Ae)fe=Jo(xe.geometry,U);else if("MultiLineString"===Ae||"Polygon"===Ae){fe=[];for(var De=0;De<xe.geometry.length;De++)fe.push(Jo(xe.geometry[De],U))}else if("MultiPolygon"===Ae)for(fe=[],De=0;De<xe.geometry.length;De++){for(var we=[],Le=0;Le<xe.geometry[De].length;Le++)we.push(Jo(xe.geometry[De][Le],U));fe.push(we)}G.push(O2(xe.id,Ae,fe,xe.tags))}return G}function Jo(ie,U){var G=[];G.size=ie.size,void 0!==ie.start&&(G.start=ie.start,G.end=ie.end);for(var ne=0;ne<ie.length;ne+=3)G.push(ie[ne]+U,ie[ne+1],ie[ne+2]);return G}function Yr(ie,U){if(ie.transformed)return ie;var G,ne,fe,xe=1<<ie.z,Ae=ie.x,De=ie.y;for(G=0;G<ie.features.length;G++){var we=ie.features[G],Le=we.geometry,it=we.type;if(we.geometry=[],1===it)for(ne=0;ne<Le.length;ne+=2)we.geometry.push(es(Le[ne],Le[ne+1],U,xe,Ae,De));else for(ne=0;ne<Le.length;ne++){var Mt=[];for(fe=0;fe<Le[ne].length;fe+=2)Mt.push(es(Le[ne][fe],Le[ne][fe+1],U,xe,Ae,De));we.geometry.push(Mt)}}return ie.transformed=!0,ie}function es(ie,U,G,ne,fe,xe){return[Math.round(G*(ie*ne-fe)),Math.round(G*(U*ne-xe))]}function Ia(ie,U,G,ne,fe){for(var xe=U===fe.maxZoom?0:fe.tolerance/((1<<U)*fe.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:ne,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<ie.length;De++){Ae.numFeatures++,Zs(Ae,ie[De],xe,fe);var we=ie[De].minX,Le=ie[De].minY,it=ie[De].maxX,Mt=ie[De].maxY;we<Ae.minX&&(Ae.minX=we),Le<Ae.minY&&(Ae.minY=Le),it>Ae.maxX&&(Ae.maxX=it),Mt>Ae.maxY&&(Ae.maxY=Mt)}return Ae}function Zs(ie,U,G,ne){var fe=U.geometry,xe=U.type,Ae=[];if("Point"===xe||"MultiPoint"===xe)for(var De=0;De<fe.length;De+=3)Ae.push(fe[De]),Ae.push(fe[De+1]),ie.numPoints++,ie.numSimplified++;else if("LineString"===xe)Ao(Ae,fe,ie,G,!1,!1);else if("MultiLineString"===xe||"Polygon"===xe)for(De=0;De<fe.length;De++)Ao(Ae,fe[De],ie,G,"Polygon"===xe,0===De);else if("MultiPolygon"===xe)for(var we=0;we<fe.length;we++){var Le=fe[we];for(De=0;De<Le.length;De++)Ao(Ae,Le[De],ie,G,!0,0===De)}if(Ae.length){var it=U.tags||null;if("LineString"===xe&&ne.lineMetrics){for(var Mt in it={},U.tags)it[Mt]=U.tags[Mt];it.mapbox_clip_start=fe.start/fe.size,it.mapbox_clip_end=fe.end/fe.size}var tt={geometry:Ae,type:"Polygon"===xe||"MultiPolygon"===xe?3:"LineString"===xe||"MultiLineString"===xe?2:1,tags:it};null!==U.id&&(tt.id=U.id),ie.features.push(tt)}}function Ao(ie,U,G,ne,fe,xe){var Ae=ne*ne;if(ne>0&&U.size<(fe?Ae:ne))G.numPoints+=U.length/3;else{for(var De=[],we=0;we<U.length;we+=3)(0===ne||U[we+2]>Ae)&&(G.numSimplified++,De.push(U[we]),De.push(U[we+1])),G.numPoints++;fe&&function(Le,it){for(var Mt=0,tt=0,Tt=Le.length,At=Tt-2;tt<Tt;At=tt,tt+=2)Mt+=(Le[tt]-Le[At])*(Le[tt+1]+Le[At+1]);if(Mt>0===it)for(tt=0,Tt=Le.length;tt<Tt/2;tt+=2){var Rt=Le[tt],Ht=Le[tt+1];Le[tt]=Le[Tt-2-tt],Le[tt+1]=Le[Tt-1-tt],Le[Tt-2-tt]=Rt,Le[Tt-1-tt]=Ht}}(De,xe),ie.push(De)}}function cr(ie,U){var G=(U=this.options=function(fe,xe){for(var Ae in xe)fe[Ae]=xe[Ae];return fe}(Object.create(this.options),U)).debug;if(G&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var fe,xe,Ae,De,we,Le,ne=function(fe,xe){var Ae=[];if("FeatureCollection"===fe.type)for(var De=0;De<fe.features.length;De++)So(Ae,fe.features[De],xe,De);else So(Ae,"Feature"===fe.type?fe:{geometry:fe},xe);return Ae}(ie,U);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=fe=ne,we=p1(fe,1,-1-(Ae=(xe=U).buffer/xe.extent),Ae,0,-1,2,xe),Le=p1(fe,1,1-Ae,2+Ae,0,-1,2,xe),(we||Le)&&(De=p1(fe,1,-Ae,1+Ae,0,-1,2,xe)||[],we&&(De=jc(we,1).concat(De)),Le&&(De=De.concat(jc(Le,-1)))),(ne=De).length&&this.splitTile(ne,0,0,0),G&&(ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function x2(ie,U,G){return 32*((1<<ie)*G+U)+ie}function Ra(ie,U){const G=ie.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);const ne=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!ne)return U(null,null);const fe=new da(ne.features);let xe=P2(fe);0===xe.byteOffset&&xe.byteLength===xe.buffer.byteLength||(xe=new Uint8Array(xe)),U(null,{vectorTile:fe,rawData:xe.buffer})}cr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},cr.prototype.splitTile=function(ie,U,G,ne,fe,xe,Ae){for(var De=[ie,U,G,ne],we=this.options,Le=we.debug;De.length;){ne=De.pop(),G=De.pop(),U=De.pop(),ie=De.pop();var it=1<<U,Mt=x2(U,G,ne),tt=this.tiles[Mt];if(!tt&&(Le>1&&console.time("creation"),tt=this.tiles[Mt]=Ia(ie,U,G,ne,we),this.tileCoords.push({z:U,x:G,y:ne}),Le)){Le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,G,ne,tt.numFeatures,tt.numPoints,tt.numSimplified),console.timeEnd("creation"));var Tt="z"+U;this.stats[Tt]=(this.stats[Tt]||0)+1,this.total++}if(tt.source=ie,fe){if(U===we.maxZoom||U===fe)continue;var At=1<<fe-U;if(G!==Math.floor(xe/At)||ne!==Math.floor(Ae/At))continue}else if(U===we.indexMaxZoom||tt.numPoints<=we.indexMaxPoints)continue;if(tt.source=null,0!==ie.length){Le>1&&console.time("clipping");var Rt,Ht,b1,Q1,Wt,nn,Cn=.5*we.buffer/we.extent,pa=.5-Cn,Xr=.5+Cn,qe=1+Cn;Rt=Ht=b1=Q1=null,Wt=p1(ie,it,G-Cn,G+Xr,0,tt.minX,tt.maxX,we),nn=p1(ie,it,G+pa,G+qe,0,tt.minX,tt.maxX,we),ie=null,Wt&&(Rt=p1(Wt,it,ne-Cn,ne+Xr,1,tt.minY,tt.maxY,we),Ht=p1(Wt,it,ne+pa,ne+qe,1,tt.minY,tt.maxY,we),Wt=null),nn&&(b1=p1(nn,it,ne-Cn,ne+Xr,1,tt.minY,tt.maxY,we),Q1=p1(nn,it,ne+pa,ne+qe,1,tt.minY,tt.maxY,we),nn=null),Le>1&&console.timeEnd("clipping"),De.push(Rt||[],U+1,2*G,2*ne),De.push(Ht||[],U+1,2*G,2*ne+1),De.push(b1||[],U+1,2*G+1,2*ne),De.push(Q1||[],U+1,2*G+1,2*ne+1)}}},cr.prototype.getTile=function(ie,U,G){var ne=this.options,fe=ne.extent,xe=ne.debug;if(ie<0||ie>24)return null;var Ae=1<<ie,De=x2(ie,U=(U%Ae+Ae)%Ae,G);if(this.tiles[De])return Yr(this.tiles[De],fe);xe>1&&console.log("drilling down to z%d-%d-%d",ie,U,G);for(var we,Le=ie,it=U,Mt=G;!we&&Le>0;)Le--,it=Math.floor(it/2),Mt=Math.floor(Mt/2),we=this.tiles[x2(Le,it,Mt)];return we&&we.source?(xe>1&&console.log("found parent tile z%d-%d-%d",Le,it,Mt),xe>1&&console.time("drilling down"),this.splitTile(we.source,Le,it,Mt,ie,U,G),xe>1&&console.timeEnd("drilling down"),this.tiles[De]?Yr(this.tiles[De],fe):null):null};class Ys extends p.VectorTileWorkerSource{constructor(U,G,ne,fe,xe){super(U,G,ne,fe,Ra),xe&&(this.loadGeoJSON=xe)}loadData(U,G){const ne=U&&U.request,fe=ne&&ne.collectResourceTiming;this.loadGeoJSON(U,(xe,Ae)=>{if(xe||!Ae)return G(xe);if("object"!=typeof Ae)return G(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));{m1(Ae,!0);try{if(U.filter){const we=p.createExpression(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===we.result)throw new Error(we.value.map(it=>`${it.key}: ${it.message}`).join(", "));Ae={type:"FeatureCollection",features:Ae.features.filter(it=>we.value.evaluate({zoom:0},it))}}this._geoJSONIndex=U.cluster?new ii(function({superclusterOptions:we,clusterProperties:Le}){if(!Le||!we)return we;const it={},Mt={},tt={accumulated:null,zoom:0},Tt={properties:null},At=Object.keys(Le);for(const Rt of At){const[Ht,b1]=Le[Rt],Q1=p.createExpression(b1),Wt=p.createExpression("string"==typeof Ht?[Ht,["accumulated"],["get",Rt]]:Ht);it[Rt]=Q1.value,Mt[Rt]=Wt.value}return we.map=Rt=>{Tt.properties=Rt;const Ht={};for(const b1 of At)Ht[b1]=it[b1].evaluate(tt,Tt);return Ht},we.reduce=(Rt,Ht)=>{Tt.properties=Ht;for(const b1 of At)tt.accumulated=Rt[b1],Rt[b1]=Mt[b1].evaluate(tt,Tt)},we}(U)).load(Ae.features):new cr(we=Ae,U.geojsonVtOptions)}catch(we){return G(we)}this.loaded={};const De={};if(fe){const we=p.getPerformanceMeasurement(ne);we&&(De.resourceTiming={},De.resourceTiming[U.source]=JSON.parse(JSON.stringify(we)))}G(null,De)}var we})}reloadTile(U,G){const ne=this.loaded;return ne&&ne[U.uid]?super.reloadTile(U,G):this.loadTile(U,G)}loadGeoJSON(U,G){if(U.request)p.getJSON(U.request,G);else{if("string"!=typeof U.data)return G(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));try{return G(null,JSON.parse(U.data))}catch{return G(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(U,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(ne){G(ne)}}getClusterChildren(U,G){try{G(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(ne){G(ne)}}getClusterLeaves(U,G){try{G(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(ne){G(ne)}}}class Pa{constructor(U){this.self=U,this.actor=new p.Actor(U,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=p.getProjection({name:"mercator"}),this.workerSourceTypes={vector:p.VectorTileWorkerSource,geojson:Ys},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,ne)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=ne},this.self.registerRTLTextPlugin=G=>{if(p.plugin.isParsed())throw new Error("RTL text plugin already registered.");p.plugin.applyArabicShaping=G.applyArabicShaping,p.plugin.processBidirectionalText=G.processBidirectionalText,p.plugin.processStyledBidirectionalText=G.processStyledBidirectionalText}}clearCaches(U,G,ne){delete this.layerIndexes[U],delete this.availableImages[U],delete this.workerSources[U],delete this.demWorkerSources[U],ne()}checkIfReady(U,G,ne){ne()}setReferrer(U,G){this.referrer=G}spriteLoaded(U,G){this.isSpriteLoaded[U]=G;for(const ne in this.workerSources[U]){const fe=this.workerSources[U][ne];for(const xe in fe)fe[xe]instanceof p.VectorTileWorkerSource&&(fe[xe].isSpriteLoaded=G,fe[xe].fire(new p.Event("isSpriteLoaded")))}}setImages(U,G,ne){this.availableImages[U]=G;for(const fe in this.workerSources[U]){const xe=this.workerSources[U][fe];for(const Ae in xe)xe[Ae].availableImages=G}ne()}enableTerrain(U,G,ne){this.terrain=G,ne()}setProjection(U,G){this.projections[U]=p.getProjection(G)}setLayers(U,G,ne){this.getLayerIndex(U).replace(G),ne()}updateLayers(U,G,ne){this.getLayerIndex(U).update(G.layers,G.removedIds),ne()}loadTile(U,G,ne){const fe=this.enableTerrain?p.extend({enableTerrain:this.terrain},G):G;fe.projection=this.projections[U]||this.defaultProjection,this.getWorkerSource(U,G.type,G.source).loadTile(fe,ne)}loadDEMTile(U,G,ne){const fe=this.enableTerrain?p.extend({buildQuadTree:this.terrain},G):G;this.getDEMWorkerSource(U,G.source).loadTile(fe,ne)}reloadTile(U,G,ne){const fe=this.enableTerrain?p.extend({enableTerrain:this.terrain},G):G;fe.projection=this.projections[U]||this.defaultProjection,this.getWorkerSource(U,G.type,G.source).reloadTile(fe,ne)}abortTile(U,G,ne){this.getWorkerSource(U,G.type,G.source).abortTile(G,ne)}removeTile(U,G,ne){this.getWorkerSource(U,G.type,G.source).removeTile(G,ne)}removeSource(U,G,ne){if(!this.workerSources[U]||!this.workerSources[U][G.type]||!this.workerSources[U][G.type][G.source])return;const fe=this.workerSources[U][G.type][G.source];delete this.workerSources[U][G.type][G.source],void 0!==fe.removeSource?fe.removeSource(G,ne):ne()}loadWorkerSource(U,G,ne){try{this.self.importScripts(G.url),ne()}catch(fe){ne(fe.toString())}}syncRTLPluginState(U,G,ne){try{p.plugin.setState(G);const fe=p.plugin.getPluginURL();if(p.plugin.isLoaded()&&!p.plugin.isParsed()&&null!=fe){this.self.importScripts(fe);const xe=p.plugin.isParsed();ne(xe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${fe}`),xe)}}catch(fe){ne(fe.toString())}}getAvailableImages(U){let G=this.availableImages[U];return G||(G=[]),G}getLayerIndex(U){let G=this.layerIndexes[U];return G||(G=this.layerIndexes[U]=new $n),G}getWorkerSource(U,G,ne){return this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][G]||(this.workerSources[U][G]={}),this.workerSources[U][G][ne]||(this.workerSources[U][G][ne]=new this.workerSourceTypes[G]({send:(xe,Ae,De,we,Le,it)=>{this.actor.send(xe,Ae,De,U,Le,it)},scheduler:this.actor.scheduler},this.getLayerIndex(U),this.getAvailableImages(U),this.isSpriteLoaded[U])),this.workerSources[U][G][ne]}getDEMWorkerSource(U,G){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][G]||(this.demWorkerSources[U][G]=new s1),this.demWorkerSources[U][G]}enforceCacheSizeLimit(U,G){p.enforceCacheSizeLimit(G)}getWorkerPerformanceMetrics(U,G,ne){ne(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Pa(self)),Pa}),Qe(0,function(p){function Ye(m,l){if(Array.isArray(m)){if(!Array.isArray(l)||m.length!==l.length)return!1;for(let f=0;f<m.length;f++)if(!Ye(m[f],l[f]))return!1;return!0}if("object"==typeof m&&null!==m&&null!==l){if("object"!=typeof l||Object.keys(m).length!==Object.keys(l).length)return!1;for(const f in m)if(!Ye(m[f],l[f]))return!1;return!0}return m===l}var nr=$n;function $n(m){return l=m,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var v,b,w=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(w);try{b=new Worker(D),v=!0}catch{v=!1}return b&&b.terminate(),URL.revokeObjectURL(D),v}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var v=document.createElement("canvas");v.width=v.height=1;var b=v.getContext("2d");if(!b)return!1;var w=b.getImageData(0,0,1,1);return w&&w.width===v.width}()||(void 0===s1[f=l&&l.failIfMajorPerformanceCaveat]&&(s1[f]=function(v){var b,D,A,L,w=(D=v,A=document.createElement("canvas"),(L=Object.create($n.webGLContextAttributes)).failIfMajorPerformanceCaveat=D,A.getContext("webgl",L)||A.getContext("experimental-webgl",L));if(!w)return!1;try{b=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!b||w.isContextLost())&&(w.shaderSource(b,"void main() {}"),w.compileShader(b),!0===w.getShaderParameter(b,w.COMPILE_STATUS))}(f)),!s1[f]||document.documentMode));var l,f}var s1={};function m1(m,l,f){const v=p.window.document.createElement(m);return void 0!==l&&(v.className=l),f&&f.appendChild(v),v}function fi(m,l,f){const v=p.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const b of Object.keys(l))v.setAttributeNS(null,b,l[b]);return f&&f.appendChild(v),v}$n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const $i=p.window.document&&p.window.document.documentElement.style,qi=$i&&void 0!==$i.userSelect?"userSelect":"WebkitUserSelect";let Mo;function da(){$i&&qi&&(Mo=$i[qi],$i[qi]="none")}function P2(){$i&&qi&&($i[qi]=Mo)}function Zn(m){m.preventDefault(),m.stopPropagation(),p.window.removeEventListener("click",Zn,!0)}function Wi(){p.window.addEventListener("click",Zn,!0),p.window.setTimeout(()=>{p.window.removeEventListener("click",Zn,!0)},0)}function pt(m,l){const f=m.getBoundingClientRect();return zo(m,f,l)}function $1(m,l){const f=m.getBoundingClientRect(),v=[];for(let b=0;b<l.length;b++)v.push(zo(m,f,l[b]));return v}function Sr(m){return void 0!==p.window.InstallTrigger&&2===m.button&&m.ctrlKey&&p.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function zo(m,l,f){const v=m.offsetWidth===l.width?1:m.offsetWidth/l.width;return new p.pointGeometry((f.clientX-l.left)*v,(f.clientY-l.top)*v)}function F1(m,l){var f=l[0],v=l[1],b=l[2],w=l[3],D=f*w-b*v;return D?(m[0]=w*(D=1/D),m[1]=-v*D,m[2]=-b*D,m[3]=f*D,m):null}function ni(m){const{userImage:l}=m;return!!(l&&l.render&&l.render())&&(m.data.replace(new Uint8Array(l.data.buffer)),!0)}class qr extends p.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new p.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:v}of this.requestors)this._notify(f,v);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,f){this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let v=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),v=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),v=!1),this._validateContent(f.content,f)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),v=!1),v}_validateStretch(l,f){if(!l)return!0;let v=0;for(const b of l){if(b[0]<v||b[1]<b[0]||f<b[1])return!1;v=b[1]}return!0}_validateContent(l,f){return!(l&&(4!==l.length||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){f.version=this.images[l].version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let v=!0;if(!this.isLoaded())for(const b of l)this.images[b]||(v=!1);this.isLoaded()||v?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const v={};for(const b of l){this.images[b]||this.fire(new p.Event("styleimagemissing",{id:b}));const w=this.images[b];w?v[b]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:Boolean(w.userImage&&w.userImage.render)}:p.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,v)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],v=this.getImage(l);if(!v)return null;if(f&&f.position.version===v.version)return f.position;if(f)f.position.version=v.version;else{const b={w:v.data.width+2,h:v.data.height+2,x:0,y:0},w=new p.ImagePosition(b,v);this.patterns[l]={bin:b,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new p.Texture(l,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:f,h:v}=p.potpack(l),b=this.atlasImage;b.resize({width:f||1,height:v||1});for(const w in this.patterns){const{bin:D}=this.patterns[w],A=D.x+1,L=D.y+1,P=this.images[w].data,R=P.width,B=P.height;p.RGBAImage.copy(P,b,{x:0,y:0},{x:A,y:L},{width:R,height:B}),p.RGBAImage.copy(P,b,{x:0,y:B-1},{x:A,y:L-1},{width:R,height:1}),p.RGBAImage.copy(P,b,{x:0,y:0},{x:A,y:L+B},{width:R,height:1}),p.RGBAImage.copy(P,b,{x:R-1,y:0},{x:A-1,y:L},{width:1,height:B}),p.RGBAImage.copy(P,b,{x:0,y:0},{x:A+R,y:L},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const v=this.images[f];ni(v)&&this.updateImage(f,v)}}}const fa=new p.Properties({anchor:new p.DataConstantProperty(p.spec.light.anchor),position:new class{constructor(){this.specification=p.spec.light.position}possiblyEvaluate(m,l){return function([f,v,b]){const w=p.degToRad(v+90),D=p.degToRad(b);return{x:f*Math.cos(w)*Math.sin(D),y:f*Math.sin(w)*Math.sin(D),z:f*Math.cos(D),azimuthal:v,polar:b}}(m.expression.evaluate(l))}interpolate(m,l,f){return{x:p.number(m.x,l.x,f),y:p.number(m.y,l.y,f),z:p.number(m.z,l.z,f),azimuthal:p.number(m.azimuthal,l.azimuthal,f),polar:p.number(m.polar,l.polar,f)}}},color:new p.DataConstantProperty(p.spec.light.color),intensity:new p.DataConstantProperty(p.spec.light.intensity)}),La="-transition";class s2 extends p.Evented{constructor(l){super(),this._transitionable=new p.Transitionable(fa),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(p.validateLight,l,f))for(const v in l){const b=l[v];p.endsWith(v,La)?this._transitionable.setTransition(v.slice(0,-La.length),b):this._transitionable.setValue(v,b)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,v){return(!v||!1!==v.validate)&&p.emitValidationErrors(this,l.call(p.validateStyle,p.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}const f1=new p.Properties({source:new p.DataConstantProperty(p.spec.terrain.source),exaggeration:new p.DataConstantProperty(p.spec.terrain.exaggeration)}),c2="-transition";class b2 extends p.Evented{constructor(l,f){super(),this._transitionable=new p.Transitionable(f1),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(l){for(const f in l){const v=l[f];p.endsWith(f,c2)?this._transitionable.setTransition(f.slice(0,-c2.length),v):this._transitionable.setValue(f,v)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function Dr(m,l,f,v){const b=p.smoothstep(45,65,f),[w,D]=F2(m,v),A=p.length(l);let L=1-Math.min(1,Math.exp((A-w)/(D-w)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*b*m.alpha}function F2(m,l){const f=.5/Math.tan(.5*l);return[m.range[0]+f,m.range[1]+f]}const c1=new p.Properties({range:new p.DataConstantProperty(p.spec.fog.range),color:new p.DataConstantProperty(p.spec.fog.color),"high-color":new p.DataConstantProperty(p.spec.fog["high-color"]),"space-color":new p.DataConstantProperty(p.spec.fog["space-color"]),"horizon-blend":new p.DataConstantProperty(p.spec.fog["horizon-blend"]),"star-intensity":new p.DataConstantProperty(p.spec.fog["star-intensity"])}),ir="-transition";class Ta extends p.Evented{constructor(l,f){super(),this._transitionable=new p.Transitionable(c1),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const l=this._transform,f="globe"===l.projection.name,v=p.globeToMercatorTransition(l.zoom),b=this.properties.get("range"),w=[.5,3];return{range:f?[p.number(w[0],b[0],v),p.number(w[1],b[1],v)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,f={}){if(!this._validate(p.validateFog,l,f)){for(const v of Object.keys(p.spec.fog))l&&void 0===l[v]&&(l[v]=p.spec.fog[v].default);for(const v in l){const b=l[v];p.endsWith(v,ir)?this._transitionable.setTransition(v.slice(0,-ir.length),b):this._transitionable.setValue(v,b)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:p.smoothstep(45,65,l))*f.a}getOpacityAtLatLng(l,f){return this._transform.projection.supportsFog?function(v,b,w){const D=p.MercatorCoordinate.fromLngLat(b),A=w.elevation?w.elevation.getAtPointOrZero(D):0,L=[D.x,D.y,A];return p.transformMat4(L,L,w.mercatorFogMatrix),Dr(v,L,w.pitch,w._fov)}(this.state,l,f):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?F2(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,v){return(!v||!1!==v.validate)&&p.emitValidationErrors(this,l.call(p.validateStyle,p.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}class Wr{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p.uniqueId();const v=this.workerPool.acquire(this.id);for(let b=0;b<v.length;b++){const w=new Wr.Actor(v[b],f,this.id);w.name=`Worker ${b}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,f,v){p.asyncAll(this.actors,(b,w)=>{b.send(l,f,w)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function rr(m,l,f){return l*(p.EXTENT/(m.tileSize*Math.pow(2,f-m.tileID.overscaledZ)))}Wr.Actor=p.Actor;class Yt{constructor(l,f,v,b){this.screenBounds=l,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=v,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(l,f){let v,b;if(l instanceof p.pointGeometry||"number"==typeof l[0]){const w=p.pointGeometry.convert(l);v=[w],b=f.isPointAboveHorizon(w)}else{const w=p.pointGeometry.convert(l[0]),D=p.pointGeometry.convert(l[1]);v=[w,D],b=p.polygonizeBounds(w,D).every(A=>f.isPointAboveHorizon(A))}return new Yt(v,f.getCameraPoint(),b,f)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(l){return p.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const f=this.screenBounds[0],v=1===this.screenBounds.length?this.screenBounds[0].add(new p.pointGeometry(1,1)):this.screenBounds[1],b=p.polygonizeBounds(f,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<v.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?b[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(b[3]=this.cameraPoint)),p.bufferConvexPolygon(b,l)}bufferedCameraGeometryGlobe(l){const f=this.screenBounds[0],v=1===this.screenBounds.length?this.screenBounds[0].add(new p.pointGeometry(1,1)):this.screenBounds[1],b=p.polygonizeBounds(f,v,l),w=this.cameraPoint.clone();switch(3*((w.y>f.y)+(w.y>v.y))+((w.x>f.x)+(w.x>v.x))){case 0:b[0]=w,b[4]=w.clone();break;case 1:b.splice(1,0,w);break;case 2:b[1]=w;break;case 3:b.splice(4,0,w);break;case 5:b.splice(2,0,w);break;case 6:b[3]=w;break;case 7:b.splice(3,0,w);break;case 8:b[2]=w}return b}containsTile(l,f,v,b=0){const w=l.queryPadding/f._pixelsPerMercatorPixel+1,D=v?this._bufferedCameraMercator(w,f):this._bufferedScreenMercator(w,f);let A=l.tileID.wrap+(D.unwrapped?b:0);const L=D.polygon.map(Q=>p.getTilePoint(l.tileTransform,Q,A));if(!p.polygonIntersectsBox(L,0,0,p.EXTENT,p.EXTENT))return;A=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const P=this.screenGeometryMercator.polygon.map(Q=>p.getTileVec3(l.tileTransform,Q,A)),R=P.map(Q=>new p.pointGeometry(Q[0],Q[1])),B=f.getFreeCameraOptions().position||new p.MercatorCoordinate(0,0,0),Y=p.getTileVec3(l.tileTransform,B,A),J=P.map(Q=>{const Z=p.sub(Q,Q,Y);return p.normalize(Z,Z),new p.Ray(Y,Z)}),ee=rr(l,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:R,tilespaceRays:J,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(te=p.getBounds(L),te.min.x=p.clamp(te.min.x,0,p.EXTENT),te.min.y=p.clamp(te.min.y,0,p.EXTENT),te.max.x=p.clamp(te.max.x,0,p.EXTENT),te.max.y=p.clamp(te.max.y,0,p.EXTENT),te),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:ee};var te}_bufferedScreenMercator(l,f){const v=X1(l);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let b;return b="globe"===f.projection.name?this._projectAndResample(this.bufferedScreenGeometry(l),f):{polygon:this.bufferedScreenGeometry(l).map(w=>f.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[v]=b,b}}_bufferedCameraMercator(l,f){const v=X1(l);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let b;return b="globe"===f.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),f):{polygon:this.bufferedCameraGeometry(l).map(w=>f.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[v]=b,b}}_projectAndResample(l,f){const v=function(w,D){const A=p.multiply([],D.pixelMatrix,D.globeMatrix),L=[0,-p.GLOBE_RADIUS,0,1],P=[0,p.GLOBE_RADIUS,0,1],R=[0,0,0,1];p.transformMat4$1(L,L,A),p.transformMat4$1(P,P,A),p.transformMat4$1(R,R,A);const B=new p.pointGeometry(L[0]/L[3],L[1]/L[3]),Y=new p.pointGeometry(P[0]/P[3],P[1]/P[3]),J=p.polygonContainsPoint(w,B)&&L[3]<R[3],ee=p.polygonContainsPoint(w,Y)&&P[3]<R[3];if(!J&&!ee)return null;const te=function(Ce,Se,Te){for(let Re=1;Re<Ce.length;Re++){const gt=Ar(Se.pointCoordinate3D(Ce[Re-1]).x),Ee=Ar(Se.pointCoordinate3D(Ce[Re]).x);if(Te<0){if(gt<Ee)return{idx:Re,t:-gt/(Ee-1-gt)}}else if(Ee<gt)return{idx:Re,t:(1-gt)/(Ee+1-gt)}}return null}(w,D,J?-1:1);if(!te)return null;const{idx:Q,t:Z}=te;let se=Q>1?ar(w.slice(0,Q),D):[],oe=Q<w.length?ar(w.slice(Q),D):[];se=se.map(Ce=>new p.pointGeometry(Ar(Ce.x),Ce.y)),oe=oe.map(Ce=>new p.pointGeometry(Ar(Ce.x),Ce.y));const ue=[...se];0===ue.length&&ue.push(oe[oe.length-1]);const ye=p.number(ue[ue.length-1].y,(0===oe.length?se[0]:oe[0]).y,Z);let _e;return _e=J?[new p.pointGeometry(0,ye),new p.pointGeometry(0,0),new p.pointGeometry(1,0),new p.pointGeometry(1,ye)]:[new p.pointGeometry(1,ye),new p.pointGeometry(1,1),new p.pointGeometry(0,1),new p.pointGeometry(0,ye)],ue.push(..._e),0===oe.length?ue.push(se[0]):ue.push(...oe),{polygon:ue.map(Ce=>new p.MercatorCoordinate(Ce.x,Ce.y)),unwrapped:!1}}(l,f);if(v)return v;const b=function(w,D){let A=!1,L=-1/0,P=0;for(let B=0;B<w.length-1;B++)w[B].x>L&&(L=w[B].x,P=B);for(let B=0;B<w.length-1;B++){const Y=(P+B)%(w.length-1),J=w[Y],ee=w[Y+1];Math.abs(J.x-ee.x)>.5&&(J.x<ee.x?(J.x+=1,0===Y&&(w[w.length-1].x+=1)):(ee.x+=1,Y+1===w.length-1&&(w[0].x+=1)),A=!0)}const R=p.mercatorXfromLng(D.center.lng);return A&&R<Math.abs(R-1)&&w.forEach(B=>{B.x-=1}),{polygon:w,unwrapped:A}}(ar(l,f).map(w=>new p.pointGeometry(Ar(w.x),w.y)),f);return{polygon:b.polygon.map(w=>new p.MercatorCoordinate(w.x,w.y)),unwrapped:b.unwrapped}}}function ar(m,l){return p.resample(m,f=>{const v=l.pointCoordinate3D(f);f.x=v.x,f.y=v.y},1/256)}function Ar(m){return m<0?1+m%1:m%1}function X1(m){return 100*m|0}function V1(m,l,f,v,b){const w=function(D,A){if(D)return b(D);if(A){m.url&&A.tiles&&m.tiles&&delete m.tiles;const L=p.pick(p.extend(A,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);A.vector_layers&&(L.vectorLayers=A.vector_layers,L.vectorLayerIds=L.vectorLayers.map(P=>P.id)),L.tiles=l.canonicalizeTileset(L,m.url),b(null,L)}};return m.url?p.getJSON(l.transformRequest(l.normalizeSourceURL(m.url,null,f,v),p.ResourceType.Source),w):p.exported.frame(()=>w(null,m))}class ii{constructor(l,f,v){this.bounds=p.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=v||24}validateBounds(l){return Array.isArray(l)&&4===l.length?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),v=Math.floor(p.mercatorXfromLng(this.bounds.getWest())*f),b=Math.floor(p.mercatorYfromLat(this.bounds.getNorth())*f),w=Math.ceil(p.mercatorXfromLng(this.bounds.getEast())*f),D=Math.ceil(p.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=v&&l.x<w&&l.y>=b&&l.y<D}}class t1{constructor(l,f,v){this.context=l;const b=l.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(v),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const tn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class or{constructor(l,f,v,b){this.length=f.length,this.attributes=v,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let v=0;v<this.attributes.length;v++){const b=f.attributes[this.attributes[v].name];void 0!==b&&l.enableVertexAttribArray(b)}}setVertexAttribPointers(l,f,v){for(let b=0;b<this.attributes.length;b++){const w=this.attributes[b],D=f.attributes[w.name];void 0!==D&&l.vertexAttribPointer(D,w.components,l[tn[w.type]],!1,this.itemSize,w.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class K1{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Er extends K1{getDefault(){return p.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class q1 extends K1{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class N2 extends K1{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class l2 extends K1{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ha extends K1{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Kn extends K1{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class li extends K1{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Vr extends K1{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class O2 extends K1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class Li extends K1{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class So extends K1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class js extends K1{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Zr extends K1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class Ha extends K1{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Gs extends K1{getDefault(){return p.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class $s extends K1{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class p1 extends K1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class Lr extends K1{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class ka extends K1{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Do extends K1{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class qs extends K1{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Ws extends K1{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class sr extends K1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Qo extends K1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class jc extends K1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Jo extends K1{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Yr extends K1{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class es extends K1{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Ia extends K1{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Zs extends K1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Ao extends K1{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class cr extends K1{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class x2 extends cr{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ra extends cr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ys extends Ra{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Pa{constructor(l,f,v,b){this.context=l,this.width=f,this.height=v;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new x2(l,w),b&&(this.depthAttachment=new Ra(l,w))}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const v=this.depthAttachment.get();v&&l.deleteRenderbuffer(v)}l.deleteFramebuffer(this.framebuffer)}}class ie{constructor(l,f=!1){if(this.gl=l,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const v=l;this.extVertexArrayObject={createVertexArrayOES:v.createVertexArray.bind(l),deleteVertexArrayOES:v.deleteVertexArray.bind(l),bindVertexArrayOES:v.bindVertexArray.bind(l)}}this.clearColor=new Er(this),this.clearDepth=new q1(this),this.clearStencil=new N2(this),this.colorMask=new l2(this),this.depthMask=new ha(this),this.stencilMask=new Kn(this),this.stencilFunc=new li(this),this.stencilOp=new Vr(this),this.stencilTest=new O2(this),this.depthRange=new Li(this),this.depthTest=new So(this),this.depthFunc=new js(this),this.blend=new Zr(this),this.blendFunc=new Ha(this),this.blendColor=new Gs(this),this.blendEquation=new $s(this),this.cullFace=new p1(this),this.cullFaceSide=new Lr(this),this.frontFace=new ka(this),this.program=new Do(this),this.activeTexture=new qs(this),this.viewport=new Ws(this),this.bindFramebuffer=new sr(this),this.bindRenderbuffer=new Qo(this),this.bindTexture=new jc(this),this.bindVertexBuffer=new Jo(this),this.bindElementBuffer=new Yr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new es(this),this.pixelStoreUnpack=new Ia(this),this.pixelStoreUnpackPremultiplyAlpha=new Zs(this),this.pixelStoreUnpackFlipY=new Ao(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new t1(this,l,f)}createVertexBuffer(l,f,v){return new or(this,l,f,v)}createRenderbuffer(l,f,v){const b=this.gl,w=b.createRenderbuffer();return this.bindRenderbuffer.set(w),b.renderbufferStorage(b.RENDERBUFFER,l,f,v),this.bindRenderbuffer.set(null),w}createFramebuffer(l,f,v){return new Pa(this,l,f,v)}clear({color:l,depth:f,stencil:v}){const b=this.gl;let w=0;l&&(w|=b.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),void 0!==f&&(w|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),void 0!==v&&(w|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),b.clear(w)}setCullFace(l){!1===l.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){Ye(l.blendFunction,p.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class U extends p.Evented{constructor(l,f,v,b){if(super(),this.id=l,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,p.extend(this,p.pick(f,["url","scheme","tileSize","promoteId"])),this._options=p.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new p.DedupedRequest}load(l){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,v=this.map._worldview;this._tileJSONRequest=V1(this._options,this.map._requestManager,f,v,(b,w)=>{this._tileJSONRequest=null,this._loaded=!0,b?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),v&&2!==v.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${v}`),this.fire(new p.ErrorEvent(b))):w&&(p.extend(this,w),w.bounds&&(this.tileBounds=new ii(w.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(b)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}loadTile(l,f){const v=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(v,p.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,l.actor&&"expired"!==l.state)"loading"===l.state?l.reloadCallback=f:l.request=l.actor.send("reloadTile",b,w.bind(this));else if(l.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",b,w.bind(this),void 0,!0);else{const D=p.loadVectorTile.call({deduped:this._deduped},b,(A,L)=>{A||!L?w.call(this,A):(b.data={cacheControl:L.cacheControl,expires:L.expires,rawData:L.rawData.slice(0)},l.actor&&l.actor.send("loadTile",b,w.bind(this),void 0,!0))},!0);l.request={cancel:D}}function w(D,A){return delete l.request,l.aborted?f(null):D&&404!==D.status?f(D):(A&&A.resourceTiming&&(l.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&l.setExpiryData(A),l.loadVectorData(A,this.map.painter),p.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class G extends p.Evented{constructor(l,f,v,b){super(),this.id=l,this.dispatcher=v,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=p.extend({type:"raster"},f),p.extend(this,p.pick(f,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V1(this._options,this.map._requestManager,null,null,(f,v)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new p.ErrorEvent(f)):v&&(p.extend(this,v),v.bounds&&(this.tileBounds=new ii(v.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(v.tiles),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(f)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const v=p.exported.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);l.request=p.getImage(this.map._requestManager.transformRequest(b,p.ResourceType.Tile),(w,D,A,L)=>(delete l.request,l.aborted?(l.state="unloaded",f(null)):w?(l.state="errored",f(w)):D?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:A,expires:L}),l.setTexture(D,this.map.painter),l.state="loaded",p.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(l,f,v){l.setTexture(f,v)}static unloadTileData(l,f){l.texture&&f.saveTileTexture(l.texture)}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let ne;function fe(m,l,f,v,b,w,D,A){const L=[m,f,b,l,v,w,1,1,1],P=[D,A,1],R=p.adjoint([],L),[B,Y,J]=p.transformMat3(P,P,p.transpose(R,R));return p.multiply$1(L,[B,0,0,0,Y,0,0,0,J],L)}class xe extends p.Evented{constructor(l,f,v,b){super(),this.id=l,this.dispatcher=v,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f,this._dirty=!1}load(l,f){this._loaded=f||!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=p.getImage(this.map._requestManager.transformRequest(this.url,p.ResourceType.Image),(v,b)=>{if(this._imageRequest=null,this._loaded=!0,v)this.fire(new p.ErrorEvent(v));else if(b){const{HTMLImageElement:w}=p.window;this.image=b instanceof w?p.exported.getImageData(b):b,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const f=l.map(p.MercatorCoordinate.fromLngLat);return this.tileID=function(v){let b=1/0,w=1/0,D=-1/0,A=-1/0;for(const B of v)b=Math.min(b,B.x),w=Math.min(w,B.y),D=Math.max(D,B.x),A=Math.max(A,B.y);const L=Math.max(D-b,A-w),P=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),R=Math.pow(2,P);return new p.CanonicalTileID(P,Math.floor((b+D)/2*R),Math.floor((w+A)/2*R))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const L in this.tiles){const P=this.tiles[L];"loaded"!==P.state&&(P.state="loaded",P.texture=this.texture)}if(this._boundsArray)return;const f=p.tileTransform(this.tileID,this.map.transform.projection),[v,b,w,D]=this.coordinates.map(L=>{const P=f.projection.project(L[0],L[1]);return p.getTilePoint(f,P)._round()});this.perspectiveTransform=function(L,P,R,B,Y,J,ee,te,Q,Z){const se=fe(0,0,L,0,0,P,L,P),oe=fe(R,B,Y,J,ee,te,Q,Z);return p.multiply$1(oe,p.adjoint(se,se),oe),[oe[6]/oe[8]*L/p.EXTENT,oe[7]/oe[8]*P/p.EXTENT]}(this.width,this.height,v.x,v.y,b.x,b.y,D.x,D.y,w.x,w.y);const A=this._boundsArray=new p.StructArrayLayout4i8;A.emplaceBack(v.x,v.y,0,0),A.emplaceBack(b.x,b.y,p.EXTENT,0),A.emplaceBack(D.x,D.y,0,p.EXTENT),A.emplaceBack(w.x,w.y,p.EXTENT,p.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(A,p.boundsAttributes.members),this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const l=this.map.painter.context,f=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new p.Texture(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ae={vector:U,raster:G,"raster-dem":class extends G{constructor(m,l,f,v){super(m,l,f,v),this.type="raster-dem",this.maxzoom=22,this._options=p.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(m,l){const f=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(b,w){b&&(m.state="errored",l(b)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",l(null))}m.request=p.getImage(this.map._requestManager.transformRequest(f,p.ResourceType.Tile),function(b,w,D,A){if(delete m.request,m.aborted)m.state="unloaded",l(null);else if(b)m.state="errored",l(b);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:D,expires:A});const L=p.window.ImageBitmap&&w instanceof p.window.ImageBitmap&&(null==ne&&(ne=p.window.OffscreenCanvas&&new p.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof p.window.createImageBitmap),ne),P=1-(w.width-p.prevPowerOfTwo(w.width))/2;P<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const R=L?w:p.exported.getImageData(w,P),B={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:R,encoding:this.encoding,padding:P};m.actor&&"expired"!==m.state||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",B,v.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const l=m.canonical,f=Math.pow(2,l.z),v=(l.x-1+f)%f,b=0===l.x?m.wrap-1:m.wrap,w=(l.x+1+f)%f,D=l.x+1===f?m.wrap+1:m.wrap,A={};return A[new p.OverscaledTileID(m.overscaledZ,b,l.z,v,l.y).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,D,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(A[new p.OverscaledTileID(m.overscaledZ,b,l.z,v,l.y-1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,D,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<f&&(A[new p.OverscaledTileID(m.overscaledZ,b,l.z,v,l.y+1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},A[new p.OverscaledTileID(m.overscaledZ,D,l.z,w,l.y+1).key]={backfilled:!1}),A}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends p.Evented{constructor(m,l,f,v){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(v),this._data=l.data,this._options=p.extend({},l),this._collectResourceTiming=l.collectResourceTiming,void 0!==l.maxzoom&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const b=p.EXTENT/this.tileSize;this.workerOptions=p.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(void 0!==l.buffer?l.buffer:128)*b,tolerance:(void 0!==l.tolerance?l.tolerance:.375)*b,extent:p.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:void 0!==l.clusterMaxZoom?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:p.EXTENT,radius:(void 0!==l.clusterRadius?l.clusterRadius:50)*b,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},l),this}getClusterChildren(m,l){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},l),this}getClusterLeaves(m,l,f,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:l,offset:f},v),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new p.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=p.extend({},this.workerOptions),l=this._data;"string"==typeof l?(m.request=this.map._requestManager.transformRequest(p.exported.resolveURL(l),p.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(f,v)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new p.ErrorEvent(f));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b.resourceTiming=v.resourceTiming[this.id]),this.fire(new p.Event("data",b)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,l){const f=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(f,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(v,b)=>(delete m.request,m.unloadVectorData(),m.aborted?l(null):v?l(v):(m.loadVectorData(b,this.map.painter,"reloadTile"===f),l(null))),void 0,"loadTile"===f)}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return p.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends xe{constructor(m,l,f,v){super(m,l,f,v),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const l of m.urls)this.urls.push(this.map._requestManager.transformRequest(l,p.ResourceType.Source).url);p.getVideo(this.urls,(l,f)=>{this._loaded=!0,l?this.fire(new p.ErrorEvent(l)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const l=this.video.seekable;m<l.start(0)||m>l.end(0)?this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const m=this.map.painter.context,l=m.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new p.Texture(m,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:xe,canvas:class extends xe{constructor(m,l,f,v){super(m,l,f,v),l.coordinates?Array.isArray(l.coordinates)&&4===l.coordinates.length&&!l.coordinates.some(b=>!Array.isArray(b)||2!==b.length||b.some(w=>"number"!=typeof w))||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),l.animate&&"boolean"!=typeof l.animate&&this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),l.canvas?"string"==typeof l.canvas||l.canvas instanceof p.window.HTMLCanvasElement||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=l,this.animate=void 0===l.animate||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof p.window.HTMLCanvasElement?this.options.canvas:p.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new p.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const l=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new p.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends p.Evented{constructor(m,l,f,v){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=l,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new p.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new p.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ii(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),p.extend(this,p.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return p.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:l,y:f,z:v}=m.canonical;return this._implementation.hasTile({x:l,y:f,z:v})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,l){const{x:f,y:v,z:b}=m.tileID.canonical,w=new p.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:f,y:v,z:b},{signal:w.signal})).then(function(D){return delete m.request,m.aborted?(m.state="unloaded",l(null)):void 0===D?(m.state="errored",l(null)):null===D?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",l(null)):(A=D)instanceof p.window.ImageData||A instanceof p.window.HTMLCanvasElement||A instanceof p.window.ImageBitmap||A instanceof p.window.HTMLImageElement?(this.loadTileData(m,D),m.state="loaded",void l(null)):(m.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var A}.bind(this)).catch(D=>{20!==D.code&&(m.state="errored",l(D))}),m.request.cancel=()=>w.abort()}loadTileData(m,l){G.loadTileData(m,l,this._map.painter)}unloadTileData(m){G.unloadTileData(m,this._map.painter)}unloadTile(m,l){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:f,y:v,z:b}=m.tileID.canonical;this._implementation.unloadTile({x:f,y:v,z:b})}l()}abortTile(m,l){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}}},De=function(m,l,f,v){const b=new Ae[l.type](m,l,f,v);if(b.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${b.id}`);return p.bindAll(["load","abort","unload","serialize","prepare"],b),b};function we(m,l){const f=p.identity([]);return p.scale(f,f,[.5*m.width,.5*-m.height,1]),p.translate(f,f,[1,-1,0]),p.multiply(f,f,m.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(f)}function Le(m,l,f,v,b,w,D,A=!1){const L=m.tilesIn(v,D,A);L.sort(Mt);const P=[];for(const B of L)P.push({wrappedTileID:B.tile.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(l,f,m._state,B,b,w,we(m.transform,B.tile.tileID),A)});const R=function(B){const Y={},J={};for(const ee of B){const te=ee.queryResults,Q=ee.wrappedTileID,Z=J[Q]=J[Q]||{};for(const se in te){const oe=te[se],ue=Z[se]=Z[se]||{},ye=Y[se]=Y[se]||[];for(const _e of oe)ue[_e.featureIndex]||(ue[_e.featureIndex]=!0,ye.push(_e))}}return Y}(P);for(const B in R)R[B].forEach(Y=>{const J=Y.feature,ee=J.layer;ee&&"background"!==ee.type&&"sky"!==ee.type&&(J.source=ee.source,ee["source-layer"]&&(J.sourceLayer=ee["source-layer"]),J.state=void 0!==J.id?m.getFeatureState(ee["source-layer"],J.id):{})});return R}function it(m,l){const f=m.getRenderableIds().map(w=>m.getTileByID(w)),v=[],b={};for(let w=0;w<f.length;w++){const D=f[w],A=D.tileID.canonical.key;b[A]||(b[A]=!0,D.querySourceFeatures(v,l))}return v}function Mt(m,l){const f=m.tileID,v=l.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}function tt(){return null!=N3.workerClass?new N3.workerClass:new p.window.Worker(N3.workerUrl)}const Tt="mapboxgl_preloaded_worker_pool";class At{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<At.workerCount;)this.workers.push(new tt);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],0===this.numActive()&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Tt]}numActive(){return Object.keys(this.active).length}}let Rt;function Ht(){return Rt||(Rt=new At),Rt}function b1(m,l){const f={};for(const v in m)"ref"!==v&&(f[v]=m[v]);return p.refProperties.forEach(v=>{v in l&&(f[v]=l[v])}),f}function Q1(m){m=m.slice();const l=Object.create(null);for(let f=0;f<m.length;f++)l[m[f].id]=m[f];for(let f=0;f<m.length;f++)"ref"in m[f]&&(m[f]=b1(m[f],l[m[f].ref]));return m}At.workerCount=2;const Wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function nn(m,l,f){f.push({command:Wt.addSource,args:[m,l[m]]})}function Cn(m,l,f){l.push({command:Wt.removeSource,args:[m]}),f[m]=!0}function pa(m,l,f,v){Cn(m,f,v),nn(m,l,f)}function Xr(m,l,f){let v;for(v in m[f])if(m[f].hasOwnProperty(v)&&"data"!==v&&!Ye(m[f][v],l[f][v]))return!1;for(v in l[f])if(l[f].hasOwnProperty(v)&&"data"!==v&&!Ye(m[f][v],l[f][v]))return!1;return!0}function qe(m,l,f,v,b,w){let D;for(D in l=l||{},m=m||{})m.hasOwnProperty(D)&&(Ye(m[D],l[D])||f.push({command:w,args:[v,D,l[D],b]}));for(D in l)l.hasOwnProperty(D)&&!m.hasOwnProperty(D)&&(Ye(m[D],l[D])||f.push({command:w,args:[v,D,l[D],b]}))}function ma(m){return m.id}function Qn(m,l){return m[l.id]=l,m}class Fa{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(1===this.points.length)return this.points[0];l=p.clamp(l,0,1);let f=1,v=this._distances[f];const b=l*this.paddedLength+this.padding;for(;v<b&&f<this._distances.length;)v=this._distances[++f];const w=f-1,D=this._distances[w],A=v-D,L=A>0?(b-D)/A:0;return this.points[w].mult(1-L).add(this.points[f].mult(L))}}class M3{constructor(l,f,v){const b=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/v),this.yCellCount=Math.ceil(f/v);for(let D=0;D<this.xCellCount*this.yCellCount;D++)b.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,v,b,w){this._forEachCell(f,v,b,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(w)}insertCircle(l,f,v,b){this._forEachCell(f-b,v-b,f+b,v+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(v),this.circles.push(b)}_insertBoxCell(l,f,v,b,w,D){this.boxCells[w].push(D)}_insertCircleCell(l,f,v,b,w,D){this.circleCells[w].push(D)}_query(l,f,v,b,w,D){if(v<0||l>this.width||b<0||f>this.height)return!w&&[];const A=[];if(l<=0&&f<=0&&this.width<=v&&this.height<=b){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)A.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const P=this.circles[3*L],R=this.circles[3*L+1],B=this.circles[3*L+2];A.push({key:this.circleKeys[L],x1:P-B,y1:R-B,x2:P+B,y2:R+B})}return D?A.filter(D):A}return this._forEachCell(l,f,v,b,this._queryCell,A,{hitTest:w,seenUids:{box:{},circle:{}}},D),w?A.length>0:A}_queryCircle(l,f,v,b,w){const D=l-v,A=l+v,L=f-v,P=f+v;if(A<0||D>this.width||P<0||L>this.height)return!b&&[];const R=[];return this._forEachCell(D,L,A,P,this._queryCellCircle,R,{hitTest:b,circle:{x:l,y:f,radius:v},seenUids:{box:{},circle:{}}},w),b?R.length>0:R}query(l,f,v,b,w){return this._query(l,f,v,b,!1,w)}hitTest(l,f,v,b,w){return this._query(l,f,v,b,!0,w)}hitTestCircle(l,f,v,b){return this._queryCircle(l,f,v,!0,b)}_queryCell(l,f,v,b,w,D,A,L){const P=A.seenUids,R=this.boxCells[w];if(null!==R){const Y=this.bboxes;for(const J of R)if(!P.box[J]){P.box[J]=!0;const ee=4*J;if(l<=Y[ee+2]&&f<=Y[ee+3]&&v>=Y[ee+0]&&b>=Y[ee+1]&&(!L||L(this.boxKeys[J]))){if(A.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[J],x1:Y[ee],y1:Y[ee+1],x2:Y[ee+2],y2:Y[ee+3]})}}}const B=this.circleCells[w];if(null!==B){const Y=this.circles;for(const J of B)if(!P.circle[J]){P.circle[J]=!0;const ee=3*J;if(this._circleAndRectCollide(Y[ee],Y[ee+1],Y[ee+2],l,f,v,b)&&(!L||L(this.circleKeys[J]))){if(A.hitTest)return D.push(!0),!0;{const te=Y[ee],Q=Y[ee+1],Z=Y[ee+2];D.push({key:this.circleKeys[J],x1:te-Z,y1:Q-Z,x2:te+Z,y2:Q+Z})}}}}}_queryCellCircle(l,f,v,b,w,D,A,L){const P=A.circle,R=A.seenUids,B=this.boxCells[w];if(null!==B){const J=this.bboxes;for(const ee of B)if(!R.box[ee]){R.box[ee]=!0;const te=4*ee;if(this._circleAndRectCollide(P.x,P.y,P.radius,J[te+0],J[te+1],J[te+2],J[te+3])&&(!L||L(this.boxKeys[ee])))return D.push(!0),!0}}const Y=this.circleCells[w];if(null!==Y){const J=this.circles;for(const ee of Y)if(!R.circle[ee]){R.circle[ee]=!0;const te=3*ee;if(this._circlesCollide(J[te],J[te+1],J[te+2],P.x,P.y,P.radius)&&(!L||L(this.circleKeys[ee])))return D.push(!0),!0}}}_forEachCell(l,f,v,b,w,D,A,L){const P=this._convertToXCellCoord(l),R=this._convertToYCellCoord(f),B=this._convertToXCellCoord(v),Y=this._convertToYCellCoord(b);for(let J=P;J<=B;J++)for(let ee=R;ee<=Y;ee++)if(w.call(this,l,f,v,b,this.xCellCount*ee+J,D,A,L))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,v,b,w,D){const A=b-l,L=w-f,P=v+D;return P*P>A*A+L*L}_circleAndRectCollide(l,f,v,b,w,D,A){const L=(D-b)/2,P=Math.abs(l-(b+L));if(P>L+v)return!1;const R=(A-w)/2,B=Math.abs(f-(w+R));if(B>R+v)return!1;if(P<=L||B<=R)return!0;const Y=P-L,J=B-R;return Y*Y+J*J<=v*v}}const Kr=Math.tan(85*Math.PI/180);function ts(m,l,f,v,b,w,D){const A=p.create();if(f)if("globe"===w.name){const L=p.calculateGlobeLabelMatrix(b,l);p.multiply(A,A,L)}else{const L=F1([],D);A[0]=L[0],A[1]=L[1],A[4]=L[2],A[5]=L[3],v||p.rotateZ(A,A,b.angle)}else p.multiply(A,b.labelPlaneMatrix,m);return A}function Jn(m,l,f,v,b,w,D){const A=ts(m,l,f,v,b,w,D);return"globe"===w.name&&f||(A[2]=A[6]=A[10]=A[14]=0),A}function Ci(m,l,f,v,b,w,D){if(f){if("globe"===w.name){const A=ts(m,l,f,v,b,w,D);return p.invert(A,A),p.multiply(A,m,A),A}{const A=p.clone(m),L=p.identity([]);return L[0]=D[0],L[1]=D[1],L[4]=D[2],L[5]=D[3],p.multiply(A,A,L),v||p.rotateZ(A,A,-b.angle),A}}return b.glCoordMatrix}function bt(m,l,f,v){const b=[m,l,f,1];f?p.transformMat4$1(b,b,v):ql(b,b,v);const w=b[3];return b[0]/=w,b[1]/=w,b[2]/=w,b}function D1(m,l){return Math.min(.5+m/l*.5,1.5)}function It(m,l){const f=m[0]/m[3],v=m[1]/m[3];return f>=-l[0]&&f<=l[0]&&v>=-l[1]&&v<=l[1]}function lr(m,l,f,v,b,w,D,A,L,P){const R=f.transform,B=v?m.textSizeData:m.iconSizeData,Y=p.evaluateSizeForZoom(B,f.transform.zoom),J="globe"===R.projection.name,ee=[256/f.width*2+1,256/f.height*2+1],te=v?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;te.clear();let Q=null;J&&(Q=v?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Z=m.lineVertexArray,se=v?m.text.placedSymbolArray:m.icon.placedSymbolArray,oe=f.transform.width/f.transform.height;let ue,ye=!1;for(let _e=0;_e<se.length;_e++){const Ce=se.get(_e),{numGlyphs:Se,writingMode:Te}=Ce;if(Te!==p.WritingMode.vertical||ye||ue===p.WritingMode.horizontal||(ye=!0),ue=Te,(Ce.hidden||Te===p.WritingMode.vertical)&&!ye){yn(Se,te);continue}ye=!1;const Re=new p.pointGeometry(Ce.tileAnchorX,Ce.tileAnchorY);let{x:gt,y:Ee,z:et}=R.projection.projectTilePoint(Re.x,Re.y,P.canonical);if(L){const[L1,Dt,zt]=L(Re);gt+=L1,Ee+=Dt,et+=zt}const Be=[gt,Ee,et,1];if(p.transformMat4$1(Be,Be,l),!It(Be,ee)){yn(Se,te);continue}const ct=D1(f.transform.cameraToCenterDistance,Be[3]),Pe=p.evaluateSizeForFeature(B,Y,Ce),ze=D?Pe/ct:Pe*ct,Ne=bt(gt,Ee,et,b);if(Ne[3]<=0){yn(Se,te);continue}let ot={};const ut=D?null:L,Pt=ns(Ce,ze,!1,A,l,b,w,m.glyphOffsetArray,Z,te,Q,Ne,Re,ot,oe,ut,R.projection,P,D);ye=Pt.useVertical,ut&&Pt.needsFlipping&&(ot={}),(Pt.notEnoughRoom||ye||Pt.needsFlipping&&ns(Ce,ze,!0,A,l,b,w,m.glyphOffsetArray,Z,te,Q,Ne,Re,ot,oe,ut,R.projection,P,D).notEnoughRoom)&&yn(Se,te)}v?(m.text.dynamicLayoutVertexBuffer.updateData(te),Q&&m.text.globeExtVertexBuffer.updateData(Q)):(m.icon.dynamicLayoutVertexBuffer.updateData(te),Q&&m.icon.globeExtVertexBuffer.updateData(Q))}function vn(m,l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te){const{lineStartIndex:Q,glyphStartIndex:Z,segment:se}=A,oe=Z+A.numGlyphs,ue=Q+A.lineLength,ye=l.getoffsetX(Z),_e=l.getoffsetX(oe-1),Ce=ei(m*ye,f,v,b,w,D,se,Q,ue,L,P,R,B,Y,!0,J,ee,te);if(!Ce)return null;const Se=ei(m*_e,f,v,b,w,D,se,Q,ue,L,P,R,B,Y,!0,J,ee,te);return Se?{first:Ce,last:Se}:null}function w1(m,l,f,v){return m===p.WritingMode.horizontal&&Math.abs(v)>Math.abs(f)?{useVertical:!0}:m===p.WritingMode.vertical?v>0?{needsFlipping:!0}:null:0!==l&&(0===(b=f)||Math.abs(v/b)>Kr)?1===l?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null;var b}function ns(m,l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te,Q,Z,se){const oe=l/24,ue=m.lineOffsetX*oe,ye=m.lineOffsetY*oe,{lineStartIndex:_e,glyphStartIndex:Ce,numGlyphs:Se,segment:Te,writingMode:Re,flipState:gt}=m,Ee=_e+m.lineLength,et=Be=>{if(R){const[Ne,ot,ut]=Be.up,Pt=P.length;p.updateGlobeVertexNormal(R,Pt+0,Ne,ot,ut),p.updateGlobeVertexNormal(R,Pt+1,Ne,ot,ut),p.updateGlobeVertexNormal(R,Pt+2,Ne,ot,ut),p.updateGlobeVertexNormal(R,Pt+3,Ne,ot,ut)}const[ct,Pe,ze]=Be.point;p.addDynamicAttributes(P,ct,Pe,ze,Be.angle)};if(Se>1){const Be=vn(oe,A,ue,ye,f,B,Y,m,L,w,J,te,!1,Q,Z,se);if(!Be)return{notEnoughRoom:!0};if(v&&!f){let[ct,Pe,ze]=Be.first.point,[Ne,ot,ut]=Be.last.point;[ct,Pe]=bt(ct,Pe,ze,D),[Ne,ot]=bt(Ne,ot,ut,D);const Pt=w1(Re,gt,(Ne-ct)*ee,ot-Pe);if(m.flipState=Pt&&Pt.needsFlipping?1:2,Pt)return Pt}et(Be.first);for(let ct=Ce+1;ct<Ce+Se-1;ct++){const Pe=ei(oe*A.getoffsetX(ct),ue,ye,f,B,Y,Te,_e,Ee,L,w,J,te,!1,!1,Q,Z,se);if(!Pe)return P.length-=4*(ct-Ce),{notEnoughRoom:!0};et(Pe)}et(Be.last)}else{if(v&&!f){const ct=bt(Y.x,Y.y,0,b),Pe=_e+Te+1,ze=new p.pointGeometry(L.getx(Pe),L.gety(Pe)),Ne=bt(ze.x,ze.y,0,b),ot=Ne[3]>0?Ne:n1(Y,ze,ct,1,b,void 0,Q,Z.canonical),ut=w1(Re,gt,(ot[0]-ct[0])*ee,ot[1]-ct[1]);if(m.flipState=ut&&ut.needsFlipping?1:2,ut)return ut}const Be=ei(oe*A.getoffsetX(Ce),ue,ye,f,B,Y,Te,_e,Ee,L,w,J,te,!1,!1,Q,Z,se);if(!Be)return{notEnoughRoom:!0};et(Be)}return{}}function rn(m,l,f,v,b){const{x:w,y:D,z:A}=v.projectTilePoint(m.x,m.y,l);if(!b)return bt(w,D,A,f);const[L,P,R]=b(m);return bt(w+L,D+P,A+R,f)}function n1(m,l,f,v,b,w,D,A){const L=rn(m.sub(l)._unit()._add(m),A,b,D,w);return p.sub(L,f,L),p.normalize(L,L),p.scaleAndAdd(L,f,L,v)}function ei(m,l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te,Q,Z){const se=v?m-l:m+l;let oe=se>0?1:-1,ue=0;v&&(oe*=-1,ue=Math.PI),oe<0&&(ue+=Math.PI);let ye=A+D+(oe>0?0:1)|0,_e=b,Ce=b,Se=0,Te=0;const Re=Math.abs(se),gt=[],Ee=[];let et=w,Be=et;const ct=()=>n1(Be,et,Ce,Re-Se+1,R,Y,te,Q.canonical);for(;Se+Te<=Re;){if(ye+=oe,ye<A||ye>=L)return null;if(Ce=_e,Be=et,gt.push(Ce),J&&Ee.push(Be),et=new p.pointGeometry(P.getx(ye),P.gety(ye)),_e=B[ye],!_e){const zt=rn(et,Q.canonical,R,te,Y);_e=zt[3]>0?B[ye]=zt:ct()}Se+=Te,Te=p.distance(Ce,_e)}ee&&Y&&(B[ye]&&(_e=ct(),Te=p.distance(Ce,_e)),B[ye]=_e);const Pe=(Re-Se)/Te,ze=et.sub(Be)._mult(Pe)._add(Be),Ne=p.sub([],_e,Ce),ot=p.scaleAndAdd([],Ce,Ne,Pe);let ut=[0,0,1],Pt=Ne[0],L1=Ne[1];if(Z&&(ut=te.upVector(Q.canonical,ze.x,ze.y),0!==ut[0]||0!==ut[1]||1!==ut[2])){const zt=[ut[2],0,-ut[0]],Ft=p.cross([],ut,zt);p.normalize(zt,zt),p.normalize(Ft,Ft),Pt=p.dot(Ne,zt),L1=p.dot(Ne,Ft)}if(f){const zt=p.cross([],ut,Ne);p.normalize(zt,zt),p.scaleAndAdd(ot,ot,zt,f*oe)}const Dt=ue+Math.atan2(L1,Pt);return gt.push(ot),J&&Ee.push(ze),{point:ot,angle:Dt,path:gt,tilePath:Ee,up:ut}}function yn(m,l){const f=l.length,v=f+4*m;l.resize(v),l.float32.fill(-1/0,4*f,4*v)}function ql(m,l,f){const v=l[0],b=l[1];return m[0]=f[0]*v+f[4]*b+f[12],m[1]=f[1]*v+f[5]*b+f[13],m[3]=f[3]*v+f[7]*b+f[15],m}const hi=100;class rt{constructor(l,f,v=new M3(l.width+200,l.height+200,25),b=new M3(l.width+200,l.height+200,25)){this.transform=l,this.grid=v,this.ignoredGrid=b,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+hi,this.screenBottomBoundary=l.height+hi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=f}placeCollisionBox(l,f,v,b,w,D,A,L){let P=v.projectedAnchorX,R=v.projectedAnchorY,B=v.projectedAnchorZ;const Y=v.elevation,J=v.tileID,ee=l.getProjection();if(Y&&J){const[_e,Ce,Se]=ee.upVector(J.canonical,v.tileAnchorX,v.tileAnchorY),Te=ee.upVectorScale(J.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;P+=_e*Y*Te,R+=Ce*Y*Te,B+=Se*Y*Te}const te=this.projectAndGetPerspectiveRatio(A,P,R,B,v.tileID,"globe"===ee.name||!!Y||this.transform.pitch>0,ee),Q=D*te.perspectiveRatio,Z=(v.x1*f+b.x-v.padding)*Q+te.point.x,se=(v.y1*f+b.y-v.padding)*Q+te.point.y,oe=(v.x2*f+b.x+v.padding)*Q+te.point.x,ue=(v.y2*f+b.y+v.padding)*Q+te.point.y,ye=te.perspectiveRatio<=.55||te.occluded;return!this.isInsideGrid(Z,se,oe,ue)||!w&&this.grid.hitTest(Z,se,oe,ue,L)||ye?{box:[],offscreen:!1,occluded:te.occluded}:{box:[Z,se,oe,ue],offscreen:this.isOffscreen(Z,se,oe,ue),occluded:!1}}placeCollisionCircles(l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te){const Q=[],Z=this.transform.elevation,se=l.getProjection(),oe=Z?Z.getAtTileOffsetFunc(te,this.transform.center.lat,this.transform.worldSize,se):null,ue=new p.pointGeometry(v.tileAnchorX,v.tileAnchorY);let{x:ye,y:_e,z:Ce}=se.projectTilePoint(ue.x,ue.y,te.canonical);if(oe){const[ze,Ne,ot]=oe(ue);ye+=ze,_e+=Ne,Ce+=ot}const Se="globe"===se.name,Te=this.projectAndGetPerspectiveRatio(A,ye,_e,Ce,te,Se||!!Z||this.transform.pitch>0,se),{perspectiveRatio:Re}=Te,gt=(B?D/Re:D*Re)/p.ONE_EM,Ee=bt(ye,_e,Ce,L),et=Te.signedDistanceFromCamera>0?vn(gt,w,v.lineOffsetX*gt,v.lineOffsetY*gt,!1,Ee,ue,v,b,L,{},Z&&!B?oe:null,B&&!!Z,se,te,B):null;let Be=!1,ct=!1,Pe=!0;if(et&&!Te.occluded){const ze=.5*J*Re+ee,Ne=new p.pointGeometry(-100,-100),ot=new p.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ut=new Fa,{first:Pt,last:L1}=et,Dt=Pt.path.length;let zt=[];for(let Ut=Dt-1;Ut>=1;Ut--)zt.push(Pt.path[Ut]);for(let Ut=1;Ut<L1.path.length;Ut++)zt.push(L1.path[Ut]);const Ft=2.5*ze;P&&(zt=zt.map(([Ut,mn,un],Nn)=>(oe&&!Se&&(un=oe(Nn<Dt-1?Pt.tilePath[Dt-1-Nn]:L1.tilePath[Nn-Dt+2])[2]),bt(Ut,mn,un,P))),zt.some(Ut=>Ut[3]<=0)&&(zt=[]));let A1=[];if(zt.length>0){let Ut=1/0,mn=-1/0,un=1/0,Nn=-1/0;for(const Mn of zt)Ut=Math.min(Ut,Mn[0]),un=Math.min(un,Mn[1]),mn=Math.max(mn,Mn[0]),Nn=Math.max(Nn,Mn[1]);mn>=Ne.x&&Ut<=ot.x&&Nn>=Ne.y&&un<=ot.y&&(A1=[zt.map(Mn=>new p.pointGeometry(Mn[0],Mn[1]))],(Ut<Ne.x||mn>ot.x||un<Ne.y||Nn>ot.y)&&(A1=p.clipLine(A1,Ne.x,Ne.y,ot.x,ot.y)))}for(const Ut of A1){ut.reset(Ut,.25*ze);let mn=0;mn=ut.length<=.5*ze?1:Math.ceil(ut.paddedLength/Ft)+1;for(let un=0;un<mn;un++){const Nn=un/Math.max(mn-1,1),Mn=ut.lerp(Nn),oi=Mn.x+hi,h2=Mn.y+hi;Q.push(oi,h2,ze,0);const Ka=oi-ze,Qa=h2-ze,jn=oi+ze,kn=h2+ze;if(Pe=Pe&&this.isOffscreen(Ka,Qa,jn,kn),ct=ct||this.isInsideGrid(Ka,Qa,jn,kn),!f&&this.grid.hitTestCircle(oi,h2,ze,Y)&&(Be=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Be,occluded:!1}}}}return{circles:!R&&Be||!ct?[]:Q,offscreen:Pe,collisionDetected:Be,occluded:Te.occluded}}queryRenderedSymbols(l){if(0===l.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const f=[];let v=1/0,b=1/0,w=-1/0,D=-1/0;for(const R of l){const B=new p.pointGeometry(R.x+hi,R.y+hi);v=Math.min(v,B.x),b=Math.min(b,B.y),w=Math.max(w,B.x),D=Math.max(D,B.y),f.push(B)}const A=this.grid.query(v,b,w,D).concat(this.ignoredGrid.query(v,b,w,D)),L={},P={};for(const R of A){const B=R.key;if(void 0===L[B.bucketInstanceId]&&(L[B.bucketInstanceId]={}),L[B.bucketInstanceId][B.featureIndex])continue;const Y=[new p.pointGeometry(R.x1,R.y1),new p.pointGeometry(R.x2,R.y1),new p.pointGeometry(R.x2,R.y2),new p.pointGeometry(R.x1,R.y2)];p.polygonIntersectsPolygon(f,Y)&&(L[B.bucketInstanceId][B.featureIndex]=!0,void 0===P[B.bucketInstanceId]&&(P[B.bucketInstanceId]=[]),P[B.bucketInstanceId].push(B.featureIndex))}return P}insertCollisionBox(l,f,v,b,w){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:b,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,v,b,w){const D=f?this.ignoredGrid:this.grid,A={bucketInstanceId:v,featureIndex:b,collisionGroupID:w};for(let L=0;L<l.length;L+=4)D.insertCircle(A,l[L],l[L+1],l[L+2])}projectAndGetPerspectiveRatio(l,f,v,b,w,D,A){const L=[f,v,b,1];let P=!1;b||this.transform.pitch>0?(p.transformMat4$1(L,L,l),this.fogState&&w&&"globe"!==A.name&&(P=function(J,ee,te,Q,Z,se){const oe=se.calculateFogTileMatrix(Z),ue=[ee,te,Q];return p.transformMat4(ue,ue,oe),Dr(J,ue,se.pitch,se._fov)}(this.fogState,f,v,b,w.toUnwrapped(),this.transform)>.9)):ql(L,L,l);const R=L[3];return{point:new p.pointGeometry((L[0]/R+1)/2*this.transform.width+hi,(-L[1]/R+1)/2*this.transform.height+hi),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(A)/R*.5,1.5),signedDistanceFromCamera:R,occluded:D&&L[2]>R||P}}isOffscreen(l,f,v,b){return v<hi||l>=this.screenRightBoundary||b<hi||f>this.screenBottomBoundary}isInsideGrid(l,f,v,b){return v>=0&&l<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=p.identity([]);return p.translate(l,l,[-100,-100,0]),l}}function Qr(m,l,f){const v=l.createTileMatrix(m,m.worldSize,f.toUnwrapped());return p.multiply(new Float32Array(16),m.projMatrix,v)}function x1(m,l,f){if(l.projection.name===f.projection.name)return m.projMatrix;const v=f.clone();return v.setProjection(l.projection),Qr(v,l.getProjection(),m)}function pn(m,l,f){return l.name===f.projection.name?m.projMatrix:Qr(f,l,m)}class Xs{constructor(l,f,v,b){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):b&&v?1:0,this.placed=v}isHidden(){return 0===this.opacity&&!this.placed}}class is{constructor(l,f,v,b,w,D=!1){this.text=new Xs(l?l.text:null,f,v,w),this.icon=new Xs(l?l.icon:null,f,b,w),this.clipped=D}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class rs{constructor(l,f,v,b=!1){this.text=l,this.icon=f,this.skipFade=v,this.clipped=b}}class Jr{constructor(){this.invProjMatrix=p.create(),this.viewportMatrix=p.create(),this.circles=[]}}class Un{constructor(l,f,v,b,w){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=v,this.bucketIndex=b,this.tileID=w}}class ti{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:v=>v.collisionGroupID===f}}return this.collisionGroups[l]}}function Gc(m,l,f,v,b){const{horizontalAlign:w,verticalAlign:D}=p.getAnchorAlignment(m),A=-(w-.5)*l,L=-(D-.5)*f,P=p.evaluateVariableOffset(m,v);return new p.pointGeometry(A+P[0]*b,L+P[1]*b)}function $c(m,l,f,v,b){const w=new p.pointGeometry(m,l);return f&&w._rotate(v?b:-b),w}class ri{constructor(l,f,v,b,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new rt(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new ti(v),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,v,b){const w=v.getBucket(f),D=v.latestFeatureIndex;if(!w||!D||f.id!==w.layerIds[0])return;const A=w.layers[0].layout,L=v.collisionBoxArray,P=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),R=v.tileSize/p.EXTENT,B=v.tileID.toUnwrapped();this.transform.setProjection(w.projection);const Y=(J=v.tileID,ee=w.getProjection(),te=this.transform,ee.name===this.projection?te.calculateProjMatrix(J.toUnwrapped()):Qr(te,ee,J));var J,ee,te;const Q="map"===A.get("text-pitch-alignment"),Z="map"===A.get("text-rotation-alignment");f.compileFilter();const se=f.dynamicFilter(),oe=f.dynamicFilterNeedsFeature(),ue=this.transform.calculatePixelsToTileUnitsMatrix(v),ye=Jn(Y,v.tileID.canonical,Q,Z,this.transform,w.getProjection(),ue);let _e=null;if(Q){const Te=Ci(Y,v.tileID.canonical,Q,Z,this.transform,w.getProjection(),ue);_e=p.multiply([],this.transform.labelPlaneMatrix,Te)}let Ce=null;se&&v.latestFeatureIndex&&(Ce={unwrappedTileID:B,dynamicFilter:se,dynamicFilterNeedsFeature:oe,featureIndex:v.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Un(w.bucketInstanceId,D,w.sourceLayerIndex,w.index,v.tileID);const Se={bucket:w,layout:A,posMatrix:Y,textLabelPlaneMatrix:ye,labelToScreenMatrix:_e,clippingData:Ce,scale:P,textPixelRatio:R,holdingForFade:v.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:p.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:p.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(b)for(const Te of w.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:gt,symbolInstanceEnd:Ee}=Te;l.push({sortKey:Re,symbolInstanceStart:gt,symbolInstanceEnd:Ee,parameters:Se})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te,Q,Z,se){const{textOffset0:oe,textOffset1:ue,crossTileID:ye}=Y,_e=[oe,ue],Ce=Gc(l,v,b,_e,w),Se=this.collisionIndex.placeCollisionBox(ee,w,f,$c(Ce.x,Ce.y,D,A,this.transform.angle),B,L,P,R.predicate);if(Q){const Te=ee.getSymbolInstanceIconSize(se,this.transform.zoom,Y.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(ee,Te,Q,$c(Ce.x,Ce.y,D,A,this.transform.angle),B,L,P,R.predicate).box.length)return}if(Se.box.length>0){let Te;return this.prevPlacement&&this.prevPlacement.variableOffsets[ye]&&this.prevPlacement.placements[ye]&&this.prevPlacement.placements[ye].text&&(Te=this.prevPlacement.variableOffsets[ye].anchor),this.variableOffsets[ye]={textOffset:_e,width:v,height:b,anchor:l,textScale:w,prevAnchor:Te},this.markUsedJustification(ee,l,Y,te),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,te,Y),this.placedOrientations[ye]=te),{shift:Ce,placedGlyphBoxes:Se}}}placeLayerBucketPart(l,f,v,b){const{bucket:w,layout:D,posMatrix:A,textLabelPlaneMatrix:L,labelToScreenMatrix:P,clippingData:R,textPixelRatio:B,holdingForFade:Y,collisionBoxArray:J,partiallyEvaluatedTextSize:ee,partiallyEvaluatedIconSize:te,collisionGroup:Q}=l.parameters,Z=D.get("text-optional"),se=D.get("icon-optional"),oe=D.get("text-allow-overlap"),ue=D.get("icon-allow-overlap"),ye="map"===D.get("text-rotation-alignment"),_e="map"===D.get("text-pitch-alignment"),Ce="none"!==D.get("icon-text-fit"),Se="viewport-y"===D.get("symbol-z-order");this.transform.setProjection(w.projection);let Te=oe&&(ue||!w.hasIconData()||se),Re=ue&&(oe||!w.hasTextData()||Z);!w.collisionArrays&&J&&w.deserializeCollisionBoxes(J),v&&b&&w.updateCollisionDebugBuffers(this.transform.zoom,J);const gt=(Ee,et,Be)=>{const{crossTileID:ct,numVerticalGlyphVertices:Pe}=Ee;if(R){const jn={zoom:this.transform.zoom,pitch:this.transform.pitch};let kn=null;if(R.dynamicFilterNeedsFeature){const T1=this.retainedQueryData[w.bucketInstanceId];kn=R.featureIndex.loadFeature({featureIndex:Ee.featureIndex,bucketIndex:T1.bucketIndex,sourceLayerIndex:T1.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,R.dynamicFilter)(jn,kn,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new p.pointGeometry(Ee.tileAnchorX,Ee.tileAnchorY),this.transform.calculateDistanceTileData(R.unwrappedTileID)))return this.placements[ct]=new rs(!1,!1,!1,!0),void(f[ct]=!0)}if(f[ct])return;if(Y)return void(this.placements[ct]=new rs(!1,!1,!1));let ze=!1,Ne=!1,ot=!0,ut=!1,Pt=!1,L1=null,Dt={box:null,offscreen:null,occluded:null},zt={box:null,offscreen:null,occluded:null},Ft=null,A1=null,Ut=null,mn=0,un=0,Nn=0;Be.textFeatureIndex?mn=Be.textFeatureIndex:Ee.useRuntimeCollisionCircles&&(mn=Ee.featureIndex),Be.verticalTextFeatureIndex&&(un=Be.verticalTextFeatureIndex);const Mn=jn=>{jn.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const kn=this.transform.elevation;(kn||jn.elevation)&&(jn.elevation=kn?kn.getAtTileOffset(jn.tileID,jn.tileAnchorX,jn.tileAnchorY):0)},oi=Be.textBox;if(oi){Mn(oi);const jn=T1=>{let si=p.WritingMode.horizontal;if(w.allowVerticalPlacement&&!T1&&this.prevPlacement){const Ri=this.prevPlacement.placedOrientations[ct];Ri&&(this.placedOrientations[ct]=Ri,si=Ri,this.markUsedOrientation(w,si,Ee))}return si},kn=(T1,si)=>{if(w.allowVerticalPlacement&&Pe>0&&Be.verticalTextBox){for(const Ri of w.writingModes)if(Ri===p.WritingMode.vertical?(Dt=si(),zt=Dt):Dt=T1(),Dt&&Dt.box&&Dt.box.length)break}else Dt=T1()};if(D.get("text-variable-anchor")){let T1=D.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ct]){const In=this.prevPlacement.variableOffsets[ct];T1.indexOf(In.anchor)>0&&(T1=T1.filter(p2=>p2!==In.anchor),T1.unshift(In.anchor))}const si=(In,p2,Qi)=>{const Ja=w.getSymbolInstanceTextSize(ee,Ee,this.transform.zoom,et),n3=(In.x2-In.x1)*Ja+2*In.padding,vr=(In.y2-In.y1)*Ja+2*In.padding,Rr=Ce&&!ue?p2:null;Rr&&Mn(Rr);let eo={box:[],offscreen:!1,occluded:!1};const No=oe?2*T1.length:T1.length;for(let _s=0;_s<No;++_s){const Oo=this.attemptAnchorPlacement(T1[_s%T1.length],In,n3,vr,Ja,ye,_e,B,A,Q,_s>=T1.length,Ee,et,w,Qi,Rr,ee,te);if(Oo&&(eo=Oo.placedGlyphBoxes,eo&&eo.box&&eo.box.length)){ze=!0,L1=Oo.shift;break}}return eo};kn(()=>si(oi,Be.iconBox,p.WritingMode.horizontal),()=>{const In=Be.verticalTextBox;return In&&Mn(In),w.allowVerticalPlacement&&!(Dt&&Dt.box&&Dt.box.length)&&Pe>0&&In?si(In,Be.verticalIconBox,p.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Dt&&(ze=Dt.box,ot=Dt.offscreen,ut=Dt.occluded);const Ri=jn(Dt&&Dt.box);if(!ze&&this.prevPlacement){const In=this.prevPlacement.variableOffsets[ct];In&&(this.variableOffsets[ct]=In,this.markUsedJustification(w,In.anchor,Ee,Ri))}}else{const T1=(si,Ri)=>{const In=w.getSymbolInstanceTextSize(ee,Ee,this.transform.zoom,et),p2=this.collisionIndex.placeCollisionBox(w,In,si,new p.pointGeometry(0,0),oe,B,A,Q.predicate);return p2&&p2.box&&p2.box.length&&(this.markUsedOrientation(w,Ri,Ee),this.placedOrientations[ct]=Ri),p2};kn(()=>T1(oi,p.WritingMode.horizontal),()=>{const si=Be.verticalTextBox;return w.allowVerticalPlacement&&Pe>0&&si?(Mn(si),T1(si,p.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),jn(Dt&&Dt.box&&Dt.box.length)}}if(Ft=Dt,ze=Ft&&Ft.box&&Ft.box.length>0,ot=Ft&&Ft.offscreen,ut=Ft&&Ft.occluded,Ee.useRuntimeCollisionCircles){const jn=w.text.placedSymbolArray.get(Ee.centerJustifiedTextSymbolIndex>=0?Ee.centerJustifiedTextSymbolIndex:Ee.verticalPlacedTextSymbolIndex),kn=p.evaluateSizeForFeature(w.textSizeData,ee,jn),T1=D.get("text-padding");A1=this.collisionIndex.placeCollisionCircles(w,oe,jn,w.lineVertexArray,w.glyphOffsetArray,kn,A,L,P,v,_e,Q.predicate,Ee.collisionCircleDiameter*kn/p.ONE_EM,T1,this.retainedQueryData[w.bucketInstanceId].tileID),ze=oe||A1.circles.length>0&&!A1.collisionDetected,ot=ot&&A1.offscreen,ut=A1.occluded}if(Be.iconFeatureIndex&&(Nn=Be.iconFeatureIndex),Be.iconBox){const jn=kn=>{Mn(kn);const T1=Ce&&L1?$c(L1.x,L1.y,ye,_e,this.transform.angle):new p.pointGeometry(0,0),si=w.getSymbolInstanceIconSize(te,this.transform.zoom,Ee.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,si,kn,T1,ue,B,A,Q.predicate)};zt&&zt.box&&zt.box.length&&Be.verticalIconBox?(Ut=jn(Be.verticalIconBox),Ne=Ut.box.length>0):(Ut=jn(Be.iconBox),Ne=Ut.box.length>0),ot=ot&&Ut.offscreen,Pt=Ut.occluded}const h2=Z||0===Ee.numHorizontalGlyphVertices&&0===Pe,Ka=se||0===Ee.numIconVertices;if(h2||Ka?Ka?h2||(Ne=Ne&&ze):ze=Ne&&ze:Ne=ze=Ne&&ze,ze&&Ft&&Ft.box&&this.collisionIndex.insertCollisionBox(Ft.box,D.get("text-ignore-placement"),w.bucketInstanceId,zt&&zt.box&&un?un:mn,Q.ID),Ne&&Ut&&this.collisionIndex.insertCollisionBox(Ut.box,D.get("icon-ignore-placement"),w.bucketInstanceId,Nn,Q.ID),A1&&(ze&&this.collisionIndex.insertCollisionCircles(A1.circles,D.get("text-ignore-placement"),w.bucketInstanceId,mn,Q.ID),v)){const jn=w.bucketInstanceId;let kn=this.collisionCircleArrays[jn];void 0===kn&&(kn=this.collisionCircleArrays[jn]=new Jr);for(let T1=0;T1<A1.circles.length;T1+=4)kn.circles.push(A1.circles[T1+0]),kn.circles.push(A1.circles[T1+1]),kn.circles.push(A1.circles[T1+2]),kn.circles.push(A1.collisionDetected?1:0)}const Qa="globe"!==w.projection.name;Te=Te&&(Qa||!ut),Re=Re&&(Qa||!Pt),this.placements[ct]=new rs(ze||Te,Ne||Re,ot||w.justReloaded),f[ct]=!0};if(Se){const Ee=w.getSortedSymbolIndexes(this.transform.angle);for(let et=Ee.length-1;et>=0;--et){const Be=Ee[et];gt(w.symbolInstances.get(Be),Be,w.collisionArrays[Be])}}else for(let Ee=l.symbolInstanceStart;Ee<l.symbolInstanceEnd;Ee++)gt(w.symbolInstances.get(Ee),Ee,w.collisionArrays[Ee]);if(v&&w.bucketInstanceId in this.collisionCircleArrays){const Ee=this.collisionCircleArrays[w.bucketInstanceId];p.invert(Ee.invProjMatrix,A),Ee.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,f,v,b){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:L,crossTileID:P}=v,R=p.getAnchorJustification(f),B=b===p.WritingMode.vertical?L:"left"===R?w:"center"===R?D:"right"===R?A:-1;w>=0&&(l.text.placedSymbolArray.get(w).crossTileID=B>=0&&w!==B?0:P),D>=0&&(l.text.placedSymbolArray.get(D).crossTileID=B>=0&&D!==B?0:P),A>=0&&(l.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:P),L>=0&&(l.text.placedSymbolArray.get(L).crossTileID=B>=0&&L!==B?0:P)}markUsedOrientation(l,f,v){const b=f===p.WritingMode.horizontal||f===p.WritingMode.horizontalOnly?f:0,w=f===p.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:D,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:P}=v,R=l.text.placedSymbolArray;D>=0&&(R.get(D).placedOrientation=b),A>=0&&(R.get(A).placedOrientation=b),L>=0&&(R.get(L).placedOrientation=b),P>=0&&(R.get(P).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let v=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(l):1,w=f?f.opacities:{},D=f?f.variableOffsets:{},A=f?f.placedOrientations:{};for(const L in this.placements){const P=this.placements[L],R=w[L];R?(this.opacities[L]=new is(R,b,P.text,P.icon,null,P.clipped),v=v||P.text!==R.text.placed||P.icon!==R.icon.placed):(this.opacities[L]=new is(null,b,P.text,P.icon,P.skipFade,P.clipped),v=v||P.text||P.icon)}for(const L in w){const P=w[L];if(!this.opacities[L]){const R=new is(P,b,!1,!1);R.isHidden()||(this.opacities[L]=R,v=v||P.text.placed||P.icon.placed)}}for(const L in D)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=D[L]);for(const L in A)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=A[L]);v?this.lastPlacementChangeTime=l:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const v={};for(const b of f){const w=b.getBucket(l);w&&b.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,v,b.collisionBoxArray)}}updateBucketOpacities(l,f,v){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const b=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),D=new is(null,0,!1,!1,!0),A=b.get("text-allow-overlap"),L=b.get("icon-allow-overlap"),P=b.get("text-variable-anchor"),R="map"===b.get("text-rotation-alignment"),B="map"===b.get("text-pitch-alignment"),Y="none"!==b.get("icon-text-fit"),J=new is(null,0,A&&(L||!l.hasIconData()||b.get("icon-optional")),L&&(A||!l.hasTextData()||b.get("text-optional")),!0);!l.collisionArrays&&v&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(v);const ee=(Q,Z,se)=>{for(let oe=0;oe<Z/4;oe++)Q.opacityVertexArray.emplaceBack(se)};let te=0;for(let Q=0;Q<l.symbolInstances.length;Q++){const Z=l.symbolInstances.get(Q),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:oe,crossTileID:ue,numIconVertices:ye}=Z;let _e=this.opacities[ue];f[ue]?_e=D:_e||(_e=J,this.opacities[ue]=_e),f[ue]=!0;const Ce=se>0||oe>0,Se=ye>0,Te=this.placedOrientations[ue],Re=Te===p.WritingMode.vertical,gt=Te===p.WritingMode.horizontal||Te===p.WritingMode.horizontalOnly;if(!Ce&&!Se||_e.isHidden()||te++,Ce){const Ee=wi(_e.text);ee(l.text,se,Re?on:Ee),ee(l.text,oe,gt?on:Ee);const et=_e.text.isHidden(),{leftJustifiedTextSymbolIndex:Be,centerJustifiedTextSymbolIndex:ct,rightJustifiedTextSymbolIndex:Pe,verticalPlacedTextSymbolIndex:ze}=Z,Ne=l.text.placedSymbolArray,ot=et||Re?1:0;Be>=0&&(Ne.get(Be).hidden=ot),ct>=0&&(Ne.get(ct).hidden=ot),Pe>=0&&(Ne.get(Pe).hidden=ot),ze>=0&&(Ne.get(ze).hidden=et||gt?1:0);const ut=this.variableOffsets[ue];ut&&this.markUsedJustification(l,ut.anchor,Z,Te);const Pt=this.placedOrientations[ue];Pt&&(this.markUsedJustification(l,"left",Z,Pt),this.markUsedOrientation(l,Pt,Z))}if(Se){const Ee=wi(_e.icon),{placedIconSymbolIndex:et,verticalPlacedIconSymbolIndex:Be}=Z,ct=l.icon.placedSymbolArray,Pe=_e.icon.isHidden()?1:0;et>=0&&(ee(l.icon,ye,Re?on:Ee),ct.get(et).hidden=Pe),Be>=0&&(ee(l.icon,Z.numVerticalIconVertices,gt?on:Ee),ct.get(Be).hidden=Pe)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Ee=l.collisionArrays[Q];if(Ee){let et=new p.pointGeometry(0,0),Be=!0;if(Ee.textBox||Ee.verticalTextBox){if(P){const Pe=this.variableOffsets[ue];Pe?(et=Gc(Pe.anchor,Pe.width,Pe.height,Pe.textOffset,Pe.textScale),R&&et._rotate(B?this.transform.angle:-this.transform.angle)):Be=!1}w&&(Be=!_e.clipped),Ee.textBox&&C2(l.textCollisionBox.collisionVertexArray,_e.text.placed,!Be||Re,et.x,et.y),Ee.verticalTextBox&&C2(l.textCollisionBox.collisionVertexArray,_e.text.placed,!Be||gt,et.x,et.y)}const ct=Be&&Boolean(!gt&&Ee.verticalIconBox);Ee.iconBox&&C2(l.iconCollisionBox.collisionVertexArray,_e.icon.placed,ct,Y?et.x:0,Y?et.y:0),Ee.verticalIconBox&&C2(l.iconCollisionBox.collisionVertexArray,_e.icon.placed,!ct,Y?et.x:0,Y?et.y:0)}}}if(l.fullyClipped=0===te,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Q.invProjMatrix,l.placementViewportMatrix=Q.viewportMatrix,l.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return 0===this.fadeDuration?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const v=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*v>l}setStale(){this.stale=!0}}function C2(m,l,f,v,b){m.emplaceBack(l?1:0,f?1:0,v||0,b||0),m.emplaceBack(l?1:0,f?1:0,v||0,b||0),m.emplaceBack(l?1:0,f?1:0,v||0,b||0),m.emplaceBack(l?1:0,f?1:0,v||0,b||0)}const Wl=Math.pow(2,25),z3=Math.pow(2,24),pi=Math.pow(2,17),Ks=Math.pow(2,16),b4=Math.pow(2,9),as=Math.pow(2,8),Zi=Math.pow(2,1);function wi(m){if(0===m.opacity&&!m.placed)return 0;if(1===m.opacity&&m.placed)return 4294967295;const l=m.placed?1:0,f=Math.floor(127*m.opacity);return f*Wl+l*z3+f*pi+l*Ks+f*b4+l*as+f*Zi+l}const on=0;class Na{constructor(l){this._sortAcrossTiles="viewport-y"!==l.layout.get("symbol-z-order")&&void 0!==l.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,f,v,b,w){const D=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(D,b,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((A,L)=>A.sortKey-L.sortKey));this._currentPartIndex<D.length;){const A=D[this._currentPartIndex];if(f.placeLayerBucketPart(A,this._seenCrossTileIDs,v,0===A.symbolInstanceStart),this._currentPartIndex++,w())return!0}return!1}}class qc{constructor(l,f,v,b,w,D,A,L){this.placement=new ri(l,w,D,A,L),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(l,f,v){const b=p.exported.now(),w=()=>{const D=p.exported.now()-b;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=f[l[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if("symbol"===D.type&&(!D.minzoom||D.minzoom<=A)&&(!D.maxzoom||D.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Na(D)),this._inProgressLayer.continuePlacement(v[D.source],this.placement,this._showCollisionBoxes,D,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Eo=512/p.EXTENT/2;class at{constructor(l,f,v){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=v;for(let b=0;b<f.length;b++){const w=f.get(b),D=w.key;this.indexedSymbolInstances[D]||(this.indexedSymbolInstances[D]=[]),this.indexedSymbolInstances[D].push({crossTileID:w.crossTileID,coord:this.getScaledCoordinates(w,l)})}}getScaledCoordinates(l,f){const v=Eo/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*p.EXTENT+l.tileAnchorX)*v),y:Math.floor((f.canonical.y*p.EXTENT+l.tileAnchorY)*v)}}findMatches(l,f,v){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let w=0;w<l.length;w++){const D=l.get(w);if(D.crossTileID)continue;const A=this.indexedSymbolInstances[D.key];if(!A)continue;const L=this.getScaledCoordinates(D,f);for(const P of A)if(Math.abs(P.coord.x-L.x)<=b&&Math.abs(P.coord.y-L.y)<=b&&!v[P.crossTileID]){v[P.crossTileID]=!0,D.crossTileID=P.crossTileID;break}}}}class x4{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class l1{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(0!==f)for(const v in this.indexes){const b=this.indexes[v],w={};for(const D in b){const A=b[D];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+f),w[A.tileID.key]=A}this.indexes[v]=w}this.lng=l}addBucket(l,f,v){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<f.symbolInstances.length;w++)f.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const b=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const D=this.indexes[w];if(Number(w)>l.overscaledZ)for(const A in D){const L=D[A];L.tileID.isChildOf(l)&&L.findMatches(f.symbolInstances,l,b)}else{const A=D[l.scaledTo(Number(w)).key];A&&A.findMatches(f.symbolInstances,l,b)}}for(let w=0;w<f.symbolInstances.length;w++){const D=f.symbolInstances.get(w);D.crossTileID||(D.crossTileID=v.generate(),b[D.crossTileID]=!0)}return void 0===this.indexes[l.overscaledZ]&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new at(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const v in f.indexedSymbolInstances)for(const b of f.indexedSymbolInstances[v])delete this.usedCrossTileIDs[l][b.crossTileID]}removeStaleBuckets(l){let f=!1;for(const v in this.indexes){const b=this.indexes[v];for(const w in b)l[b[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,b[w]),delete b[w],f=!0)}return f}}class os{constructor(){this.layerIndexes={},this.crossTileIDs=new x4,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,v,b){let w=this.layerIndexes[l.id];void 0===w&&(w=this.layerIndexes[l.id]=new l1);let D=!1;const A={};"globe"!==b.name&&w.handleWrapJump(v);for(const L of f){const P=L.getBucket(l);P&&l.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,P,this.crossTileIDs)&&(D=!0),A[P.bucketInstanceId]=!0)}return w.removeStaleBuckets(A)&&(D=!0),D}pruneUnusedLayers(l){const f={};l.forEach(v=>{f[v]=!0});for(const v in this.layerIndexes)f[v]||delete this.layerIndexes[v]}}const ss=(m,l)=>p.emitValidationErrors(m,l&&l.filter(f=>"source.canvas"!==f.identifier)),Oa=p.pick(Wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ba=p.pick(Wt,["setCenter","setZoom","setBearing","setPitch"]),Qs={version:8,layers:[],sources:{}},Tr={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class w2 extends p.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new Wr(Ht(),this),this.imageManager=new qr,this.imageManager.setEventedParent(this),this.glyphManager=new p.GlyphManager(l._requestManager,f.localFontFamily?p.LocalGlyphMode.all:f.localIdeographFontFamily?p.LocalGlyphMode.ideographs:p.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new os,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",p.getReferrer());const v=this;this._rtlTextPluginCallback=w2.registerForPluginStateChange(b=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(w,D)=>{if(p.triggerPluginCompletionEvent(w),D&&D.every(A=>A))for(const A in v._sourceCaches){const L=v._sourceCaches[A],P=L.getSource().type;"vector"!==P&&"geojson"!==P||L.reload()}})}),this.on("data",b=>{if("source"!==b.dataType||"metadata"!==b.sourceDataType)return;const w=this.getSource(b.sourceId);if(w&&w.vectorLayerIds)for(const D in this._layers){const A=this._layers[D];A.source===w.id&&this._validateLayer(A)}})}loadURL(l,f={}){this.fire(new p.Event("dataloading",{dataType:"style"}));const v="boolean"==typeof f.validate?f.validate:!p.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,f.accessToken);const b=this.map._requestManager.transformRequest(l,p.ResourceType.Style);this._request=p.getJSON(b,(w,D)=>{this._request=null,w?this.fire(new p.ErrorEvent(w)):D&&this._load(D,v)})}loadJSON(l,f={}){this.fire(new p.Event("dataloading",{dataType:"style"})),this._request=p.exported.frame(()=>{this._request=null,this._load(l,!1!==f.validate)})}loadEmpty(){this.fire(new p.Event("dataloading",{dataType:"style"})),this._load(Qs,!1)}_updateLayerCount(l,f){const v=f?1:-1;l.is3D()&&(this._num3DLayers+=v),"circle"===l.type&&(this._numCircleLayers+=v),"symbol"===l.type&&(this._numSymbolLayers+=v)}_load(l,f){if(f&&ss(this,p.validateStyle(l)))return;this._loaded=!0,this.stylesheet=p.clone$1(l),this._updateMapProjection();for(const b in l.sources)this.addSource(b,l.sources[b],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const v=Q1(this.stylesheet.layers);this._order=v.map(b=>b.id),this._layers={},this._serializedLayers={};for(const b of v){const w=p.createStyleLayer(b);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new s2(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new p.Event("data",{dataType:"style"})),this.fire(new p.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(f,v,b){let w,D,A;const L=p.exported.devicePixelRatio>1?"@2x":"";let P=p.getJSON(v.transformRequest(v.normalizeSpriteURL(f,L,".json"),p.ResourceType.SpriteJSON),(Y,J)=>{P=null,A||(A=Y,w=J,B())}),R=p.getImage(v.transformRequest(v.normalizeSpriteURL(f,L,".png"),p.ResourceType.SpriteImage),(Y,J)=>{R=null,A||(A=Y,D=J,B())});function B(){if(A)b(A);else if(w&&D){const Y=p.exported.getImageData(D),J={};for(const ee in w){const{width:te,height:Q,x:Z,y:se,sdf:oe,pixelRatio:ue,stretchX:ye,stretchY:_e,content:Ce}=w[ee],Se=new p.RGBAImage({width:te,height:Q});p.RGBAImage.copy(Y,Se,{x:Z,y:se},{x:0,y:0},{width:te,height:Q}),J[ee]={data:Se,pixelRatio:ue,sdf:oe,stretchX:ye,stretchY:_e,content:Ce}}b(null,J)}}return{cancel(){P&&(P.cancel(),P=null),R&&(R.cancel(),R=null)}}}(l,this.map._requestManager,(f,v)=>{if(this._spriteRequest=null,f)this.fire(new p.ErrorEvent(f));else if(v)for(const b in v)this.imageManager.addImage(b,v[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new p.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.getSource(l.source);if(!f)return;const v=l.sourceLayer;v&&("geojson"===f.type||f.vectorLayerIds&&-1===f.vectorLayerIds.indexOf(v))&&this.fire(new p.ErrorEvent(new Error(`Source layer "${v}" does not exist on source "${f.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const v of l){const b=this._layers[v];"custom"!==b.type&&f.push(b.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&("function"==typeof l.isLayerDraped?l.isLayerDraped():Tr[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(b.length||w.length)&&this._updateWorkerLayers(b,w);for(const D in this._updatedSources){const A=this._updatedSources[D];"reload"===A?this._reloadSource(D):"clear"===A&&this._clearSource(D)}this._updateTilesForChangedImages();for(const D in this._updatedPaintProps)this._layers[D].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const v={};for(const b in this._sourceCaches){const w=this._sourceCaches[b];v[b]=w.used,w.used=!1}for(const b of this._order){const w=this._layers[b];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const A=this._getLayerSourceCache(w);A&&(A.used=!0)}const D=this.map.painter;if(D){const A=w.getProgramIds();if(!A)continue;const L=w.getProgramConfiguration(l.zoom);for(const P of A)D.useProgram(P,L)}}for(const b in v){const w=this._sourceCaches[b];v[b]!==w.used&&w.getSource().fire(new p.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new p.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),ss(this,p.validateStyle(l)))return!1;(l=p.clone$1(l)).layers=Q1(l.layers);const f=function(b,w){if(!b)return[{command:Wt.setStyle,args:[w]}];let D=[];try{if(!Ye(b.version,w.version))return[{command:Wt.setStyle,args:[w]}];Ye(b.center,w.center)||D.push({command:Wt.setCenter,args:[w.center]}),Ye(b.zoom,w.zoom)||D.push({command:Wt.setZoom,args:[w.zoom]}),Ye(b.bearing,w.bearing)||D.push({command:Wt.setBearing,args:[w.bearing]}),Ye(b.pitch,w.pitch)||D.push({command:Wt.setPitch,args:[w.pitch]}),Ye(b.sprite,w.sprite)||D.push({command:Wt.setSprite,args:[w.sprite]}),Ye(b.glyphs,w.glyphs)||D.push({command:Wt.setGlyphs,args:[w.glyphs]}),Ye(b.transition,w.transition)||D.push({command:Wt.setTransition,args:[w.transition]}),Ye(b.light,w.light)||D.push({command:Wt.setLight,args:[w.light]}),Ye(b.fog,w.fog)||D.push({command:Wt.setFog,args:[w.fog]}),Ye(b.projection,w.projection)||D.push({command:Wt.setProjection,args:[w.projection]});const A={},L=[];!function(B,Y,J,ee){let te;for(te in Y=Y||{},B=B||{})B.hasOwnProperty(te)&&(Y.hasOwnProperty(te)||Cn(te,J,ee));for(te in Y){if(!Y.hasOwnProperty(te))continue;const Q=Y[te];B.hasOwnProperty(te)?Ye(B[te],Q)||("geojson"===B[te].type&&"geojson"===Q.type&&Xr(B,Y,te)?J.push({command:Wt.setGeoJSONSourceData,args:[te,Q.data]}):pa(te,Y,J,ee)):nn(te,Y,J)}}(b.sources,w.sources,L,A);const P=[];b.layers&&b.layers.forEach(B=>{B.source&&A[B.source]?D.push({command:Wt.removeLayer,args:[B.id]}):P.push(B)});let R=b.terrain;R&&A[R.source]&&(D.push({command:Wt.setTerrain,args:[void 0]}),R=void 0),D=D.concat(L),Ye(R,w.terrain)||D.push({command:Wt.setTerrain,args:[w.terrain]}),function(B,Y,J){Y=Y||[];const ee=(B=B||[]).map(ma),te=Y.map(ma),Q=B.reduce(Qn,{}),Z=Y.reduce(Qn,{}),se=ee.slice(),oe=Object.create(null);let ue,ye,_e,Ce,Se,Te,Re;for(ue=0,ye=0;ue<ee.length;ue++)_e=ee[ue],Z.hasOwnProperty(_e)?ye++:(J.push({command:Wt.removeLayer,args:[_e]}),se.splice(se.indexOf(_e,ye),1));for(ue=0,ye=0;ue<te.length;ue++)_e=te[te.length-1-ue],se[se.length-1-ue]!==_e&&(Q.hasOwnProperty(_e)?(J.push({command:Wt.removeLayer,args:[_e]}),se.splice(se.lastIndexOf(_e,se.length-ye),1)):ye++,Te=se[se.length-ue],J.push({command:Wt.addLayer,args:[Z[_e],Te]}),se.splice(se.length-ue,0,_e),oe[_e]=!0);for(ue=0;ue<te.length;ue++)if(_e=te[ue],Ce=Q[_e],Se=Z[_e],!oe[_e]&&!Ye(Ce,Se))if(Ye(Ce.source,Se.source)&&Ye(Ce["source-layer"],Se["source-layer"])&&Ye(Ce.type,Se.type)){for(Re in qe(Ce.layout,Se.layout,J,_e,null,Wt.setLayoutProperty),qe(Ce.paint,Se.paint,J,_e,null,Wt.setPaintProperty),Ye(Ce.filter,Se.filter)||J.push({command:Wt.setFilter,args:[_e,Se.filter]}),Ye(Ce.minzoom,Se.minzoom)&&Ye(Ce.maxzoom,Se.maxzoom)||J.push({command:Wt.setLayerZoomRange,args:[_e,Se.minzoom,Se.maxzoom]}),Ce)Ce.hasOwnProperty(Re)&&"layout"!==Re&&"paint"!==Re&&"filter"!==Re&&"metadata"!==Re&&"minzoom"!==Re&&"maxzoom"!==Re&&(0===Re.indexOf("paint.")?qe(Ce[Re],Se[Re],J,_e,Re.slice(6),Wt.setPaintProperty):Ye(Ce[Re],Se[Re])||J.push({command:Wt.setLayerProperty,args:[_e,Re,Se[Re]]}));for(Re in Se)Se.hasOwnProperty(Re)&&!Ce.hasOwnProperty(Re)&&"layout"!==Re&&"paint"!==Re&&"filter"!==Re&&"metadata"!==Re&&"minzoom"!==Re&&"maxzoom"!==Re&&(0===Re.indexOf("paint.")?qe(Ce[Re],Se[Re],J,_e,Re.slice(6),Wt.setPaintProperty):Ye(Ce[Re],Se[Re])||J.push({command:Wt.setLayerProperty,args:[_e,Re,Se[Re]]}))}else J.push({command:Wt.removeLayer,args:[_e]}),Te=se[se.lastIndexOf(_e)+1],J.push({command:Wt.addLayer,args:[Se,Te]})}(P,w.layers,D)}catch(A){console.warn("Unable to compute style diff:",A),D=[{command:Wt.setStyle,args:[w]}]}return D}(this.serialize(),l).filter(b=>!(b.command in Ba));if(0===f.length)return!1;const v=f.filter(b=>!(b.command in Oa));if(v.length>0)throw new Error(`Unimplemented: ${v.map(b=>b.command).join(", ")}.`);return f.forEach(b=>{"setTransition"!==b.command&&"setProjection"!==b.command&&this[b.command].apply(this,b.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,f){return this.getImage(l)?this.fire(new p.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,f),this._afterImageUpdated(l),this)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new p.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new p.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,f,v={}){if(this._checkLoaded(),void 0!==this.getSource(l))throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(p.validateSource,`sources.${l}`,f,null,v))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=De(l,f,this.dispatcher,this);b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:b.serialize(),sourceId:l}));const w=D=>{const A=(D?"symbol:":"other:")+l,L=this._sourceCaches[A]=new p.SourceCache(A,b,D);(D?this._symbolSourceCaches:this._otherSourceCaches)[l]=L,L.style=this,L.onAdd(this.map)};w(!1),"vector"!==f.type&&"geojson"!==f.type||w(!0),b.onAdd&&b.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const f=this.getSource(l);if(!f)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===l)return this.fire(new p.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new p.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const v=this._getSourceCaches(l);for(const b of v)delete this._sourceCaches[b.id],delete this._updatedSources[b.id],b.fire(new p.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,f){this._checkLoaded(),this.getSource(l).setData(f),this._changed=!0}getSource(l){const f=this._getSourceCache(l);return f&&f.getSource()}_getSources(){const l=[];for(const f in this._otherSourceCaches){const v=this._getSourceCache(f);v&&l.push(v.getSource())}return l}addLayer(l,f,v={}){this._checkLoaded();const b=l.id;if(this.getLayer(b))return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${b}" already exists on this map`)));let w;if("custom"===l.type){if(ss(this,p.validateCustomStyleLayer(l)))return;w=p.createStyleLayer(l)}else{if("object"==typeof l.source&&(this.addSource(b,l.source),l=p.clone$1(l),l=p.extend(l,{source:b})),this._validate(p.validateLayer,`layers.${b}`,l,{arrayIndex:-1},v))return;w=p.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const D=f?this._order.indexOf(f):this._order.length;if(f&&-1===D)return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(D,0,b),this._layerOrderChanged=!0,this._layers[b]=w;const A=this._getLayerSourceCache(w);if(this._removedLayers[b]&&w.source&&A&&"custom"!==w.type){const L=this._removedLayers[b];delete this._removedLayers[b],L.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",A.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const v=this._order.indexOf(l);this._order.splice(v,1);const b=f?this._order.indexOf(f):this._order.length;f&&-1===b?this.fire(new p.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(b,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const v=this._order.indexOf(l);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const f in this._layers)if(this._layers[f].type===l)return!0;return!1}setLayerZoomRange(l,f,v){this._checkLoaded();const b=this.getLayer(l);b?b.minzoom===f&&b.maxzoom===v||(null!=f&&(b.minzoom=f),null!=v&&(b.maxzoom=v),this._updateLayer(b)):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,f,v={}){this._checkLoaded();const b=this.getLayer(l);if(b){if(!Ye(b.filter,f))return null==f?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(p.validateFilter,`layers.${b.id}.filter`,f,{layerType:b.type},v)||(b.filter=p.clone$1(f),this._updateLayer(b)))}else this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const f=this.getLayer(l);return f&&p.clone$1(f.filter)}setLayoutProperty(l,f,v,b={}){this._checkLoaded();const w=this.getLayer(l);w?Ye(w.getLayoutProperty(f),v)||(w.setLayoutProperty(f,v,b),this._updateLayer(w)):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,f){const v=this.getLayer(l);if(v)return v.getLayoutProperty(f);this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,f,v,b={}){this._checkLoaded();const w=this.getLayer(l);w?Ye(w.getPaintProperty(f),v)||(w.setPaintProperty(f,v,b)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,f){const v=this.getLayer(l);return v&&v.getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const v=l.source,b=l.sourceLayer,w=this.getSource(v);if(!w)return void this.fire(new p.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const D=w.type;if("geojson"===D&&b)return void this.fire(new p.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===D&&!b)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===l.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(v);for(const L of A)L.setFeatureState(b,l.id,f)}removeFeatureState(l,f){this._checkLoaded();const v=l.source,b=this.getSource(v);if(!b)return void this.fire(new p.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const w=b.type,D="vector"===w?l.sourceLayer:void 0;if("vector"===w&&!D)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&"string"!=typeof l.id&&"number"!=typeof l.id)return void this.fire(new p.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(v);for(const L of A)L.removeFeatureState(D,l.id,f)}getFeatureState(l){this._checkLoaded();const f=l.source,v=l.sourceLayer,b=this.getSource(f);if(b){if("vector"!==b.type||v)return void 0===l.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(v,l.id);this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return p.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const f in this._sourceCaches){const v=this._sourceCaches[f].getSource();l[v.id]||(l[v.id]=v.serialize())}return p.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},f=>void 0!==f)}_updateLayer(l){this._updatedLayers[l.id]=!0;const f=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&f&&"raster"!==f.getSource().type&&(this._updatedSources[l.source]="reload",f.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const f=D=>"fill-extrusion"===this._layers[D].type,v={},b=[];for(let D=this._order.length-1;D>=0;D--){const A=this._order[D];if(f(A)){v[A]=D;for(const L of l){const P=L[A];if(P)for(const R of P)b.push(R)}}}b.sort((D,A)=>A.intersectionZ-D.intersectionZ);const w=[];for(let D=this._order.length-1;D>=0;D--){const A=this._order[D];if(f(A))for(let L=b.length-1;L>=0;L--){const P=b[L].feature;if(v[P.layer.id]<D)break;w.push(P),b.pop()}else for(const L of l){const P=L[A];if(P)for(const R of P)w.push(R.feature)}}return w}queryRenderedFeatures(l,f,v){f&&f.filter&&this._validate(p.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new p.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of f.layers){const P=this._layers[L];if(!P)return this.fire(new p.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];b[P.source]=!0}}const w=[];f.availableImages=this._availableImages;const D=f&&f.layers?f.layers.some(L=>{const P=this.getLayer(L);return P&&P.is3D()}):this.has3DLayers(),A=Yt.createFromScreenPoints(l,v);for(const L in this._sourceCaches){const P=this._sourceCaches[L].getSource().id;f.layers&&!b[P]||w.push(Le(this._sourceCaches[L],this._layers,this._serializedLayers,A,f,v,D,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(L,P,R,B,Y,J,ee){const te={},Q=J.queryRenderedSymbols(B),Z=[];for(const se of Object.keys(Q).map(Number))Z.push(ee[se]);Z.sort(Mt);for(const se of Z){const oe=se.featureIndex.lookupSymbolFeatures(Q[se.bucketInstanceId],P,se.bucketIndex,se.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,L);for(const ue in oe){const ye=te[ue]=te[ue]||[],_e=oe[ue];_e.sort((Ce,Se)=>{const Te=se.featureSortOrder;if(Te){const Re=Te.indexOf(Ce.featureIndex);return Te.indexOf(Se.featureIndex)-Re}return Se.featureIndex-Ce.featureIndex});for(const Ce of _e)ye.push(Ce)}}for(const se in te)te[se].forEach(oe=>{const ue=oe.feature,ye=R(L[se]);if(!ye)return;const _e=ye.getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=_e});return te}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,f){f&&f.filter&&this._validate(p.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const v=this._getSourceCaches(l);let b=[];for(const w of v)b=b.concat(it(w,f));return b}addSourceType(l,f,v){return w2.getSourceType(l)?v(new Error(`A source type called "${l}" already exists.`)):(w2.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const D in l)if(!Ye(l[D],v[D])){b=!0;break}if(!b)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,f),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,f=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let v=l;if(1===f){if("object"==typeof v.source){const b="terrain-dem-src";this.addSource(b,v.source),v=p.clone$1(v),v=p.extend(v,{source:b})}if(this._validate(p.validateTerrain,"terrain",v))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!v)return;this._createTerrain(v,f)}else{const b=this.terrain,w=b.get();for(const D of Object.keys(p.spec.terrain))!v.hasOwnProperty(D)&&p.spec.terrain[D].default&&(v[D]=p.spec.terrain[D].default);for(const D in v)if(!Ye(v[D],w[D])){b.set(v),this.stylesheet.terrain=v;const A=this._setTransitionParameters({duration:0});b.updateTransitions(A);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const f=this.fog=new Ta(l,this.map.transform);this.stylesheet.fog=l;const v=this._setTransitionParameters({duration:0});f.updateTransitions(v)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,v=f.get();0===Object.keys(l).length&&f.set(l);for(const b in l)if(!Ye(l[b],v[b])){f.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});f.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:p.exported.now(),transition:p.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(v=>this.isLayerDraped(this._layers[v])),f=this._order.filter(v=>!this.isLayerDraped(this._layers[v]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...f)}_createTerrain(l,f){const v=this.terrain=new b2(l,f);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const b=this._setTransitionParameters({duration:0});v.updateTransitions(b)}_force3DLayerUpdate(){for(const l in this._layers){const f=this._layers[l];"fill-extrusion"===f.type&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const f=this._layers[l];"symbol"===f.type&&this._updateLayer(f)}}_validate(l,f,v,b,w={}){return(!w||!1!==w.validate)&&ss(this,l.call(p.validateStyle,p.extend({key:f,style:this.serialize(),value:v,styleSpec:p.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),p.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const f=this._getSourceCaches(l);for(const v of f)v.clearTiles()}_reloadSource(l){const f=this._getSourceCaches(l);for(const v of f)v.resume(),v.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const f in this._sourceCaches)this._sourceCaches[f].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const f=this._sourceCaches[l];f.resume(),f.reload()}}_updatePlacement(l,f,v,b,w=!1){let D=!1,A=!1;const L={};for(const P of this._order){const R=this._layers[P];if("symbol"!==R.type)continue;if(!L[R.source]){const Y=this._getLayerSourceCache(R);if(!Y)continue;L[R.source]=Y.getRenderableIds(!0).map(J=>Y.getTileByID(J)).sort((J,ee)=>ee.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(ee.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(R,L[R.source],l.center.lng,l.projection);D=D||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||0===v,this._layerOrderChanged&&this.fire(new p.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.exported.now(),l.zoom))&&(this.pauseablePlacement=new qc(l,this._order,w,f,v,b,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.exported.now()),A=!0),D&&this.pauseablePlacement.placement.setStale()),A||D)for(const P of this._order){const R=this._layers[P];"symbol"===R.type&&this.placement.updateLayerOpacities(R,L[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,v){this.imageManager.getImages(f.icons,v),this._updateTilesForChangedImages();const b=w=>{w&&w.setDependencies(f.tileID.key,f.type,f.icons)};b(this._otherSourceCaches[f.source]),b(this._symbolSourceCaches[f.source])}getGlyphs(l,f,v){this.glyphManager.getGlyphs(f.stacks,v)}getResource(l,f,v){return p.makeRequest(f,v)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return"symbol"===l.type?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const f=[];return this._otherSourceCaches[l]&&f.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&f.push(this._symbolSourceCaches[l]),f}_isSourceCacheLoaded(l){const f=this._getSourceCaches(l);return 0===f.length?(this.fire(new p.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):f.every(v=>v.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}w2.getSourceType=function(m){return Ae[m]},w2.setSourceType=function(m,l){Ae[m]=l},w2.registerForPluginStateChange=p.registerForPluginStateChange;var cs="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",C4="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Qt="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",ls="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",w4="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let M2={},Js={};const us=[];Hr(cs,us),Hr(Qt,us),Hr(ls,us),Hr(w4,us),M2=an("",Qt),Js=an(w4,ls);const Tn=an("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),S3=cs,D3="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var M4={background:an("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:an("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:an("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:an("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:an("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:an("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:an("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:an("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:an("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:an("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:an("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:an("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:an("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:an("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:an("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:an("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:an("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:an("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:an("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:an("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:an("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:an("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:an("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:an("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:an("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:an("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",C4),skyboxGradient:an("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",C4),skyboxCapture:an("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:an("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:an("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Hr(m,l){const f=m.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let v of f)if(v=v.trim(),"#"===v[0]&&v.includes("if")&&!v.includes("endif")){v=v.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=v.split(" ");for(const w of b)l.includes(w)||l.push(w)}}function an(m,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),b={},w=[...us];return Hr(m,w),Hr(l,w),{fragmentSource:m=m.replace(f,(D,A,L,P,R)=>(b[R]=!0,"define"===A?`\n#ifndef HAS_UNIFORM_u_${R}\nvarying ${L} ${P} ${R};\n#else\nuniform ${L} ${P} u_${R};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${R}\n    ${L} ${P} ${R} = u_${R};\n#endif\n`)),vertexSource:l=l.replace(f,(D,A,L,P,R)=>{const B="float"===P?"vec2":"vec4",Y=R.match(/color/)?"color":B;return b[R]?"define"===A?`\n#ifndef HAS_UNIFORM_u_${R}\nuniform lowp float u_${R}_t;\nattribute ${L} ${B} a_${R};\nvarying ${L} ${P} ${R};\n#else\nuniform ${L} ${P} u_${R};\n#endif\n`:"vec4"===Y?`\n#ifndef HAS_UNIFORM_u_${R}\n    ${R} = a_${R};\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${R}\n    ${R} = unpack_mix_${Y}(a_${R}, u_${R}_t);\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`:"define"===A?`\n#ifndef HAS_UNIFORM_u_${R}\nuniform lowp float u_${R}_t;\nattribute ${L} ${B} a_${R};\n#else\nuniform ${L} ${P} u_${R};\n#endif\n`:"vec4"===Y?`\n#ifndef HAS_UNIFORM_u_${R}\n    ${L} ${P} ${R} = a_${R};\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${R}\n    ${L} ${P} ${R} = unpack_mix_${Y}(a_${R}, u_${R}_t);\n#else\n    ${L} ${P} ${R} = u_${R};\n#endif\n`}),staticAttributes:v,usedDefines:w}}class Ua{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,f,v,b,w,D,A){this.context=l;let L=this.boundPaintVertexBuffers.length!==b.length;for(let R=0;!L&&R<b.length;R++)this.boundPaintVertexBuffers[R]!==b[R]&&(L=!0);let P=this.boundDynamicVertexBuffers.length!==A.length;for(let R=0;!P&&R<A.length;R++)this.boundDynamicVertexBuffers[R]!==A[R]&&(P=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==v||L||P||this.boundIndexBuffer!==w||this.boundVertexOffset!==D)this.freshBind(f,v,b,w,D,A);else{l.bindVertexArrayOES.set(this.vao);for(const R of A)R&&R.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,f,v,b,w,D){let A;const L=l.numAttributes,P=this.context,R=P.gl;if(P.extVertexArrayObject)this.vao&&this.destroy(),this.vao=P.extVertexArrayObject.createVertexArrayOES(),P.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=b,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=D;else{A=P.currentNumAttributes||0;for(let B=L;B<A;B++)R.disableVertexAttribArray(B)}f.enableAttributes(R,l),f.bind(),f.setVertexAttribPointers(R,l,w);for(const B of v)B.enableAttributes(R,l),B.bind(),B.setVertexAttribPointers(R,l,w);for(const B of D)B&&(B.enableAttributes(R,l),B.bind(),B.setVertexAttribPointers(R,l,w));b&&b.bind(),P.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function A3(m,l){const f=Math.pow(2,l.canonical.z),v=l.canonical.y;return[new p.MercatorCoordinate(0,v/f).toLngLat().lat,new p.MercatorCoordinate(0,(v+1)/f).toLngLat().lat]}function ec(m,l,f,v,b,w,D){const A=m.context,L=A.gl,P=f.fbo;if(!P)return;m.prepareDrawTile();const R=m.useProgram("hillshade");A.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,P.colorAttachment.get());const B=((te,Q,Z,se)=>{const oe=Z.paint.get("hillshade-shadow-color"),ue=Z.paint.get("hillshade-highlight-color"),ye=Z.paint.get("hillshade-accent-color");let _e=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Z.paint.get("hillshade-illumination-anchor")&&(_e-=te.transform.angle);const Ce=!te.options.moving;return{u_matrix:se||te.transform.calculateProjMatrix(Q.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:A3(0,Q.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),_e],u_shadow:oe,u_highlight:ue,u_accent:ye}})(m,f,v,m.terrain?l.projMatrix:null);m.prepareDrawProgram(A,R,l.toUnwrapped());const{tileBoundsBuffer:Y,tileBoundsIndexBuffer:J,tileBoundsSegments:ee}=m.getTileBoundsBuffers(f);R.draw(A,L.TRIANGLES,b,w,D,p.CullFaceMode.disabled,B,v.id,Y,J,ee)}function ds(m,l,f){if(!l.needsDEMTextureUpload)return;const v=m.context,b=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||m.getTileTexture(f.stride);const w=f.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new p.Texture(v,w,b.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Vo(m,l,f,v,b,w){const D=m.context,A=D.gl;if(!l.dem)return;const L=l.dem;if(D.activeTexture.set(A.TEXTURE1),ds(m,l,L),!l.demTexture)return;l.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const P=L.dim;D.activeTexture.set(A.TEXTURE0);let R=l.fbo;if(!R){const ee=new p.Texture(D,{width:P,height:P,data:null},A.RGBA);ee.bind(A.LINEAR,A.CLAMP_TO_EDGE),R=l.fbo=D.createFramebuffer(P,P,!0),R.colorAttachment.set(ee.texture)}D.bindFramebuffer.set(R.framebuffer),D.viewport.set([0,0,P,P]);const{tileBoundsBuffer:B,tileBoundsIndexBuffer:Y,tileBoundsSegments:J}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(D,A.TRIANGLES,v,b,w,p.CullFaceMode.disabled,((ee,te)=>{const Q=te.stride,Z=p.create();return p.ortho(Z,0,p.EXTENT,-p.EXTENT,0,0,1),p.translate(Z,Z,[0,-p.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[Q,Q],u_zoom:ee.overscaledZ,u_unpack:te.unpackVector}})(l.tileID,L),f.id,B,Y,J),l.needsHillshadePrepare=!1}const ga=m=>({u_matrix:new p.UniformMatrix4f(m),u_image0:new p.Uniform1i(m),u_skirt_height:new p.Uniform1f(m)}),B2=(m,l)=>({u_matrix:m,u_image0:0,u_skirt_height:l}),Wc=(m,l,f,v,b,w,D,A,L,P,R,B,Y,J,ee)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:f,u_zoom_transition:b,u_merc_center:w,u_image0:0,u_frustum_tl:D,u_frustum_tr:A,u_frustum_br:L,u_frustum_bl:P,u_globe_pos:R,u_globe_radius:B,u_viewport:Y,u_grid_matrix:ee?Float32Array.from(ee):new Float32Array(9),u_skirt_height:J});function Ie(m,l){return null!=m&&null!=l&&!(!m.hasData()||!l.hasData())&&null!=m.demTexture&&null!=l.demTexture&&m.tileID.key!==l.tileID.key}const _a=new class{constructor(){this.operations={}}newMorphing(m,l,f,v,b){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==f.tileID.key&&(w.queued=f)}else this.operations[m]={startTime:v,phase:0,duration:b,from:l,to:f,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const l=this.operations[m];return{from:l.from,to:l.to,phase:l.phase}}update(m){for(const l in this.operations){const f=this.operations[l];for(f.phase=(m-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,m)){delete this.operations[l];break}}}_nextOp(m,l){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=l,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},r1={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Lo(m){return 6*Math.pow(1.5,22-m)}function tc(m,l){const f=1<<m.z;return!l&&(0===m.x||m.x===f-1)||0===m.y||m.y===f-1}const N1=m=>({u_matrix:m});function nc(m,l,f,v,b){if(b>0){const w=p.exported.now(),D=(w-m.timeAdded)/b,A=l?(w-l.timeAdded)/b:-1,L=f.getSource(),P=v.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),R=!l||Math.abs(l.tileID.overscaledZ-P)>Math.abs(m.tileID.overscaledZ-P),B=R&&m.refreshedUponExpiration?1:p.clamp(R?D:1-A,0,1);return m.refreshedUponExpiration&&D>=1&&(m.refreshedUponExpiration=!1),l?{opacity:1,mix:1-B}:{opacity:B,mix:0}}return{opacity:1,mix:0}}class z4 extends p.SourceCache{constructor(l){const f={type:"raster-dem",maxzoom:l.transform.maxZoom},v=new Wr(Ht(),null),b=De("mock-dem",f,v,l.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,f){l.state="loaded",f(null)}}class Zc extends p.SourceCache{constructor(l){const f=De("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Wr(Ht(),null),l.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,f,v){if(l.freezeTileCoverage)return;this.transform=l;const b=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,D)=>{if(w[D.key]="",!this._tiles[D.key]){const A=new p.Tile(D,this._source.tileSize*D.overscaleFactor(),l.tileZoom);A.state="loaded",this._tiles[D.key]=A}return w},{});for(const w in this._tiles)w in b||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const f=this.proxyCachedFBO[l];if(void 0!==f){const v=Object.values(f);this.renderCachePool.push(...v),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ur extends p.OverscaledTileID{constructor(l,f,v){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=f,this.projMatrix=v}}class dr extends p.Elevation{constructor(l,f){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,b,w]=function(L){const P=new p.StructArrayLayout2i4,R=new p.StructArrayLayout3ui6,B=131;P.reserve(17161),R.reserve(33800);const Y=p.EXTENT/128,J=p.EXTENT+Y/2,ee=J+Y;for(let Q=-Y;Q<ee;Q+=Y)for(let Z=-Y;Z<ee;Z+=Y){const se=Z<0||Z>J||Q<0||Q>J?24575:0,oe=p.clamp(Math.round(Z),0,p.EXTENT),ue=p.clamp(Math.round(Q),0,p.EXTENT);P.emplaceBack(oe+se,ue)}const te=(Q,Z)=>{const se=Z*B+Q;R.emplaceBack(se+1,se,se+B),R.emplaceBack(se+B,se+B+1,se+1)};for(let Q=1;Q<129;Q++)for(let Z=1;Z<129;Z++)te(Z,Q);return[0,129].forEach(Q=>{for(let Z=0;Z<130;Z++)te(Z,Q),te(Q,Z)}),[P,R,32768]}(),D=l.context;this.gridBuffer=D.createVertexBuffer(v,p.posAttributes.members),this.gridIndexBuffer=D.createIndexBuffer(b),this.gridSegments=p.SegmentVector.simpleSegment(0,0,v.length,b.length),this.gridNoSkirtSegments=p.SegmentVector.simpleSegment(0,0,v.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Zc(f.map),this.orthoMatrix=p.create(),p.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,p.EXTENT,0,p.EXTENT,0,1);const A=D.gl;this._overlapStencilMode=new p.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new z4(f.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,f,v){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const b=l.terrain.properties;this.sourceCache=0===l.terrain.drapeRenderMode?this._mockSourceCache:l._getSourceCache(b.get("source")),this._exaggeration=b.get("exaggeration");const w=()=>{this.sourceCache.used&&p.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const D=this.getScaledDemTileSize();this.sourceCache.update(f,D,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),f.updateElevation(!0,v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==l.efficiency&&p.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&"source"===l.dataType?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):"style"===l.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=0===v._centerAltitude&&-1===this.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(v.center),-1),this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=f.getIds().map(L=>{const P=f.getTileByID(L).tileID;return P.projMatrix=v.calculateProjMatrix(P.toUnwrapped()),P});(function(L,P){const R=P.transform.pointCoordinate(P.transform.getCameraPoint()),B=new p.pointGeometry(R.x,R.y);L.sort((Y,J)=>{if(J.overscaledZ-Y.overscaledZ)return J.overscaledZ-Y.overscaledZ;const ee=new p.pointGeometry(Y.canonical.x+(1<<Y.canonical.z)*Y.wrap,Y.canonical.y),te=new p.pointGeometry(J.canonical.x+(1<<J.canonical.z)*J.wrap,J.canonical.y),Q=B.mult(1<<Y.canonical.z);return Q.x-=.5,Q.y-=.5,Q.distSqr(ee)-Q.distSqr(te)})})(b,this.painter),this._previousZoom=v.zoom;const w=this.proxyToSource||{};this.proxyToSource={},b.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const D=this._style._sourceCaches;for(const L in D){const P=D[L];if(!P.used||(P!==this.sourceCache&&this.resetTileLookupCache(P.id),this._setupProxiedCoordsForOrtho(P,l[L],w),P.usedForTerrain))continue;const R=l[L];P.getSource().reparseOverscaled&&this._assignTerrainTiles(R)}this.proxiedCoords[f.id]=b.map(L=>new ur(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=p.exported.now();const A={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const P=this.terrainTileForTile[L.key];if(!P)continue;const R=P.tileID.key;R in A||(this._visibleDemTiles.push(P),A[R]=R)}}_assignTerrainTiles(l){this._initializing||l.forEach(f=>{if(this.terrainTileForTile[f.key])return;const v=this._findTileCoveringTileID(f,this.sourceCache);v&&(this.terrainTileForTile[f.key]=v)})}_prepareDEMTextures(){const l=this.painter.context,f=l.gl;for(const v in this.terrainTileForTile){const b=this.terrainTileForTile[v],w=b.dem;!w||b.demTexture&&!b.needsDEMTextureUpload||(l.activeTexture.set(f.TEXTURE1),ds(this.painter,b,w))}}_prepareDemTileUniforms(l,f,v,b){if(!f||null==f.demTexture)return!1;const w=l.tileID.canonical,D=Math.pow(2,f.tileID.canonical.z-w.z),A=b||"";return v[`u_dem_tl${A}`]=[w.x*D%1,w.y*D%1],v[`u_dem_scale${A}`]=D,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,f=l.gl;if(!this._emptyDepthBufferTexture){const v=new p.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new p.Texture(l,v,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const f=this._visibleDemTiles.reduce((v,b)=>{if(!b.dem)return v;const w=b.dem.tree.minimums[0];return w>0&&l++,v+w},0);return l?f/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,f=l.gl;l.activeTexture.set(f.TEXTURE2);const v=this._getLoadedAreaMinimum(),b=new p.RGBAImage({width:1,height:1},new Uint8Array(p.DEMData.pack(v,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(b,{premultiply:!1}):w=this._emptyDEMTexture=new p.Texture(l,b,f.RGBA,{premultiply:!1}),w}setupElevationDraw(l,f,v){const b=this.painter.context,w=b.gl,D=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:p.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var A;D.u_dem_size=this.sourceCache.getSource().tileSize,D.u_exaggeration=this.exaggeration();let L=null,P=null,R=1;if(v&&v.morphing&&this._useVertexMorphing){const B=v.morphing.srcDemTile,Y=v.morphing.dstDemTile;R=v.morphing.phase,B&&Y&&(this._prepareDemTileUniforms(l,B,D,"_prev")&&(P=B),this._prepareDemTileUniforms(l,Y,D)&&(L=Y))}if(P&&L?(b.activeTexture.set(w.TEXTURE2),L.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),b.activeTexture.set(w.TEXTURE4),P.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),D.u_dem_lerp=R):(L=this.terrainTileForTile[l.tileID.key],b.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,L,D)?L.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),b.activeTexture.set(w.TEXTURE3),v&&v.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(D.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),D.u_depth_size_inv=[1,1]),v&&v.useMeterToDem&&L){const B=(1<<L.tileID.canonical.z)*p.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;D.u_meter_to_dem=B}if(v&&v.labelPlaneMatrixInv&&(D.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),f.setTerrainUniformValues(b,D),"globe"===this.painter.transform.projection.name){const B=this.globeUniformValues(this.painter.transform,l.tileID.canonical,v&&v.useDenormalizedUpVectorScale);f.setGlobeUniformValues(b,B)}}globeUniformValues(l,f,v){const b=l.projection;return{u_tile_tl_up:b.upVector(f,0,0),u_tile_tr_up:b.upVector(f,p.EXTENT,0),u_tile_br_up:b.upVector(f,p.EXTENT,p.EXTENT),u_tile_bl_up:b.upVector(f,0,p.EXTENT),u_tile_up_scale:v?p.globeMetersToEcef(1):b.upVectorScale(f,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const f=this.painter,v=this.painter.context;0!==l.length&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,w,D,A,L){if("globe"===b.transform.projection.name)!function(P,R,B,Y,J){const ee=P.context,te=ee.gl;let Q,Z;const se=P.options.showTerrainWireframe?2:0,oe=P.transform,ue=p.globeUseCustomAntiAliasing(P,ee,oe),ye=(ct,Pe)=>{if(Z===ct)return;const ze=[r1[ct],"PROJECTION_GLOBE_VIEW"];ue&&ze.push("CUSTOM_ANTIALIASING"),Pe&&ze.push(r1[se]),Q=P.useProgram("globeRaster",null,ze),Z=ct},_e=P.colorModeForRenderPass(),Ce=new p.DepthMode(te.LEQUAL,p.DepthMode.ReadWrite,P.depthRangeFor3D);_a.update(J);const Se=p.calculateGlobeMercatorMatrix(oe),Te=[p.mercatorXfromLng(oe.center.lng),p.mercatorYfromLat(oe.center.lat)],Re=se?[!1,!0]:[!1],gt=P.globeSharedBuffers,Ee=[oe.width*p.exported.devicePixelRatio,oe.height*p.exported.devicePixelRatio],et=Float32Array.from(oe.globeMatrix),Be={useDenormalizedUpVectorScale:!0};if(Re.forEach(ct=>{const Pe=P.transform,ze=Lo(Pe.zoom)*R.exaggeration();Z=-1;const Ne=ct?te.LINES:te.TRIANGLES;for(const ot of Y){const ut=B.getTile(ot),Pt=p.StencilMode.disabled,L1=R.prevTerrainTileForTile[ot.key],Dt=R.terrainTileForTile[ot.key];Ie(L1,Dt)&&_a.newMorphing(ot.key,L1,Dt,J,250),ee.activeTexture.set(te.TEXTURE0),ut.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE);const zt=_a.getMorphValuesForProxy(ot.key),Ft=zt?1:0;zt&&p.extend$1(Be,{morphing:{srcDemTile:zt.from,dstDemTile:zt.to,phase:p.easeCubicInOut(zt.phase)}});const A1=p.tileCornersToBounds(ot.canonical),Ut=p.getLatitudinalLod(A1.getCenter().lat),mn=p.getGridMatrix(ot.canonical,A1,Ut,Pe.worldSize/Pe._pixelsPerMercatorPixel),un=p.globeNormalizeECEF(p.globeTileBounds(ot.canonical)),Nn=Wc(Pe.projMatrix,et,Se,un,p.globeToMercatorTransition(Pe.zoom),Te,Pe.frustumCorners.TL,Pe.frustumCorners.TR,Pe.frustumCorners.BR,Pe.frustumCorners.BL,Pe.globeCenterInViewSpace,Pe.globeRadius,Ee,ze,mn);if(ye(Ft,ct),R.setupElevationDraw(ut,Q,Be),P.prepareDrawProgram(ee,Q,ot.toUnwrapped()),gt){const[Mn,oi,h2]=ct?gt.getWirefameBuffers(P.context,Ut):gt.getGridBuffers(Ut,0!==ze);Q.draw(ee,Ne,Ce,Pt,_e,p.CullFaceMode.backCCW,Nn,"globe_raster",Mn,oi,h2)}}}),gt){const ct=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ue&&ct.push("CUSTOM_ANTIALIASING"),Q=P.useProgram("globeRaster",null,ct);for(const Pe of Y){const{x:ze,y:Ne,z:ot}=Pe.canonical,ut=0===Ne,Pt=Ne===(1<<ot)-1,[L1,Dt,zt,Ft]=gt.getPoleBuffers(ot);if(Ft&&(ut||Pt)){const A1=B.getTile(Pe);ee.activeTexture.set(te.TEXTURE0),A1.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE);let Ut=p.globePoleMatrixForTile(ot,ze,oe);const mn=p.globeNormalizeECEF(p.globeTileBounds(Pe.canonical)),un=(Nn,Mn)=>Nn.draw(ee,te.TRIANGLES,Ce,p.StencilMode.disabled,_e,p.CullFaceMode.disabled,Wc(oe.projMatrix,Ut,Ut,mn,0,Te,oe.frustumCorners.TL,oe.frustumCorners.TR,oe.frustumCorners.BR,oe.frustumCorners.BL,oe.globeCenterInViewSpace,oe.globeRadius,Ee,0),"globe_pole_raster",Mn,zt,Ft);R.setupElevationDraw(A1,Q,Be),P.prepareDrawProgram(ee,Q,Pe.toUnwrapped()),ut&&un(Q,L1),Pt&&(Ut=p.scale(p.create(),Ut,[1,-1,1]),un(Q,Dt))}}}}(b,w,D,A,L);else{const P=b.context,R=P.gl;let B,Y;const J=b.options.showTerrainWireframe?2:0,ee=(oe,ue)=>{if(Y===oe)return;const ye=[r1[oe]];ue&&ye.push(r1[J]),B=b.useProgram("terrainRaster",null,ye),Y=oe},te=b.colorModeForRenderPass(),Q=new p.DepthMode(R.LEQUAL,p.DepthMode.ReadWrite,b.depthRangeFor3D);_a.update(L);const Z=b.transform,se=Lo(Z.zoom)*w.exaggeration();(J?[!1,!0]:[!1]).forEach(oe=>{Y=-1;const ue=oe?R.LINES:R.TRIANGLES,[ye,_e]=oe?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Ce of A){const Se=D.getTile(Ce),Te=p.StencilMode.disabled,Re=w.prevTerrainTileForTile[Ce.key],gt=w.terrainTileForTile[Ce.key];Ie(Re,gt)&&_a.newMorphing(Ce.key,Re,gt,L,250),P.activeTexture.set(R.TEXTURE0),Se.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const Ee=_a.getMorphValuesForProxy(Ce.key),et=Ee?1:0;let Be;Ee&&(Be={morphing:{srcDemTile:Ee.from,dstDemTile:Ee.to,phase:p.easeCubicInOut(Ee.phase)}});const ct=B2(Ce.projMatrix,tc(Ce.canonical,Z.renderWorldCopies)?se/10:se);ee(et,oe),w.setupElevationDraw(Se,B,Be),b.prepareDrawProgram(P,B,Ce.toUnwrapped()),B.draw(P,ue,Q,Te,te,p.CullFaceMode.backCCW,ct,"terrain_raster",w.gridBuffer,ye,_e)}})}}(f,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(0===this._drapedRenderBatches.length)return l+1;this.renderingToTexture=!0;const f=this.painter,v=this.painter.context,b=this.proxySourceCache,w=this.proxiedCoords[b.id],D=this._drapedRenderBatches.shift(),A=[],L=f.style.order;let P=0;for(const R of w){const B=b.getTileByID(R.proxyTileKey),Y=b.proxyCachedFBO[R.key]?b.proxyCachedFBO[R.key][l]:void 0,J=void 0!==Y?b.renderCache[Y]:this.pool[P++],ee=void 0!==Y;if(B.texture=J.tex,ee&&!J.dirty){A.push(B.tileID);continue}let te;v.bindFramebuffer.set(J.fb.framebuffer),this.renderedToTile=!1,J.dirty&&(v.clear({color:p.Color.transparent,stencil:0}),J.dirty=!1);for(let Q=D.start;Q<=D.end;++Q){const Z=f.style._layers[L[Q]];if(Z.isHidden(f.transform.zoom))continue;const se=f.style._getLayerSourceCache(Z),oe=se?this.proxyToSource[R.key][se.id]:[R];if(!oe)continue;const ue=oe;v.viewport.set([0,0,J.fb.width,J.fb.height]),te!==(se?se.id:null)&&(this._setupStencil(J,oe,Z,se),te=se?se.id:null),f.renderLayer(f,se,Z,ue)}this.renderedToTile?(J.dirty=!0,A.push(B.tileID)):ee||--P,5===P&&(P=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,f.width,f.height]),D.end+1}postRender(){}renderCacheEfficiency(l){const f=l.order.length;if(0===f)return{efficiency:100};let v,b=0,w=0,D=!1;for(let A=0;A<f;++A){const L=l._layers[l.order[A]];this._style.isLayerDraped(L)?(D&&++b,++w):D||(D=!0,v=L.id)}return 0===w?{efficiency:100}:{efficiency:100*(1-b/w),firstUndrapedLayer:v}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{l=Math.min(l,f.dem.tree.minimums[0])}),0===l?l:(l-30)*this._exaggeration}raycast(l,f,v){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const D=w.tileID,A=1<<D.overscaledZ,{x:L,y:P}=D.canonical,R=L/A,B=(L+1)/A,Y=P/A,J=(P+1)/A;return{minx:R,miny:Y,maxx:B,maxy:J,t:w.dem.tree.raycastRoot(R,Y,B,J,l,f,v),tile:w}});b.sort((w,D)=>(null!==w.t?w.t:Number.MAX_VALUE)-(null!==D.t?D.t:Number.MAX_VALUE));for(const w of b){if(null==w.t)return null;const D=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,f,v);if(null!=D)return D}return null}_createFBO(){const l=this.painter.context,f=l.gl,v=this.drapeBufferSize;l.activeTexture.set(f.TEXTURE0);const b=new p.Texture(l,{width:v[0],height:v[1],data:null},f.RGBA);b.bind(f.LINEAR,f.CLAMP_TO_EDGE);const w=l.createFramebuffer(v[0],v[1],!1);return w.colorAttachment.set(b.texture),w.depthAttachment=new Ys(l,w.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const f=this._style._layers[l],v=f.isHidden(this.painter.transform.zoom);return"custom"===f.type?!v&&f.shouldRedrape():!v&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const v of this._style._getSources())if(v instanceof U){l=!0;break}if(!l)return;const f={};for(let v=0;v<this._style.order.length;++v){const b=this._style._layers[this._style.order[v]],w=this._style._getLayerSourceCache(b);if(w&&!f[w.id]&&!b.isHidden(this.painter.transform.zoom)&&"line"===b.type&&b.widthExpression()instanceof p.ZoomDependentExpression){f[w.id]=!0;for(const D of this.proxyCoords){const A=this.proxyToSource[D.key][w.id];if(A)for(const L of A)this._clearRenderCacheForTile(w.id,L)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const v in this._style._sourceCaches)if(this._style._sourceCaches[v]._source instanceof G){l=!0;break}if(!l)return;const f={};for(let v=0;v<this._style.order.length;++v){const b=this._style._layers[this._style.order[v]],w=this._style._getLayerSourceCache(b);if(!w||f[w.id]||b.isHidden(this.painter.transform.zoom)||"raster"!==b.type)continue;const D=b.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const L=this.proxyToSource[A.key][w.id];if(L)for(const P of L){const R=nc(w.getTile(P),w.findLoadedParent(P,0),w,this.painter.transform,D);(1!==R.opacity||0!==R.mix)&&this._clearRenderCacheForTile(w.id,P)}}}}_setupDrapedRenderBatches(){const l=this._style.order,f=l.length;if(0===f)return;const v=[];let b,w=0,D=this._style._layers[l[w]];for(;!this._style.isLayerDraped(D)&&D.isHidden(this.painter.transform.zoom)&&++w<f;)D=this._style._layers[l[w]];for(;w<f;++w){const A=this._style._layers[l[w]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?void 0===b&&(b=w):void 0!==b&&(v.push({start:b,end:w-1}),b=void 0))}void 0!==b&&v.push({start:b,end:w-1}),this._drapedRenderBatches=v}_setupRenderCache(l){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const D=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let A=0;A<D.length;++A){const L=Object.values(D[A]);f.renderCachePool.push(...L)}}return}this._clearRasterLayersFromRenderCache();const v=this.proxyCoords,b=this._tilesDirty;for(let D=v.length-1;D>=0;D--){const A=v[D];if(f.getTileByID(A.key),void 0!==f.proxyCachedFBO[A.key]){const L=l[A.key],P=this.proxyToSource[A.key];let R=0;for(const B in P){const Y=P[B],J=L[B];if(!J||J.length!==Y.length||Y.some((ee,te)=>ee!==J[te]||b[B]&&b[B].hasOwnProperty(ee.key))){R=-1;break}++R}for(const B in f.proxyCachedFBO[A.key])f.renderCache[f.proxyCachedFBO[A.key][B]].dirty=R<0||R!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((D,A)=>A.end-A.start-(D.end-D.start));for(const D of w)for(const A of v){if(f.proxyCachedFBO[A.key])continue;let L=f.renderCachePool.pop();void 0===L&&f.renderCache.length<50&&(L=f.renderCache.length,f.renderCache.push(this._createFBO())),void 0!==L&&(f.proxyCachedFBO[A.key]={},f.proxyCachedFBO[A.key][D.start]=L,f.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(l,f,v,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,D=w.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let A;if(v.isTileClipped())A=f.length,this._overlapStencilMode.test={func:D.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:D.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):p.StencilMode.disabled}_renderTileClippingMasks(l,f){const v=this.painter,b=this.painter.context,w=b.gl;v._tileClippingMaskIDs={},b.setColorMode(p.ColorMode.disabled),b.setDepthMode(p.DepthMode.disabled);const D=v.useProgram("clippingMask");for(const A of l){const L=v._tileClippingMaskIDs[A.key]=--f;D.draw(b,w.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,N1(A.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(l){const f=this.painter.transform;if(l.x<0||l.x>f.width||l.y<0||l.y>f.height)return null;const v=[l.x,l.y,1,1];p.transformMat4$1(v,v,f.pixelMatrixInverse),p.scale$1(v,v,1/v[3]),v[0]/=f.worldSize,v[1]/=f.worldSize;const b=f._camera.position,w=p.mercatorZfromAltitude(1,f.center.lat),D=[b[0],b[1],b[2]/w,0],A=p.subtract([],v.slice(0,3),D);p.normalize(A,A);const L=this.raycast(D,A,this._exaggeration);return null!==L&&L?(p.scaleAndAdd(D,D,A,L),D[3]=D[2],D[2]*=w,D):null}drawDepth(){const l=this.painter,f=l.context,v=this.proxySourceCache,b=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===b&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const D=f.gl,A=f.createFramebuffer(b,w,!0);f.activeTexture.set(D.TEXTURE0);const L=new p.Texture(f,{width:b,height:w,data:null},D.RGBA);L.bind(D.NEAREST,D.CLAMP_TO_EDGE),A.colorAttachment.set(L.texture);const P=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,b,w);A.depthAttachment.set(P),this._depthFBO=A,this._depthTexture=L}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,b,w]),function(D,A,L,P){if("globe"===D.transform.projection.name)return;const R=D.context,B=R.gl;R.clear({depth:1});const Y=D.useProgram("terrainDepth"),J=new p.DepthMode(B.LESS,p.DepthMode.ReadWrite,D.depthRangeFor3D);for(const ee of P){const te=L.getTile(ee),Q=B2(ee.projMatrix,0);A.setupElevationDraw(te,Y),Y.draw(R,B.TRIANGLES,J,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.backCCW,Q,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(l,this,v,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,f,v){if(l.getSource()instanceof xe)return this._setupProxiedCoordsForImageSource(l,f,v);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const b=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let A=0;A<w.length;A++){const L=w[A],P=this._findTileCoveringTileID(L,l);if(P){const R=this._createProxiedId(L,P,v[L.key]&&v[L.key][l.id]);b.push(R),this.proxyToSource[L.key][l.id]=[R]}}let D=!1;for(let A=0;A<f.length;A++){const L=l.getTile(f[A]);if(!L||!L.hasData())continue;const P=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(P&&P.tileID.canonical.z!==L.tileID.canonical.z){const R=this.proxyToSource[P.tileID.key][l.id],B=this._createProxiedId(P.tileID,L,v[P.tileID.key]&&v[P.tileID.key][l.id]);R?R.splice(R.length-1,0,B):this.proxyToSource[P.tileID.key][l.id]=[B],b.push(B),D=!0}}this._sourceTilesOverlap[l.id]=D}_setupProxiedCoordsForImageSource(l,f,v){if(!l.getSource().loaded())return;const b=this.proxiedCoords[l.id]=[],w=this.proxyCoords,D=l.getSource(),A=new p.pointGeometry(D.tileID.x,D.tileID.y)._div(1<<D.tileID.z),L=D.coordinates.map(p.MercatorCoordinate.fromLngLat).reduce((R,B)=>(R.min.x=Math.min(R.min.x,B.x-A.x),R.min.y=Math.min(R.min.y,B.y-A.y),R.max.x=Math.max(R.max.x,B.x-A.x),R.max.y=Math.max(R.max.y,B.y-A.y),R),{min:new p.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new p.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),P=(R,B)=>{const Y=R.wrap+R.canonical.x/(1<<R.canonical.z),J=R.canonical.y/(1<<R.canonical.z),ee=p.EXTENT/(1<<R.canonical.z),te=B.wrap+B.canonical.x/(1<<B.canonical.z),Q=B.canonical.y/(1<<B.canonical.z);return Y+ee<te+L.min.x||Y>te+L.max.x||J+ee<Q+L.min.y||J>Q+L.max.y};for(let R=0;R<w.length;R++){const B=w[R];for(let Y=0;Y<f.length;Y++){const J=l.getTile(f[Y]);if(!J||!J.hasData()||P(B,J.tileID))continue;const ee=this._createProxiedId(B,J,v[B.key]&&v[B.key][l.id]),te=this.proxyToSource[B.key][l.id];te?te.push(ee):this.proxyToSource[B.key][l.id]=[ee],b.push(ee)}}}_createProxiedId(l,f,v){let b=this.orthoMatrix;if(v){const w=v.find(D=>D.key===f.tileID.key);if(w)return w}if(f.tileID.key!==l.key){const w=l.canonical.z-f.tileID.canonical.z;let D,A,L;b=p.create();const P=f.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(D=p.EXTENT>>w,A=D*((f.tileID.canonical.x<<w)-l.canonical.x+P),L=D*((f.tileID.canonical.y<<w)-l.canonical.y)):(D=p.EXTENT<<-w,A=p.EXTENT*(f.tileID.canonical.x-(l.canonical.x+P<<-w)),L=p.EXTENT*(f.tileID.canonical.y-(l.canonical.y<<-w))),p.ortho(b,0,D,0,D,0,1),p.translate(b,b,[A,L,0])}return new ur(f.tileID,l.key,b)}_findTileCoveringTileID(l,f){let v=f.getTile(l);if(v&&v.hasData())return v;const b=this._findCoveringTileCache[f.id],w=b[l.key];if(v=w?f.getTileByID(w):null,v&&v.hasData()||null===w)return v;let D=v?v.tileID:l,A=D.overscaledZ;const L=f.getSource().minzoom,P=[];if(!w){const B=f.getSource().maxzoom;if(l.canonical.z>=B){const Y=l.canonical.z-B;f.getSource().reparseOverscaled?(A=Math.max(l.canonical.z+2,f.transform.tileZoom),D=new p.OverscaledTileID(A,l.wrap,B,l.canonical.x>>Y,l.canonical.y>>Y)):0!==Y&&(A=B,D=new p.OverscaledTileID(A,l.wrap,B,l.canonical.x>>Y,l.canonical.y>>Y))}D.key!==l.key&&(P.push(D.key),v=f.getTile(D))}const R=B=>{P.forEach(Y=>{b[Y]=B}),P.length=0};for(A-=1;A>=L&&(!v||!v.hasData());A--){v&&R(v.tileID.key);const B=D.calculateScaledKey(A);if(v=f.getTileByID(B),v&&v.hasData())break;const Y=b[B];if(null===Y)break;void 0===Y?P.push(B):v=f.getTileByID(Y)}return R(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,f){let v=this._tilesDirty[l];v||(v=this._tilesDirty[l]={}),v[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(f){let v=0;const b=new p.StructArrayLayout2ui4,w=131;for(let D=1;D<129;D++){for(let A=1;A<129;A++)v=D*w+A,b.emplaceBack(v,v+1),b.emplaceBack(v,v+w),b.emplaceBack(v+1,v+w),128===D&&b.emplaceBack(v+w,v+w+1);b.emplaceBack(v+1,v+1+w)}return b}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=p.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class U2{static cacheKey(l,f,v,b){let w=`${f}${b?b.cacheKey:""}`;for(const D of v)l.usedDefines.includes(D)&&(w+=`/${D}`);return w}constructor(l,f,v,b,w,D){const A=l.gl;this.program=A.createProgram();const L=function(Z){const se=[];for(let oe=0;oe<Z.length;oe++){if(null===Z[oe])continue;const ue=Z[oe].split(" ");se.push(ue.pop())}return se}(v.staticAttributes),P=b?b.getBinderAttributes():[],R=L.concat(P);let B=b?b.defines():[];B=B.concat(D.map(Z=>`#define ${Z}`));const Y=l.isWebGL2?"#version 300 es\n":"",J=Y+B.concat(l.extStandardDerivatives&&0===Y.length?"#extension GL_OES_standard_derivatives : enable\n".concat(D3):D3,D3,S3,Tn.fragmentSource,Js.fragmentSource,v.fragmentSource).join("\n"),ee=Y+B.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",S3,Tn.vertexSource,Js.vertexSource,M2.vertexSource,v.vertexSource).join("\n"),te=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(te,J),A.compileShader(te),A.attachShader(this.program,te);const Q=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource(Q,ee),A.compileShader(Q),A.attachShader(this.program,Q),this.attributes={},this.numAttributes=R.length;for(let Z=0;Z<this.numAttributes;Z++)R[Z]&&(A.bindAttribLocation(this.program,Z,R[Z]),this.attributes[R[Z]]=Z);A.linkProgram(this.program),A.deleteShader(Q),A.deleteShader(te),this.fixedUniforms=w(l),this.binderUniforms=b?b.getUniforms(l):[],D.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new p.Uniform1i(Z=l),u_dem_prev:new p.Uniform1i(Z),u_dem_unpack:new p.Uniform4f(Z),u_dem_tl:new p.Uniform2f(Z),u_dem_scale:new p.Uniform1f(Z),u_dem_tl_prev:new p.Uniform2f(Z),u_dem_scale_prev:new p.Uniform1f(Z),u_dem_size:new p.Uniform1f(Z),u_dem_lerp:new p.Uniform1f(Z),u_exaggeration:new p.Uniform1f(Z),u_depth:new p.Uniform1i(Z),u_depth_size_inv:new p.Uniform2f(Z),u_meter_to_dem:new p.Uniform1f(Z),u_label_plane_matrix_inv:new p.UniformMatrix4f(Z)}),D.includes("GLOBE")&&(this.globeUniforms=(Z=>({u_tile_tl_up:new p.Uniform3f(Z),u_tile_tr_up:new p.Uniform3f(Z),u_tile_br_up:new p.Uniform3f(Z),u_tile_bl_up:new p.Uniform3f(Z),u_tile_up_scale:new p.Uniform1f(Z)}))(l)),D.includes("FOG")&&(this.fogUniforms=(Z=>({u_fog_matrix:new p.UniformMatrix4f(Z),u_fog_range:new p.Uniform2f(Z),u_fog_color:new p.Uniform4f(Z),u_fog_horizon_blend:new p.Uniform1f(Z),u_fog_temporal_offset:new p.Uniform1f(Z),u_frustum_tl:new p.Uniform3f(Z),u_frustum_tr:new p.Uniform3f(Z),u_frustum_br:new p.Uniform3f(Z),u_frustum_bl:new p.Uniform3f(Z),u_globe_pos:new p.Uniform3f(Z),u_globe_radius:new p.Uniform1f(Z),u_globe_transition:new p.Uniform1f(Z),u_is_globe:new p.Uniform1i(Z),u_viewport:new p.Uniform2f(Z)}))(l))}var Z}setTerrainUniformValues(l,f){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const b in f)v[b]&&v[b].set(this.program,b,f[b])}}setGlobeUniformValues(l,f){if(!this.globeUniforms)return;const v=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const b in f)v[b]&&v[b].set(this.program,b,f[b])}}setFogUniformValues(l,f){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const b in f)v[b].set(this.program,b,f[b])}}draw(l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te){const Q=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(v),l.setStencilMode(b),l.setColorMode(w),l.setCullFace(D);for(const se of Object.keys(this.fixedUniforms))this.fixedUniforms[se].set(this.program,se,A[se]);ee&&ee.setUniforms(this.program,l,this.binderUniforms,Y,{zoom:J});const Z={[Q.LINES]:2,[Q.TRIANGLES]:3,[Q.LINE_STRIP]:1}[f];for(const se of B.get()){const oe=se.vaos||(se.vaos={});(oe[L]||(oe[L]=new Ua)).bind(l,this,P,ee?ee.getPaintVertexBuffers():[],R,se.vertexOffset,te||[]),Q.drawElements(f,se.primitiveLength*Z,Q.UNSIGNED_SHORT,se.primitiveOffset*Z*2)}}}function ea(m,l){const f=Math.pow(2,l.tileID.overscaledZ),v=l.tileSize*Math.pow(2,m.transform.tileZoom)/f,b=v*(l.tileID.canonical.x+l.tileID.wrap*f),w=v*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/rr(l,1,m.transform.tileZoom),u_pixel_coord_upper:[b>>16,w>>16],u_pixel_coord_lower:[65535&b,65535&w]}}const bn=p.create(),To=(m,l,f,v,b,w,D,A,L,P,R)=>{const B=l.style.light,Y=B.properties.get("position"),J=[Y.x,Y.y,Y.z],ee=p.create$1();"viewport"===B.properties.get("anchor")&&(p.fromRotation(ee,-l.transform.angle),p.transformMat3(J,J,ee));const te=B.properties.get("color"),Q=l.transform,Z={u_matrix:m,u_lightpos:J,u_lightintensity:B.properties.get("intensity"),u_lightcolor:[te.r,te.g,te.b],u_vertical_gradient:+f,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:bn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:b,u_edge_radius:w};return"globe"===Q.projection.name&&(Z.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],Z.u_zoom_transition=L,Z.u_inv_rot_matrix=R,Z.u_merc_center=P,Z.u_up_dir=Q.projection.upVector(new p.CanonicalTileID(0,0,0),P[0]*p.EXTENT,P[1]*p.EXTENT),Z.u_height_lift=A),Z},Ho=(m,l,f,v,b,w,D,A,L,P,R,B)=>{const Y=To(m,l,f,v,b,w,D,L,P,R,B),J={u_height_factor:-Math.pow(2,D.overscaledZ)/A.tileSize/8};return p.extend(Y,ea(l,A),J)},ko=m=>({u_matrix:m}),fs=(m,l,f)=>p.extend(ko(m),ea(l,f)),fr=(m,l)=>({u_matrix:m,u_world:l}),hs=(m,l,f,v)=>p.extend(fs(m,l,f),{u_world:v}),Zl=p.create(),Bt=(m,l,f,v,b,w)=>{const D=m.transform,A="globe"===D.projection.name;let L;if("map"===w.paint.get("circle-pitch-alignment"))if(A){const R=p.globePixelsToTileUnits(D.zoom,l.canonical)*D._pixelsPerMercatorPixel;L=Float32Array.from([R,0,0,R])}else L=D.calculatePixelsToTileUnitsMatrix(f);else L=new Float32Array([D.pixelsToGLUnits[0],0,0,D.pixelsToGLUnits[1]]);const P={u_camera_to_center_distance:D.cameraToCenterDistance,u_matrix:m.translatePosMatrix(l.projMatrix,f,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:p.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:Zl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){P.u_inv_rot_matrix=v,P.u_merc_center=b,P.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],P.u_zoom_transition=p.globeToMercatorTransition(D.zoom);const R=b[0]*p.EXTENT,B=b[1]*p.EXTENT;P.u_up_dir=D.projection.upVector(new p.CanonicalTileID(0,0,0),R,B)}return P},ja=m=>{const l=[];return"map"===m.paint.get("circle-pitch-alignment")&&l.push("PITCH_WITH_MAP"),"map"===m.paint.get("circle-pitch-scale")&&l.push("SCALE_WITH_MAP"),l},S4=(m,l,f,v)=>{const b=p.EXTENT/f.tileSize;return{u_matrix:m,u_camera_to_center_distance:l.getCameraToCenterDistance(v),u_extrude_scale:[l.pixelsToGLUnits[0]/b,l.pixelsToGLUnits[1]/b]}},ic=(m,l,f=1)=>({u_matrix:m,u_color:l,u_overlay:0,u_overlay_scale:f}),g1=p.create(),ta=(m,l,f,v,b,w,D)=>{const A=m.transform,L="globe"===A.projection.name,P=L?p.globePixelsToTileUnits(A.zoom,l.canonical)*A._pixelsPerMercatorPixel:rr(f,1,w),R={u_matrix:l.projMatrix,u_extrude_scale:P,u_intensity:D,u_inv_rot_matrix:g1,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){R.u_inv_rot_matrix=v,R.u_merc_center=b,R.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],R.u_zoom_transition=p.globeToMercatorTransition(A.zoom);const B=b[0]*p.EXTENT,Y=b[1]*p.EXTENT;R.u_up_dir=A.projection.upVector(new p.CanonicalTileID(0,0,0),B,Y)}return R},rc=(m,l,f,v,b,w,D)=>{const A=m.transform,L=A.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:xn(m,l,f,v),u_pixels_to_tile_units:L,u_device_pixel_ratio:w,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:b,u_texsize:mi(f)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Mi(l,m.transform),u_alpha_discard_threshold:0,u_trim_offset:D}},je=(m,l,f,v,b)=>{const w=m.transform;return{u_matrix:xn(m,l,f,v),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:b,u_image:0,u_tile_units_to_pixels:Mi(l,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Mi(m,l){return 1/rr(m,1,l.tileZoom)}function xn(m,l,f,v){return m.translatePosMatrix(v||l.tileID.projMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function mi(m){const l=m.paint.get("line-dasharray").value;return l.value||"constant"!==l.kind}const u2=(m,l,f,v,b,w)=>{return{u_matrix:m,u_tl_parent:l,u_scale_parent:f,u_fade_t:v.mix,u_opacity:v.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(A=b.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(D=b.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:va(b.paint.get("raster-hue-rotate")),u_perspective_transform:w};var D,A};function va(m){m*=Math.PI/180;const l=Math.sin(m),f=Math.cos(m);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const z2=p.create(),ps=(m,l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te)=>{const Q=b.transform,Z={u_is_size_zoom_constant:+("constant"===m||"source"===m),u_is_size_feature_constant:+("constant"===m||"camera"===m),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:Q.width/Q.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:D,u_coord_matrix:A,u_is_text:+L,u_pitch_with_map:+v,u_texsize:P,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:z2,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:z2,u_up_vector:[0,-1,0]};return"globe"===te.name&&(Z.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],Z.u_zoom_transition=B,Z.u_inv_rot_matrix=J,Z.u_merc_center=Y,Z.u_camera_forward=Q._camera.forward(),Z.u_ecef_origin=p.globeECEFOrigin(Q.globeMatrix,R.toUnwrapped()),Z.u_tile_matrix=Float32Array.from(Q.globeMatrix),Z.u_up_vector=ee),Z},E3=(m,l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te,Q)=>p.extend(ps(m,l,f,v,b,w,D,A,L,P,B,Y,J,ee,te,Q),{u_gamma_scale:v?b.transform.cameraToCenterDistance*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:p.exported.devicePixelRatio,u_is_halo:+R}),Io=(m,l,f,v,b,w,D,A,L,P,R,B,Y,J,ee,te)=>p.extend(E3(m,l,f,v,b,w,D,A,!0,L,!0,R,B,Y,J,ee,te),{u_texsize_icon:P,u_texture_icon:1}),kr=(m,l,f)=>({u_matrix:m,u_opacity:l,u_color:f}),kt=(m,l,f,v,b)=>p.extend(function(w,D,A){const L=D.imageManager.getPattern(w.toString()),{width:P,height:R}=D.imageManager.getPixelSize(),B=Math.pow(2,A.tileID.overscaledZ),Y=A.tileSize*Math.pow(2,D.transform.tileZoom)/B,J=Y*(A.tileID.canonical.x+A.tileID.wrap*B),ee=Y*A.tileID.canonical.y;return{u_image:0,u_pattern_tl:L.tl,u_pattern_br:L.br,u_texsize:[P,R],u_pattern_size:L.displaySize,u_tile_units_to_pixels:1/rr(A,1,D.transform.tileZoom),u_pixel_coord_upper:[J>>16,ee>>16],u_pixel_coord_lower:[65535&J,65535&ee]}}(v,f,b),{u_matrix:m,u_opacity:l}),B1={fillExtrusion:m=>({u_matrix:new p.UniformMatrix4f(m),u_lightpos:new p.Uniform3f(m),u_lightintensity:new p.Uniform1f(m),u_lightcolor:new p.Uniform3f(m),u_vertical_gradient:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_edge_radius:new p.Uniform1f(m),u_ao:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_up_dir:new p.Uniform3f(m),u_height_lift:new p.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_lightpos:new p.Uniform3f(m),u_lightintensity:new p.Uniform1f(m),u_lightcolor:new p.Uniform3f(m),u_vertical_gradient:new p.Uniform1f(m),u_height_factor:new p.Uniform1f(m),u_edge_radius:new p.Uniform1f(m),u_ao:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_up_dir:new p.Uniform3f(m),u_height_lift:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m)}),fill:m=>({u_matrix:new p.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m)}),fillOutline:m=>({u_matrix:new p.UniformMatrix4f(m),u_world:new p.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_world:new p.Uniform2f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new p.Uniform1f(m),u_extrude_scale:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_up_dir:new p.Uniform3f(m)}),collisionBox:m=>({u_matrix:new p.UniformMatrix4f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_extrude_scale:new p.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new p.UniformMatrix4f(m),u_inv_matrix:new p.UniformMatrix4f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_viewport_size:new p.Uniform2f(m)}),debug:m=>({u_color:new p.UniformColor(m),u_matrix:new p.UniformMatrix4f(m),u_overlay:new p.Uniform1i(m),u_overlay_scale:new p.Uniform1f(m)}),clippingMask:m=>({u_matrix:new p.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new p.Uniform1f(m),u_intensity:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_up_dir:new p.Uniform3f(m)}),heatmapTexture:m=>({u_image:new p.Uniform1i(m),u_color_ramp:new p.Uniform1i(m),u_opacity:new p.Uniform1f(m)}),hillshade:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_latrange:new p.Uniform2f(m),u_light:new p.Uniform2f(m),u_shadow:new p.UniformColor(m),u_highlight:new p.UniformColor(m),u_accent:new p.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_dimension:new p.Uniform2f(m),u_zoom:new p.Uniform1f(m),u_unpack:new p.Uniform4f(m)}),line:m=>({u_matrix:new p.UniformMatrix4f(m),u_pixels_to_tile_units:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_units_to_pixels:new p.Uniform2f(m),u_dash_image:new p.Uniform1i(m),u_gradient_image:new p.Uniform1i(m),u_image_height:new p.Uniform1f(m),u_texsize:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m),u_alpha_discard_threshold:new p.Uniform1f(m),u_trim_offset:new p.Uniform2f(m)}),linePattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_texsize:new p.Uniform2f(m),u_pixels_to_tile_units:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_units_to_pixels:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m),u_alpha_discard_threshold:new p.Uniform1f(m)}),raster:m=>({u_matrix:new p.UniformMatrix4f(m),u_tl_parent:new p.Uniform2f(m),u_scale_parent:new p.Uniform1f(m),u_fade_t:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_image0:new p.Uniform1i(m),u_image1:new p.Uniform1i(m),u_brightness_low:new p.Uniform1f(m),u_brightness_high:new p.Uniform1f(m),u_saturation_factor:new p.Uniform1f(m),u_contrast_factor:new p.Uniform1f(m),u_spin_weights:new p.Uniform3f(m),u_perspective_transform:new p.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_camera_forward:new p.Uniform3f(m),u_tile_matrix:new p.UniformMatrix4f(m),u_up_vector:new p.Uniform3f(m),u_ecef_origin:new p.Uniform3f(m),u_texture:new p.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_texture:new p.Uniform1i(m),u_gamma_scale:new p.Uniform1f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_camera_forward:new p.Uniform3f(m),u_tile_matrix:new p.UniformMatrix4f(m),u_up_vector:new p.Uniform3f(m),u_ecef_origin:new p.Uniform3f(m),u_is_halo:new p.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_texsize_icon:new p.Uniform2f(m),u_texture:new p.Uniform1i(m),u_texture_icon:new p.Uniform1i(m),u_gamma_scale:new p.Uniform1f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_is_halo:new p.Uniform1i(m)}),background:m=>({u_matrix:new p.UniformMatrix4f(m),u_opacity:new p.Uniform1f(m),u_color:new p.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_opacity:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_pattern_tl:new p.Uniform2f(m),u_pattern_br:new p.Uniform2f(m),u_texsize:new p.Uniform2f(m),u_pattern_size:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m)}),terrainRaster:ga,terrainDepth:ga,skybox:m=>({u_matrix:new p.UniformMatrix4f(m),u_sun_direction:new p.Uniform3f(m),u_cubemap:new p.Uniform1i(m),u_opacity:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new p.UniformMatrix4f(m),u_color_ramp:new p.Uniform1i(m),u_center_direction:new p.Uniform3f(m),u_radius:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new p.UniformMatrix3f(m),u_sun_direction:new p.Uniform3f(m),u_sun_intensity:new p.Uniform1f(m),u_color_tint_r:new p.Uniform4f(m),u_color_tint_m:new p.Uniform4f(m),u_luminance:new p.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new p.UniformMatrix4f(m),u_globe_matrix:new p.UniformMatrix4f(m),u_normalize_matrix:new p.UniformMatrix4f(m),u_merc_matrix:new p.UniformMatrix4f(m),u_zoom_transition:new p.Uniform1f(m),u_merc_center:new p.Uniform2f(m),u_image0:new p.Uniform1i(m),u_grid_matrix:new p.UniformMatrix3f(m),u_skirt_height:new p.Uniform1f(m),u_frustum_tl:new p.Uniform3f(m),u_frustum_tr:new p.Uniform3f(m),u_frustum_br:new p.Uniform3f(m),u_frustum_bl:new p.Uniform3f(m),u_globe_pos:new p.Uniform3f(m),u_globe_radius:new p.Uniform1f(m),u_viewport:new p.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new p.Uniform3f(m),u_frustum_tr:new p.Uniform3f(m),u_frustum_br:new p.Uniform3f(m),u_frustum_bl:new p.Uniform3f(m),u_horizon:new p.Uniform1f(m),u_transition:new p.Uniform1f(m),u_fadeout_range:new p.Uniform1f(m),u_color:new p.Uniform4f(m),u_high_color:new p.Uniform4f(m),u_space_color:new p.Uniform4f(m),u_star_intensity:new p.Uniform1f(m),u_star_density:new p.Uniform1f(m),u_star_size:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m),u_horizon_angle:new p.Uniform1f(m),u_rotation_matrix:new p.UniformMatrix4f(m)})};let Hn;function hr(m,l,f,v,b,w,D){const A=m.context,L=A.gl,P=m.transform,R=m.useProgram("collisionBox"),B=[];let Y=0,J=0;for(let ue=0;ue<v.length;ue++){const ye=v[ue],_e=l.getTile(ye),Ce=_e.getBucket(f);if(!Ce)continue;const Se=x1(ye,Ce,P);let Te=Se;0===b[0]&&0===b[1]||(Te=m.translatePosMatrix(Se,_e,b,w));const Re=D?Ce.textCollisionBox:Ce.iconCollisionBox,gt=Ce.collisionCircleArray;if(gt.length>0){const Ee=p.create(),et=Te;p.mul(Ee,Ce.placementInvProjMatrix,P.glCoordMatrix),p.mul(Ee,Ee,Ce.placementViewportMatrix),B.push({circleArray:gt,circleOffset:J,transform:et,invTransform:Ee,projection:Ce.getProjection()}),Y+=gt.length/4,J=Y}Re&&(m.terrain&&m.terrain.setupElevationDraw(_e,R),R.draw(A,L.LINES,p.DepthMode.disabled,p.StencilMode.disabled,m.colorModeForRenderPass(),p.CullFaceMode.disabled,S4(Te,P,_e,Ce.getProjection()),f.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,P.zoom,null,[Re.collisionVertexBuffer,Re.collisionVertexBufferExt]))}if(!D||!B.length)return;const ee=m.useProgram("collisionCircle"),te=new p.StructArrayLayout2f1f2i16;te.resize(4*Y),te._trim();let Q=0;for(const ue of B)for(let ye=0;ye<ue.circleArray.length/4;ye++){const _e=4*ye,Ce=ue.circleArray[_e+0],Se=ue.circleArray[_e+1],Te=ue.circleArray[_e+2],Re=ue.circleArray[_e+3];te.emplace(Q++,Ce,Se,Te,Re,0),te.emplace(Q++,Ce,Se,Te,Re,1),te.emplace(Q++,Ce,Se,Te,Re,2),te.emplace(Q++,Ce,Se,Te,Re,3)}(!Hn||Hn.length<2*Y)&&(Hn=function(ue){const ye=2*ue,_e=new p.StructArrayLayout3ui6;_e.resize(ye),_e._trim();for(let Ce=0;Ce<ye;Ce++){const Se=6*Ce;_e.uint16[Se+0]=4*Ce+0,_e.uint16[Se+1]=4*Ce+1,_e.uint16[Se+2]=4*Ce+2,_e.uint16[Se+3]=4*Ce+2,_e.uint16[Se+4]=4*Ce+3,_e.uint16[Se+5]=4*Ce+0}return _e}(Y));const Z=A.createIndexBuffer(Hn,!0),se=A.createVertexBuffer(te,p.collisionCircleLayout.members,!0);for(const ue of B){const ye={u_matrix:ue.transform,u_inv_matrix:ue.invTransform,u_camera_to_center_distance:(oe=P).getCameraToCenterDistance(ue.projection),u_viewport_size:[oe.width,oe.height]};ee.draw(A,L.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,m.colorModeForRenderPass(),p.CullFaceMode.disabled,ye,f.id,se,Z,p.SegmentVector.simpleSegment(0,2*ue.circleOffset,ue.circleArray.length,ue.circleArray.length/2),null,P.zoom)}var oe;se.destroy(),Z.destroy()}const na=p.create();function Ti({width:m,height:l,anchor:f,textOffset:v,textScale:b},w){const{horizontalAlign:D,verticalAlign:A}=p.getAnchorAlignment(f),L=-(D-.5)*m,P=-(A-.5)*l,R=p.evaluateVariableOffset(f,v);return new p.pointGeometry((L/b+R[0])*w,(P/b+R[1])*w)}function Ir(m,l,f,v,b,w,D,A,L,P,R){const B=m.text.placedSymbolArray,Y=m.text.dynamicLayoutVertexArray,J=m.icon.dynamicLayoutVertexArray,ee={},te=m.getProjection(),Q=pn(A,te,w),Z=w.elevation,se=te.upVectorScale(A.canonical,w.center.lat,w.worldSize).metersToTile;Y.clear();for(let oe=0;oe<B.length;oe++){const ue=B.get(oe),{tileAnchorX:ye,tileAnchorY:_e,numGlyphs:Ce}=ue,Te=ue.hidden||!ue.crossTileID||m.allowVerticalPlacement&&!ue.placedOrientation?null:v[ue.crossTileID];if(Te){let Re=0,gt=0,Ee=0;if(Z){const Pt=Z?Z.getAtTileOffset(A,ye,_e):0,[L1,Dt,zt]=te.upVector(A.canonical,ye,_e);Re=Pt*L1*se,gt=Pt*Dt*se,Ee=Pt*zt*se}let[et,Be,ct,Pe]=bt(ue.projectedAnchorX+Re,ue.projectedAnchorY+gt,ue.projectedAnchorZ+Ee,f?Q:D);const ze=D1(w.getCameraToCenterDistance(te),Pe);let Ne=b.evaluateSizeForFeature(m.textSizeData,P,ue)*ze/p.ONE_EM;f&&(Ne*=m.tilePixelRatio/L);const ot=Ti(Te,Ne);f?(({x:et,y:Be,z:ct}=te.projectTilePoint(ye+ot.x,_e+ot.y,A.canonical)),[et,Be,ct]=bt(et+Re,Be+gt,ct+Ee,D)):(l&&ot._rotate(-w.angle),et+=ot.x,Be+=ot.y,ct=0);const ut=m.allowVerticalPlacement&&ue.placedOrientation===p.WritingMode.vertical?Math.PI/2:0;for(let Pt=0;Pt<Ce;Pt++)p.addDynamicAttributes(Y,et,Be,ct,ut);R&&ue.associatedIconIndex>=0&&(ee[ue.associatedIconIndex]={x:et,y:Be,z:ct,angle:ut})}else yn(Ce,Y)}if(R){J.clear();const oe=m.icon.placedSymbolArray;for(let ue=0;ue<oe.length;ue++){const ye=oe.get(ue),{numGlyphs:_e}=ye,Ce=ee[ue];if(ye.hidden||!Ce)yn(_e,J);else{const{x:Se,y:Te,z:Re,angle:gt}=Ce;for(let Ee=0;Ee<_e;Ee++)p.addDynamicAttributes(J,Se,Te,Re,gt)}}m.icon.dynamicLayoutVertexBuffer.updateData(J)}m.text.dynamicLayoutVertexBuffer.updateData(Y)}function ai(m,l,f){return f.iconsInText&&l?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function ac(m,l,f,v,b,w,D,A,L,P,R,B){const Y=m.context,J=Y.gl,ee=m.transform,te="map"===A,Q="map"===L,Z=te&&"point"!==f.layout.get("symbol-placement"),se=te&&!Q&&!Z,oe=void 0!==f.layout.get("symbol-sort-key").constantOr(1);let ue=!1;const ye=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),_e=[p.mercatorXfromLng(ee.center.lng),p.mercatorYfromLat(ee.center.lat)],Ce=f.layout.get("text-variable-anchor"),Se="globe"===ee.projection.name,Te=[],Re=[0,-1,0];let gt=Re;!Se&&!ee.mercatorFromTransition||te||(gt=function(Ee){const et=Ee._camera.getWorldToCamera(Ee.worldSize,1),Be=p.multiply([],et,Ee.globeMatrix);p.invert(Be,Be);const ct=[0,0,0],Pe=[0,1,0,0];return p.transformMat4$1(Pe,Pe,Be),ct[0]=Pe[0],ct[1]=Pe[1],ct[2]=Pe[2],p.normalize(ct,ct),ct}(ee));for(const Ee of v){const et=l.getTile(Ee),Be=et.getBucket(f);if(!Be||"mercator"===Be.projection.name&&Se)continue;const ct=b?Be.text:Be.icon;if(!ct||Be.fullyClipped||!ct.segments.get().length)continue;const Pe=ct.programConfigurations.get(f.id),ze=b||Be.sdfIcons,Ne=b?Be.textSizeData:Be.iconSizeData,ot=Q||0!==ee.pitch,ut=p.evaluateSizeForZoom(Ne,ee.zoom);let Pt,L1,Dt,zt,Ft=[0,0],A1=null;if(b)L1=et.glyphAtlasTexture,Dt=J.LINEAR,Pt=et.glyphAtlasTexture.size,Be.iconsInText&&(Ft=et.imageAtlasTexture.size,A1=et.imageAtlasTexture,zt=ot||m.options.rotating||m.options.zooming||"composite"===Ne.kind||"camera"===Ne.kind?J.LINEAR:J.NEAREST);else{const vr=1!==f.layout.get("icon-size").constantOr(0)||Be.iconsNeedLinear;L1=et.imageAtlasTexture,Dt=ze||m.options.rotating||m.options.zooming||vr||ot?J.LINEAR:J.NEAREST,Pt=et.imageAtlasTexture.size}const Ut="globe"===Be.projection.name,mn=Ut?gt:Re,un=Ut?p.globeToMercatorTransition(ee.zoom):0,Nn=pn(Ee,Be.getProjection(),ee),Mn=ee.calculatePixelsToTileUnitsMatrix(et),oi=ts(Nn,et.tileID.canonical,Q,te,ee,Be.getProjection(),Mn),h2=m.terrain&&Q&&Z?p.invert(p.create(),oi):na,Ka=Ci(Nn,et.tileID.canonical,Q,te,ee,Be.getProjection(),Mn),Qa=Ce&&Be.hasTextData(),jn="none"!==f.layout.get("icon-text-fit")&&Qa&&Be.hasIconData();if(Z){const vr=ee.elevation,Rr=vr?vr.getAtTileOffsetFunc(Ee,ee.center.lat,ee.worldSize,Be.getProjection()):null,eo=Jn(Nn,et.tileID.canonical,Q,te,ee,Be.getProjection(),Mn);lr(Be,Nn,m,b,eo,Ka,Q,P,Rr,Ee)}const kn=Z||b&&Ce||jn,T1=m.translatePosMatrix(Nn,et,w,D),si=kn?na:oi,Ri=m.translatePosMatrix(Ka,et,w,D,!0),In=Be.getProjection().createInversionMatrix(ee,Ee.canonical),p2=[];m.terrainRenderModeElevated()&&Q&&p2.push("PITCH_WITH_MAP_TERRAIN"),Ut&&p2.push("PROJECTION_GLOBE_VIEW"),kn&&p2.push("PROJECTED_POS_ON_VIEWPORT");const Qi=ze&&0!==f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1);let Ja;Ja=ze?Be.iconsInText?Io(Ne.kind,ut,se,Q,m,T1,si,Ri,Pt,Ft,Ee,un,_e,In,mn,Be.getProjection()):E3(Ne.kind,ut,se,Q,m,T1,si,Ri,b,Pt,!0,Ee,un,_e,In,mn,Be.getProjection()):ps(Ne.kind,ut,se,Q,m,T1,si,Ri,b,Pt,Ee,un,_e,In,mn,Be.getProjection());const n3={program:m.useProgram(ai(ze,b,Be),Pe,p2),buffers:ct,uniformValues:Ja,atlasTexture:L1,atlasTextureIcon:A1,atlasInterpolation:Dt,atlasInterpolationIcon:zt,isSDF:ze,hasHalo:Qi,tile:et,labelPlaneMatrixInv:h2};if(oe&&Be.canOverlap){ue=!0;const vr=ct.segments.get();for(const Rr of vr)Te.push({segments:new p.SegmentVector([Rr]),sortKey:Rr.sortKey,state:n3})}else Te.push({segments:ct.segments,sortKey:0,state:n3})}ue&&Te.sort((Ee,et)=>Ee.sortKey-et.sortKey);for(const Ee of Te){const et=Ee.state;if(m.terrain&&m.terrain.setupElevationDraw(et.tile,et.program,{useDepthForOcclusion:!Se,labelPlaneMatrixInv:et.labelPlaneMatrixInv}),Y.activeTexture.set(J.TEXTURE0),et.atlasTexture.bind(et.atlasInterpolation,J.CLAMP_TO_EDGE),et.atlasTextureIcon&&(Y.activeTexture.set(J.TEXTURE1),et.atlasTextureIcon&&et.atlasTextureIcon.bind(et.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),et.isSDF){const Be=et.uniformValues;et.hasHalo&&(Be.u_is_halo=1,oc(et.buffers,Ee.segments,f,m,et.program,ye,R,B,Be)),Be.u_is_halo=0}oc(et.buffers,Ee.segments,f,m,et.program,ye,R,B,et.uniformValues)}}function oc(m,l,f,v,b,w,D,A,L){const P=v.context,R=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];b.draw(P,P.gl.TRIANGLES,w,D,A,p.CullFaceMode.disabled,L,f.id,m.layoutVertexBuffer,m.indexBuffer,l,f.paint,v.transform.zoom,m.programConfigurations.get(f.id),R)}function U1(m,l,f,v,b,w,D){const A=m.context.gl,L=f.paint.get("fill-pattern"),P=L&&L.constantOr(1);let R,B,Y,J,ee;D?(B=P&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",R=A.LINES):(B=P?"fillPattern":"fill",R=A.TRIANGLES);for(const te of v){const Q=l.getTile(te);if(P&&!Q.patternsLoaded())continue;const Z=Q.getBucket(f);if(!Z)continue;m.prepareDrawTile();const se=Z.programConfigurations.get(f.id),oe=m.useProgram(B,se);P&&(m.context.activeTexture.set(A.TEXTURE0),Q.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),se.updatePaintBuffers());const ue=L.constantOr(null);if(ue&&Q.imageAtlas){const _e=Q.imageAtlas.patternPositions[ue.toString()];_e&&se.setConstantPatternPositions(_e)}const ye=m.translatePosMatrix(te.projMatrix,Q,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(D){J=Z.indexBuffer2,ee=Z.segments2;const _e=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];Y="fillOutlinePattern"===B&&P?hs(ye,m,Q,_e):fr(ye,_e)}else J=Z.indexBuffer,ee=Z.segments,Y=P?fs(ye,m,Q):ko(ye);m.prepareDrawProgram(m.context,oe,te.toUnwrapped()),oe.draw(m.context,R,b,m.stencilModeForClipping(te),w,p.CullFaceMode.disabled,Y,f.id,Z.layoutVertexBuffer,J,ee,f.paint,m.transform.zoom,se)}}function sc(m,l,f,v,b,w,D){const A=m.context,L=A.gl,P=m.transform,R=f.paint.get("fill-extrusion-pattern"),B=R.constantOr(1),Y=f.paint.get("fill-extrusion-opacity"),J=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],ee=f.layout.get("fill-extrusion-edge-radius"),te="globe"===P.projection.name?p.fillExtrusionHeightLift():0,Q="globe"===P.projection.name,Z=Q?p.globeToMercatorTransition(P.zoom):0,se=[p.mercatorXfromLng(P.center.lng),p.mercatorYfromLat(P.center.lat)],oe=[];Q&&oe.push("PROJECTION_GLOBE_VIEW"),J[0]>0&&oe.push("FAUX_AO");for(const ue of v){const ye=l.getTile(ue),_e=ye.getBucket(f);if(!_e||_e.projection.name!==P.projection.name)continue;const Ce=_e.programConfigurations.get(f.id),Se=m.useProgram(B?"fillExtrusionPattern":"fillExtrusion",Ce,oe);if(m.terrain){const ct=m.terrain;if(m.style.terrainSetForDrapingOnly())ct.setupElevationDraw(ye,Se,{useMeterToDem:!0});else{if(!_e.enableTerrain)continue;if(ct.setupElevationDraw(ye,Se,{useMeterToDem:!0}),cc(A,l,ue,_e,f,ct),!_e.centroidVertexBuffer){const Pe=Se.attributes.a_centroid_pos;void 0!==Pe&&L.vertexAttrib2f(Pe,0,0)}}}B&&(m.context.activeTexture.set(L.TEXTURE0),ye.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ce.updatePaintBuffers());const Te=R.constantOr(null);if(Te&&ye.imageAtlas){const ct=ye.imageAtlas.patternPositions[Te.toString()];ct&&Ce.setConstantPatternPositions(ct)}const Re=m.translatePosMatrix(ue.projMatrix,ye,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),gt=P.projection.createInversionMatrix(P,ue.canonical),Ee=f.paint.get("fill-extrusion-vertical-gradient"),et=B?Ho(Re,m,Ee,Y,J,ee,ue,ye,te,Z,se,gt):To(Re,m,Ee,Y,J,ee,ue,te,Z,se,gt);m.prepareDrawProgram(A,Se,ue.toUnwrapped());const Be=[];m.terrain&&Be.push(_e.centroidVertexBuffer),Q&&Be.push(_e.layoutVertexExtBuffer),Se.draw(A,A.gl.TRIANGLES,b,w,D,p.CullFaceMode.backCCW,et,f.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,f.paint,m.transform.zoom,Ce,Be)}}function cc(m,l,f,v,b,w){const D=[Z=>{let se=Z.canonical.x-1,oe=Z.wrap;return se<0&&(se=(1<<Z.canonical.z)-1,oe--),new p.OverscaledTileID(Z.overscaledZ,oe,Z.canonical.z,se,Z.canonical.y)},Z=>{let se=Z.canonical.x+1,oe=Z.wrap;return se===1<<Z.canonical.z&&(se=0,oe++),new p.OverscaledTileID(Z.overscaledZ,oe,Z.canonical.z,se,Z.canonical.y)},Z=>new p.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,(0===Z.canonical.y?1<<Z.canonical.z:Z.canonical.y)-1),Z=>new p.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y===(1<<Z.canonical.z)-1?0:Z.canonical.y+1)],A=Z=>{const se=l.getSource().minzoom,oe=ye=>{const _e=l.getTileByID(ye);if(_e&&_e.hasData())return _e.getBucket(b)},ue=[0,-1,1];for(const ye of ue){if(Z.overscaledZ+ye<se)continue;const _e=oe(Z.calculateScaledKey(Z.overscaledZ+ye));if(_e)return _e}},L=[0,0,0],P=(Z,se)=>(L[0]=Math.min(Z.min.y,se.min.y),L[1]=Math.max(Z.max.y,se.max.y),L[2]=p.EXTENT-se.min.x>Z.max.x?se.min.x-p.EXTENT:Z.max.x,L),R=(Z,se)=>(L[0]=Math.min(Z.min.x,se.min.x),L[1]=Math.max(Z.max.x,se.max.x),L[2]=p.EXTENT-se.min.y>Z.max.y?se.min.y-p.EXTENT:Z.max.y,L),B=[(Z,se)=>P(Z,se),(Z,se)=>P(se,Z),(Z,se)=>R(Z,se),(Z,se)=>R(se,Z)],Y=new p.pointGeometry(0,0);let J,ee,te;const Q=(Z,se,oe,ue,ye)=>{const _e=[[ue?oe:Z,ue?Z:oe,0],[ue?oe:se,ue?se:oe,0]],Ce=ye<0?p.EXTENT+ye:ye,Se=[ue?Ce:(Z+se)/2,ue?(Z+se)/2:Ce,0];return 0===oe&&ye<0||0!==oe&&ye>0?w.getForTilePoints(te,[Se],!0,ee):_e.push(Se),w.getForTilePoints(f,_e,!0,J),Math.max(_e[0][2],_e[1][2],Se[2])/w.exaggeration()};for(let Z=0;Z<4;Z++){const se=(Z<2?1:5)-Z,oe=v.borders[Z];if(0===oe.length)continue;const ue=te=D[Z](f),ye=A(ue);if(!(ye&&ye instanceof p.FillExtrusionBucket&&ye.enableTerrain)||v.borderDoneWithNeighborZ[Z]===ye.canonical.z&&ye.borderDoneWithNeighborZ[se]===v.canonical.z||(ee=w.findDEMTileFor(ue),!ee||!ee.dem))continue;if(!J){const Te=w.findDEMTileFor(f);if(!Te||!Te.dem)return;J=Te}const _e=ye.borders[se];let Ce=0;const Se=ye.borderDoneWithNeighborZ[se]!==v.canonical.z;if(v.canonical.z===ye.canonical.z){for(let Te=0;Te<oe.length;Te++){const Re=v.featuresOnBorder[oe[Te]],gt=Re.borders[Z];let Ee;for(;Ce<_e.length&&(Ee=ye.featuresOnBorder[_e[Ce]],!(Ee.borders[se][1]>gt[0]+3));)Se&&ye.encodeCentroid(void 0,Ee,!1),Ce++;if(Ee&&Ce<_e.length){const et=Ce;let Be=0;for(;!(Ee.borders[se][0]>gt[1]-3)&&(Be++,++Ce!==_e.length);)Ee=ye.featuresOnBorder[_e[Ce]];if(Ee=ye.featuresOnBorder[_e[et]],Re.intersectsCount()>1||Ee.intersectsCount()>1||1!==Be){1!==Be&&(Ce=et),v.encodeCentroid(void 0,Re,!1),Se&&ye.encodeCentroid(void 0,Ee,!1);continue}const ct=B[Z](Re,Ee),Pe=Z%2?p.EXTENT-1:0;Y.x=Q(ct[0],Math.min(p.EXTENT-1,ct[1]),Pe,Z<2,ct[2]),Y.y=0,v.encodeCentroid(Y,Re,!1),Se&&ye.encodeCentroid(Y,Ee,!1)}else v.encodeCentroid(void 0,Re,!1)}v.borderDoneWithNeighborZ[Z]=ye.canonical.z,v.needsCentroidUpdate=!0,Se&&(ye.borderDoneWithNeighborZ[se]=v.canonical.z,ye.needsCentroidUpdate=!0)}else{for(const Te of oe)v.encodeCentroid(void 0,v.featuresOnBorder[Te],!1);if(Se){for(const Te of _e)ye.encodeCentroid(void 0,ye.featuresOnBorder[Te],!1);ye.borderDoneWithNeighborZ[se]=v.canonical.z,ye.needsCentroidUpdate=!0}v.borderDoneWithNeighborZ[Z]=ye.canonical.z,v.needsCentroidUpdate=!0}}(v.needsCentroidUpdate||!v.centroidVertexBuffer&&0!==v.centroidVertexArray.length)&&v.uploadCentroid(m)}const Yc=new p.Color(1,0,0,1),S2=new p.Color(0,1,0,1),zi=new p.Color(0,0,1,1),ms=new p.Color(1,0,1,1),Ga=new p.Color(0,1,1,1);function pr(m,l,f){const v=m.context,b=m.transform,w=v.gl,D="globe"===b.projection.name,A=D?["PROJECTION_GLOBE_VIEW"]:null;let L=f.projMatrix;if(D&&p.globeToMercatorTransition(b.zoom)>0){const Re=p.transitionTileAABBinECEF(f.canonical,b),gt=p.globeDenormalizeECEF(Re);L=p.multiply(new Float32Array(16),b.globeMatrix,gt),p.multiply(L,b.projMatrix,L)}const P=m.useProgram("debug",null,A),R=l.getTileByID(f.key);m.terrain&&m.terrain.setupElevationDraw(R,P);const B=p.DepthMode.disabled,Y=p.StencilMode.disabled,J=m.colorModeForRenderPass();v.activeTexture.set(w.TEXTURE0),m.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),D?R._makeGlobeTileDebugBuffers(m.context,b):R._makeDebugTileBoundsBuffers(m.context,b.projection);const te=R._tileDebugBuffer||m.debugBuffer,Q=R._tileDebugIndexBuffer||m.debugIndexBuffer,Z=R._tileDebugSegments||m.debugSegments;P.draw(v,w.LINE_STRIP,B,Y,J,p.CullFaceMode.disabled,ic(L,p.Color.red),"$debug",te,Q,Z,null,null,null,[R._globeTileDebugBorderBuffer]);const se=R.latestRawTileData,oe=Math.floor((se&&se.byteLength||0)/1024),ue=l.getTile(f).tileSize,ye=512/Math.min(ue,512)*(f.overscaledZ/b.zoom)*.5;let _e=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(_e+=` => ${f.overscaledZ}`),_e+=` ${oe}kb`,function(Re,gt){Re.initDebugOverlayCanvas();const Ee=Re.debugOverlayCanvas,et=Re.context.gl,Be=Re.debugOverlayCanvas.getContext("2d");Be.clearRect(0,0,Ee.width,Ee.height),Be.shadowColor="white",Be.shadowBlur=2,Be.lineWidth=1.5,Be.strokeStyle="white",Be.textBaseline="top",Be.font="bold 36px Open Sans, sans-serif",Be.fillText(gt,5,5),Be.strokeText(gt,5,5),Re.debugOverlayTexture.update(Ee),Re.debugOverlayTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE)}(m,_e);const Ce=R._tileDebugTextBuffer||m.debugBuffer,Se=R._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Te=R._tileDebugTextSegments||m.debugSegments;P.draw(v,w.TRIANGLES,B,Y,p.ColorMode.alphaBlended,p.CullFaceMode.disabled,ic(L,p.Color.transparent,ye),"$debug",Ce,Se,Te,null,null,null,[R._globeTileDebugTextBuffer])}function mr(m,l,f,v){Dn(m,0,l+f/2,m.transform.width,f,v)}function Ro(m,l,f,v){Dn(m,l-f/2,0,f,m.transform.height,v)}function Dn(m,l,f,v,b,w){const D=m.context,A=D.gl;A.enable(A.SCISSOR_TEST),A.scissor(l*p.exported.devicePixelRatio,f*p.exported.devicePixelRatio,v*p.exported.devicePixelRatio,b*p.exported.devicePixelRatio),D.clear({color:w}),A.disable(A.SCISSOR_TEST)}const lc=p.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:$a}=lc;function ia(m,l,f,v){m.emplaceBack(l,f,v)}class Yi{constructor(l){this.vertexArray=new p.StructArrayLayout3f12,this.indices=new p.StructArrayLayout3ui6,ia(this.vertexArray,-1,-1,1),ia(this.vertexArray,1,-1,1),ia(this.vertexArray,-1,1,1),ia(this.vertexArray,1,1,1),ia(this.vertexArray,-1,-1,-1),ia(this.vertexArray,1,-1,-1),ia(this.vertexArray,-1,1,-1),ia(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,$a),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=p.SegmentVector.simpleSegment(0,0,36,12)}}function _1(m,l,f,v,b,w){const D=m.gl,A=l.paint.get("sky-atmosphere-color"),L=l.paint.get("sky-atmosphere-halo-color"),P=l.paint.get("sky-atmosphere-sun-intensity"),R={u_matrix_3f:p.fromMat4(p.create$1(),v),u_sun_direction:b,u_sun_intensity:P,u_color_tint_r:[(ee=A).r,ee.g,ee.b,ee.a],u_color_tint_m:[(te=L).r,te.g,te.b,te.a],u_luminance:5e-5};var ee,te;D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),f.draw(m,D.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.frontCW,R,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const ya=p.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class d2{constructor(l){const f=new p.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const v=new p.StructArrayLayout3ui6;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(f,ya.members),this.indexBuffer=l.createIndexBuffer(v),this.segments=p.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const D4={symbol:function(m,l,f,v,b){if("translucent"!==m.renderPass)return;const w=p.StencilMode.disabled,D=m.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(A,L,P,R,B,Y,J){const ee=L.transform,te="map"===B,Q="map"===Y;for(const Z of A){const se=R.getTile(Z),oe=se.getBucket(P);if(!oe||!oe.text||!oe.text.segments.get().length)continue;const ue=p.evaluateSizeForZoom(oe.textSizeData,ee.zoom),ye=pn(Z,oe.getProjection(),ee),_e=ee.calculatePixelsToTileUnitsMatrix(se),Ce=ts(ye,se.tileID.canonical,Q,te,ee,oe.getProjection(),_e),Se="none"!==P.layout.get("icon-text-fit")&&oe.hasIconData();if(ue){const Te=Math.pow(2,ee.zoom-se.tileID.overscaledZ);Ir(oe,te,Q,J,p.symbolSize,ee,Ce,Z,Te,ue,Se)}}}(v,m,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),0!==f.paint.get("icon-opacity").constantOr(1)&&ac(m,l,f,v,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),w,D),0!==f.paint.get("text-opacity").constantOr(1)&&ac(m,l,f,v,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),w,D),l.map.showCollisionBoxes&&(hr(m,l,f,v,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),hr(m,l,f,v,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(m,l,f,v){if("translucent"!==m.renderPass)return;const b=f.paint.get("circle-opacity"),w=f.paint.get("circle-stroke-width"),D=f.paint.get("circle-stroke-opacity"),A=void 0!==f.layout.get("circle-sort-key").constantOr(1);if(0===b.constantOr(1)&&(0===w.constantOr(1)||0===D.constantOr(1)))return;const L=m.context,P=L.gl,R=m.transform,B=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),Y=p.StencilMode.disabled,J=m.colorModeForRenderPass(),ee="globe"===R.projection.name,te=[p.mercatorXfromLng(R.center.lng),p.mercatorYfromLat(R.center.lat)],Q=[];for(let se=0;se<v.length;se++){const oe=v[se],ue=l.getTile(oe),ye=ue.getBucket(f);if(!ye||ye.projection.name!==R.projection.name)continue;const _e=ye.programConfigurations.get(f.id),Ce=ja(f);ee&&Ce.push("PROJECTION_GLOBE_VIEW");const Se=m.useProgram("circle",_e,Ce),Te=ye.layoutVertexBuffer,Re=ye.globeExtVertexBuffer,gt=ye.indexBuffer,Ee=R.projection.createInversionMatrix(R,oe.canonical),et={programConfiguration:_e,program:Se,layoutVertexBuffer:Te,globeExtVertexBuffer:Re,indexBuffer:gt,uniformValues:Bt(m,oe,ue,Ee,te,f),tile:ue};if(A){const Be=ye.segments.get();for(const ct of Be)Q.push({segments:new p.SegmentVector([ct]),sortKey:ct.sortKey,state:et})}else Q.push({segments:ye.segments,sortKey:0,state:et})}A&&Q.sort((se,oe)=>se.sortKey-oe.sortKey);const Z={useDepthForOcclusion:!ee};for(const se of Q){const{programConfiguration:oe,program:ue,layoutVertexBuffer:ye,globeExtVertexBuffer:_e,indexBuffer:Ce,uniformValues:Se,tile:Te}=se.state,Re=se.segments;m.terrain&&m.terrain.setupElevationDraw(Te,ue,Z),m.prepareDrawProgram(L,ue,Te.tileID.toUnwrapped()),ue.draw(L,P.TRIANGLES,B,Y,J,p.CullFaceMode.disabled,Se,f.id,ye,Ce,Re,f.paint,R.zoom,oe,[_e])}},heatmap:function(m,l,f,v){if(0!==f.paint.get("heatmap-opacity"))if("offscreen"===m.renderPass){const b=m.context,w=b.gl,D=p.StencilMode.disabled,A=new p.ColorMode([w.ONE,w.ONE],p.Color.transparent,[!0,!0,!0,!0]);(function(J,ee,te,Q){const Z=J.gl,se=ee.width*Q,oe=ee.height*Q;J.activeTexture.set(Z.TEXTURE1),J.viewport.set([0,0,se,oe]);let ue=te.heatmapFbo;if(!ue||ue&&(ue.width!==se||ue.height!==oe)){ue&&ue.destroy();const ye=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,ye),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),ue=te.heatmapFbo=J.createFramebuffer(se,oe,!1),function(_e,Ce,Se,Te,Re,gt){const Ee=_e.gl;Ee.texImage2D(Ee.TEXTURE_2D,0,_e.isWebGL2&&_e.extRenderToTextureHalfFloat?Ee.RGBA16F:Ee.RGBA,Re,gt,0,Ee.RGBA,_e.extRenderToTextureHalfFloat?_e.isWebGL2?Ee.HALF_FLOAT:_e.extTextureHalfFloat.HALF_FLOAT_OES:Ee.UNSIGNED_BYTE,null),Te.colorAttachment.set(Se)}(J,0,ye,ue,se,oe)}else Z.bindTexture(Z.TEXTURE_2D,ue.colorAttachment.get()),J.bindFramebuffer.set(ue.framebuffer)})(b,m,f,"globe"===m.transform.projection.name?.5:.25),b.clear({color:p.Color.transparent});const L=m.transform,P="globe"===L.projection.name,R=P?["PROJECTION_GLOBE_VIEW"]:null,B=P?p.CullFaceMode.frontCCW:p.CullFaceMode.disabled,Y=[p.mercatorXfromLng(L.center.lng),p.mercatorYfromLat(L.center.lat)];for(let J=0;J<v.length;J++){const ee=v[J];if(l.hasRenderableParent(ee))continue;const te=l.getTile(ee),Q=te.getBucket(f);if(!Q||Q.projection.name!==L.projection.name)continue;const Z=Q.programConfigurations.get(f.id),se=m.useProgram("heatmap",Z,R),{zoom:oe}=m.transform;m.terrain&&m.terrain.setupElevationDraw(te,se),m.prepareDrawProgram(b,se,ee.toUnwrapped());const ue=L.projection.createInversionMatrix(L,ee.canonical);se.draw(b,w.TRIANGLES,p.DepthMode.disabled,D,A,B,ta(m,ee,te,ue,Y,oe,f.paint.get("heatmap-intensity")),f.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,f.paint,m.transform.zoom,Z,P?[Q.globeExtVertexBuffer]:null)}b.viewport.set([0,0,m.width,m.height])}else"translucent"===m.renderPass&&(m.context.setColorMode(m.colorModeForRenderPass()),function(b,w){const D=b.context,A=D.gl,L=w.heatmapFbo;if(!L)return;D.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,L.colorAttachment.get()),D.activeTexture.set(A.TEXTURE1);let P=w.colorRampTexture;P||(P=w.colorRampTexture=new p.Texture(D,w.colorRamp,A.RGBA)),P.bind(A.LINEAR,A.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(D,A.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,b.colorModeForRenderPass(),p.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:w.paint.get("heatmap-opacity")},w.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,w.paint,b.transform.zoom)}(m,f))},line:function(m,l,f,v){if("translucent"!==m.renderPass)return;const b=f.paint.get("line-opacity"),w=f.paint.get("line-width");if(0===b.constantOr(1)||0===w.constantOr(1))return;const D=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),A=m.colorModeForRenderPass(),L=m.terrain&&m.terrain.renderingToTexture?1:p.exported.devicePixelRatio,P=f.paint.get("line-dasharray"),R=P.constantOr(1),B=f.layout.get("line-cap"),Y=f.paint.get("line-pattern"),J=Y.constantOr(1),ee=f.paint.get("line-gradient"),te=J?"linePattern":"line",Q=m.context,Z=Q.gl,se=(ue=>{const ye=[];mi(ue)&&ye.push("RENDER_LINE_DASH"),ue.paint.get("line-gradient")&&ye.push("RENDER_LINE_GRADIENT");const _e=ue.paint.get("line-trim-offset");0===_e[0]&&0===_e[1]||ye.push("RENDER_LINE_TRIM_OFFSET");const Ce=ue.paint.get("line-pattern").constantOr(1),Se=1!==ue.paint.get("line-opacity").constantOr(1);return!Ce&&Se&&ye.push("RENDER_LINE_ALPHA_DISCARD"),ye})(f);let oe=se.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(oe=!1);for(const ue of v){const ye=l.getTile(ue);if(J&&!ye.patternsLoaded())continue;const _e=ye.getBucket(f);if(!_e)continue;m.prepareDrawTile();const Ce=_e.programConfigurations.get(f.id),Se=m.useProgram(te,Ce,se),Te=Y.constantOr(null);if(Te&&ye.imageAtlas){const ze=ye.imageAtlas.patternPositions[Te.toString()];ze&&Ce.setConstantPatternPositions(ze)}const Re=P.constantOr(null),gt=B.constantOr(null);if(!J&&Re&&gt&&ye.lineAtlas){const ze=ye.lineAtlas.getDash(Re,gt);ze&&Ce.setConstantPatternPositions(ze)}let[Ee,et]=f.paint.get("line-trim-offset");("round"===gt||"square"===gt)&&Ee!==et&&(0===Ee&&(Ee-=1),1===et&&(et+=1));const Be=m.terrain?ue.projMatrix:null,ct=J?je(m,ye,f,Be,L):rc(m,ye,f,Be,_e.lineClipsArray.length,L,[Ee,et]);if(ee){const ze=_e.gradients[f.id];let Ne=ze.texture;if(f.gradientVersion!==ze.version){let ot=256;if(f.stepInterpolant){const ut=l.getSource().maxzoom,Pt=ue.canonical.z===ut?Math.ceil(1<<m.transform.maxZoom-ue.canonical.z):1;ot=p.clamp(p.nextPowerOfTwo(_e.maxLineLength/p.EXTENT*1024*Pt),256,Q.maxTextureSize)}ze.gradient=p.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:ot,image:ze.gradient||void 0,clips:_e.lineClipsArray}),ze.texture?ze.texture.update(ze.gradient):ze.texture=new p.Texture(Q,ze.gradient,Z.RGBA),ze.version=f.gradientVersion,Ne=ze.texture}Q.activeTexture.set(Z.TEXTURE1),Ne.bind(f.stepInterpolant?Z.NEAREST:Z.LINEAR,Z.CLAMP_TO_EDGE)}R&&(Q.activeTexture.set(Z.TEXTURE0),ye.lineAtlasTexture.bind(Z.LINEAR,Z.REPEAT),Ce.updatePaintBuffers()),J&&(Q.activeTexture.set(Z.TEXTURE0),ye.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ce.updatePaintBuffers()),m.prepareDrawProgram(Q,Se,ue.toUnwrapped());const Pe=ze=>{Se.draw(Q,Z.TRIANGLES,D,ze,A,p.CullFaceMode.disabled,ct,f.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,f.paint,m.transform.zoom,Ce,[_e.layoutVertexBuffer2])};if(oe){const ze=m.stencilModeForClipping(ue).ref;0===ze&&m.terrain&&Q.clear({stencil:0});const Ne={func:Z.EQUAL,mask:255};ct.u_alpha_discard_threshold=.8,Pe(new p.StencilMode(Ne,ze,255,Z.KEEP,Z.KEEP,Z.INVERT)),ct.u_alpha_discard_threshold=0,Pe(new p.StencilMode(Ne,ze,255,Z.KEEP,Z.KEEP,Z.KEEP))}else Pe(m.stencilModeForClipping(ue))}oe&&(m.resetStencilClippingMasks(),m.terrain&&Q.clear({stencil:0}))},fill:function(m,l,f,v){const b=f.paint.get("fill-color"),w=f.paint.get("fill-opacity");if(0===w.constantOr(1))return;const D=m.colorModeForRenderPass(),A=f.paint.get("fill-pattern"),L=m.opaquePassEnabledForLayer()&&!A.constantOr(1)&&1===b.constantOr(p.Color.transparent).a&&1===w.constantOr(0)?"opaque":"translucent";if(m.renderPass===L){const P=m.depthModeForSublayer(1,"opaque"===m.renderPass?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly);U1(m,l,f,v,P,D,!1)}if("translucent"===m.renderPass&&f.paint.get("fill-antialias")){const P=m.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,p.DepthMode.ReadOnly);U1(m,l,f,v,P,D,!0)}},"fill-extrusion":function(m,l,f,v){const b=f.paint.get("fill-extrusion-opacity");if(0!==b&&"translucent"===m.renderPass){const w=new p.DepthMode(m.context.gl.LEQUAL,p.DepthMode.ReadWrite,m.depthRangeFor3D);if(1!==b||f.paint.get("fill-extrusion-pattern").constantOr(1))sc(m,l,f,v,w,p.StencilMode.disabled,p.ColorMode.disabled),sc(m,l,f,v,w,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const D=m.colorModeForRenderPass();sc(m,l,f,v,w,p.StencilMode.disabled,D)}}},hillshade:function(m,l,f,v){if("offscreen"!==m.renderPass&&"translucent"!==m.renderPass)return;const b=m.context,w=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),D=m.colorModeForRenderPass(),A=m.terrain&&m.terrain.renderingToTexture,[L,P]="translucent"!==m.renderPass||A?[{},v]:m.stencilConfigForOverlap(v);for(const R of P){const B=l.getTile(R);if(B.needsHillshadePrepare&&"offscreen"===m.renderPass)Vo(m,B,f,w,p.StencilMode.disabled,D);else if("translucent"===m.renderPass){const Y=A&&m.terrain?m.terrain.stencilModeForRTTOverlap(R):L[R.overscaledZ];ec(m,R,B,f,w,Y,D)}}b.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,l,f,v,b,w){if("translucent"!==m.renderPass||0===f.paint.get("raster-opacity")||!v.length)return;const D=m.context,A=D.gl,L=l.getSource(),P=m.useProgram("raster"),R=m.colorModeForRenderPass(),B=m.terrain&&m.terrain.renderingToTexture,[Y,J]=L instanceof xe||B?[{},v]:m.stencilConfigForOverlap(v),ee=J[J.length-1].overscaledZ,te=!m.options.moving;for(const Q of J){const Z=B?p.DepthMode.disabled:m.depthModeForSublayer(Q.overscaledZ-ee,1===f.paint.get("raster-opacity")?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly,A.LESS),se=Q.toUnwrapped(),oe=l.getTile(Q);if(B&&(!oe||!oe.hasData()))continue;const ue=B?Q.projMatrix:m.transform.calculateProjMatrix(se,te),ye=m.terrain&&B?m.terrain.stencilModeForRTTOverlap(Q):Y[Q.overscaledZ],_e=w?0:f.paint.get("raster-fade-duration");oe.registerFadeDuration(_e);const Ce=l.findLoadedParent(Q,0),Se=nc(oe,Ce,l,m.transform,_e);let Te,Re;m.terrain&&m.terrain.prepareDrawTile();const gt="nearest"===f.paint.get("raster-resampling")?A.NEAREST:A.LINEAR;D.activeTexture.set(A.TEXTURE0),oe.texture.bind(gt,A.CLAMP_TO_EDGE),D.activeTexture.set(A.TEXTURE1),Ce?(Ce.texture.bind(gt,A.CLAMP_TO_EDGE),Te=Math.pow(2,Ce.tileID.overscaledZ-oe.tileID.overscaledZ),Re=[oe.tileID.canonical.x*Te%1,oe.tileID.canonical.y*Te%1]):oe.texture.bind(gt,A.CLAMP_TO_EDGE),oe.texture.useMipmap&&D.extTextureFilterAnisotropic&&m.transform.pitch>20&&A.texParameterf(A.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax);const Ee=u2(ue,Re||[0,0],Te||1,Se,f,L instanceof xe?L.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(D,P,se),L instanceof xe)L.boundsBuffer&&L.boundsSegments&&P.draw(D,A.TRIANGLES,Z,p.StencilMode.disabled,R,p.CullFaceMode.disabled,Ee,f.id,L.boundsBuffer,m.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:et,tileBoundsIndexBuffer:Be,tileBoundsSegments:ct}=m.getTileBoundsBuffers(oe);P.draw(D,A.TRIANGLES,Z,ye,R,p.CullFaceMode.disabled,Ee,f.id,et,Be,ct)}}m.resetStencilClippingMasks()},background:function(m,l,f,v){const b=f.paint.get("background-color"),w=f.paint.get("background-opacity");if(0===w)return;const D=m.context,A=D.gl,L=m.transform,P=L.tileSize,R=f.paint.get("background-pattern");if(m.isPatternMissing(R))return;const B=!R&&1===b.a&&1===w&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==B)return;const Y=p.StencilMode.disabled,J=m.depthModeForSublayer(0,"opaque"===B?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly),ee=m.colorModeForRenderPass(),te=m.useProgram(R?"backgroundPattern":"background");let Q,Z=v;Z||(Q=m.getBackgroundTiles(),Z=Object.values(Q).map(se=>se.tileID)),R&&(D.activeTexture.set(A.TEXTURE0),m.imageManager.bind(m.context));for(const se of Z){const oe=se.toUnwrapped(),ue=v?se.projMatrix:m.transform.calculateProjMatrix(oe);m.prepareDrawTile();const ye=l?l.getTile(se):Q?Q[se.key]:new p.Tile(se,P,L.zoom,m),_e=R?kt(ue,w,m,R,{tileID:se,tileSize:P}):kr(ue,w,b);m.prepareDrawProgram(D,te,oe);const{tileBoundsBuffer:Ce,tileBoundsIndexBuffer:Se,tileBoundsSegments:Te}=m.getTileBoundsBuffers(ye);te.draw(D,A.TRIANGLES,J,Y,ee,p.CullFaceMode.disabled,_e,f.id,Ce,Se,Te)}},sky:function(m,l,f){const v=m.transform,b="mercator"===v.projection.name||"globe"===v.projection.name?1:p.smoothstep(7,8,v.zoom),w=f.paint.get("sky-opacity")*b;if(0===w)return;const D=m.context,A=f.paint.get("sky-type"),L=new p.DepthMode(D.gl.LEQUAL,p.DepthMode.ReadOnly,[0,1]),P=m.frameCounter/1e3%1;"atmosphere"===A?"offscreen"===m.renderPass?f.needsSkyboxCapture(m)&&(function(R,B,Y,J){const ee=R.context,te=ee.gl;let Q=B.skyboxFbo;if(!Q){Q=B.skyboxFbo=ee.createFramebuffer(32,32,!1),B.skyboxGeometry=new Yi(ee),B.skyboxTexture=ee.gl.createTexture(),te.bindTexture(te.TEXTURE_CUBE_MAP,B.skyboxTexture),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MAG_FILTER,te.LINEAR);for(let ue=0;ue<6;++ue)te.texImage2D(te.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,te.RGBA,32,32,0,te.RGBA,te.UNSIGNED_BYTE,null)}ee.bindFramebuffer.set(Q.framebuffer),ee.viewport.set([0,0,32,32]);const Z=B.getCenter(R,!0),se=R.useProgram("skyboxCapture"),oe=new Float64Array(16);p.identity(oe),p.rotateY(oe,oe,.5*-Math.PI),_1(ee,B,se,oe,Z,0),p.identity(oe),p.rotateY(oe,oe,.5*Math.PI),_1(ee,B,se,oe,Z,1),p.identity(oe),p.rotateX(oe,oe,.5*-Math.PI),_1(ee,B,se,oe,Z,2),p.identity(oe),p.rotateX(oe,oe,.5*Math.PI),_1(ee,B,se,oe,Z,3),p.identity(oe),_1(ee,B,se,oe,Z,4),p.identity(oe),p.rotateY(oe,oe,Math.PI),_1(ee,B,se,oe,Z,5),ee.viewport.set([0,0,R.width,R.height])}(m,f),f.markSkyboxValid(m)):"sky"===m.renderPass&&function(R,B,Y,J,ee){const te=R.context,Q=te.gl,Z=R.transform,se=R.useProgram("skybox");te.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_CUBE_MAP,B.skyboxTexture);const oe={u_matrix:Z.skyboxMatrix,u_sun_direction:B.getCenter(R,!1),u_cubemap:0,u_opacity:J,u_temporal_offset:ee};R.prepareDrawProgram(te,se),se.draw(te,Q.TRIANGLES,Y,p.StencilMode.disabled,R.colorModeForRenderPass(),p.CullFaceMode.backCW,oe,"skybox",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(m,f,L,w,P):"gradient"===A&&"sky"===m.renderPass&&function(R,B,Y,J,ee){const te=R.context,Q=te.gl,Z=R.transform,se=R.useProgram("skyboxGradient");B.skyboxGeometry||(B.skyboxGeometry=new Yi(te)),te.activeTexture.set(Q.TEXTURE0);let oe=B.colorRampTexture;oe||(oe=B.colorRampTexture=new p.Texture(te,B.colorRamp,Q.RGBA)),oe.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const ue=(ye=Z.skyboxMatrix,_e=B.getCenter(R,!1),Ce=B.paint.get("sky-gradient-radius"),Se=J,Te=ee,{u_matrix:ye,u_color_ramp:0,u_center_direction:_e,u_radius:p.degToRad(Ce),u_opacity:Se,u_temporal_offset:Te});var ye,_e,Ce,Se,Te;R.prepareDrawProgram(te,se),se.draw(te,Q.TRIANGLES,Y,p.StencilMode.disabled,R.colorModeForRenderPass(),p.CullFaceMode.backCW,ue,"skyboxGradient",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(m,f,L,w,P)},debug:function(m,l,f){for(let v=0;v<f.length;v++)pr(m,l,f[v])},custom:function(m,l,f,v){const b=m.context,w=f.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||"offscreen"===m.renderPass)&&f.isLayerDraped()){if("offscreen"===m.renderPass){const D=w.prerender;if(D){if(m.setCustomLayerDefaults(),b.setColorMode(m.colorModeForRenderPass()),"globe"===m.transform.projection.name){const A=m.transform.pointMerc;D.call(w,b.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(m.transform.zoom),[A.x,A.y],m.transform.pixelsPerMeterRatio)}else D.call(w,b.gl,m.transform.customLayerMatrix());b.setDirty(),m.setBaseState()}}else if("translucent"===m.renderPass){if(m.terrain&&m.terrain.renderingToTexture){const A=w.renderToTile;if(A){const L=v[0].canonical,P=new p.MercatorCoordinate(L.x+v[0].wrap*(1<<L.z),L.y,L.z);b.setDepthMode(p.DepthMode.disabled),b.setStencilMode(p.StencilMode.disabled),b.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),A.call(w,b.gl,P),b.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),b.setColorMode(m.colorModeForRenderPass()),b.setStencilMode(p.StencilMode.disabled);const D="3d"===w.renderingMode?new p.DepthMode(m.context.gl.LEQUAL,p.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,p.DepthMode.ReadOnly);if(b.setDepthMode(D),"globe"===m.transform.projection.name){const A=m.transform.pointMerc;w.render(b.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(m.transform.zoom),[A.x,A.y],m.transform.pixelsPerMeterRatio)}else w.render(b.gl,m.transform.customLayerMatrix());b.setDirty(),m.setBaseState(),b.bindFramebuffer.set(null)}}else p.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Hi{constructor(l,f,v=!1){this.context=new ie(l,v),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=p.SourceCache.maxUnderzooming+p.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new os,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,f){const v=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new dr(this,l));const b=this._terrain;this.transform.elevation=v?b:null,b.update(l,this.transform,f)}_updateFog(l){const f=l.fog;if(!f||"globe"===this.transform.projection.name||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,b]=f.getFovAdjustedRange(this.transform._fov);if(v>b)return void(this.transform.fogCullDistSq=null);const w=v+.78*(b-v);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,f){if(this.width=l*p.exported.devicePixelRatio,this.height=f*p.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._layers[v].resize()}setup(){const l=this.context,f=new p.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(p.EXTENT,0),f.emplaceBack(0,p.EXTENT),f.emplaceBack(p.EXTENT,p.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,p.posAttributes.members),this.tileExtentSegments=p.SegmentVector.simpleSegment(0,0,4,2);const v=new p.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(p.EXTENT,0),v.emplaceBack(0,p.EXTENT),v.emplaceBack(p.EXTENT,p.EXTENT),this.debugBuffer=l.createVertexBuffer(v,p.posAttributes.members),this.debugSegments=p.SegmentVector.simpleSegment(0,0,4,5);const b=new p.StructArrayLayout2i4;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(b,p.posAttributes.members),this.viewportSegments=p.SegmentVector.simpleSegment(0,0,4,2);const w=new p.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(p.EXTENT,0,p.EXTENT,0),w.emplaceBack(0,p.EXTENT,0,p.EXTENT),w.emplaceBack(p.EXTENT,p.EXTENT,p.EXTENT,p.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,p.boundsAttributes.members),this.mercatorBoundsSegments=p.SegmentVector.simpleSegment(0,0,4,2);const D=new p.StructArrayLayout3ui6;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(D);const A=new p.StructArrayLayout1ui2;for(const P of[0,1,3,2,0])A.emplaceBack(P);this.debugIndexBuffer=l.createIndexBuffer(A),this.emptyTexture=new p.Texture(l,new p.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=p.create();const L=this.context.gl;this.stencilClearMode=new p.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(p.window.performance.now()),this.atmosphereBuffer=new d2(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,f.TRIANGLES,p.DepthMode.disabled,this.stencilClearMode,p.ColorMode.disabled,p.CullFaceMode.disabled,N1(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,f,v){if(!f||this.currentStencilSource===f.id||!l.isTileClipped()||!v||0===v.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let A=!1;for(const L of v)if(void 0===this._tileClippingMaskIDs[L.key]){A=!0;break}if(!A)return}this.currentStencilSource=f.id;const b=this.context,w=b.gl;this.nextStencilID+v.length>256&&this.clearStencil(),b.setColorMode(p.ColorMode.disabled),b.setDepthMode(p.DepthMode.disabled);const D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of v){const L=f.getTile(A),P=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,{tileBoundsBuffer:R,tileBoundsIndexBuffer:B,tileBoundsSegments:Y}=this.getTileBoundsBuffers(L);D.draw(b,w.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:w.ALWAYS,mask:0},P,255,w.KEEP,w.KEEP,w.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,N1(A.projMatrix),"$clipping",R,B,Y)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new p.StencilMode({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const f=this.context.gl;return new p.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,v=l.sort((D,A)=>A.overscaledZ-D.overscaledZ),b=v[v.length-1].overscaledZ,w=v[0].overscaledZ-b+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const D={};for(let A=0;A<w;A++)D[A+b]=new p.StencilMode({func:f.GEQUAL,mask:255},A+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=w,[D,v]}return[{[b]:p.StencilMode.disabled},v]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new p.ColorMode([l.CONSTANT_COLOR,l.ONE],new p.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?p.ColorMode.unblended:p.ColorMode.alphaBlended}depthModeForSublayer(l,f,v){if(!this.opaquePassEnabledForLayer())return p.DepthMode.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new p.DepthMode(v||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(p.exported.now()),this.imageManager.beginFrame();const v=this.style.order,b=this.style._sourceCaches;for(const P in b){const R=b[P];R.used&&R.prepare(this.context)}const w={},D={},A={};for(const P in b){const R=b[P];w[P]=R.getVisibleCoordinates(),D[P]=w[P].slice().reverse(),A[P]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<v.length;P++)if(this.style._layers[v[P]].is3D()){this.opaquePassCutoff=P;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new p.GlobeSharedBuffers(this.context)),!p.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const P of v){const R=this.style._layers[P],B=l._getLayerSourceCache(R);if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const Y=B?D[B.id]:void 0;("custom"===R.type||R.isSky()||Y&&Y.length)&&this.renderLayer(this,B,R,Y)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const L=this.terrain;if(L&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&L.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?p.Color.black:p.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[v[this.currentLayer]],R=l._getLayerSourceCache(P);if(P.isSky())continue;const B=R?D[R.id]:void 0;this._renderTileClippingMasks(P,R,B),this.renderLayer(this,R,P,B)}if(this.style.fog&&this.transform.projection.supportsFog&&function(P,R){const B=P.context,Y=B.gl,J=P.transform,ee=new p.DepthMode(Y.LEQUAL,p.DepthMode.ReadOnly,[0,1]),te=P.useProgram("globeAtmosphere",null,"globe"===J.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Q=p.globeToMercatorTransition(J.zoom),Z=R.properties.get("color").toArray01(),se=R.properties.get("high-color").toArray01(),oe=R.properties.get("space-color").toArray01PremultipliedAlpha(),ue=p.identity$1([]);p.rotateY$1(ue,ue,-p.degToRad(J._center.lng)),p.rotateX$1(ue,ue,p.degToRad(J._center.lat)),p.rotateZ$1(ue,ue,J.angle),p.rotateX$1(ue,ue,-J._pitch);const ye=p.fromQuat(new Float32Array(16),ue),_e=p.mapValue(R.properties.get("star-intensity"),0,1,0,.25),Se=p.mapValue(R.properties.get("horizon-blend"),0,1,5e-4,.25),Te=p.globeUseCustomAntiAliasing(P,B,J)&&5e-4===Se?J.worldSize/(2*Math.PI*1.025)-1:J.globeRadius,Re=P.frameCounter/1e3%1,gt=p.length(J.globeCenterInViewSpace),Ee=Math.sqrt(Math.pow(gt,2)-Math.pow(Te,2)),et=Math.acos(Ee/gt),Be={u_frustum_tl:J.frustumCorners.TL,u_frustum_tr:J.frustumCorners.TR,u_frustum_br:J.frustumCorners.BR,u_frustum_bl:J.frustumCorners.BL,u_horizon:J.frustumCorners.horizon,u_transition:Q,u_fadeout_range:Se,u_color:Z,u_high_color:se,u_space_color:oe,u_star_intensity:_e,u_star_size:5*p.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Re,u_horizon_angle:et,u_rotation_matrix:ye};P.prepareDrawProgram(B,te);const ct=P.atmosphereBuffer;ct&&te.draw(B,Y.TRIANGLES,ee,p.StencilMode.disabled,p.ColorMode.alphaBlended,p.CullFaceMode.backCW,Be,"skybox",ct.vertexBuffer,ct.indexBuffer,ct.segments)}(this,this.style.fog),this.renderPass="sky",(p.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const P=this.style._layers[v[this.currentLayer]],R=l._getLayerSourceCache(P);P.isSky()&&this.renderLayer(this,R,P,R?D[R.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;){const P=this.style._layers[v[this.currentLayer]],R=l._getLayerSourceCache(P);if(P.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(P)){if(P.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const B=R?("symbol"===P.type?A:D)[R.id]:void 0;this._renderTileClippingMasks(P,R,R?w[R.id]:void 0),this.renderLayer(this,R,P,B),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let P=null;p.values(this.style._layers).forEach(R=>{const B=l._getLayerSourceCache(R);B&&!R.isHidden(this.transform.zoom)&&(!P||P.getSource().maxzoom<B.getSource().maxzoom)&&(P=B)}),P&&this.options.showTileBoundaries&&D4.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const R=P.transform.padding;mr(P,P.transform.height-(R.top||0),3,Yc),mr(P,R.bottom||0,3,S2),Ro(P,R.left||0,3,zi),Ro(P,P.transform.width-(R.right||0),3,ms);const B=P.transform.centerPoint;var Y,J,ee,te;Dn(Y=P,(J=B.x)-1,(ee=P.transform.height-B.y)-10,2,20,te=Ga),Dn(Y,J-10,ee-1,20,2,te)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(p.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,f,v,b){v.isHidden(this.transform.zoom)||("background"===v.type||"sky"===v.type||"custom"===v.type||b&&b.length)&&(this.id=v.id,this.gpuTimingStart(v),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(v.type)||l.terrain&&"custom"===v.type)&&D4[v.type](l,f,v,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let v=this.gpuTimers[l.id];v||(v=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),v.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,f=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),l.beginQueryEXT(l.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const f={};for(const v in l){const b=l[v],w=this.context.extTimerQuery,D=w.getQueryObjectEXT(b.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(b.query),f[v]=D}return f}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let v=0;for(const b of l)v+=f.getQueryObjectEXT(b,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(b);return v}translatePosMatrix(l,f,v,b,w){if(!v[0]&&!v[1])return l;const D=w?"map"===b?this.transform.angle:0:"viewport"===b?-this.transform.angle:0;if(D){const P=Math.sin(D),R=Math.cos(D);v=[v[0]*R-v[1]*P,v[0]*P+v[1]*R]}const A=[w?v[0]:rr(f,v[0],this.transform.zoom),w?v[1]:rr(f,v[1],this.transform.zoom),0],L=new Float32Array(16);return p.translate(L,l,A),L}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){return null===l||void 0!==l&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&0===this.terrain.exaggeration(),v=this.style&&this.style.fog,b=[];return this.terrainRenderModeElevated()&&b.push("TERRAIN"),"globe"===this.transform.projection.name&&b.push("GLOBE"),f&&b.push("ZERO_EXAGGERATION"),v&&!l&&0!==v.getOpacity(this.transform.pitch)&&b.push("FOG"),l&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(l,f,v){this.cache=this.cache||{};const b=v||[],w=this.currentGlobalDefines().concat(b),D=U2.cacheKey(M4[l],l,w,f);return this.cache[D]||(this.cache[D]=new U2(this.context,l,M4[l],f,B1[l],w)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=p.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new p.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,f,v){if(this.terrain&&this.terrain.renderingToTexture)return;const b=this.style.fog;if(b){const w=b.getOpacity(this.transform.pitch),D=((A,L,P,R,B,Y,J,ee,te,Q,Z)=>{const se=A.transform,oe=L.properties.get("color").toArray01();oe[3]=R;const ue=A.frameCounter/1e3%1;return{u_fog_matrix:P?se.calculateFogTileMatrix(P):A.identityMat,u_fog_range:L.getFovAdjustedRange(se._fov),u_fog_color:oe,u_fog_horizon_blend:L.properties.get("horizon-blend"),u_fog_temporal_offset:ue,u_frustum_tl:B,u_frustum_tr:Y,u_frustum_br:J,u_frustum_bl:ee,u_globe_pos:te,u_globe_radius:Q,u_viewport:Z,u_globe_transition:p.globeToMercatorTransition(se.zoom),u_is_globe:+("globe"===se.projection.name)}})(this,b,v,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*p.exported.devicePixelRatio,this.transform.height*p.exported.devicePixelRatio]);f.setFogUniformValues(l,D)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&0!==l.getOpacity(this.transform.pitch)}getBackgroundTiles(){const l=this._backgroundTiles,f=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const b of v)f[b.key]=l[b.key]||new p.Tile(b,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class j2{constructor(l=0,f=0,v=0,b=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(v)||v<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=v,this.right=b}interpolate(l,f,v){return null!=f.top&&null!=l.top&&(this.top=p.number(l.top,f.top,v)),null!=f.bottom&&null!=l.bottom&&(this.bottom=p.number(l.bottom,f.bottom,v)),null!=f.left&&null!=l.left&&(this.left=p.number(l.left,f.left,v)),null!=f.right&&null!=l.right&&(this.right=p.number(l.right,f.right,v)),this}getCenter(l,f){const v=p.clamp((this.left+l-this.right)/2,0,l),b=p.clamp((this.top+f-this.bottom)/2,0,f);return new p.pointGeometry(v,b)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new j2(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Xc(m,l){const f=p.getColumn(m,3);p.fromQuat(m,l),p.setColumn(m,3,f)}function qa(m,l){const f=p.identity$1([]);return p.rotateZ$1(f,f,-l),p.rotateX$1(f,f,-m),f}function Wa(m,l){const f=[m[0],m[1],0],v=[l[0],l[1],0];if(p.length(f)>=1e-15){const D=p.normalize([],f);p.scale$2(v,D,p.dot(v,D)),l[0]=v[0],l[1]=v[1]}const b=p.cross([],l,m);if(p.len(b)<1e-15)return null;const w=Math.atan2(-b[1],b[0]);return qa(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}class T{constructor(l,f){this.position=l,this.orientation=f}get position(){return this._position}set position(l){if(l){const f=l instanceof p.MercatorCoordinate?l:new p.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(f.x=p.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(l,f){if(this.orientation=null,!this.position)return;const v=this.position,b=this._elevation?this._elevation.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(l)):0,w=p.MercatorCoordinate.fromLngLat(l,b),D=[w.x-v.x,w.y-v.y,w.z-v.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=Wa(D,f)}setPitchBearing(l,f){this.orientation=qa(p.degToRad(l),p.degToRad(-f))}}class k{constructor(l,f){this._transform=p.identity([]),this.orientation=f,this.position=l}get mercatorPosition(){const l=this.position;return new p.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=p.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var f;l&&p.setColumn(this._transform,3,[(f=l)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||p.identity$1([]),l&&Xc(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,f){this._orientation=qa(l,f),Xc(this._transform,this._orientation)}forward(){const l=p.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=p.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=p.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,f){const v=new Float64Array(16);return p.invert(v,this.getWorldToCamera(l,f)),v}getWorldToCameraPosition(l,f,v){const b=this.position;p.scale$2(b,b,-l);const w=new Float64Array(16);return p.fromScaling(w,[v,v,v]),p.translate(w,w,b),w[10]*=f,w}getWorldToCamera(l,f){const v=new Float64Array(16),b=new Float64Array(4),w=this.position;return p.conjugate(b,this._orientation),p.scale$2(w,w,-l),p.fromQuat(v,b),p.translate(v,v,w),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=f,v[9]*=f,v[10]*=f,v[11]*=f,v}getCameraToClipPerspective(l,f,v,b){const w=new Float64Array(16);return p.perspective(w,l,f,v,b),w}getDistanceToElevation(l,f=!1){const v=0===l?0:p.mercatorZfromAltitude(l,f?p.latFromMercatorY(this.position[1]):this.position[1]),b=this.forward();return(v-this.position[2])/b[2]}clone(){return new k([...this.position],[...this.orientation])}}function $(m,l){const f=Je(m.projection,m.zoom,m.width,m.height),v=function(w,D,A,L,P){const R=new p.LngLat(A.lng-180*Zt,A.lat),B=new p.LngLat(A.lng+180*Zt,A.lat),Y=w.project(R.lng,R.lat),J=w.project(B.lng,B.lat),ee=-Math.atan2(J.y-Y.y,J.x-Y.x),te=p.MercatorCoordinate.fromLngLat(A);te.y=p.clamp(te.y,-.999975,.999975);const Q=te.toLngLat(),Z=w.project(Q.lng,Q.lat),se=p.MercatorCoordinate.fromLngLat(Q);se.x+=Zt;const oe=se.toLngLat(),ue=w.project(oe.lng,oe.lat),ye=Xi(ue.x-Z.x,ue.y-Z.y,ee),_e=p.MercatorCoordinate.fromLngLat(Q);_e.y+=Zt;const Ce=_e.toLngLat(),Se=w.project(Ce.lng,Ce.lat),Te=Xi(Se.x-Z.x,Se.y-Z.y,ee),Re=Math.abs(ye.x)/Math.abs(Te.y),gt=p.identity([]);p.rotateZ(gt,gt,-ee*(1-(P?0:L)));const Ee=p.identity([]);return p.scale(Ee,Ee,[1,1-(1-Re)*L,1]),Ee[4]=-Te.x/Te.y*L,p.rotateZ(Ee,Ee,ee),p.multiply(Ee,gt,Ee),Ee}(m.projection,0,m.center,f,l),b=ge(m);return p.scale(v,v,[b,b,1]),v}function ge(m){const l=m.projection,f=Je(m.projection,m.zoom,m.width,m.height),v=An(l,m.center),b=An(l,p.LngLat.convert(l.center));return Math.pow(2,v*f+(1-f)*b)}function Je(m,l,f,v,b=1/0){const w=m.range;if(!w)return 0;const D=Math.min(b,Math.max(f,v)),A=Math.log(D/1024)/Math.LN2;return p.smoothstep(w[0]+A,w[1]+A,l)}const Zt=1/4e4;function An(m,l){const f=p.clamp(l.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),v=new p.LngLat(l.lng-180*Zt,f),b=new p.LngLat(l.lng+180*Zt,f),w=m.project(v.lng,f),D=m.project(b.lng,f),A=p.MercatorCoordinate.fromLngLat(v),L=p.MercatorCoordinate.fromLngLat(b),P=D.x-w.x,R=D.y-w.y,B=L.x-A.x,Y=L.y-A.y,J=Math.sqrt((B*B+Y*Y)/(P*P+R*R));return Math.log(J)/Math.LN2}function Xi(m,l,f){const v=Math.cos(f),b=Math.sin(f);return{x:m*v-l*b,y:m*b+l*v}}class _t{constructor(l,f,v,b,w,D,A){this.tileSize=512,this._renderWorldCopies=void 0===w||w,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=b??60,this.setProjection(D),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new p.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new j2,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new k,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new _t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,f=!1){const v=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||v)&&this._updateCameraOnTerrain(),(l||v)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return p.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=p.getProjection(this.projectionOptions);const v=!Ye(f,this.getProjection());return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=p.getProjection({name:"mercator"});const f=l!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(l){void 0===l?l=!0:null===l&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return p.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new p.pointGeometry(this.width,this.height)}get bearing(){return p.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const f=-l*Math.PI/180;var v,b,w,D,A,L,P,R,B,Y;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(v=new p.ARRAY_TYPE(4),p.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v),b=this.rotationMatrix,D=this.angle,A=(w=this.rotationMatrix)[0],L=w[1],P=w[2],R=w[3],B=Math.sin(D),Y=Math.cos(D),b[0]=A*Y+P*B,b[1]=L*Y+R*B,b[2]=A*-B+P*Y,b[3]=L*-B+R*Y)}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=p.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=p.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let b=0,w=0;for(let D=0;D<f.length;D++){const A=new p.pointGeometry(f[D][0]*this.width,v+f[D][1]*(this.height-v)),L=l.pointCoordinate(A);if(!L)continue;const P=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);b+=L[3]*P,w+=P}return 0===w?NaN:b/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const l=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*f,b=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),D=Math.max(b-v,w);this._setZoom(this._zoomFromMercatorZ(D))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let v;v=l.z<this._camera.position[2]?[f.x,f.y,f.z]:[l.x,l.y,l.z];const b=p.length(p.sub([],this._camera.position,v));return p.clamp(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let f=!1;if(l.orientation&&!p.exactEquals(l.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(l.orientation)),l.position){const v=[l.position.x,l.position.y,l.position.z];p.exactEquals$1(v,this._camera.position)||(this._setCameraPosition(v),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,f=new T;return f.position=new p.MercatorCoordinate(l[0],l[1],l[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(l){if(!p.length$1(l))return!1;p.normalize$1(l,l);const f=p.transformQuat([],[0,0,-1],l),v=p.transformQuat([],[0,-1,0],l);if(v[2]<0)return!1;const b=Wa(f,v);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(l){const f=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;l[2]=p.clamp(l[2],b/v,b/f),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,v){this._unmodified=!1,this._edgeInsets.interpolate(l,f,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new p.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const v=this.pointCoordinate(new p.pointGeometry(0,0)),b=this.pointCoordinate(new p.pointGeometry(this.width,0)),w=this.pointCoordinate(new p.pointGeometry(this.width,this.height)),D=this.pointCoordinate(new p.pointGeometry(0,this.height)),A=Math.floor(Math.min(v.x,b.x,w.x,D.x)),L=Math.floor(Math.max(v.x,b.x,w.x,D.x)),P=1;for(let R=A-P;R<=L+P;R++)0!==R&&f.push(new p.UnwrappedTileID(R,l))}return f}coveringTiles(l){let f=this.coveringZoomLevel(l);const v=f,b=this.elevation&&!l.isTerrainDEM,w="mercator"===this.projection.name;if(void 0!==l.minzoom&&f<l.minzoom)return[];void 0!==l.maxzoom&&f>l.maxzoom&&(f=l.maxzoom);const D=this.locationCoordinate(this.center),A=this.center.lat,L=1<<f,P=[L*D.x,L*D.y,0],R="globe"===this.projection.name,B=!R,Y=p.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,B),J=R?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ee=L*p.mercatorZfromAltitude(1,this.center.lat),te=this._camera.position[2]/p.mercatorZfromAltitude(1,this.center.lat),Q=[L*J.x,L*J.y,te*(B?1:ee)],Z=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),se=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,oe=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ue=l.isTerrainDEM?-oe:this._elevation?this._elevation.getMinElevationBelowMSL():0,ye=this.projection.isReprojectedInTileSpace?ge(this):1,_e=Pe=>{const Ne=new p.MercatorCoordinate(Pe.x+25e-6,Pe.y,Pe.z),ot=new p.MercatorCoordinate(Pe.x,Pe.y+25e-6,Pe.z),ut=Pe.toLngLat(),Pt=Ne.toLngLat(),L1=ot.toLngLat(),Dt=this.locationCoordinate(ut),zt=this.locationCoordinate(Pt),Ft=this.locationCoordinate(L1),A1=Math.hypot(zt.x-Dt.x,zt.y-Dt.y),Ut=Math.hypot(Ft.x-Dt.x,Ft.y-Dt.y);return Math.sqrt(A1*Ut)*ye/25e-6},Ce=Pe=>{const ze=oe,Ne=ue;return{aabb:p.tileAABB(this,L,0,0,0,Pe,Ne,ze,this.projection),zoom:0,x:0,y:0,minZ:Ne,maxZ:ze,wrap:Pe,fullyVisible:!1}},Se=[];let Te=[];const Re=f,gt=l.reparseOverscaled?v:f,Ee=Pe=>Pe*Pe,et=Ee((te-this._centerAltitude)*ee),Be=Pe=>{if(!this._elevation||!Pe.tileID||!w)return;const ze=this._elevation.getMinMaxForTile(Pe.tileID),Ne=Pe.aabb;ze?(Ne.min[2]=ze.min,Ne.max[2]=ze.max,Ne.center[2]=(Ne.min[2]+Ne.max[2])/2):(Pe.shouldSplit=ct(Pe),Pe.shouldSplit||(Ne.min[2]=Ne.max[2]=Ne.center[2]=this._centerAltitude))},ct=Pe=>{if(Pe.zoom<se)return!0;if(Pe.zoom===Re)return!1;if(null!=Pe.shouldSplit)return Pe.shouldSplit;const ze=Pe.aabb.distanceX(Q),Ne=Pe.aabb.distanceY(Q);let ot=et,ut=1;if(R){ot=Ee(Pe.aabb.distanceZ(Q));const Dt=Math.pow(2,Pe.zoom),zt=p.latFromMercatorY((Pe.y+1)/Dt),Ft=p.latFromMercatorY(Pe.y/Dt),A1=Math.min(Math.max(A,zt),Ft),Ut=p.circumferenceAtLatitude(A1)/p.circumferenceAtLatitude(A);if(ut=A1===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ut/this._mercatorScaleRatio),this.zoom<=p.GLOBE_ZOOM_THRESHOLD_MIN&&Pe.zoom===Re-1&&Ut>=.9)return!0}else if(b&&(ot=Ee(Pe.aabb.distanceZ(Q)*ee)),this.projection.isReprojectedInTileSpace&&v<=5){const Dt=Math.pow(2,Pe.zoom),zt=_e(new p.MercatorCoordinate((Pe.x+.5)/Dt,(Pe.y+.5)/Dt));ut=zt>.85?1:zt}const Pt=ze*ze+Ne*Ne+ot;return Pt<Ee((1<<Re-Pe.zoom)*Z*ut*((Dt,zt)=>{if(zt*Ee(.707)<Dt)return 1;const Ft=Math.sqrt(zt/Dt);return Ft/(1.4144271570014144+(Math.pow(1.1,Ft-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ot,et),Pt))};if(this.renderWorldCopies)for(let Pe=1;Pe<=3;Pe++)Se.push(Ce(-Pe)),Se.push(Ce(Pe));for(Se.push(Ce(0));Se.length>0;){const Pe=Se.pop(),ze=Pe.x,Ne=Pe.y;let ot=Pe.fullyVisible;if(!ot){const ut=Pe.aabb.intersects(Y);if(0===ut)continue;ot=2===ut}if(Pe.zoom!==Re&&ct(Pe))for(let ut=0;ut<4;ut++){const Pt=(ze<<1)+ut%2,L1=(Ne<<1)+(ut>>1),Dt={aabb:w?Pe.aabb.quadrant(ut):p.tileAABB(this,L,Pe.zoom+1,Pt,L1,Pe.wrap,Pe.minZ,Pe.maxZ,this.projection),zoom:Pe.zoom+1,x:Pt,y:L1,wrap:Pe.wrap,fullyVisible:ot,tileID:void 0,shouldSplit:void 0,minZ:Pe.minZ,maxZ:Pe.maxZ};b&&!R&&(Dt.tileID=new p.OverscaledTileID(Pe.zoom+1===Re?gt:Pe.zoom+1,Pe.wrap,Pe.zoom+1,Pt,L1),Be(Dt)),Se.push(Dt)}else{const ut=Pe.zoom===Re?gt:Pe.zoom;if(l.minzoom&&l.minzoom>ut)continue;const Pt=P[0]-(.5+ze+(Pe.wrap<<Pe.zoom))*(1<<f-Pe.zoom),L1=P[1]-.5-Ne,Dt=Pe.tileID?Pe.tileID:new p.OverscaledTileID(ut,Pe.wrap,Pe.zoom,ze,Ne);Te.push({tileID:Dt,distanceSq:Pt*Pt+L1*L1})}}if(this.fogCullDistSq){const Pe=this.fogCullDistSq,ze=this.horizonLineFromTop();Te=Te.filter(Ne=>{const ot=[0,0,0,1],ut=[p.EXTENT,p.EXTENT,0,1],Pt=this.calculateFogTileMatrix(Ne.tileID.toUnwrapped());p.transformMat4$1(ot,ot,Pt),p.transformMat4$1(ut,ut,Pt);const L1=p.getAABBPointSquareDist(ot,ut);if(0===L1)return!0;let Dt=!1;const zt=this._elevation;if(zt&&L1>Pe&&0!==ze){const Ft=this.calculateProjMatrix(Ne.tileID.toUnwrapped());let A1;l.isTerrainDEM||(A1=zt.getMinMaxForTile(Ne.tileID)),A1||(A1={min:ue,max:oe});const Ut=p.furthestTileCorner(this.rotation),mn=[Ut[0]*p.EXTENT,Ut[1]*p.EXTENT,A1.max];p.transformMat4(mn,mn,Ft),Dt=(1-mn[1])*this.height*.5<ze}return L1<Pe||Dt})}return Te.sort((Pe,ze)=>Pe.distanceSq-ze.distanceSq).map(Pe=>Pe.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=p.clamp(l.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),v=this.projection.project(l.lng,f);return new p.pointGeometry(v.x*this.worldSize,v.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/p.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,f){let v,b;const w=this.centerPoint;if("globe"===this.projection.name){const A=this.worldSize;v=(f.x-w.x)/A,b=(f.y-w.y)/A}else{const A=this.pointCoordinate(f),L=this.pointCoordinate(w);v=A.x-L.x,b=A.y-L.y}const D=this.locationCoordinate(l);this.setLocation(new p.MercatorCoordinate(D.x-v,D.y-b))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,f){const v=f?p.mercatorZfromAltitude(f,l.lat):void 0,b=this.projection.project(l.lng,l.lat);return new p.MercatorCoordinate(b.x,b.y,v)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,f){const v=f??this._centerAltitude,b=[l.x,l.y,0,1],w=[l.x,l.y,1,1];p.transformMat4$1(b,b,this.pixelMatrixInverse),p.transformMat4$1(w,w,this.pixelMatrixInverse);const D=w[3];p.scale$1(b,b,1/b[3]),p.scale$1(w,w,1/D);const A=b[2],L=w[2];return{p0:b,p1:w,t:A===L?0:(v-A)/(L-A)}}screenPointToMercatorRay(l){const f=[l.x,l.y,0,1],v=[l.x,l.y,1,1];return p.transformMat4$1(f,f,this.pixelMatrixInverse),p.transformMat4$1(v,v,this.pixelMatrixInverse),p.scale$1(f,f,1/f[3]),p.scale$1(v,v,1/v[3]),f[2]=p.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,v[2]=p.mercatorZfromAltitude(v[2],this._center.lat)*this.worldSize,p.scale$1(f,f,1/this.worldSize),p.scale$1(v,v,1/this.worldSize),new p.Ray([f[0],f[1],f[2]],p.normalize([],p.sub([],v,f)))}rayIntersectionCoordinate(l){const{p0:f,p1:v,t:b}=l,w=p.mercatorZfromAltitude(f[2],this._center.lat),D=p.mercatorZfromAltitude(v[2],this._center.lat);return new p.MercatorCoordinate(p.number(f[0],v[0],b)/this.worldSize,p.number(f[1],v[1],b)/this.worldSize,p.number(w,D,b))}pointCoordinate(l,f=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,f)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let f=this.projection.pointCoordinate3D(this,l.x,l.y);if(f)return new p.MercatorCoordinate(f[0],f[1],f[2]);let v=0,b=this.horizonLineFromTop();if(l.y>b)return this.pointCoordinate(l);const w=.02*b,D=l.clone();for(let A=0;A<10&&b-v>w;A++){D.y=p.number(v,b,.66);const L=this.projection.pointCoordinate3D(this,D.x,D.y);L?(b=D.y,f=L):v=D.y}return f?new p.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,f){const v=f&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,b=[l.x*this.worldSize,l.y*this.worldSize,v+l.toAltitude(),1];return p.transformMat4$1(b,b,this.pixelMatrix),b[3]>0?new p.pointGeometry(b[0]/b[3],b[1]/b[3]):new p.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:f}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,b=this.width-this._edgeInsets.right,w=this.pointLocation3D(new p.pointGeometry(f,l)),D=this.pointLocation3D(new p.pointGeometry(b,l)),A=this.pointLocation3D(new p.pointGeometry(b,v)),L=this.pointLocation3D(new p.pointGeometry(f,v));let P=Math.min(w.lng,D.lng,A.lng,L.lng),R=Math.max(w.lng,D.lng,A.lng,L.lng),B=Math.min(w.lat,D.lat,A.lat,L.lat),Y=Math.max(w.lat,D.lat,A.lat,L.lat);const J=Math.pow(2,-this.zoom)/16*270,ee="globe"===this.projection.name?1:4,te=(Q,Z,se,oe,ue)=>{const ye=(Q+se)/2,_e=(Z+oe)/2,Ce=new p.pointGeometry(ye,_e),{lng:Se,lat:Te}=this.pointLocation3D(Ce),Re=Math.max(0,P-Se,B-Te,Se-R,Te-Y);P=Math.min(P,Se),R=Math.max(R,Se),B=Math.min(B,Te),Y=Math.max(Y,Te),(ue<ee||Re>J)&&(te(Q,Z,ye,_e,ue+1),te(ye,_e,se,oe,ue+1))};if(te(f,l,b,l,1),te(b,l,b,v,1),te(b,v,f,v,1),te(f,v,f,l,1),"globe"===this.projection.name){const[Q,Z]=p.polesInViewport(this);Q?(Y=90,R=180,P=-180):Z&&(B=-90,R=180,P=-180)}return new p.LngLatBounds(new p.LngLat(P,B),new p.LngLat(R,Y))}_getBoundsRectangular(l,f){const{top:v,left:b}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,A=new p.pointGeometry(b,v),L=new p.pointGeometry(D,v),P=new p.pointGeometry(D,w),R=new p.pointGeometry(b,w);let B=this.pointCoordinate(A,l),Y=this.pointCoordinate(L,l);const J=this.pointCoordinate(P,f),ee=this.pointCoordinate(R,f),te=(Q,Z)=>(Z.y-Q.y)/(Z.x-Q.x);return B.y>1&&Y.y>=0?B=new p.MercatorCoordinate((1-ee.y)/te(ee,B)+ee.x,1):B.y<0&&Y.y<=1&&(B=new p.MercatorCoordinate(-ee.y/te(ee,B)+ee.x,0)),Y.y>1&&B.y>=0?Y=new p.MercatorCoordinate((1-J.y)/te(J,Y)+J.x,1):Y.y<0&&B.y<=1&&(Y=new p.MercatorCoordinate(-J.y/te(J,Y)+J.x,0)),(new p.LngLatBounds).extend(this.coordinateLocation(B)).extend(this.coordinateLocation(Y)).extend(this.coordinateLocation(ee)).extend(this.coordinateLocation(J))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=l.visibleDemTiles.reduce((v,b)=>{if(b.dem){const w=b.dem.tree;v.min=Math.min(v.min,w.minimums[0]),v.max=Math.max(v.max,w.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*l.exaggeration(),f.max*l.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,v=this.height/2-f*(1-this._horizonShift);return l?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-p.MAX_MERCATOR_LATITUDE,this.maxLat=p.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=p.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=p.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=p.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=p.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,f){return this.projection.createTileMatrix(this,f,l)}calculateDistanceTileData(l){const f=l.key,v=this._distanceTileDataCache;if(v[f])return v[f];const b=l.canonical,w=1/this.height,D=this.cameraWorldSize,A=D/this.zoomScale(b.z),L=(b.x+Math.pow(2,b.z)*l.wrap)*A,P=b.y*A,R=this.point;R.x*=D/this.worldSize,R.y*=D/this.worldSize;const B=this.angle,Y=Math.sin(-B),J=-Math.cos(-B);return v[f]={bearing:[Y,J],center:[(R.x-L)*w,(R.y-P)*w],scale:A/p.EXTENT*w},v[f]}calculateFogTileMatrix(l){const f=l.key,v=this._fogTileMatrixCache;if(v[f])return v[f];const b=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return p.multiply(b,this.worldToFogMatrix,b),v[f]=new Float32Array(b),v[f]}calculateProjMatrix(l,f=!1){const v=l.key,b=f?this._alignedProjMatrixCache:this._projMatrixCache;if(b[v])return b[v];const w=this.calculatePosMatrix(l,this.worldSize);return p.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,w),b[v]=new Float32Array(w),b[v]}calculatePixelsToTileUnitsMatrix(l){const f=l.tileID.key,v=this._pixelsToTileUnitsCache;if(v[f])return v[f];const b=function(w,D){const{scale:A}=w.tileTransform,L=A*p.EXTENT/(w.tileSize*Math.pow(2,D.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return P=new Float32Array(4),Y=(R=D.inverseAdjustmentMatrix)[1],J=R[2],ee=R[3],Q=(B=[L,L])[1],P[0]=R[0]*(te=B[0]),P[1]=Y*te,P[2]=J*Q,P[3]=ee*Q,P;var P,R,B,Y,J,ee,te,Q}(l,this);return v[f]=b,v[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const l=1/this.worldSize,f=p.fromScaling([],[l,l,l]);return p.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const l=this._elevation;this._updateCameraState();const f=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(f),b=this._camera.forward(),w=p.mercatorZfromAltitude(1,this._center.lat);v[2]/=w,b[2]/=w,p.normalize(b,b);const D=l.raycast(v,b,l.exaggeration());if(D){const A=p.scaleAndAdd([],v,b,D),L=new p.MercatorCoordinate(A[0],A[1],p.mercatorZfromAltitude(A[2],p.latFromMercatorY(A[1]))),P=(L.z+p.length([L.x-v[0],L.y-v[1],L.z-v[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(P),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const f=this._elevation,v=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(v),w=f.getAtPointOrZero(new p.MercatorCoordinate(...b)),D=this.pixelsPerMeter/this.worldSize*w,A=this._minimumHeightOverTerrain(),L=b[2]-D;if(L<=A)if(L<0||l){const P=this.locationCoordinate(this._center,this._centerAltitude),R=[b[0],b[1],P.z-b[2]],B=p.length(R);R[2]-=(A-L)/this._pixelsPerMercatorPixel;const Y=p.length(R);if(0===Y)return;p.scale$2(R,R,B/Y*this._pixelsPerMercatorPixel),this._camera.position=[b[0],b[1],P.z*this._pixelsPerMercatorPixel-R[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const Y=this.center;return Y.lat=p.clamp(Y.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(Y.lng=p.clamp(Y.lng,this.minLng,this.maxLng)),this.center=Y,void(this._constraining=!1)}const f=this._unmodified,{x:v,y:b}=this.point;let w=0,D=v,A=b;const L=this.width/2,P=this.height/2,R=this.worldMinY*this.scale,B=this.worldMaxY*this.scale;if(b-P<R&&(A=R+P),b+P>B&&(A=B-P),B-R<this.height&&(w=Math.max(w,this.height/(B-R)),A=(B+R)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Y=this.worldMinX*this.scale,J=this.worldMaxX*this.scale,ee=this.worldSize/2-(Y+J)/2;D=(v+ee+this.worldSize)%this.worldSize-ee,D-L<Y&&(D=Y+L),D+L>J&&(D=J-L),J-Y<this.width&&(w=Math.max(w,this.width/(J-Y)),D=(J+Y)/2)}D===v&&A===b||(this.center=this.unproject(new p.pointGeometry(D,A))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=p.mercatorZfromAltitude(1,this.center.lat)/p.mercatorZfromAltitude(1,p.GLOBE_SCALE_MATCH_LATITUDE));const v=Je(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b="meters"===this.projection.zAxisUnit?f:1,w=this._camera.getWorldToCamera(this.worldSize,b),D=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);D[8]=2*-l.x/this.width,D[9]=2*l.y/this.height;let A=p.mul([],D,w);if(this.projection.isReprojectedInTileSpace){const _e=this.locationCoordinate(this.center),Ce=p.identity([]);p.translate(Ce,Ce,[_e.x*this.worldSize,_e.y*this.worldSize,0]),p.multiply(Ce,Ce,$(this)),p.translate(Ce,Ce,[-_e.x*this.worldSize,-_e.y*this.worldSize,0]),p.multiply(A,A,Ce),this.inverseAdjustmentMatrix=function(Se){const Te=$(Se,!0);return F1([],[Te[0],Te[1],Te[4],Te[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=p.scale([],A,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=A,this.invProjMatrix=p.invert(new Float64Array(16),this.projMatrix);const L=p.invert([],D);this.frustumCorners=p.FrustumCorners.fromInvProjectionMatrix(L,this.horizonLineFromTop(),this.height);const P=new Float32Array(16);p.identity(P),p.scale(P,P,[1,-1,1]),p.rotateX(P,P,this._pitch),p.rotateZ(P,P,this.angle);const R=p.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),B=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;R[8]=2*-l.x/this.width,R[9]=2*(l.y+B)/this.height,this.skyboxMatrix=p.multiply(P,R,P);const Y=this.point,J=Y.x,ee=Y.y,te=this.width%2/2,Q=this.height%2/2,Z=Math.cos(this.angle),se=Math.sin(this.angle),oe=J-Math.round(J)+Z*te+se*Q,ue=ee-Math.round(ee)+Z*Q+se*te,ye=new Float64Array(A);if(p.translate(ye,ye,[oe>.5?oe-1:oe,ue>.5?ue-1:ue,0]),this.alignedProjMatrix=ye,A=p.create(),p.scale(A,A,[this.width/2,-this.height/2,1]),p.translate(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=p.create(),p.scale(A,A,[1,-1,1]),p.translate(A,A,[-1,-1,0]),p.scale(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A,this.pixelMatrix=p.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},A=p.invert(new Float64Array(16),this.pixelMatrix),!A)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=A,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=p.calculateGlobeMatrix(this);const _e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=p.transformMat4(_e,_e,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=A;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,v=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,f];p.scale$2(w,w,b),p.scale$2(v,v,-1),p.multiply$2(v,v,w);const D=p.create();p.translate(D,D,v),p.scale(D,D,w),this.mercatorFogMatrix=D,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,f,b)}_computeCameraPosition(l){const f=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),b=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-l/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-v[0]*w,b.y/this.worldSize-v[1]*w,l/this.worldSize*this._centerAltitude-v[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=this._camera.position[2],b=l[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),b>0&&(w=Math.min((f-v)/b,1)),this._camera.position=p.scaleAndAdd([],this._camera.position,l,w),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,f=this._camera.forward(),{pitch:v,bearing:b}=this._camera.getPitchBearing(),w=p.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,D=this._mercatorZfromZoom(this._maxZoom)*Math.cos(p.degToRad(this._maxPitch)),A=Math.max((l[2]-w)/Math.cos(v),D),L=this._zoomFromMercatorZ(A);p.scaleAndAdd(l,l,f,A),this._pitch=p.clamp(v,p.degToRad(this.minPitch),p.degToRad(this.maxPitch)),this.angle=p.wrap(b,-Math.PI,Math.PI),this._setZoom(p.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new p.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let f=0,v=p.GLOBE_ZOOM_THRESHOLD_MAX,b=0,w=1/0;for(;v-f>1e-6&&v>f;){const D=f+.5*(v-f),A=this.tileSize*Math.pow(2,D),L=this.getCameraToCenterDistance(this.projection,D,A),P=this.scaleZoom(L/(l*this.tileSize)),R=Math.abs(D-P);R<w&&(w=R,b=D),D<P?f=D:v=D}return b}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(p.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,f){const v=Math.min(l.x,f.x),b=Math.max(l.x,f.x),w=Math.min(l.y,f.y),D=Math.max(l.y,f.y);if(w<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const A=[new p.pointGeometry(v,w),new p.pointGeometry(b,D),new p.pointGeometry(v,D),new p.pointGeometry(b,w)],L=this.renderWorldCopies?-3:0,P=this.renderWorldCopies?4:1;for(const R of A){const B=this.pointRayIntersection(R);if(B.t<0)return!0;const Y=this.rayIntersectionCoordinate(B);if(Y.x<L||Y.y<0||Y.x>P||Y.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+p.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new p.pointGeometry(0,0),new p.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,f){const v=p.length(p.sub([],this._camera.position,l)),b=this._zoomFromMercatorZ(v)+f;return v-this._mercatorZfromZoom(b)}getCameraPoint(){if("globe"===this.projection.name){const l=function([f,v,b],w){const D=[f,v,b,1];p.transformMat4$1(D,D,w);const A=D[3]=Math.max(D[3],1e-6);return D[0]/=A,D[1]/=A,D[2]/=A,D}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new p.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new p.pointGeometry(0,l))}}getCameraToCenterDistance(l,f=this.zoom,v=this.worldSize){const b=Je(l,f,this.width,this.height,1024),w=l.pixelSpaceConversion(this.center.lat,v,b);return.5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&p.multiply(l,l,this.globeMatrix),l}}function Ki(m,l){let f=!1,v=null;const b=()=>{v=null,f&&(m(),v=setTimeout(b,l),f=!1)};return()=>(f=!0,v||b(),v)}class V3{constructor(l){this._hashName=l&&encodeURIComponent(l),p.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ki(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,p.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),p.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const f=h6(l);if(this._hashName){const v=this._hashName;let b=!1;const w=p.window.location.hash.slice(1).split("&").map(D=>{const A=D.split("=")[0];return A===v?(b=!0,`${A}=${f}`):D}).filter(D=>D);return b||w.push(`${v}=${f}`),`#${w.join("&")}`}return`#${f}`}_getCurrentHash(){const l=p.window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(f=v)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(v=>isNaN(v))){const v=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(f[3]||0):l.getBearing();return l.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:v,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=p.window.location.href.replace(/(#.+)?$/,this.getHashString());p.window.history.replaceState(p.window.history.state,null,l)}}function h6(m,l){const f=m.getCenter(),v=Math.round(100*m.getZoom())/100,b=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,b),D=Math.round(f.lng*w)/w,A=Math.round(f.lat*w)/w,L=m.getBearing(),P=m.getPitch();let R=l?`/${D}/${A}/${v}`:`${v}/${A}/${D}`;return(L||P)&&(R+="/"+Math.round(10*L)/10),P&&(R+=`/${Math.round(P)}`),R}const A4={linearity:.3,easing:p.bezier(0,0,.3,1)},L3=p.extend({deceleration:2500,maxSpeed:1400},A4),m5=p.extend({deceleration:20,maxSpeed:1400},A4),Yl=p.extend({deceleration:1e3,maxSpeed:360},A4),p6=p.extend({deceleration:1e3,maxSpeed:90},A4);class T3{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=p.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(p.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new p.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)f.zoom+=w.zoomDelta||0,f.bearing+=w.bearingDelta||0,f.pitch+=w.pitchDelta||0,w.panDelta&&f.pan._add(w.panDelta),w.around&&(f.around=w.around),w.pinchAround&&(f.pinchAround=w.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const w=E4(f.pan.mag(),v,p.extend({},L3,l||{}));b.offset=f.pan.mult(w.amount/f.pan.mag()),b.center=this._map.transform.center,Kc(b,w)}if(f.zoom){const w=E4(f.zoom,v,m5);b.zoom=this._map.transform.zoom+w.amount,Kc(b,w)}if(f.bearing){const w=E4(f.bearing,v,Yl);b.bearing=this._map.transform.bearing+p.clamp(w.amount,-179,179),Kc(b,w)}if(f.pitch){const w=E4(f.pitch,v,p6);b.pitch=this._map.transform.pitch+w.amount,Kc(b,w)}if(b.zoom||b.bearing){const w=void 0===f.pinchAround?f.around:f.pinchAround;b.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function Kc(m,l){(!m.duration||m.duration<l.duration)&&(m.duration=l.duration,m.easing=l.easing)}function E4(m,l,f){const{maxSpeed:v,linearity:b,deceleration:w}=f,D=p.clamp(m*b/(l/1e3),-v,v),A=Math.abs(D)/(w*b);return{easing:f.easing,duration:1e3*A,amount:D*(A/2)}}class f2 extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,v,b={}){const w=pt(f.getCanvasContainer(),v),D=f.unproject(w);super(l,p.extend({point:w,lngLat:D,originalEvent:v},b)),this._defaultPrevented=!1,this.target=f}}class Xl extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,v){const b="touchend"===l?v.changedTouches:v.touches,w=$1(f.getCanvasContainer(),b),D=w.map(L=>f.unproject(L)),A=w.reduce((L,P,R,B)=>L.add(P.div(B.length)),new p.pointGeometry(0,0));super(l,{points:w,point:A,lngLats:D,lngLat:f.unproject(A),originalEvent:v}),this._defaultPrevented=!1}}class uc extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,v){super(l,{originalEvent:v}),this._defaultPrevented=!1}}class m6{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new uc(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new f2(l.type,this._map,l))}mouseup(l){this._map.fire(new f2(l.type,this._map,l))}preclick(l){const f=p.extend({},l);f.type="preclick",this._map.fire(new f2(f.type,this._map,f))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(l),this._map.fire(new f2(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new f2(l.type,this._map,l))}mouseover(l){this._map.fire(new f2(l.type,this._map,l))}mouseout(l){this._map.fire(new f2(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Xl(l.type,this._map,l))}touchmove(l){this._map.fire(new Xl(l.type,this._map,l))}touchend(l){this._map.fire(new Xl(l.type,this._map,l))}touchcancel(l){this._map.fire(new Xl(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wn{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new f2(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new f2("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new f2(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class V4{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&0===l.button&&(da(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const v=f,b=this._startPos,w=this._lastPos;if(!b||!w||w.equals(v)||!this._box&&v.dist(b)<this._clickTolerance)return;this._lastPos=v,this._box||(this._box=m1("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const D=Math.min(b.x,v.x),A=Math.max(b.x,v.x),L=Math.min(b.y,v.y),P=Math.max(b.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${D}px,${L}px)`,this._box.style.width=A-D+"px",this._box.style.height=P-L+"px")})}mouseupWindow(l,f){if(!this._active)return;const v=this._startPos,b=f;if(v&&0===l.button){if(this.reset(),Wi(),v.x!==b.x||v.y!==b.y)return this._map.fire(new p.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(v,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&27===l.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),P2(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new p.Event(l,{originalEvent:f}))}}function L4(m,l){const f={};for(let v=0;v<m.length;v++)f[m[v].identifier]=l[v];return f}class g6{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,f,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=l.timeStamp),v.length===this.numTouches&&(this.centroid=function(b){const w=new p.pointGeometry(0,0);for(const D of b)w._add(D);return w.div(b.length)}(f),this.touches=L4(v,f)))}touchmove(l,f,v){if(this.aborted||!this.centroid)return;const b=L4(v,f);for(const w in this.touches){const A=b[w];(!A||A.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(l,f,v){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),0===v.length){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class dc{constructor(l){this.singleTap=new g6(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,f,v){this.singleTap.touchstart(l,f,v)}touchmove(l,f,v){this.singleTap.touchmove(l,f,v)}touchend(l,f,v){const b=this.singleTap.touchend(l,f,v);if(b){const w=l.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(b)<30;if(w&&D||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class T4{constructor(){this._zoomIn=new dc({numTouches:1,numTaps:2}),this._zoomOut=new dc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,v){this._zoomIn.touchstart(l,f,v),this._zoomOut.touchstart(l,f,v)}touchmove(l,f,v){this._zoomIn.touchmove(l,f,v),this._zoomOut.touchmove(l,f,v)}touchend(l,f,v){const b=this._zoomIn.touchend(l,f,v),w=this._zoomOut.touchend(l,f,v);return b?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(b)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _6={0:1,2:2};class Qc{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const v=Sr(l);this._correctButton(l,v)&&(this._lastPoint=f,this._eventButton=v)}mousemoveWindow(l,f){const v=this._lastPoint;if(v)if(l.preventDefault(),null!=this._eventButton&&function(b,w){const D=_6[w];return void 0===b.buttons||(b.buttons&D)!==D}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(v,f)}mouseupWindow(l){this._lastPoint&&Sr(l)===this._eventButton&&(this._moved&&Wi(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class v6 extends Qc{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return 0===f&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class gr extends Qc{_correctButton(l,f){return 0===f&&l.ctrlKey||2===f}_move(l,f){const v=.8*(f.x-l.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(l){l.preventDefault()}}class H4 extends Qc{_correctButton(l,f){return 0===f&&l.ctrlKey||2===f}_move(l,f){const v=-.5*(f.y-l.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(l){l.preventDefault()}}class fc{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),p.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new p.pointGeometry(0,0)}touchstart(l,f,v){return this._calculateTransform(l,f,v)}touchmove(l,f,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===v.length&&!p.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,f,v)}}touchend(l,f,v){this._calculateTransform(l,f,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,v){v.length>0&&(this._active=!0);const b=L4(v,f),w=new p.pointGeometry(0,0),D=new p.pointGeometry(0,0);let A=0;for(const P in b){const R=b[P],B=this._touches[P];B&&(w._add(R),D._add(R.sub(B)),A++,b[P]=R)}if(this._touches=b,A<this._minTouches||!D.mag())return;const L=D.div(A);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(A),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=m1("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Si{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,f,v){return{}}touchstart(l,f,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,v){const b=this._firstTwoTouches;if(!b)return;l.preventDefault();const[w,D]=b,A=H3(v,f,w),L=H3(v,f,D);if(!A||!L)return;const P=this._aroundCenter?null:A.add(L).div(2);return this._move([A,L],P,l)}touchend(l,f,v){if(!this._firstTwoTouches)return;const[b,w]=this._firstTwoTouches,D=H3(v,f,b),A=H3(v,f,w);D&&A||(this._active&&Wi(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&"center"===l.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function H3(m,l,f){for(let v=0;v<m.length;v++)if(m[v].identifier===f)return l[v]}function k3(m,l){return Math.log(m/l)/Math.LN2}class _r extends Si{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const v=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(k3(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:k3(this._distance,v),pinchAround:f}}}function Kl(m,l){return 180*m.angleWith(l)/Math.PI}class Ql extends Si{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const v=this._vector;if(this._vector=l[0].sub(l[1]),v&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Kl(this._vector,v),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,v=this._startVector;if(!v)return!1;const b=Kl(l,v);return Math.abs(b)<f}}function Po(m){return Math.abs(m.y)>Math.abs(m.x)}class Fn extends Si{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Po(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,v){const b=this._lastPoints;if(!b)return;const w=l[0].sub(b[0]),D=l[1].sub(b[1]);return this._map._cooperativeGestures&&!p.isFullscreen()&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(w,D,v.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+D.y)/2*-.5})}gestureBeginsVertically(l,f,v){if(void 0!==this._valid)return this._valid;const b=l.mag()>=2,w=f.mag()>=2;if(!b&&!w)return;if(!b||!w)return null==this._firstMove&&(this._firstMove=v),v-this._firstMove<100&&void 0;const D=l.y>0==f.y>0;return Po(l)&&Po(f)&&D}}const g5={panStep:100,bearingStep:15,pitchStep:10};class I3{constructor(){const l=g5;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,v=0,b=0,w=0,D=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?v=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?v=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?b=1:(l.preventDefault(),D=-1);break;case 40:l.shiftKey?b=-1:(l.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(v=0,b=0),{cameraAnimation:A=>{const L=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:_5,zoom:f?Math.round(L)+f*(l.shiftKey?2:1):L,bearing:A.getBearing()+v*this._bearingStep,pitch:A.getPitch()+b*this._pitchStep,offset:[-w*this._panStep,-D*this._panStep],center:A.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _5(m){return m*(2-m)}const Fo=4.000244140625;class Za{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,p.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&"center"===l.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||p.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=l.deltaMode===p.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const v=p.exported.now(),b=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,0!==f&&f%Fo==0?this._type="wheel":0!==f&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=pt(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;"wheel"===this._type&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(0!==this._delta){const L="wheel"===this._type&&Math.abs(this._delta)>Fo?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&0!==P&&(P=1/P);const R=f(),B=Math.pow(2,R),Y="number"==typeof this._targetZoom?l.zoomScale(this._targetZoom):B;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Y*P))),"wheel"===this._type&&(this._startZoom=R,this._easing=this._smoothOutEasing(200)),this._delta=0}const v="number"==typeof this._targetZoom?this._targetZoom:f(),b=this._startZoom,w=this._easing;let D,A=!1;if("wheel"===this._type&&b&&w){const L=Math.min((p.exported.now()-this._lastWheelEventTime)/200,1),P=w(L);D=p.number(b,v,P),L<1?this._frameId||(this._frameId=!0):A=!0}else D=v,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:D-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=p.ease;if(this._prevEase){const v=this._prevEase,b=(p.exported.now()-v.start)/v.duration,w=v.easing(b+.01)-v.easing(b),D=.27/Math.sqrt(w*w+1e-4)*.01,A=Math.sqrt(.0729-D*D);f=p.bezier(D,A,.25,1)}return this._prevEase={start:p.exported.now(),duration:l,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=m1("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(p.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class k4{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class v1{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,f){return l.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(l.shiftKey?-1:1),around:v.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ba{constructor(){this._tap=new dc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,f,v){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=f[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(l,f,v))}touchmove(l,f,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const b=f[0],w=b.y-this._swipePoint.y;return this._swipePoint=b,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,f,v)}touchend(l,f,v){this._tapTime?this._swipePoint&&0===v.length&&this.reset():this._tap.touchend(l,f,v)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jl{constructor(l,f,v){this._el=l,this._mousePan=f,this._touchPan=v}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Et{constructor(l,f,v){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class y6{constructor(l,f,v,b){this._el=l,this._touchZoom=f,this._touchRotate=v,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const R3=m=>m.zoom||m.drag||m.pitch||m.rotate;class Jc extends p.Event{}class P3{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,f){const v=p.sub([],f,l);this.radius=p.length(v[2]<0?p.div([],v,this.constants):[v[0],v[1],0])}projectRay(l){p.div(l,l,this.constants),p.normalize(l,l),p.mul$1(l,l,this.constants);const f=p.scale$2([],l,this.radius);if(f[2]>0){const v=p.scale$2([],[0,0,1],p.dot(f,[0,0,1])),b=p.scale$2([],p.normalize([],[f[0],f[1],0]),this.radius),w=p.add([],f,p.scale$2([],p.sub([],p.add([],b,v),f),2));f[0]=w[0],f[1]=w[1]}return f}}function F3(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class mt{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new T3(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new P3,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),p.bindAll(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[p.window.document,"mousemove",{capture:!0}],[p.window.document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[p.window,"blur",void 0]];for(const[b,w,D]of this._listeners)b.addEventListener(w,b===p.window.document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(const[l,f,v]of this._listeners)l.removeEventListener(f,l===p.window.document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(l){const f=this._map,v=f.getCanvasContainer();this._add("mapEvent",new m6(f,l));const b=f.boxZoom=new V4(f,l);this._add("boxZoom",b);const w=new T4,D=new v1;f.doubleClickZoom=new k4(D,w),this._add("tapZoom",w),this._add("clickZoom",D);const A=new ba;this._add("tapDragZoom",A);const L=f.touchPitch=new Fn(f);this._add("touchPitch",L);const P=new gr(l),R=new H4(l);f.dragRotate=new Et(l,P,R),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const B=new v6(l),Y=new fc(f,l);f.dragPan=new Jl(v,B,Y),this._add("mousePan",B),this._add("touchPan",Y,["touchZoom","touchRotate"]);const J=new Ql,ee=new _r;f.touchZoomRotate=new y6(v,ee,J,A),this._add("touchRotate",J,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),this._add("blockableMapEvent",new wn(f));const te=f.scrollZoom=new Za(f,this);this._add("scrollZoom",te,["mousePan"]);const Q=f.keyboard=new I3;this._add("keyboard",Q);for(const Z of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Z]&&f[Z].enable(l[Z])}_add(l,f,v){this._handlers.push({handlerName:l,handler:f,allowed:v}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!R3(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,f,v){for(const b in l)if(b!==v&&(!f||f.indexOf(b)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const v of l)this._el.contains(v.target)&&f.push(v);return f}handleEvent(l,f){this._updatingCamera=!0;const v="renderFrame"===l.type,b=v?void 0:l,w={needsRenderFrame:!1},D={},A={},L=l.touches?this._getMapTouches(l.touches):void 0,P=L?$1(this._el,L):v?void 0:pt(this._el,l);for(const{handlerName:Y,handler:J,allowed:ee}of this._handlers){if(!J.isEnabled())continue;let te;this._blockedByActive(A,ee,Y)?J.reset():J[f||l.type]&&(te=J[f||l.type](l,P,L),this.mergeHandlerResult(w,D,te,Y,b),te&&te.needsRenderFrame&&this._triggerRenderFrame()),(te||J.isActive())&&(A[Y]=J)}const R={};for(const Y in this._previousActiveHandlers)A[Y]||(R[Y]=b);this._previousActiveHandlers=A,(Object.keys(R).length||F3(w))&&(this._changes.push([w,D,R]),this._triggerRenderFrame()),(Object.keys(A).length||F3(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:B}=w;B&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],B(this._map))}mergeHandlerResult(l,f,v,b,w){if(!v)return;p.extend(l,v);const D={handlerName:b,originalEvent:v.originalEvent||w};void 0!==v.zoomDelta&&(f.zoom=D),void 0!==v.panDelta&&(f.drag=D),void 0!==v.pitchDelta&&(f.pitch=D),void 0!==v.bearingDelta&&(f.rotate=D)}_applyChanges(){const l={},f={},v={};for(const[b,w,D]of this._changes)b.panDelta&&(l.panDelta=(l.panDelta||new p.pointGeometry(0,0))._add(b.panDelta)),b.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+b.pitchDelta),void 0!==b.around&&(l.around=b.around),void 0!==b.aroundCoord&&(l.aroundCoord=b.aroundCoord),void 0!==b.pinchAround&&(l.pinchAround=b.pinchAround),b.noInertia&&(l.noInertia=b.noInertia),p.extend(f,w),p.extend(v,D);this._updateMapTransform(l,f,v),this._changes=[]}_updateMapTransform(l,f,v){const b=this._map,w=b.transform,D=se=>[se.x,se.y,se.z];if((se=>{const oe=this._eventsInProgress.drag;return oe&&!this._handlersById[oe.handlerName].isActive()})()&&!F3(l)){const se=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",se!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&b._stop(!0),!F3(l))return void this._fireEvents(f,v,!0);let{panDelta:A,zoomDelta:L,bearingDelta:P,pitchDelta:R,around:B,aroundCoord:Y,pinchAround:J}=l;w._isCameraConstrained&&(L>0&&(L=0),w._isCameraConstrained=!1),void 0!==J&&(B=J),(L||(se=>f.drag&&!this._eventsInProgress.drag)())&&B&&(this._dragOrigin=D(w.pointCoordinate3D(B)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",b._stop(!0),B=B||b.transform.centerPoint,P&&(w.bearing+=P),R&&(w.pitch+=R),w._updateCameraState();const ee=[0,0,0];if(A)if("mercator"===w.projection.name){const se=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(B).dir),oe=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(B.sub(A)).dir);ee[0]=oe[0]-se[0],ee[1]=oe[1]-se[1]}else{const se=w.pointCoordinate(B);if("globe"===w.projection.name){A=A.rotate(-w.angle);const oe=w._pixelsPerMercatorPixel/w.worldSize;ee[0]=-A.x*p.mercatorScale(p.latFromMercatorY(se.y))*oe,ee[1]=-A.y*p.mercatorScale(w.center.lat)*oe}else{const oe=w.pointCoordinate(B.sub(A));se&&oe&&(ee[0]=oe.x-se.x,ee[1]=oe.y-se.y)}}const te=w.zoom,Q=[0,0,0];if(L){const se=D(Y||w.pointCoordinate3D(B)),oe={dir:p.normalize([],p.sub([],se,w._camera.position))};if(oe.dir[2]<0){const ue=w.zoomDeltaToMovement(se,L);p.scale$2(Q,oe.dir,ue)}}const Z=p.add(ee,ee,Q);w._translateCameraConstrained(Z),L&&Math.abs(w.zoom-te)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,v,!0)}_fireEvents(l,f,v){const b=R3(this._eventsInProgress),w=R3(l),D={};for(const R in l){const{originalEvent:B}=l[R];this._eventsInProgress[R]||(D[`${R}start`]=B),this._eventsInProgress[R]=l[R]}!b&&w&&this._fireEvent("movestart",w.originalEvent);for(const R in D)this._fireEvent(R,D[R]);w&&this._fireEvent("move",w.originalEvent);for(const R in l){const{originalEvent:B}=l[R];this._fireEvent(R,B)}const A={};let L;for(const R in this._eventsInProgress){const{handlerName:B,originalEvent:Y}=this._eventsInProgress[R];this._handlersById[B].isActive()||(delete this._eventsInProgress[R],L=f[B]||Y,A[`${R}end`]=L)}for(const R in A)this._fireEvent(R,A[R]);const P=R3(this._eventsInProgress);if(v&&(b||w)&&!P){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=Y=>0!==Y&&-this._bearingSnap<Y&&Y<this._bearingSnap;R?(B(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:L})):(this._map.fire(new p.Event("moveend",{originalEvent:L})),B(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new p.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Jc("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const ln="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ki extends p.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,p.bindAll(["_renderFrameCallback"],this)}getCenter(){return new p.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,v){return l=p.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,p.extend({offset:l},f),v)}panTo(l,f,v){return this.easeTo(p.extend({center:l},f),v)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,v){return this.easeTo(p.extend({zoom:l},f),v)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,v){return this.easeTo(p.extend({bearing:l},f),v)}resetNorth(l,f){return this.rotateTo(0,p.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(p.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){l=p.LngLatBounds.convert(l);const v=f&&f.bearing||0,b=f&&f.pitch||0,w=l.getNorthWest(),D=l.getSouthEast();return this._cameraForBounds(this.transform,w,D,v,b,f)}_extendCameraOptions(l){const f={top:0,bottom:0,right:0,left:0};if("number"==typeof(l=p.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding){const v=l.padding;l.padding={top:v,bottom:v,right:v,left:v}}return l.padding=p.extend(f,l.padding),l}_minimumAABBFrustumDistance(l,f){const v=f.max[0]-f.min[0],b=f.max[1]-f.min[1];return v/b>l.aspect?v/(2*Math.tan(.5*l.fovX)*l.aspect):b/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,f,v,b,w,D){const A=l.clone(),L=this._extendCameraOptions(D);A.bearing=b,A.pitch=w;const P=p.LngLat.convert(f),R=p.LngLat.convert(v),B=.5*(P.lat+R.lat),Y=.5*(P.lng+R.lng),J=p.latLngToECEF(B,Y),ee=p.normalize([],J),te=p.normalize([],p.cross([],ee,[0,1,0])),Q=p.cross([],te,ee),Z=[te[0],te[1],te[2],0,Q[0],Q[1],Q[2],0,ee[0],ee[1],ee[2],0,0,0,0,1],se=[J,p.latLngToECEF(P.lat,P.lng),p.latLngToECEF(R.lat,P.lng),p.latLngToECEF(R.lat,R.lng),p.latLngToECEF(P.lat,R.lng),p.latLngToECEF(B,P.lng),p.latLngToECEF(B,R.lng),p.latLngToECEF(P.lat,Y),p.latLngToECEF(R.lat,Y)];let oe=p.Aabb.fromPoints(se.map(ot=>[p.dot(te,ot),p.dot(Q,ot),p.dot(ee,ot)]));const ue=p.transformMat4([],oe.center,Z);0===p.squaredLength(ue)&&p.set(ue,0,0,1),p.normalize(ue,ue),p.scale$2(ue,ue,p.GLOBE_RADIUS),A.center=p.ecefToLatLng(ue);const ye=A.getWorldToCameraMatrix(),_e=p.invert(new Float64Array(16),ye);oe=p.Aabb.applyTransform(oe,p.multiply([],ye,Z)),p.transformMat4(ue,ue,ye);const Ce=.5*(oe.max[2]-oe.min[2]),Se=this._minimumAABBFrustumDistance(A,oe),Te=p.scale$2([],[0,0,1],Ce),Re=p.add(Te,ue,Te),gt=Se+(0===A.pitch?0:p.distance(ue,Re)),Ee=A.globeCenterInViewSpace,et=p.sub([],ue,[Ee[0],Ee[1],Ee[2]]);p.normalize(et,et),p.scale$2(et,et,gt);const Be=p.add([],ue,et);p.transformMat4(Be,Be,_e);const ct=p.earthRadius/p.GLOBE_RADIUS,Pe=p.length(Be),ze=p.mercatorZfromAltitude(Math.max(Pe*ct-p.earthRadius,Number.EPSILON),0),Ne=Math.min(A.zoomFromMercatorZAdjusted(ze),L.maxZoom);return Ne>.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"mercator"}),A.zoom=Ne,this._cameraForBounds(A,f,v,b,w,D)):{center:A.center,zoom:Ne,bearing:b,pitch:w}}queryTerrainElevation(l,f){const v=this.transform.elevation;return v?(f=p.extend({},{exaggerated:!0},f),v.getAtPoint(p.MercatorCoordinate.fromLngLat(l),null,f.exaggerated)):null}_cameraForBounds(l,f,v,b,w,D){if("globe"===l.projection.name)return this._cameraForBoundsOnGlobe(l,f,v,b,w,D);const A=l.clone(),L=this._extendCameraOptions(D),P=A.padding;A.bearing=b,A.pitch=w;const R=p.LngLat.convert(f),B=p.LngLat.convert(v),Y=new p.LngLat(R.lng,B.lat),J=new p.LngLat(B.lng,R.lat),ee=A.project(R),te=A.project(B),Q=this.queryTerrainElevation(R),Z=this.queryTerrainElevation(B),se=this.queryTerrainElevation(Y),oe=this.queryTerrainElevation(J),ue=[[ee.x,ee.y,Math.min(Q||0,Z||0,se||0,oe||0)],[te.x,te.y,Math.max(Q||0,Z||0,se||0,oe||0)]];let ye=p.Aabb.fromPoints(ue);const _e=A.getWorldToCameraMatrix(),Ce=p.invert(new Float64Array(16),_e);ye=p.Aabb.applyTransform(ye,_e);const Se=p.sub([],ye.max,ye.min),Te=P.left||0,Re=P.right||0,gt=P.bottom||0,Ee=P.top||0,{left:et,right:Be,top:ct,bottom:Pe}=L.padding,ze=.5*(Te+Re),Ne=.5*(Ee+gt),ot=Math.min(A.scaleZoom(A.scale*Math.min((A.width-(Te+Re+et+Be))/Se[0],(A.height-(gt+Ee+Pe+ct))/Se[1])),L.maxZoom),ut=A.scale/A.zoomScale(ot);ye=new p.Aabb([ye.min[0]-(et+ze)*ut,ye.min[1]-(Pe+Ne)*ut,ye.min[2]],[ye.max[0]+(Be+ze)*ut,ye.max[1]+(ct+Ne)*ut,ye.max[2]]);const Pt=.5*Se[2],L1=this._minimumAABBFrustumDistance(A,ye),Dt=[0,0,1,0];p.transformMat4$1(Dt,Dt,_e),p.normalize$2(Dt,Dt);const zt=p.scale$2([],Dt,L1+Pt),Ft=p.add([],ye.center,zt),A1=("number"==typeof L.offset.x&&"number"==typeof L.offset.y?new p.pointGeometry(L.offset.x,L.offset.y):p.pointGeometry.convert(L.offset)).rotate(-p.degToRad(b));ye.center[0]-=A1.x*ut,ye.center[1]+=A1.y*ut,p.transformMat4(ye.center,ye.center,Ce),p.transformMat4(Ft,Ft,Ce);const Ut=[ye.center[0],ye.center[1],Ft[2]*A.pixelsPerMeter];p.scale$2(Ut,Ut,1/A.worldSize);const mn=p.lngFromMercatorX(Ut[0]),un=p.latFromMercatorY(Ut[1]),Nn=Math.min(A._zoomFromMercatorZ(Ut[2]),L.maxZoom),Mn=new p.LngLat(mn,un);return A.mercatorFromTransition&&Nn<.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"globe"}),A.zoom=Nn,this._cameraForBounds(A,f,v,b,w,D)):{center:Mn,zoom:Nn,bearing:b,pitch:w}}fitBounds(l,f,v){const b=this.cameraForBounds(l,f);return this._fitInternal(b,f,v)}fitScreenCoordinates(l,f,v,b,w){const D=p.pointGeometry.convert(l),A=p.pointGeometry.convert(f),L=new p.pointGeometry(Math.min(D.x,A.x),Math.min(D.y,A.y)),P=new p.pointGeometry(Math.max(D.x,A.x),Math.max(D.y,A.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(D,A))return this;const R=this.transform.pointLocation3D(L),B=this.transform.pointLocation3D(P),Y=this.transform.pointLocation3D(new p.pointGeometry(L.x,P.y)),J=this.transform.pointLocation3D(new p.pointGeometry(P.x,L.y)),ee=[Math.min(R.lng,B.lng,Y.lng,J.lng),Math.min(R.lat,B.lat,Y.lat,J.lat)],te=[Math.max(R.lng,B.lng,Y.lng,J.lng),Math.max(R.lat,B.lat,Y.lat,J.lat)],Q=b&&b.pitch?b.pitch:this.getPitch(),Z=this._cameraForBounds(this.transform,ee,te,v,Q,b);return this._fitInternal(Z,b,w)}_fitInternal(l,f,v){return l?(delete(f=p.extend(l,f)).padding,f.linear?this.easeTo(f,v):this.flyTo(f,v)):this}jumpTo(l,f){this.stop();const v=l.preloadOnly?this.transform.clone():this.transform;let b=!1,w=!1,D=!1;return"zoom"in l&&v.zoom!==+l.zoom&&(b=!0,v.zoom=+l.zoom),void 0!==l.center&&(v.center=p.LngLat.convert(l.center)),"bearing"in l&&v.bearing!==+l.bearing&&(w=!0,v.bearing=+l.bearing),"pitch"in l&&v.pitch!==+l.pitch&&(D=!0,v.pitch=+l.pitch),null==l.padding||v.isPaddingEqual(l.padding)||(v.padding=l.padding),l.preloadOnly?(this._preloadTiles(v),this):(this.fire(new p.Event("movestart",f)).fire(new p.Event("move",f)),b&&this.fire(new p.Event("zoomstart",f)).fire(new p.Event("zoom",f)).fire(new p.Event("zoomend",f)),w&&this.fire(new p.Event("rotatestart",f)).fire(new p.Event("rotate",f)).fire(new p.Event("rotateend",f)),D&&this.fire(new p.Event("pitchstart",f)).fire(new p.Event("pitch",f)).fire(new p.Event("pitchend",f)),this.fire(new p.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||p.warnOnce(ln),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,f){const v=this.transform;if(!v.projection.supportsFreeCamera)return p.warnOnce(ln),this;this.stop();const b=v.zoom,w=v.pitch,D=v.bearing;v.setFreeCameraOptions(l);const A=b!==v.zoom,L=w!==v.pitch,P=D!==v.bearing;return this.fire(new p.Event("movestart",f)).fire(new p.Event("move",f)),A&&this.fire(new p.Event("zoomstart",f)).fire(new p.Event("zoom",f)).fire(new p.Event("zoomend",f)),P&&this.fire(new p.Event("rotatestart",f)).fire(new p.Event("rotate",f)).fire(new p.Event("rotateend",f)),L&&this.fire(new p.Event("pitchstart",f)).fire(new p.Event("pitch",f)).fire(new p.Event("pitchend",f)),this.fire(new p.Event("moveend",f)),this}easeTo(l,f){this._stop(!1,l.easeId),(!1===(l=p.extend({offset:[0,0],duration:500,easing:p.ease},l)).animate||!l.essential&&p.exported.prefersReducedMotion)&&(l.duration=0);const v=this.transform,b=this.getZoom(),w=this.getBearing(),D=this.getPitch(),A=this.getPadding(),L="zoom"in l?+l.zoom:b,P="bearing"in l?this._normalizeBearing(l.bearing,w):w,R="pitch"in l?+l.pitch:D,B="padding"in l?l.padding:v.padding,Y=p.pointGeometry.convert(l.offset);let J,ee,te;if("globe"===v.projection.name){const Te=p.MercatorCoordinate.fromLngLat(v.center),Re=Y.rotate(-v.angle);Te.x+=Re.x/v.worldSize,Te.y+=Re.y/v.worldSize;const gt=Te.toLngLat(),Ee=p.LngLat.convert(l.center||gt);this._normalizeCenter(Ee),J=v.centerPoint.add(Re),ee=new p.pointGeometry(Te.x,Te.y).mult(v.worldSize),te=new p.pointGeometry(p.mercatorXfromLng(Ee.lng),p.mercatorYfromLat(Ee.lat)).mult(v.worldSize).sub(ee)}else{J=v.centerPoint.add(Y);const Te=v.pointLocation(J),Re=p.LngLat.convert(l.center||Te);this._normalizeCenter(Re),ee=v.project(Te),te=v.project(Re).sub(ee)}const Q=v.zoomScale(L-b);let Z,se;l.around&&(Z=p.LngLat.convert(l.around),se=v.locationPoint(Z));const oe=this._zooming||L!==b,ue=this._rotating||w!==P,ye=this._pitching||R!==D,_e=!v.isPaddingEqual(B),Ce=Te=>Re=>{if(oe&&(Te.zoom=p.number(b,L,Re)),ue&&(Te.bearing=p.number(w,P,Re)),ye&&(Te.pitch=p.number(D,R,Re)),_e&&(Te.interpolatePadding(A,B,Re),J=Te.centerPoint.add(Y)),Z)Te.setLocationAtPoint(Z,se);else{const gt=Te.zoomScale(Te.zoom-b),Ee=L>b?Math.min(2,Q):Math.max(.5,Q),et=Math.pow(Ee,1-Re),Be=Te.unproject(ee.add(te.mult(Re*et)).mult(gt));Te.setLocationAtPoint(Te.renderWorldCopies?Be.wrap():Be,J)}return l.preloadOnly||this._fireMoveEvents(f),Te};if(l.preloadOnly){const Te=this._emulate(Ce,l.duration,v);return this._preloadTiles(Te),this}const Se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=oe,this._rotating=ue,this._pitching=ye,this._padding=_e,this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,Se),this._ease(Ce(v),Te=>{v.recenterOnTerrain(),this._afterEase(f,Te)},l),this}_prepareEase(l,f,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||v.moving||this.fire(new p.Event("movestart",l)),this._zooming&&!v.zooming&&this.fire(new p.Event("zoomstart",l)),this._rotating&&!v.rotating&&this.fire(new p.Event("rotatestart",l)),this._pitching&&!v.pitching&&this.fire(new p.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new p.Event("move",l)),this._zooming&&this.fire(new p.Event("zoom",l)),this._rotating&&this.fire(new p.Event("rotate",l)),this._pitching&&this.fire(new p.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,b=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new p.Event("zoomend",l)),b&&this.fire(new p.Event("rotateend",l)),w&&this.fire(new p.Event("pitchend",l)),this.fire(new p.Event("moveend",l))}flyTo(l,f){if(!l.essential&&p.exported.prefersReducedMotion){const ot=p.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ot,f)}this.stop(),l=p.extend({offset:[0,0],speed:1.2,curve:1.42,easing:p.ease},l);const v=this.transform,b=this.getZoom(),w=this.getBearing(),D=this.getPitch(),A=this.getPadding(),L="zoom"in l?p.clamp(+l.zoom,v.minZoom,v.maxZoom):b,P="bearing"in l?this._normalizeBearing(l.bearing,w):w,R="pitch"in l?+l.pitch:D,B="padding"in l?l.padding:v.padding,Y=v.zoomScale(L-b),J=p.pointGeometry.convert(l.offset);let ee=v.centerPoint.add(J);const te=v.pointLocation(ee),Q=p.LngLat.convert(l.center||te);this._normalizeCenter(Q);const Z=v.project(te),se=v.project(Q).sub(Z);let oe=l.curve;const ue=Math.max(v.width,v.height),ye=ue/Y,_e=se.mag();if("minZoom"in l){const ot=p.clamp(Math.min(l.minZoom,b,L),v.minZoom,v.maxZoom),ut=ue/v.zoomScale(ot-b);oe=Math.sqrt(ut/_e*2)}const Ce=oe*oe;function Se(ot){const ut=(ye*ye-ue*ue+(ot?-1:1)*Ce*Ce*_e*_e)/(2*(ot?ye:ue)*Ce*_e);return Math.log(Math.sqrt(ut*ut+1)-ut)}function Te(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Re(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const gt=Se(0);let Ee=function(ot){return Re(gt)/Re(gt+oe*ot)},et=function(ot){return ue*((Re(gt)*(Te(ut=gt+oe*ot)/Re(ut))-Te(gt))/Ce)/_e;var ut},Be=(Se(1)-gt)/oe;if(Math.abs(_e)<1e-6||!isFinite(Be)){if(Math.abs(ue-ye)<1e-6)return this.easeTo(l,f);const ot=ye<ue?-1:1;Be=Math.abs(Math.log(ye/ue))/oe,et=function(){return 0},Ee=function(ut){return Math.exp(ot*oe*ut)}}l.duration="duration"in l?+l.duration:1e3*Be/("screenSpeed"in l?+l.screenSpeed/oe:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const ct=w!==P,Pe=R!==D,ze=!v.isPaddingEqual(B),Ne=ot=>ut=>{const Pt=ut*Be,L1=1/Ee(Pt);ot.zoom=1===ut?L:b+ot.scaleZoom(L1),ct&&(ot.bearing=p.number(w,P,ut)),Pe&&(ot.pitch=p.number(D,R,ut)),ze&&(ot.interpolatePadding(A,B,ut),ee=ot.centerPoint.add(J));const Dt=1===ut?Q:ot.unproject(Z.add(se.mult(et(Pt))).mult(L1));return ot.setLocationAtPoint(ot.renderWorldCopies?Dt.wrap():Dt,ee),ot._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(f),ot};if(l.preloadOnly){const ot=this._emulate(Ne,l.duration,v);return this._preloadTiles(ot),this}return this._zooming=!0,this._rotating=ct,this._pitching=Pe,this._padding=ze,this._prepareEase(f,!1),this._ease(Ne(v),()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,f)}if(!l){const v=this.handlers;v&&v.stop(!1)}return this}_ease(l,f,v){!1===v.animate||0===v.duration?(l(1),f()):(this._easeStart=p.exported.now(),this._easeOptions=v,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((p.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=p.wrap(l,-180,180);const v=Math.abs(l-f);return Math.abs(l-360-f)<v&&(l-=360),Math.abs(l+360-f)<v&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const v=l.lng-f.center.lng;l.lng+=v>180?-360:v<-180?360:0}_emulate(l,f,v){const b=Math.ceil(15*f/1e3),w=[],D=l(v.clone());for(let A=0;A<=b;A++){const L=D(A/b);w.push(L.clone())}return w}}class Di{constructor(l={}){this.options=l,p.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const f=this.options&&this.options.compact;return this._map=l,this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=m1("button","mapboxgl-ctrl-attrib-button",this._container),m1("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=m1("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===f&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const v=this._map._getUIString(`AttributionControl.${f}`);l.setAttribute("aria-label",v),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",v)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||p.config.ACCESS_TOKEN}];if(l){const v=f.reduce((b,w,D)=>(w.value&&(b+=`${w.key}=${w.value}${D<f.length-1?"&":""}`),b),"?");l.href=`${p.config.FEEDBACK_URL}/${v}#${h6(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||"metadata"!==l.sourceDataType&&"visibility"!==l.sourceDataType&&"style"!==l.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style._sourceCaches;for(const b in f){const w=f[b];if(w.used){const D=w.getSource();D.attribution&&l.indexOf(D.attribution)<0&&l.push(D.attribution)}}l.sort((b,w)=>b.length-w.length),l=l.filter((b,w)=>{for(let D=w+1;D<l.length;D++)if(l[D].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const v=l.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,l.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ii{constructor(){p.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=m1("div","mapboxgl-ctrl");const f=m1("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&"metadata"!==l.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(0===Object.entries(l).length)return!0;for(const f in l){const v=l[f].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class e3{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,v=f?this._queue.concat(f):this._queue;for(const b of v)if(b.id===l)return void(b.cancelled=!0)}run(l=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const v of f)if(!v.cancelled&&(v.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function gs(m,l,f){if(m=new p.LngLat(m.lng,m.lat),l){const v=new p.LngLat(m.lng-360,m.lat),b=new p.LngLat(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-f.center.lng)/360),D=f.locationPoint(m).distSqr(l),A=l.x<0||l.y<0||l.x>f.width||l.y>f.height;f.locationPoint(v).distSqr(l)<D&&(A||Math.abs(v.lng-f.center.lng)<w)?m=v:f.locationPoint(b).distSqr(l)<D&&(A||Math.abs(b.lng-f.center.lng)<w)&&(m=b)}for(;Math.abs(m.lng-f.center.lng)>180;){const v=f.locationPoint(m);if(v.x>=0&&v.y>=0&&v.x<=f.width&&v.y<=f.height)break;m.lng>f.center.lng?m.lng-=360:m.lng+=360}return m}const G2={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class t3 extends p.Evented{constructor(l,f){if(super(),(l instanceof p.window.HTMLElement||f)&&(l=p.extend({element:l},f)),p.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=p.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=m1("div");const b=41,w=27,D=fi("svg",{display:"block",height:b*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${b}`},this._element),A=fi("radialGradient",{id:"shadowGradient"},fi("defs",{},D));fi("stop",{offset:"10%","stop-opacity":.4},A),fi("stop",{offset:"100%","stop-opacity":.05},A),fi("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},D),fi("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},D),fi("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},D),fi("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},D),this._offset=p.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const v=this._element.classList;for(const b in G2)v.remove(`mapboxgl-marker-anchor-${b}`);v.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=p.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const f=l.code,v=l.charCode||l.keyCode;"Space"!==f&&"Enter"!==f&&32!==v&&13!==v||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,v=this._element;this._popup&&(f===v||v.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,f=this._pos;if(!l||!f)return!1;const v=l.unproject(f),b=l.getFreeCameraOptions();if(!b.position)return!1;const w=b.position.toLngLat();return w.distanceTo(v)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const f=this._pos;if(!f||f.x<0||f.x>l.transform.width||f.y<0||f.y>l.transform.height)return void this._clearFadeTimer();const v=l.unproject(f);let b;l._showingGlobe()&&p.isLngLatBehindGlobe(l.transform,this._lngLat)?b=0:(b=1-l._queryFogOpacity(v),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(b*=this._occludedOpacity)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${l.x}px,${l.y}px)\n            ${G2[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${f.x}px,${f.y}px)\n        `}_calculateXYTransform(){const l=this._pos,f=this._map,v=this.getPitchAlignment();if(!f||!l||"map"!==v)return"";if(!f._showingGlobe()){const L=f.getPitch();return L?`rotateX(${L}deg)`:""}const b=p.radToDeg(p.globeTiltAtLngLat(f.transform,this._lngLat)),w=l.sub(p.globeCenterToScreenPoint(f.transform)),D=Math.abs(w.x)+Math.abs(w.y);if(0===D)return"";const A=b/D;return`rotateX(${-w.y*A}deg) rotateY(${w.x*A}deg)`}_calculateZTransform(){const l=this._pos,f=this._map;if(!f||!l)return"";let v=0;const b=this.getRotationAlignment();if("map"===b)if(f._showingGlobe()){const w=f.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),D=f.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);v=p.radToDeg(Math.atan2(D.y,D.x))-90}else v=-f.getBearing();else if("horizon"===b){const w=p.smoothstep(4,6,f.getZoom()),D=p.globeCenterToScreenPoint(f.transform);D.y+=w*f.transform.height;const A=l.sub(D),L=p.radToDeg(Math.atan2(A.y,A.x));v=(L>90?L-270:L+90)*(1-w)}return v+=this._rotation,v?`rotateZ(${v}deg)`:""}_update(l){p.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=gs(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),!0===l?this._updateFrameId=p.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=p.pointGeometry.convert(l),this._update(),this}_onMove(l){const f=this._map;if(!f)return;const v=this._pointerdownPos,b=this._positionDelta;if(v&&b){if(!this._isDragging){const w=this._clickTolerance||f._clickTolerance;if(l.point.dist(v)<w)return;this._isDragging=!0}this._pos=l.point.sub(b),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new p.Event("dragstart"))),this.fire(new p.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new p.Event("dragend")),this._state="inactive"}_addDragHandler(l){const f=this._map,v=this._pos;f&&v&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(v),this._pointerdownPos=l.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const f=this._map;return f&&(l?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const I4={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},b6=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function x6(m=new p.pointGeometry(0,0),l="bottom"){if("number"==typeof m){const f=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(l){case"top":return new p.pointGeometry(0,m);case"top-left":return new p.pointGeometry(f,f);case"top-right":return new p.pointGeometry(-f,f);case"bottom":return new p.pointGeometry(0,-m);case"bottom-left":return new p.pointGeometry(f,-f);case"bottom-right":return new p.pointGeometry(-f,-f);case"left":return new p.pointGeometry(m,0);case"right":return new p.pointGeometry(-m,0)}return new p.pointGeometry(0,0)}return m instanceof p.pointGeometry||Array.isArray(m)?p.pointGeometry.convert(m):p.pointGeometry.convert(m[l]||[0,0])}class e0{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const f=p.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,f,v){this._start=this.getValue(f),this._end=l,this._startTime=f,this._endTime=f+v}}const D2={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ya={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},R4={showCompass:!0,showZoom:!0,visualizePitch:!1};class hc{constructor(l,f,v=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new gr({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,v&&(this.mousePitch=new H4({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),p.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),da()}move(l,f){const v=this.map,b=this.mouseRotate.mousemoveWindow(l,f),w=b&&b.bearingDelta;if(w&&v.setBearing(v.getBearing()+w),this.mousePitch){const D=this.mousePitch.mousemoveWindow(l,f),A=D&&D.pitchDelta;A&&v.setPitch(v.getPitch()+A)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){P2(),p.window.removeEventListener("mousemove",this.mousemove),p.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(p.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),pt(this.element,l)),p.window.addEventListener("mousemove",this.mousemove),p.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,pt(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){1!==l.targetTouches.length?this.reset():(this._startPos=this._lastPos=$1(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){1!==l.targetTouches.length?this.reset():(this._lastPos=$1(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){0===l.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Xa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},C6={maxWidth:100,unit:"metric"};function t0(m,l,f){const v=P4(l),b=v/l,w={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=m*b+"px",this._container.innerHTML=`${v}&nbsp;${w}`})}function P4(m){const l=Math.pow(10,`${Math.floor(m)}`.length-1);let f=m/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(v){const b=Math.pow(10,Math.ceil(-Math.log(v)/Math.LN10));return Math.round(v*b)/b}(f),l*f}const N3={version:p.version,supported:nr,setRTLTextPlugin:p.setRTLTextPlugin,getRTLTextPluginStatus:p.getRTLTextPluginStatus,Map:class extends ki{constructor(m){if(p.LivePerformanceUtils.mark(p.PerformanceMarkers.create),null!=(m=p.extend({},Ya,m)).minZoom&&null!=m.maxZoom&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=m.minPitch&&null!=m.maxPitch&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=m.minPitch&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=m.maxPitch&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&p.isSafariWithAntialiasingBug(p.window)&&(m.antialias=!1,p.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new _t(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new e3,this._domRenderTaskQueue=new e3,this._controls=[],this._markers=[],this._popups=[],this._mapId=p.uniqueId(),this._locale=p.extend({},D2,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new e0(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new p.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,"string"==typeof m.container){if(this._container=p.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof p.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&p.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),p.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==p.window&&(p.window.addEventListener("online",this._onWindowOnline,!1),p.window.addEventListener("resize",this._onWindowResize,!1),p.window.addEventListener("orientationchange",this._onWindowResize,!1),p.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new mt(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new V3("string"==typeof m.hash&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,p.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new Di({customAttribution:m.customAttribution})),this._logoControl=new Ii,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update("style"===l.dataType),this.fire(new p.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new p.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(m,l){if(void 0===l&&(l=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=m.onAdd(this);this._controls.push(m);const v=this._controlPositions[l];return-1!==l.indexOf("bottom")?v.insertBefore(f,v.firstChild):v.appendChild(f),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(m);return l>-1&&this._controls.splice(l,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new p.Event("movestart",m)).fire(new p.Event("move",m)),this.fire(new p.Event("resize",m)),l&&this.fire(new p.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(p.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return"auto"===m?p.window.navigator.language:Array.isArray(m)?0===m.length?void 0:m.map(l=>"auto"===l?p.window.navigator.language:l):m}setLanguage(m){const l=this._parseLanguage(m);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(m){return this._lazyInitEmptyStyle(),m?"string"==typeof m&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const m=this.transform,l=m.projection.name;let f;"globe"===l&&m.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),f=!0):"mercator"===l&&m.zoom<p.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,l){return this._updateProjection(m||l||{name:"mercator"})}_updateProjection(m){let l;if(l="globe"===m.name&&this.transform.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(p.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(p.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,l,f){if("mouseenter"===m||"mouseover"===m){let v=!1;const b=D=>{const A=l.filter(P=>this.getLayer(P)),L=A.length?this.queryRenderedFeatures(D.point,{layers:A}):[];L.length?v||(v=!0,f.call(this,new f2(m,this,D.originalEvent,{features:L}))):v=!1},w=()=>{v=!1};return{layers:new Set(l),listener:f,delegates:{mousemove:b,mouseout:w}}}if("mouseleave"===m||"mouseout"===m){let v=!1;const b=D=>{const A=l.filter(L=>this.getLayer(L));(A.length?this.queryRenderedFeatures(D.point,{layers:A}):[]).length?v=!0:v&&(v=!1,f.call(this,new f2(m,this,D.originalEvent)))},w=D=>{v&&(v=!1,f.call(this,new f2(m,this,D.originalEvent)))};return{layers:new Set(l),listener:f,delegates:{mousemove:b,mouseout:w}}}{const v=b=>{const w=l.filter(A=>this.getLayer(A)),D=w.length?this.queryRenderedFeatures(b.point,{layers:w}):[];D.length&&(b.features=D,f.call(this,b),delete b.features)};return{layers:new Set(l),listener:f,delegates:{[m]:v}}}}on(m,l,f){if(void 0===f)return super.on(m,l);Array.isArray(l)||(l=[l]);const v=this._createDelegatedListener(m,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(v);for(const b in v.delegates)this.on(b,v.delegates[b]);return this}once(m,l,f){if(void 0===f)return super.once(m,l);Array.isArray(l)||(l=[l]);const v=this._createDelegatedListener(m,l,f);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(m,l,f){if(void 0===f)return super.off(m,l);l=new Set(Array.isArray(l)?l:[l]);const v=(w,D)=>{if(w.size!==D.size)return!1;for(const A of w)if(!D.has(A))return!1;return!0},b=this._delegatedListeners?this._delegatedListeners[m]:void 0;return b&&(w=>{for(let D=0;D<w.length;D++){const A=w[D];if(A.listener===f&&v(A.layers,l)){for(const L in A.delegates)this.off(L,A.delegates[L]);return w.splice(D,1),this}}})(b),this}queryRenderedFeatures(m,l){return this.style?(void 0!==l||void 0===m||m instanceof p.pointGeometry||Array.isArray(m)||(l=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(m,l){return this.style.querySourceFeatures(m,l)}setStyle(m,l){return!1!==(l=p.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(m,l))}_getUIString(m){const l=this._locale[m];if(null==l)throw new Error(`Missing UI string '${m}'`);return l}_updateStyle(m,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new w2(this,l||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof m?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new w2(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,l){if("string"==typeof m){const f=this._requestManager.normalizeStyleURL(m),v=this._requestManager.transformRequest(f,p.ResourceType.Style);p.getJSON(v,(b,w)=>{b?this.fire(new p.ErrorEvent(b)):w&&this._updateDiff(w,l)})}else"object"==typeof m&&this._updateDiff(m,l)}_updateDiff(m,l){try{this.style.setState(m)&&this._update(!0)}catch(f){p.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(m,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(p.warnOnce("There is no style added to the map."),!1)}addSource(m,l){return this._lazyInitEmptyStyle(),this.style.addSource(m,l),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const l in m){const f=m[l]._tiles;for(const v in f){const b=f[v];if("loaded"!==b.state&&"errored"!==b.state)return!1}}return!0}addSourceType(m,l,f){this._lazyInitEmptyStyle(),this.style.addSourceType(m,l,f)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,l,{pixelRatio:f=1,sdf:v=!1,stretchX:b,stretchY:w,content:D}={}){if(this._lazyInitEmptyStyle(),l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap){const{width:A,height:L,data:P}=p.exported.getImageData(l);this.style.addImage(m,{data:new p.RGBAImage({width:A,height:L},P),pixelRatio:f,stretchX:b,stretchY:w,content:D,sdf:v,version:0})}else if(void 0===l.width||void 0===l.height)this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:L}=l,P=l;this.style.addImage(m,{data:new p.RGBAImage({width:A,height:L},new Uint8Array(P.data)),pixelRatio:f,stretchX:b,stretchY:w,content:D,sdf:v,version:0,userImage:P}),P.onAdd&&P.onAdd(this,m)}}updateImage(m,l){const f=this.style.getImage(m);if(!f)return void this.fire(new p.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap?p.exported.getImageData(l):l,{width:b,height:w}=v;void 0!==b&&void 0!==w?b===f.data.width&&w===f.data.height?(f.data.replace(v.data,!(l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap)),this.style.updateImage(m,f)):this.fire(new p.ErrorEvent(new Error(`The width and height of the updated image (${b}, ${w})\n                must be that same as the previous version of the image\n                (${f.data.width}, ${f.data.height})`))):this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new p.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,l){p.getImage(this._requestManager.transformRequest(m,p.ResourceType.Image),(f,v)=>{l(f,v instanceof p.window.HTMLImageElement?p.exported.getImageData(v):v)})}listImages(){return this.style.listImages()}addLayer(m,l){return this._lazyInitEmptyStyle(),this.style.addLayer(m,l),this._update(!0)}moveLayer(m,l){return this.style.moveLayer(m,l),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,l,f){return this.style.setLayerZoomRange(m,l,f),this._update(!0)}setFilter(m,l,f={}){return this.style.setFilter(m,l,f),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,l,f,v={}){return this.style.setPaintProperty(m,l,f,v),this._update(!0)}getPaintProperty(m,l){return this.style.getPaintProperty(m,l)}setLayoutProperty(m,l,f,v={}){return this.style.setLayoutProperty(m,l,f,v),this._update(!0)}getLayoutProperty(m,l){return this.style.getLayoutProperty(m,l)}setLight(m,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(p.LngLat.convert(m),this.transform):0}setFeatureState(m,l){return this.style.setFeatureState(m,l),this._update()}removeFeatureState(m,l){return this.style.removeFeatureState(m,l),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let f,v,b,w=this._container;for(;w&&(!v||!b);){const D=p.window.getComputedStyle(w).transform;D&&"none"!==D&&(f=D.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&"0"!==f[0]&&"1"!==f[0]&&(v=f[0]),f[3]&&"0"!==f[3]&&"1"!==f[3]&&(b=f[3])),w=w.parentElement}this._containerWidth=v?Math.abs(m/v):m,this._containerHeight=b?Math.abs(l/b):l}_detectMissingCSS(){"rgb(250, 128, 114)"!==p.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&p.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=m1("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=m1("div","mapboxgl-canvas-container",m);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=m1("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=m1("div","mapboxgl-control-container",m),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{v[b]=m1("div",`mapboxgl-ctrl-${b}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,l){const f=p.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(m),this._canvas.height=f*Math.ceil(l),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${l}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const l=this._markers.indexOf(m);-1!==l&&this._markers.splice(l,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const l=this._popups.indexOf(m);-1!==l&&this._popups.splice(l,1)}_setupPainter(){const m=p.extend({},nr.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",m),f=l||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);f?(this._useWebGL2&&!l&&p.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),p.storeAuthState(f,!0),this.painter=new Hi(f,this.transform,!!l),this.on("data",v=>{"source"===v.dataType&&this.painter.setTileLoadedFlag(!0)}),p.exported$1.testSupport(f)):this.fire(new p.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new p.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new p.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let l;const f=this.painter.context.extTimerQuery,v=p.exported.now();if(this.listens("gpu-timing-frame")&&(l=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],p.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],p.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,L=this.transform.pitch,P=p.exported.now(),R=new p.EvaluationParameters(A,{now:P,fadeDuration:b,pitch:L,transition:this.style.getTransition()});this.style.update(R)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(v),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(v),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new p.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new p.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const A=p.exported.now()-v;f.endQueryEXT(f.TIME_ELAPSED_EXT,l),setTimeout(()=>{const L=f.getQueryObjectEXT(l,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(l),this.fire(new p.Event("gpu-timing-frame",{cpuTime:A,gpuTime:L})),p.window.performance.mark("frame-gpu",{startTime:v,detail:{gpuTime:L}})},50)}if(this.listens("gpu-timing-layer")){const A=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(A);this.fire(new p.Event("gpu-timing-layer",{layerTimes:L}))},50)}if(this.listens("gpu-timing-deferred-render")){const A=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const L=this.painter.queryGpuTimeDeferredRender(A);this.fire(new p.Event("gpu-timing-deferred-render",{gpuTime:L}))},50)}const D=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(D||this._repaint)this.triggerRepaint();else{const A=!this.isMoving()&&this.loaded();if(A&&(w=this._updateAverageElevation(v,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),A&&(this.fire(new p.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const L=this._calculateSpeedIndex();this.fire(new p.Event("speedindexcompleted",{speedIndex:L})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,p.LivePerformanceUtils.mark(p.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&p.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const l of this._markers)m&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!m||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(m,l=!1){const f=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&f(0);if((l||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const v=this.transform.averageElevation;let b=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=m;const D=Math.abs(v-b);if(D>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(b),f(b);this._averageElevation.easeTo(b,m,300)}else if(D>1e-4)return this._averageElevation.jumpTo(b),f(b)}return!!this._averageElevation.isEasing(m)&&f(this._averageElevation.getValue(m))}_authenticate(){p.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===p.AUTH_ERR_MSG||401===m.status)){const l=this.painter.context.gl;p.storeAuthState(l,!1),this._logoControl instanceof Ii&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new p.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),p.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const f=this.painter.context.gl,v=f.createFramebuffer();function b(w){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,w,0);const D=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,D),D}return f.bindFramebuffer(f.FRAMEBUFFER,v),this._canvasPixelComparison(b(m),l.canvasCopies.map(b),l.timeStamps)}_canvasPixelComparison(m,l,f){let v=f[1]-f[0];const b=m.length/4;for(let w=0;w<l.length;w++){const D=l[w];let A=0;for(let L=0;L<D.length;L+=4)D[L]===m[L]&&D[L+1]===m[L+1]&&D[L+2]===m[L+2]&&D[L+3]===m[L+3]&&(A+=1);v+=(f[w+2]-f[w+1])*(1-A/b)}return v}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==p.window&&(p.window.removeEventListener("resize",this._onWindowResize,!1),p.window.removeEventListener("orientationchange",this._onWindowResize,!1),p.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.removeEventListener("online",this._onWindowOnline,!1),p.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),p.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new p.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=p.exported.frame(l=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(l)}))}_preloadTiles(m){const l=this.style?Object.values(this.style._sourceCaches):[];return p.asyncAll(l,(f,v)=>f._preloadTiles(m,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){"hidden"===p.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,l){p.setCacheLimits(m,l)}get version(){return p.version}},NavigationControl:class{constructor(m){this.options=p.extend({},R4,m),this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(p.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),m1("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),m1("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(p.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:l}):f.resetNorth({},{originalEvent:l}))}),this._compassIcon=m1("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const l=m.getZoom(),f=l===m.getMaxZoom(),v=l===m.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hc(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,l){const f=m1("button",m,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(m,l){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${l}`);m.setAttribute("aria-label",f),m.firstElementChild&&m.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends p.Evented{constructor(m){super(),this.options=p.extend({geolocation:p.window.navigator.geolocation},Xa,m),p.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ki(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const l=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,m(f)};void 0!==this._supportsGeolocation?m(this._supportsGeolocation):void 0!==p.window.navigator.permissions?p.window.navigator.permissions.query({name:"geolocation"}).then(f=>l("denied"!==f.state)).catch(()=>l()):l()}_isOutOfMapMaxBounds(m){const l=this._map.getMaxBounds(),f=m.coords;return!!l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new p.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(m),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("geolocate",m)),this._finish()}}_updateCamera(m){const l=new p.LngLat(m.coords.longitude,m.coords.latitude),f=m.coords.accuracy,v=this._map.getBearing(),b=p.extend({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),b,{geolocateSource:!0})}_updateMarker(m){if(m){const l=new p.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,l=p.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,f=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(1===m.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===m.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=m1("button","mapboxgl-ctrl-geolocate",this._container),m1("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===m){p.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=m1("div","mapboxgl-user-location"),this._dotElement.appendChild(m1("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(m1("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new t3({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=m1("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new t3({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||"ACTIVE_LOCK"!==this._watchState||l.originalEvent&&"resize"===l.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new p.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:!0===m.absolute&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return p.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new p.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new p.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new p.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{p.window.addEventListener("ondeviceorientationabsolute"in p.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==p.window.DeviceMotionEvent&&"function"==typeof p.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(l=>{"granted"===l&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),p.window.removeEventListener("deviceorientation",this._onDeviceOrientation),p.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Di,ScaleControl:class{constructor(m){this.options=p.extend({},C6,m),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=t0.bind(this)),p.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,l=this._map,f=l._containerHeight/2,v=l._containerWidth/2-m/2,b=l.unproject([v,f]),w=l.unproject([v+m,f]),D=b.distanceTo(w);if("imperial"===this.options.unit){const A=3.2808*D;A>5280?this._setScale(m,A/5280,"mile"):this._setScale(m,A,"foot")}else"nautical"===this.options.unit?this._setScale(m,D/1852,"nautical-mile"):D>=1e3?this._setScale(m,D/1e3,"kilometer"):this._setScale(m,D,"meter")}_setScale(m,l,f){const v=P4(l),b=v/l;this._map._requestDomTask(()=>{this._container.style.width=m*b+"px",this._container.innerHTML="nautical-mile"!==f?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(v):`${v}&nbsp;nm`})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=m1("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof p.window.HTMLElement?this._container=m.container:p.warnOnce("Full screen control 'container' must be a DOM element.")),p.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in p.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in p.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=m1("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",p.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,p.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!p.window.document.fullscreenEnabled&&!p.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=m1("button","mapboxgl-ctrl-fullscreen",this._controlContainer);m1("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),p.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(p.window.document.fullscreenElement||p.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?p.window.document.exitFullscreen?p.window.document.exitFullscreen():p.window.document.webkitCancelFullScreen&&p.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends p.Evented{constructor(m){super(),this.options=p.extend(Object.create(I4),m),p.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new p.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new p.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=p.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(p.window.document.createTextNode(m))}setHTML(m){const l=p.window.document.createDocumentFragment(),f=p.window.document.createElement("body");let v;for(f.innerHTML=m;v=f.firstChild,v;)l.appendChild(v);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=m1("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(m),this.options.closeButton){const f=this._closeButton=m1("button","mapboxgl-popup-close-button",l);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let l;return this._classList.delete(m)?l=!1:(this._classList.add(m),l=!0),this._updateClassList(),l}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const l=this._map,f=this._container,v=this._pos;if(!l||!f||!v)return"bottom";const b=f.offsetWidth,w=f.offsetHeight,D=v.x<b/2,A=v.x>l.transform.width-b/2;if(v.y+m<w)return D?"top-left":A?"top-right":"top";if(v.y>l.transform.height-w){if(D)return"bottom-left";if(A)return"bottom-right"}return D?"left":A?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),m.className=l.join(" ")}_update(m){const l=this._map,f=this._content;if(!l||!this._lngLat&&!this._trackPointer||!f)return;let v=this._container;if(v||(v=this._container=m1("div","mapboxgl-popup",l.getContainer()),this._tip=m1("div","mapboxgl-popup-tip",v),v.appendChild(f)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gs(this._lngLat,this._pos,l.transform)),!this._trackPointer||m){const b=this._pos=this._trackPointer&&m?m:l.project(this._lngLat),w=x6(this.options.offset),D=this._anchor=this._getAnchor(w.y),A=x6(this.options.offset,D),L=b.add(A).round();l._requestDomTask(()=>{this._container&&D&&(this._container.style.transform=`${G2[D]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&l._showingGlobe()){const b=p.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(b6);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:t3,Style:w2,LngLat:p.LngLat,LngLatBounds:p.LngLatBounds,Point:p.pointGeometry,MercatorCoordinate:p.MercatorCoordinate,FreeCameraOptions:T,Evented:p.Evented,config:p.config,prewarm:function(){Ht().acquire(Tt)},clearPrewarmedResources:function(){const m=Rt;m&&(m.isPreloaded()&&1===m.numActive()?(m.release(Tt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return p.config.ACCESS_TOKEN},set accessToken(m){p.config.ACCESS_TOKEN=m},get baseApiUrl(){return p.config.API_URL},set baseApiUrl(m){p.config.API_URL=m},get workerCount(){return At.workerCount},set workerCount(m){At.workerCount=m},get maxParallelImageRequests(){return p.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){p.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){p.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:p.exported.setNow,restoreNow:p.exported.restoreNow};return N3}),S1}()},226:function($l){$l.exports=function(){"use strict";var C1={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const S1=T=>{const k={};for(const $ in T)k[T[$]]="swal2-"+T[$];return k},Qe=S1(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Us=S1(["success","warning","info","question","error"]),p="SweetAlert2:",nr=T=>T.charAt(0).toUpperCase()+T.slice(1),$n=T=>{console.warn(`${p} ${"object"==typeof T?T.join(" "):T}`)},s1=T=>{console.error(`${p} ${T}`)},m1=[],$i=(T,k)=>{(T=>{m1.includes(T)||(m1.push(T),$n(T))})(`"${T}" is deprecated and will be removed in the next major release. Please use "${k}" instead.`)},qi=T=>"function"==typeof T?T():T,Mo=T=>T&&"function"==typeof T.toPromise,da=T=>Mo(T)?T.toPromise():Promise.resolve(T),P2=T=>T&&Promise.resolve(T)===T,Zn=()=>document.body.querySelector(`.${Qe.container}`),Wi=T=>{const k=Zn();return k?k.querySelector(T):null},pt=T=>Wi(`.${T}`),$1=()=>pt(Qe.popup),Sr=()=>pt(Qe.icon),F1=()=>pt(Qe.title),ni=()=>pt(Qe["html-container"]),qr=()=>pt(Qe.image),fa=()=>pt(Qe["progress-steps"]),La=()=>pt(Qe["validation-message"]),s2=()=>Wi(`.${Qe.actions} .${Qe.confirm}`),f1=()=>Wi(`.${Qe.actions} .${Qe.cancel}`),c2=()=>Wi(`.${Qe.actions} .${Qe.deny}`),Dr=()=>Wi(`.${Qe.loader}`),F2=()=>pt(Qe.actions),c1=()=>pt(Qe.footer),ir=()=>pt(Qe["timer-progress-bar"]),Ta=()=>pt(Qe.close),rr=()=>{const T=Array.from($1().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort(($,ge)=>{const Je=parseInt($.getAttribute("tabindex")),Zt=parseInt(ge.getAttribute("tabindex"));return Je>Zt?1:Je<Zt?-1:0}),k=Array.from($1().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter($=>"-1"!==$.getAttribute("tabindex"));return(T=>{const k=[];for(let $=0;$<T.length;$++)-1===k.indexOf(T[$])&&k.push(T[$]);return k})(T.concat(k)).filter($=>Li($))},Yt=()=>ii(document.body,Qe.shown)&&!ii(document.body,Qe["toast-shown"])&&!ii(document.body,Qe["no-backdrop"]),ar=()=>$1()&&ii($1(),Qe.toast),X1={previousBodyPadding:null},V1=(T,k)=>{if(T.textContent="",k){const ge=(new DOMParser).parseFromString(k,"text/html");Array.from(ge.querySelector("head").childNodes).forEach(Je=>{T.appendChild(Je)}),Array.from(ge.querySelector("body").childNodes).forEach(Je=>{Je instanceof HTMLVideoElement||Je instanceof HTMLAudioElement?T.appendChild(Je.cloneNode(!0)):T.appendChild(Je)})}},ii=(T,k)=>{if(!k)return!1;const $=k.split(/\s+/);for(let ge=0;ge<$.length;ge++)if(!T.classList.contains($[ge]))return!1;return!0},tn=(T,k,$)=>{if(((T,k)=>{Array.from(T.classList).forEach($=>{!Object.values(Qe).includes($)&&!Object.values(Us).includes($)&&!Object.values(k.showClass).includes($)&&T.classList.remove($)})})(T,k),k.customClass&&k.customClass[$]){if("string"!=typeof k.customClass[$]&&!k.customClass[$].forEach)return void $n(`Invalid type of customClass.${$}! Expected string or iterable object, got "${typeof k.customClass[$]}"`);q1(T,k.customClass[$])}},or=(T,k)=>{if(!k)return null;switch(k){case"select":case"textarea":case"file":return T.querySelector(`.${Qe.popup} > .${Qe[k]}`);case"checkbox":return T.querySelector(`.${Qe.popup} > .${Qe.checkbox} input`);case"radio":return T.querySelector(`.${Qe.popup} > .${Qe.radio} input:checked`)||T.querySelector(`.${Qe.popup} > .${Qe.radio} input:first-child`);case"range":return T.querySelector(`.${Qe.popup} > .${Qe.range} input`);default:return T.querySelector(`.${Qe.popup} > .${Qe.input}`)}},K1=T=>{if(T.focus(),"file"!==T.type){const k=T.value;T.value="",T.value=k}},Er=(T,k,$)=>{!T||!k||("string"==typeof k&&(k=k.split(/\s+/).filter(Boolean)),k.forEach(ge=>{Array.isArray(T)?T.forEach(Je=>{$?Je.classList.add(ge):Je.classList.remove(ge)}):$?T.classList.add(ge):T.classList.remove(ge)}))},q1=(T,k)=>{Er(T,k,!0)},N2=(T,k)=>{Er(T,k,!1)},l2=(T,k)=>{const $=Array.from(T.children);for(let ge=0;ge<$.length;ge++){const Je=$[ge];if(Je instanceof HTMLElement&&ii(Je,k))return Je}},ha=(T,k,$)=>{$===`${parseInt($)}`&&($=parseInt($)),$||0===parseInt($)?T.style[k]="number"==typeof $?`${$}px`:$:T.style.removeProperty(k)},Kn=function(T){T.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},li=T=>{T.style.display="none"},Vr=(T,k,$,ge)=>{const Je=T.querySelector(k);Je&&(Je.style[$]=ge)},O2=function(T,k){k?Kn(T,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):li(T)},Li=T=>!(!T||!(T.offsetWidth||T.offsetHeight||T.getClientRects().length)),js=T=>T.scrollHeight>T.clientHeight,Zr=T=>{const k=window.getComputedStyle(T),$=parseFloat(k.getPropertyValue("animation-duration")||"0"),ge=parseFloat(k.getPropertyValue("transition-duration")||"0");return $>0||ge>0},Ha=function(T){let k=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const $=ir();Li($)&&(k&&($.style.transition="none",$.style.width="100%"),setTimeout(()=>{$.style.transition=`width ${T/1e3}s linear`,$.style.width="0%"},10))},p1={},ka=T=>new Promise(k=>{if(!T)return k();const $=window.scrollX,ge=window.scrollY;p1.restoreFocusTimeout=setTimeout(()=>{p1.previousActiveElement instanceof HTMLElement?(p1.previousActiveElement.focus(),p1.previousActiveElement=null):document.body&&document.body.focus(),k()},100),window.scrollTo($,ge)}),Do=()=>typeof window>"u"||typeof document>"u",qs=`\n <div aria-labelledby="${Qe.title}" aria-describedby="${Qe["html-container"]}" class="${Qe.popup}" tabindex="-1">\n   <button type="button" class="${Qe.close}"></button>\n   <ul class="${Qe["progress-steps"]}"></ul>\n   <div class="${Qe.icon}"></div>\n   <img class="${Qe.image}" />\n   <h2 class="${Qe.title}" id="${Qe.title}"></h2>\n   <div class="${Qe["html-container"]}" id="${Qe["html-container"]}"></div>\n   <input class="${Qe.input}" />\n   <input type="file" class="${Qe.file}" />\n   <div class="${Qe.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${Qe.select}"></select>\n   <div class="${Qe.radio}"></div>\n   <label for="${Qe.checkbox}" class="${Qe.checkbox}">\n     <input type="checkbox" />\n     <span class="${Qe.label}"></span>\n   </label>\n   <textarea class="${Qe.textarea}"></textarea>\n   <div class="${Qe["validation-message"]}" id="${Qe["validation-message"]}"></div>\n   <div class="${Qe.actions}">\n     <div class="${Qe.loader}"></div>\n     <button type="button" class="${Qe.confirm}"></button>\n     <button type="button" class="${Qe.deny}"></button>\n     <button type="button" class="${Qe.cancel}"></button>\n   </div>\n   <div class="${Qe.footer}"></div>\n   <div class="${Qe["timer-progress-bar-container"]}">\n     <div class="${Qe["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),sr=()=>{p1.currentInstance.resetValidationMessage()},es=T=>{const k=(()=>{const T=Zn();return!!T&&(T.remove(),N2([document.documentElement,document.body],[Qe["no-backdrop"],Qe["toast-shown"],Qe["has-column"]]),!0)})();if(Do())return void s1("SweetAlert2 requires document to initialize");const $=document.createElement("div");$.className=Qe.container,k&&q1($,Qe["no-transition"]),V1($,qs);const ge=(T=>"string"==typeof T?document.querySelector(T):T)(T.target);ge.appendChild($),(T=>{const k=$1();k.setAttribute("role",T.toast?"alert":"dialog"),k.setAttribute("aria-live",T.toast?"polite":"assertive"),T.toast||k.setAttribute("aria-modal","true")})(T),(T=>{"rtl"===window.getComputedStyle(T).direction&&q1(Zn(),Qe.rtl)})(ge),(()=>{const T=$1(),k=l2(T,Qe.input),$=l2(T,Qe.file),ge=T.querySelector(`.${Qe.range} input`),Je=T.querySelector(`.${Qe.range} output`),Zt=l2(T,Qe.select),An=T.querySelector(`.${Qe.checkbox} input`),Xi=l2(T,Qe.textarea);k.oninput=sr,$.onchange=sr,Zt.onchange=sr,An.onchange=sr,Xi.oninput=sr,ge.oninput=()=>{sr(),Je.value=ge.value},ge.onchange=()=>{sr(),Je.value=ge.value}})()},Ia=(T,k)=>{T instanceof HTMLElement?k.appendChild(T):"object"==typeof T?Zs(T,k):T&&V1(k,T)},Zs=(T,k)=>{T.jquery?Ao(k,T):V1(k,T.toString())},Ao=(T,k)=>{if(T.textContent="",0 in k)for(let $=0;$ in k;$++)T.appendChild(k[$].cloneNode(!0));else T.appendChild(k.cloneNode(!0))},cr=(()=>{if(Do())return!1;const T=document.createElement("div"),k={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const $ in k)if(Object.prototype.hasOwnProperty.call(k,$)&&typeof T.style[$]<"u")return k[$];return!1})(),Ra=(T,k)=>{const $=F2(),ge=Dr();k.showConfirmButton||k.showDenyButton||k.showCancelButton?Kn($):li($),tn($,k,"actions"),function Ys(T,k,$){const ge=s2(),Je=c2(),Zt=f1();ie(ge,"confirm",$),ie(Je,"deny",$),ie(Zt,"cancel",$),function Pa(T,k,$,ge){ge.buttonsStyling?(q1([T,k,$],Qe.styled),ge.confirmButtonColor&&(T.style.backgroundColor=ge.confirmButtonColor,q1(T,Qe["default-outline"])),ge.denyButtonColor&&(k.style.backgroundColor=ge.denyButtonColor,q1(k,Qe["default-outline"])),ge.cancelButtonColor&&($.style.backgroundColor=ge.cancelButtonColor,q1($,Qe["default-outline"]))):N2([T,k,$],Qe.styled)}(ge,Je,Zt,$),$.reverseButtons&&($.toast?(T.insertBefore(Zt,ge),T.insertBefore(Je,ge)):(T.insertBefore(Zt,k),T.insertBefore(Je,k),T.insertBefore(ge,k)))}($,ge,k),V1(ge,k.loaderHtml),tn(ge,k,"loader")};function ie(T,k,$){O2(T,$[`show${nr(k)}Button`],"inline-block"),V1(T,$[`${k}ButtonText`]),T.setAttribute("aria-label",$[`${k}ButtonAriaLabel`]),T.className=Qe[k],tn(T,$,`${k}Button`),q1(T,$[`${k}ButtonClass`])}const G=(T,k)=>{const $=Zn();$&&(function ne(T,k){"string"==typeof k?T.style.background=k:k||q1([document.documentElement,document.body],Qe["no-backdrop"])}($,k.backdrop),function fe(T,k){k in Qe?q1(T,Qe[k]):($n('The "position" parameter is not valid, defaulting to "center"'),q1(T,Qe.center))}($,k.position),function xe(T,k){if(k&&"string"==typeof k){const $=`grow-${k}`;$ in Qe&&q1(T,Qe[$])}}($,k.grow),tn($,k,"container"))};const Ae=["input","file","range","select","radio","checkbox","textarea"],we=T=>{if(!Ht[T.input])return void s1(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${T.input}"`);const k=At(T.input),$=Ht[T.input](k,T);Kn(k),T.inputAutoFocus&&setTimeout(()=>{K1($)})},it=(T,k)=>{const $=or($1(),T);if($){(T=>{for(let k=0;k<T.attributes.length;k++){const $=T.attributes[k].name;["type","value","style"].includes($)||T.removeAttribute($)}})($);for(const ge in k)$.setAttribute(ge,k[ge])}},Mt=T=>{const k=At(T.input);"object"==typeof T.customClass&&q1(k,T.customClass.input)},tt=(T,k)=>{(!T.placeholder||k.inputPlaceholder)&&(T.placeholder=k.inputPlaceholder)},Tt=(T,k,$)=>{if($.inputLabel){T.id=Qe.input;const ge=document.createElement("label"),Je=Qe["input-label"];ge.setAttribute("for",T.id),ge.className=Je,"object"==typeof $.customClass&&q1(ge,$.customClass.inputLabel),ge.innerText=$.inputLabel,k.insertAdjacentElement("beforebegin",ge)}},At=T=>l2($1(),Qe[T]||Qe.input),Rt=(T,k)=>{["string","number"].includes(typeof k)?T.value=`${k}`:P2(k)||$n(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof k}"`)},Ht={};Ht.text=Ht.email=Ht.password=Ht.number=Ht.tel=Ht.url=(T,k)=>(Rt(T,k.inputValue),Tt(T,T,k),tt(T,k),T.type=k.input,T),Ht.file=(T,k)=>(Tt(T,T,k),tt(T,k),T),Ht.range=(T,k)=>{const $=T.querySelector("input"),ge=T.querySelector("output");return Rt($,k.inputValue),$.type=k.input,Rt(ge,k.inputValue),Tt($,T,k),T},Ht.select=(T,k)=>{if(T.textContent="",k.inputPlaceholder){const $=document.createElement("option");V1($,k.inputPlaceholder),$.value="",$.disabled=!0,$.selected=!0,T.appendChild($)}return Tt(T,T,k),T},Ht.radio=T=>(T.textContent="",T),Ht.checkbox=(T,k)=>{const $=or($1(),"checkbox");$.value="1",$.id=Qe.checkbox,$.checked=Boolean(k.inputValue);const ge=T.querySelector("span");return V1(ge,k.inputPlaceholder),$},Ht.textarea=(T,k)=>{Rt(T,k.inputValue),tt(T,k),Tt(T,T,k);return setTimeout(()=>{if("MutationObserver"in window){const ge=parseInt(window.getComputedStyle($1()).width);new MutationObserver(()=>{const Zt=T.offsetWidth+(ge=>parseInt(window.getComputedStyle(ge).marginLeft)+parseInt(window.getComputedStyle(ge).marginRight))(T);$1().style.width=Zt>ge?`${Zt}px`:null}).observe(T,{attributes:!0,attributeFilter:["style"]})}}),T};const b1=(T,k)=>{const $=ni();tn($,k,"htmlContainer"),k.html?(Ia(k.html,$),Kn($,"block")):k.text?($.textContent=k.text,Kn($,"block")):li($),((T,k)=>{const $=$1(),ge=C1.innerParams.get(T),Je=!ge||k.input!==ge.input;Ae.forEach(Zt=>{const An=l2($,Qe[Zt]);it(Zt,k.inputAttributes),An.className=Qe[Zt],Je&&li(An)}),k.input&&(Je&&we(k),Mt(k))})(T,k)},nn=(T,k)=>{for(const $ in Us)k.icon!==$&&N2(T,Us[$]);q1(T,Us[k.icon]),ma(T,k),Cn(),tn(T,k,"icon")},Cn=()=>{const T=$1(),k=window.getComputedStyle(T).getPropertyValue("background-color"),$=T.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ge=0;ge<$.length;ge++)$[ge].style.backgroundColor=k},qe=(T,k)=>{let ge,$=T.innerHTML;k.iconHtml?ge=Qn(k.iconHtml):"success"===k.icon?(ge='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',$=$.replace(/ style=".*?"/g,"")):ge="error"===k.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Qn({question:"?",warning:"!",info:"i"}[k.icon]),$.trim()!==ge.trim()&&V1(T,ge)},ma=(T,k)=>{if(k.iconColor){T.style.color=k.iconColor,T.style.borderColor=k.iconColor;for(const $ of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Vr(T,$,"backgroundColor",k.iconColor);Vr(T,".swal2-success-ring","borderColor",k.iconColor)}},Qn=T=>`<div class="${Qe["icon-content"]}">${T}</div>`,Kr=(T,k)=>{T.className=`${Qe.popup} ${Li(T)?k.showClass.popup:""}`,k.toast?(q1([document.documentElement,document.body],Qe["toast-shown"]),q1(T,Qe.toast)):q1(T,Qe.modal),tn(T,k,"popup"),"string"==typeof k.customClass&&q1(T,k.customClass),k.icon&&q1(T,Qe[`icon-${k.icon}`])},Jn=T=>{const k=document.createElement("li");return q1(k,Qe["progress-step"]),V1(k,T),k},Ci=T=>{const k=document.createElement("li");return q1(k,Qe["progress-step-line"]),T.progressStepsDistance&&ha(k,"width",T.progressStepsDistance),k},D1=(T,k)=>{((T,k)=>{const $=Zn(),ge=$1();k.toast?(ha($,"width",k.width),ge.style.width="100%",ge.insertBefore(Dr(),Sr())):ha(ge,"width",k.width),ha(ge,"padding",k.padding),k.color&&(ge.style.color=k.color),k.background&&(ge.style.background=k.background),li(La()),Kr(ge,k)})(0,k),G(0,k),((T,k)=>{const $=fa();k.progressSteps&&0!==k.progressSteps.length?(Kn($),$.textContent="",k.currentProgressStep>=k.progressSteps.length&&$n("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),k.progressSteps.forEach((ge,Je)=>{const Zt=Jn(ge);if($.appendChild(Zt),Je===k.currentProgressStep&&q1(Zt,Qe["active-progress-step"]),Je!==k.progressSteps.length-1){const An=Ci(k);$.appendChild(An)}})):li($)})(0,k),((T,k)=>{const $=C1.innerParams.get(T),ge=Sr();$&&k.icon===$.icon?(qe(ge,k),nn(ge,k)):k.icon||k.iconHtml?k.icon&&-1===Object.keys(Us).indexOf(k.icon)?(s1(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${k.icon}"`),li(ge)):(Kn(ge),qe(ge,k),nn(ge,k),q1(ge,k.showClass.icon)):li(ge)})(T,k),((T,k)=>{const $=qr();k.imageUrl?(Kn($,""),$.setAttribute("src",k.imageUrl),$.setAttribute("alt",k.imageAlt),ha($,"width",k.imageWidth),ha($,"height",k.imageHeight),$.className=Qe.image,tn($,k,"image")):li($)})(0,k),((T,k)=>{const $=F1();O2($,k.title||k.titleText,"block"),k.title&&Ia(k.title,$),k.titleText&&($.innerText=k.titleText),tn($,k,"title")})(0,k),((T,k)=>{const $=Ta();V1($,k.closeButtonHtml),tn($,k,"closeButton"),O2($,k.showCloseButton),$.setAttribute("aria-label",k.closeButtonAriaLabel)})(0,k),b1(T,k),Ra(0,k),((T,k)=>{const $=c1();O2($,k.footer),k.footer&&Ia(k.footer,$),tn($,k,"footer")})(0,k),"function"==typeof k.didRender&&k.didRender($1())};function It(){const T=C1.innerParams.get(this);if(!T)return;const k=C1.domCache.get(this);li(k.loader),ar()?T.icon&&Kn(Sr()):lr(k),N2([k.popup,k.actions],Qe.loading),k.popup.removeAttribute("aria-busy"),k.popup.removeAttribute("data-loading"),k.confirmButton.disabled=!1,k.denyButton.disabled=!1,k.cancelButton.disabled=!1}const lr=T=>{const k=T.popup.getElementsByClassName(T.loader.getAttribute("data-button-to-replace"));k.length?Kn(k[0],"inline-block"):!Li(s2())&&!Li(c2())&&!Li(f1())&&li(T.actions)};const ns=()=>s2()&&s2().click(),ei=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),yn=T=>{T.keydownTarget&&T.keydownHandlerAdded&&(T.keydownTarget.removeEventListener("keydown",T.keydownHandler,{capture:T.keydownListenerCapture}),T.keydownHandlerAdded=!1)},hi=(T,k)=>{const $=rr();if($.length)return(T+=k)===$.length?T=0:-1===T&&(T=$.length-1),void $[T].focus();$1().focus()},rt=["ArrowRight","ArrowDown"],Qr=["ArrowLeft","ArrowUp"],x1=(T,k,$)=>{const ge=C1.innerParams.get(T);ge&&(k.isComposing||229===k.keyCode||(ge.stopKeydownPropagation&&k.stopPropagation(),"Enter"===k.key?pn(T,k,ge):"Tab"===k.key?Xs(k):[...rt,...Qr].includes(k.key)?is(k.key):"Escape"===k.key&&rs(k,ge,$)))},pn=(T,k,$)=>{if(qi($.allowEnterKey)&&k.target&&T.getInput()&&k.target instanceof HTMLElement&&k.target.outerHTML===T.getInput().outerHTML){if(["textarea","file"].includes($.input))return;ns(),k.preventDefault()}},Xs=T=>{const k=T.target,$=rr();let ge=-1;for(let Je=0;Je<$.length;Je++)if(k===$[Je]){ge=Je;break}hi(ge,T.shiftKey?-1:1),T.stopPropagation(),T.preventDefault()},is=T=>{const k=s2(),$=c2(),ge=f1();if(document.activeElement instanceof HTMLElement&&![k,$,ge].includes(document.activeElement))return;const Zt=rt.includes(T)?"nextElementSibling":"previousElementSibling";let An=document.activeElement;for(let Xi=0;Xi<F2().children.length;Xi++){if(An=An[Zt],!An)return;if(An instanceof HTMLButtonElement&&Li(An))break}An instanceof HTMLButtonElement&&An.focus()},rs=(T,k,$)=>{qi(k.allowEscapeKey)&&(T.preventDefault(),$(ei.esc))};var Jr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ti=()=>{Array.from(document.body.children).forEach(k=>{k.hasAttribute("data-previous-aria-hidden")?(k.setAttribute("aria-hidden",k.getAttribute("data-previous-aria-hidden")),k.removeAttribute("data-previous-aria-hidden")):k.removeAttribute("aria-hidden")})},$c=()=>{const T=navigator.userAgent,k=!!T.match(/iPad/i)||!!T.match(/iPhone/i),$=!!T.match(/WebKit/i);k&&$&&!T.match(/CriOS/i)&&$1().scrollHeight>window.innerHeight-44&&(Zn().style.paddingBottom="44px")},ri=()=>{const T=Zn();let k;T.ontouchstart=$=>{k=C2($)},T.ontouchmove=$=>{k&&($.preventDefault(),$.stopPropagation())}},C2=T=>{const k=T.target,$=Zn();return!Wl(T)&&!z3(T)&&(k===$||!js($)&&k instanceof HTMLElement&&"INPUT"!==k.tagName&&"TEXTAREA"!==k.tagName&&!(js(ni())&&ni().contains(k)))},Wl=T=>T.touches&&T.touches.length&&"stylus"===T.touches[0].touchType,z3=T=>T.touches&&T.touches.length>1,pi=()=>{if(ii(document.body,Qe.iosfix)){const T=parseInt(document.body.style.top,10);N2(document.body,Qe.iosfix),document.body.style.top="",document.body.scrollTop=-1*T}},Ks=()=>{null===X1.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(X1.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${X1.previousBodyPadding+(()=>{const T=document.createElement("div");T.className=Qe["scrollbar-measure"],document.body.appendChild(T);const k=T.getBoundingClientRect().width-T.clientWidth;return document.body.removeChild(T),k})()}px`)},b4=()=>{null!==X1.previousBodyPadding&&(document.body.style.paddingRight=`${X1.previousBodyPadding}px`,X1.previousBodyPadding=null)};function as(T,k,$,ge){ar()?os(T,ge):(ka($).then(()=>os(T,ge)),yn(p1)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(k.setAttribute("style","display:none !important"),k.removeAttribute("class"),k.innerHTML=""):k.remove(),Yt()&&(b4(),pi(),ti()),function Zi(){N2([document.documentElement,document.body],[Qe.shown,Qe["height-auto"],Qe["no-backdrop"],Qe["toast-shown"]])}()}function wi(T){T=at(T);const k=Jr.swalPromiseResolve.get(this),$=Na(this);this.isAwaitingPromise()?T.isDismissed||(Eo(this),k(T)):$&&k(T)}const Na=T=>{const k=$1();if(!k)return!1;const $=C1.innerParams.get(T);if(!$||ii(k,$.hideClass.popup))return!1;N2(k,$.showClass.popup),q1(k,$.hideClass.popup);const ge=Zn();return N2(ge,$.showClass.backdrop),q1(ge,$.hideClass.backdrop),x4(T,k,$),!0};const Eo=T=>{T.isAwaitingPromise()&&(C1.awaitingPromise.delete(T),C1.innerParams.get(T)||T._destroy())},at=T=>typeof T>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},T),x4=(T,k,$)=>{const ge=Zn(),Je=cr&&Zr(k);"function"==typeof $.willClose&&$.willClose(k),Je?l1(T,k,ge,$.returnFocus,$.didClose):as(T,ge,$.returnFocus,$.didClose)},l1=(T,k,$,ge,Je)=>{p1.swalCloseEventFinishedCallback=as.bind(null,T,$,ge,Je),k.addEventListener(cr,function(Zt){Zt.target===k&&(p1.swalCloseEventFinishedCallback(),delete p1.swalCloseEventFinishedCallback)})},os=(T,k)=>{setTimeout(()=>{"function"==typeof k&&k.bind(T.params)(),T._destroy()})};function ss(T,k,$){const ge=C1.domCache.get(T);k.forEach(Je=>{ge[Je].disabled=$})}function Oa(T,k){if(T)if("radio"===T.type){const ge=T.parentNode.parentNode.querySelectorAll("input");for(let Je=0;Je<ge.length;Je++)ge[Je].disabled=k}else T.disabled=k}const Qt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ls=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],w4={},M2=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Js=T=>Object.prototype.hasOwnProperty.call(Qt,T),us=T=>-1!==ls.indexOf(T),Tn=T=>w4[T],S3=T=>{Js(T)||$n(`Unknown parameter "${T}"`)},D3=T=>{M2.includes(T)&&$n(`The parameter "${T}" is incompatible with toasts`)},M4=T=>{Tn(T)&&$i(T,Tn(T))};const Ua=T=>{const k={};return Object.keys(T).forEach($=>{us($)?k[$]=T[$]:$n(`Invalid parameter to update: ${$}`)}),k};const ec=T=>{ds(T),delete T.params,delete p1.keydownHandler,delete p1.keydownTarget,delete p1.currentInstance},ds=T=>{T.isAwaitingPromise()?(Vo(C1,T),C1.awaitingPromise.set(T,!0)):(Vo(Jr,T),Vo(C1,T))},Vo=(T,k)=>{for(const $ in T)T[$].delete(k)};var ga=Object.freeze({__proto__:null,_destroy:function A3(){const T=C1.domCache.get(this),k=C1.innerParams.get(this);k?(T.popup&&p1.swalCloseEventFinishedCallback&&(p1.swalCloseEventFinishedCallback(),delete p1.swalCloseEventFinishedCallback),"function"==typeof k.didDestroy&&k.didDestroy(),ec(this)):ds(this)},close:wi,closeModal:wi,closePopup:wi,closeToast:wi,disableButtons:function Qs(){ss(this,["confirmButton","denyButton","cancelButton"],!0)},disableInput:function w2(){Oa(this.getInput(),!0)},disableLoading:It,enableButtons:function Ba(){ss(this,["confirmButton","denyButton","cancelButton"],!1)},enableInput:function Tr(){Oa(this.getInput(),!1)},getInput:function vn(T){const k=C1.innerParams.get(T||this),$=C1.domCache.get(T||this);return $?or($.popup,k.input):null},handleAwaitingPromise:Eo,hideLoading:It,isAwaitingPromise:function on(){return!!C1.awaitingPromise.get(this)},rejectPromise:function qc(T){const k=Jr.swalPromiseReject.get(this);Eo(this),k&&k(T)},resetValidationMessage:function C4(){const T=C1.domCache.get(this);T.validationMessage&&li(T.validationMessage);const k=this.getInput();k&&(k.removeAttribute("aria-invalid"),k.removeAttribute("aria-describedby"),N2(k,Qe.inputerror))},showValidationMessage:function cs(T){const k=C1.domCache.get(this),$=C1.innerParams.get(this);V1(k.validationMessage,T),k.validationMessage.className=Qe["validation-message"],$.customClass&&$.customClass.validationMessage&&q1(k.validationMessage,$.customClass.validationMessage),Kn(k.validationMessage);const ge=this.getInput();ge&&(ge.setAttribute("aria-invalid",!0),ge.setAttribute("aria-describedby",Qe["validation-message"]),K1(ge),q1(ge,Qe.inputerror))},update:function an(T){const k=$1(),$=C1.innerParams.get(this);if(!k||ii(k,$.hideClass.popup))return void $n("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ge=Ua(T),Je=Object.assign({},$,ge);D1(this,Je),C1.innerParams.set(this,Je),Object.defineProperties(this,{params:{value:Object.assign({},this.params,T),writable:!1,enumerable:!0}})}});const B2=T=>{let k=$1();k||new Wa,k=$1();const $=Dr();ar()?li(Sr()):Wc(k,T),Kn($),k.setAttribute("data-loading","true"),k.setAttribute("aria-busy","true"),k.focus()},Wc=(T,k)=>{const $=F2(),ge=Dr();!k&&Li(s2())&&(k=s2()),Kn($),k&&(li(k),ge.setAttribute("data-button-to-replace",k.className)),ge.parentNode.insertBefore(ge,k),q1([T,$],Qe.loading)},r1=T=>T.checked?1:0,Lo=T=>T.checked?T.value:null,tc=T=>T.files.length?null!==T.getAttribute("multiple")?T.files:T.files[0]:null,N1=(T,k)=>{const $=$1(),ge=Je=>{z4[k.input]($,Zc(Je),k)};Mo(k.inputOptions)||P2(k.inputOptions)?(B2(s2()),da(k.inputOptions).then(Je=>{T.hideLoading(),ge(Je)})):"object"==typeof k.inputOptions?ge(k.inputOptions):s1("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof k.inputOptions)},nc=(T,k)=>{const $=T.getInput();li($),da(k.inputValue).then(ge=>{$.value="number"===k.input?`${parseFloat(ge)||0}`:`${ge}`,Kn($),$.focus(),T.hideLoading()}).catch(ge=>{s1(`Error in inputValue promise: ${ge}`),$.value="",Kn($),$.focus(),T.hideLoading()})},z4={select:(T,k,$)=>{const ge=l2(T,Qe.select),Je=(Zt,An,Xi)=>{const _t=document.createElement("option");_t.value=Xi,V1(_t,An),_t.selected=ur(Xi,$.inputValue),Zt.appendChild(_t)};k.forEach(Zt=>{const An=Zt[0],Xi=Zt[1];if(Array.isArray(Xi)){const _t=document.createElement("optgroup");_t.label=An,_t.disabled=!1,ge.appendChild(_t),Xi.forEach(Ki=>Je(_t,Ki[1],Ki[0]))}else Je(ge,Xi,An)}),ge.focus()},radio:(T,k,$)=>{const ge=l2(T,Qe.radio);k.forEach(Zt=>{const An=Zt[0],Xi=Zt[1],_t=document.createElement("input"),Ki=document.createElement("label");_t.type="radio",_t.name=Qe.radio,_t.value=An,ur(An,$.inputValue)&&(_t.checked=!0);const V3=document.createElement("span");V1(V3,Xi),V3.className=Qe.label,Ki.appendChild(_t),Ki.appendChild(V3),ge.appendChild(Ki)});const Je=ge.querySelectorAll("input");Je.length&&Je[0].focus()}},Zc=T=>{const k=[];return typeof Map<"u"&&T instanceof Map?T.forEach(($,ge)=>{let Je=$;"object"==typeof Je&&(Je=Zc(Je)),k.push([ge,Je])}):Object.keys(T).forEach($=>{let ge=T[$];"object"==typeof ge&&(ge=Zc(ge)),k.push([$,ge])}),k},ur=(T,k)=>k&&k.toString()===T.toString(),bn=(T,k)=>{const $=C1.innerParams.get(T);if(!$.input)return void s1(`The "input" parameter is needed to be set when using returnInputValueOn${nr(k)}`);const ge=((T,k)=>{const $=T.getInput();if(!$)return null;switch(k.input){case"checkbox":return r1($);case"radio":return Lo($);case"file":return tc($);default:return k.inputAutoTrim?$.value.trim():$.value}})(T,$);$.inputValidator?To(T,ge,k):T.getInput().checkValidity()?"deny"===k?Ho(T,ge):fr(T,ge):(T.enableButtons(),T.showValidationMessage($.validationMessage))},To=(T,k,$)=>{const ge=C1.innerParams.get(T);T.disableInput(),Promise.resolve().then(()=>da(ge.inputValidator(k,ge.validationMessage))).then(Zt=>{T.enableButtons(),T.enableInput(),Zt?T.showValidationMessage(Zt):"deny"===$?Ho(T,k):fr(T,k)})},Ho=(T,k)=>{const $=C1.innerParams.get(T||void 0);$.showLoaderOnDeny&&B2(c2()),$.preDeny?(C1.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>da($.preDeny(k,$.validationMessage))).then(Je=>{!1===Je?(T.hideLoading(),Eo(T)):T.close({isDenied:!0,value:typeof Je>"u"?k:Je})}).catch(Je=>fs(T||void 0,Je))):T.close({isDenied:!0,value:k})},ko=(T,k)=>{T.close({isConfirmed:!0,value:k})},fs=(T,k)=>{T.rejectPromise(k)},fr=(T,k)=>{const $=C1.innerParams.get(T||void 0);$.showLoaderOnConfirm&&B2(),$.preConfirm?(T.resetValidationMessage(),C1.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>da($.preConfirm(k,$.validationMessage))).then(Je=>{Li(La())||!1===Je?(T.hideLoading(),Eo(T)):ko(T,typeof Je>"u"?k:Je)}).catch(Je=>fs(T||void 0,Je))):ko(T,k)},Zl=(T,k,$)=>{k.popup.onclick=()=>{const ge=C1.innerParams.get(T);ge&&(Bt(ge)||ge.timer||ge.input)||$(ei.close)}},Bt=T=>T.showConfirmButton||T.showDenyButton||T.showCancelButton||T.showCloseButton;let ja=!1;const S4=T=>{T.popup.onmousedown=()=>{T.container.onmouseup=function(k){T.container.onmouseup=void 0,k.target===T.container&&(ja=!0)}}},ic=T=>{T.container.onmousedown=()=>{T.popup.onmouseup=function(k){T.popup.onmouseup=void 0,(k.target===T.popup||T.popup.contains(k.target))&&(ja=!0)}}},g1=(T,k,$)=>{k.container.onclick=ge=>{const Je=C1.innerParams.get(T);ja?ja=!1:ge.target===k.container&&qi(Je.allowOutsideClick)&&$(ei.backdrop)}},rc=T=>T instanceof Element||(T=>"object"==typeof T&&T.jquery)(T);const u2=()=>{if(p1.timeout)return(()=>{const T=ir(),k=parseInt(window.getComputedStyle(T).width);T.style.removeProperty("transition"),T.style.width="100%";const $=parseInt(window.getComputedStyle(T).width);T.style.width=k/$*100+"%"})(),p1.timeout.stop()},va=()=>{if(p1.timeout){const T=p1.timeout.start();return Ha(T),T}};let Io=!1;const kr={};const B1=T=>{for(let k=T.target;k&&k!==document;k=k.parentNode)for(const $ in kr){const ge=k.getAttribute($);if(ge)return void kr[$].fire({template:ge})}};var Hn=Object.freeze({__proto__:null,argsToParams:T=>{const k={};return"object"!=typeof T[0]||rc(T[0])?["title","html","icon"].forEach(($,ge)=>{const Je=T[ge];"string"==typeof Je||rc(Je)?k[$]=Je:void 0!==Je&&s1(`Unexpected type of ${$}! Expected "string" or "Element", got ${typeof Je}`)}):Object.assign(k,T[0]),k},bindClickHandler:function kt(){kr[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Io||(document.body.addEventListener("click",B1),Io=!0)},clickCancel:()=>f1()&&f1().click(),clickConfirm:ns,clickDeny:()=>c2()&&c2().click(),enableLoading:B2,fire:function Mi(){for(var k=arguments.length,$=new Array(k),ge=0;ge<k;ge++)$[ge]=arguments[ge];return new this(...$)},getActions:F2,getCancelButton:f1,getCloseButton:Ta,getConfirmButton:s2,getContainer:Zn,getDenyButton:c2,getFocusableElements:rr,getFooter:c1,getHtmlContainer:ni,getIcon:Sr,getIconContent:()=>pt(Qe["icon-content"]),getImage:qr,getInputLabel:()=>pt(Qe["input-label"]),getLoader:Dr,getPopup:$1,getProgressSteps:fa,getTimerLeft:()=>p1.timeout&&p1.timeout.getTimerLeft(),getTimerProgressBar:ir,getTitle:F1,getValidationMessage:La,increaseTimer:T=>{if(p1.timeout){const k=p1.timeout.increase(T);return Ha(k,!0),k}},isDeprecatedParameter:Tn,isLoading:()=>$1().hasAttribute("data-loading"),isTimerRunning:()=>p1.timeout&&p1.timeout.isRunning(),isUpdatableParameter:us,isValidParameter:Js,isVisible:()=>Li($1()),mixin:function xn(T){return class k extends(this){_main(ge,Je){return super._main(ge,Object.assign({},T,Je))}}},resumeTimer:va,showLoading:B2,stopTimer:u2,toggleTimer:()=>{const T=p1.timeout;return T&&(T.running?u2():va())}});class hr{constructor(k,$){this.callback=k,this.remaining=$,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(k){const $=this.running;return $&&this.stop(),this.remaining+=k,$&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const na=["swal-title","swal-html","swal-footer"],Ir=T=>{const k={};return Array.from(T.querySelectorAll("swal-param")).forEach(ge=>{S2(ge,["name","value"]);const Je=ge.getAttribute("name"),Zt=ge.getAttribute("value");k[Je]="boolean"==typeof Qt[Je]?"false"!==Zt:"object"==typeof Qt[Je]?JSON.parse(Zt):Zt}),k},ai=T=>{const k={};return Array.from(T.querySelectorAll("swal-function-param")).forEach(ge=>{const Je=ge.getAttribute("name"),Zt=ge.getAttribute("value");k[Je]=new Function(`return ${Zt}`)()}),k},ac=T=>{const k={};return Array.from(T.querySelectorAll("swal-button")).forEach(ge=>{S2(ge,["type","color","aria-label"]);const Je=ge.getAttribute("type");k[`${Je}ButtonText`]=ge.innerHTML,k[`show${nr(Je)}Button`]=!0,ge.hasAttribute("color")&&(k[`${Je}ButtonColor`]=ge.getAttribute("color")),ge.hasAttribute("aria-label")&&(k[`${Je}ButtonAriaLabel`]=ge.getAttribute("aria-label"))}),k},oc=T=>{const k={},$=T.querySelector("swal-image");return $&&(S2($,["src","width","height","alt"]),$.hasAttribute("src")&&(k.imageUrl=$.getAttribute("src")),$.hasAttribute("width")&&(k.imageWidth=$.getAttribute("width")),$.hasAttribute("height")&&(k.imageHeight=$.getAttribute("height")),$.hasAttribute("alt")&&(k.imageAlt=$.getAttribute("alt"))),k},U1=T=>{const k={},$=T.querySelector("swal-icon");return $&&(S2($,["type","color"]),$.hasAttribute("type")&&(k.icon=$.getAttribute("type")),$.hasAttribute("color")&&(k.iconColor=$.getAttribute("color")),k.iconHtml=$.innerHTML),k},sc=T=>{const k={},$=T.querySelector("swal-input");$&&(S2($,["type","label","placeholder","value"]),k.input=$.getAttribute("type")||"text",$.hasAttribute("label")&&(k.inputLabel=$.getAttribute("label")),$.hasAttribute("placeholder")&&(k.inputPlaceholder=$.getAttribute("placeholder")),$.hasAttribute("value")&&(k.inputValue=$.getAttribute("value")));const ge=Array.from(T.querySelectorAll("swal-input-option"));return ge.length&&(k.inputOptions={},ge.forEach(Je=>{S2(Je,["value"]);const Zt=Je.getAttribute("value");k.inputOptions[Zt]=Je.innerHTML})),k},cc=(T,k)=>{const $={};for(const ge in k){const Je=k[ge],Zt=T.querySelector(Je);Zt&&(S2(Zt,[]),$[Je.replace(/^swal-/,"")]=Zt.innerHTML.trim())}return $},Yc=T=>{const k=na.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(T.children).forEach($=>{const ge=$.tagName.toLowerCase();k.includes(ge)||$n(`Unrecognized element <${ge}>`)})},S2=(T,k)=>{Array.from(T.attributes).forEach($=>{-1===k.indexOf($.name)&&$n([`Unrecognized attribute "${$.name}" on <${T.tagName.toLowerCase()}>.`,k.length?`Allowed attributes are: ${k.join(", ")}`:"To set the value, use HTML within the element."])})},ms=T=>{const k=Zn(),$=$1();"function"==typeof T.willOpen&&T.willOpen($);const Je=window.getComputedStyle(document.body).overflowY;Ro(k,$,T),setTimeout(()=>{pr(k,$)},10),Yt()&&(mr(k,T.scrollbarPadding,Je),Array.from(document.body.children).forEach(k=>{k===Zn()||k.contains(Zn())||(k.hasAttribute("aria-hidden")&&k.setAttribute("data-previous-aria-hidden",k.getAttribute("aria-hidden")),k.setAttribute("aria-hidden","true"))})),!ar()&&!p1.previousActiveElement&&(p1.previousActiveElement=document.activeElement),"function"==typeof T.didOpen&&setTimeout(()=>T.didOpen($)),N2(k,Qe["no-transition"])},Ga=T=>{const k=$1();if(T.target!==k)return;const $=Zn();k.removeEventListener(cr,Ga),$.style.overflowY="auto"},pr=(T,k)=>{cr&&Zr(k)?(T.style.overflowY="hidden",k.addEventListener(cr,Ga)):T.style.overflowY="auto"},mr=(T,k,$)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!ii(document.body,Qe.iosfix)){const k=document.body.scrollTop;document.body.style.top=-1*k+"px",q1(document.body,Qe.iosfix),ri(),$c()}})(),k&&"hidden"!==$&&Ks(),setTimeout(()=>{T.scrollTop=0})},Ro=(T,k,$)=>{q1(T,$.showClass.backdrop),k.style.setProperty("opacity","0","important"),Kn(k,"grid"),setTimeout(()=>{q1(k,$.showClass.popup),k.style.removeProperty("opacity")},10),q1([document.documentElement,document.body],Qe.shown),$.heightAuto&&$.backdrop&&!$.toast&&q1([document.documentElement,document.body],Qe["height-auto"])};var Dn={email:(T,k)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(T)?Promise.resolve():Promise.resolve(k||"Invalid email address"),url:(T,k)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(T)?Promise.resolve():Promise.resolve(k||"Invalid URL")};function ia(T){(function lc(T){T.inputValidator||Object.keys(Dn).forEach(k=>{T.input===k&&(T.inputValidator=Dn[k])})})(T),T.showLoaderOnConfirm&&!T.preConfirm&&$n("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function $a(T){(!T.target||"string"==typeof T.target&&!document.querySelector(T.target)||"string"!=typeof T.target&&!T.target.appendChild)&&($n('Target parameter is not valid, defaulting to "body"'),T.target="body")}(T),"string"==typeof T.title&&(T.title=T.title.split("\n").join("<br />")),es(T)}let Yi;class _1{constructor(){if(typeof window>"u")return;Yi=this;for(var k=arguments.length,$=new Array(k),ge=0;ge<k;ge++)$[ge]=arguments[ge];const Je=Object.freeze(this.constructor.argsToParams($));Object.defineProperties(this,{params:{value:Je,writable:!1,enumerable:!0,configurable:!0}});const Zt=Yi._main(Yi.params);C1.promise.set(this,Zt)}_main(k){let $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(T=>{!1===T.backdrop&&T.allowOutsideClick&&$n('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const k in T)S3(k),T.toast&&D3(k),M4(k)})(Object.assign({},$,k)),p1.currentInstance&&(p1.currentInstance._destroy(),Yt()&&ti()),p1.currentInstance=Yi;const ge=d2(k,$);ia(ge),Object.freeze(ge),p1.timeout&&(p1.timeout.stop(),delete p1.timeout),clearTimeout(p1.restoreFocusTimeout);const Je=D4(Yi);return D1(Yi,ge),C1.innerParams.set(Yi,ge),ya(Yi,Je,ge)}then(k){return C1.promise.get(this).then(k)}finally(k){return C1.promise.get(this).finally(k)}}const ya=(T,k,$)=>new Promise((ge,Je)=>{const Zt=An=>{T.close({isDismissed:!0,dismiss:An})};Jr.swalPromiseResolve.set(T,ge),Jr.swalPromiseReject.set(T,Je),k.confirmButton.onclick=()=>{(T=>{const k=C1.innerParams.get(T);T.disableButtons(),k.input?bn(T,"confirm"):fr(T,!0)})(T)},k.denyButton.onclick=()=>{(T=>{const k=C1.innerParams.get(T);T.disableButtons(),k.returnInputValueOnDeny?bn(T,"deny"):Ho(T,!1)})(T)},k.cancelButton.onclick=()=>{((T,k)=>{T.disableButtons(),k(ei.cancel)})(T,Zt)},k.closeButton.onclick=()=>{Zt(ei.close)},((T,k,$)=>{C1.innerParams.get(T).toast?Zl(T,k,$):(S4(k),ic(k),g1(T,k,$))})(T,k,Zt),((T,k,$,ge)=>{yn(k),$.toast||(k.keydownHandler=Je=>x1(T,Je,ge),k.keydownTarget=$.keydownListenerCapture?window:$1(),k.keydownListenerCapture=$.keydownListenerCapture,k.keydownTarget.addEventListener("keydown",k.keydownHandler,{capture:k.keydownListenerCapture}),k.keydownHandlerAdded=!0)})(T,p1,$,Zt),((T,k)=>{"select"===k.input||"radio"===k.input?N1(T,k):["text","email","number","tel","textarea"].includes(k.input)&&(Mo(k.inputValue)||P2(k.inputValue))&&(B2(s2()),nc(T,k))})(T,$),ms($),Hi(p1,$,Zt),j2(k,$),setTimeout(()=>{k.container.scrollTop=0})}),d2=(T,k)=>{const $=(T=>{const k="string"==typeof T.template?document.querySelector(T.template):T.template;if(!k)return{};const $=k.content;return Yc($),Object.assign(Ir($),ai($),ac($),oc($),U1($),sc($),cc($,na))})(T),ge=Object.assign({},Qt,k,$,T);return ge.showClass=Object.assign({},Qt.showClass,ge.showClass),ge.hideClass=Object.assign({},Qt.hideClass,ge.hideClass),ge},D4=T=>{const k={popup:$1(),container:Zn(),actions:F2(),confirmButton:s2(),denyButton:c2(),cancelButton:f1(),loader:Dr(),closeButton:Ta(),validationMessage:La(),progressSteps:fa()};return C1.domCache.set(T,k),k},Hi=(T,k,$)=>{const ge=ir();li(ge),k.timer&&(T.timeout=new hr(()=>{$("timer"),delete T.timeout},k.timer),k.timerProgressBar&&(Kn(ge),tn(ge,k,"timerProgressBar"),setTimeout(()=>{T.timeout&&T.timeout.running&&Ha(k.timer)})))},j2=(T,k)=>{if(!k.toast){if(!qi(k.allowEnterKey))return void qa();Xc(T,k)||hi(-1,1)}},Xc=(T,k)=>k.focusDeny&&Li(T.denyButton)?(T.denyButton.focus(),!0):k.focusCancel&&Li(T.cancelButton)?(T.cancelButton.focus(),!0):!(!k.focusConfirm||!Li(T.confirmButton)||(T.confirmButton.focus(),0)),qa=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const T=new Date,k=localStorage.getItem("swal-initiation");k?(T.getTime()-Date.parse(k))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const $=document.createElement("audio");$.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",$.loop=!0,document.body.appendChild($),setTimeout(()=>{$.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${T}`)}Object.assign(_1.prototype,ga),Object.assign(_1,Hn),Object.keys(ga).forEach(T=>{_1[T]=function(){if(Yi)return Yi[T](...arguments)}}),_1.DismissReason=ei,_1.version="11.7.5";const Wa=_1;return Wa.default=Wa,Wa}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(C1,R2){var S1=C1.createElement("style");if(C1.getElementsByTagName("head")[0].appendChild(S1),S1.styleSheet)S1.styleSheet.disabled||(S1.styleSheet.cssText=R2);else try{S1.innerHTML=R2}catch{S1.innerText=R2}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')}},$l=>{$l($l.s=23)}]);